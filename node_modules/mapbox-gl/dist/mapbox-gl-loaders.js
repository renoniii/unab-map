var mapboxglLoaders=function(exports){"use strict";function getAugmentedNamespace(e){if(e.__esModule)return e;var r=e.default;if("function"==typeof r){var t=function e(){return this instanceof e?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};t.prototype=r.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}var es5$g={},interopRequireDefault$3={exports:{}},module;module=interopRequireDefault$3,module.exports=function(e){return e&&e.__esModule?e:{default:e}},module.exports.__esModule=!0,module.exports.default=module.exports;var interopRequireDefaultExports=interopRequireDefault$3.exports,fetchFile$1={},regeneratorRuntime$1={exports:{}},_typeof$3={exports:{}},hasRequired_typeof$3,hasRequiredRegeneratorRuntime,regenerator,hasRequiredRegenerator;function require_typeof$3(){return hasRequired_typeof$3||(hasRequired_typeof$3=1,function(e){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(_typeof$3)),_typeof$3.exports}function requireRegeneratorRuntime(){return hasRequiredRegeneratorRuntime||(hasRequiredRegeneratorRuntime=1,function(e){var r=require_typeof$3().default;function t(){e.exports=t=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var n={},a=Object.prototype,i=a.hasOwnProperty,o=Object.defineProperty||function(e,r,t){e[r]=t.value},u="function"==typeof Symbol?Symbol:{},s=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function f(e,r,t){return Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[r]}try{f({},"")}catch(e){f=function(e,r,t){return e[r]=t}}function d(e,r,t,n){var a=r&&r.prototype instanceof y?r:y,i=Object.create(a.prototype),u=new C(n||[]);return o(i,"_invoke",{value:R(e,t,u)}),i}function p(e,r,t){try{return{type:"normal",arg:e.call(r,t)}}catch(e){return{type:"throw",arg:e}}}n.wrap=d;var h={};function y(){}function v(){}function m(){}var b={};f(b,s,(function(){return this}));var g=Object.getPrototypeOf,_=g&&g(g(B([])));_&&_!==a&&i.call(_,s)&&(b=_);var A=m.prototype=y.prototype=Object.create(b);function T(e){["next","throw","return"].forEach((function(r){f(e,r,(function(e){return this._invoke(r,e)}))}))}function O(e,t){function n(a,o,u,s){var c=p(e[a],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&i.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,u,s)}),(function(e){n("throw",e,u,s)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return n("throw",e,u,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}})}function R(e,r,t){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return x()}for(t.method=a,t.arg=i;;){var o=t.delegate;if(o){var u=E(o,t);if(u){if(u===h)continue;return u}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===n)throw n="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);n="executing";var s=p(e,r,t);if("normal"===s.type){if(n=t.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:t.done}}"throw"===s.type&&(n="completed",t.method="throw",t.arg=s.arg)}}}function E(e,r){var t=r.method,n=e.iterator[t];if(void 0===n)return r.delegate=null,"throw"===t&&e.iterator.return&&(r.method="return",r.arg=void 0,E(e,r),"throw"===r.method)||"return"!==t&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+t+"' method")),h;var a=p(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(e){var r={tryLoc:e[0]};1 in e&&(r.catchLoc=e[1]),2 in e&&(r.finallyLoc=e[2],r.afterLoc=e[3]),this.tryEntries.push(r)}function q(e){var r=e.completion||{};r.type="normal",delete r.arg,e.completion=r}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function B(e){if(e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var t=-1,n=function r(){for(;++t<e.length;)if(i.call(e,t))return r.value=e[t],r.done=!1,r;return r.value=void 0,r.done=!0,r};return n.next=n}}return{next:x}}function x(){return{value:void 0,done:!0}}return v.prototype=m,o(A,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:v,configurable:!0}),v.displayName=f(m,l,"GeneratorFunction"),n.isGeneratorFunction=function(e){var r="function"==typeof e&&e.constructor;return!!r&&(r===v||"GeneratorFunction"===(r.displayName||r.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,f(e,l,"GeneratorFunction")),e.prototype=Object.create(A),e},n.awrap=function(e){return{__await:e}},T(O.prototype),f(O.prototype,c,(function(){return this})),n.AsyncIterator=O,n.async=function(e,r,t,a,i){void 0===i&&(i=Promise);var o=new O(d(e,r,t,a),i);return n.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(A),f(A,l,"Generator"),f(A,s,(function(){return this})),f(A,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var r=Object(e),t=[];for(var n in r)t.push(n);return t.reverse(),function e(){for(;t.length;){var n=t.pop();if(n in r)return e.value=n,e.done=!1,e}return e.done=!0,e}},n.values=B,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(q),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],o=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function(e,r){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=r,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),h},finish:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),q(t),h}},catch:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.tryLoc===e){var n=t.completion;if("throw"===n.type){var a=n.arg;q(t)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,t){return this.delegate={iterator:B(e),resultName:r,nextLoc:t},"next"===this.method&&(this.arg=void 0),h}},n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(regeneratorRuntime$1)),regeneratorRuntime$1.exports}function requireRegenerator(){if(hasRequiredRegenerator)return regenerator;hasRequiredRegenerator=1;var e=requireRegeneratorRuntime()();regenerator=e;try{regeneratorRuntime=e}catch(r){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return regenerator}var asyncToGenerator={exports:{}},hasRequiredAsyncToGenerator;function requireAsyncToGenerator(){return hasRequiredAsyncToGenerator||(hasRequiredAsyncToGenerator=1,function(e){function r(e,r,t,n,a,i,o){try{var u=e[i](o),s=u.value}catch(e){return void t(e)}u.done?r(s):Promise.resolve(s).then(n,a)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function u(e){r(o,a,i,u,s,"next",e)}function s(e){r(o,a,i,u,s,"throw",e)}u(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports}(asyncToGenerator)),asyncToGenerator.exports}var es5$f={},assert$9={};function assert$8(e,r){if(!e)throw new Error(r||"loader assertion failed.")}Object.defineProperty(assert$9,"__esModule",{value:!0}),assert$9.assert=assert$8;var globals$4={},_interopRequireDefault$v=interopRequireDefaultExports;Object.defineProperty(globals$4,"__esModule",{value:!0}),globals$4.window=globals$4.self=globals$4.nodeVersion=globals$4.isWorker=globals$4.isBrowser=global$1=globals$4.global=globals$4.document=void 0;var _typeof2$4=_interopRequireDefault$v(require_typeof$3()),globals$3={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==global$1&&global$1,document:"undefined"!=typeof document&&document},self_=globals$3.self||globals$3.window||globals$3.global||{};globals$4.self=self_;var window_=globals$3.window||globals$3.self||globals$3.global||{};globals$4.window=window_;var global_=globals$3.global||globals$3.self||globals$3.window||{},global$1=globals$4.global=global_,document_=globals$3.document||{};globals$4.document=document_;var isBrowser$1=Boolean("object"!==("undefined"==typeof process?"undefined":(0,_typeof2$4.default)(process))||"[object process]"!==String(process)||process.browser);globals$4.isBrowser=isBrowser$1;var isWorker="function"==typeof importScripts;globals$4.isWorker=isWorker;var matches="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version),nodeVersion=matches&&parseFloat(matches[1])||0;globals$4.nodeVersion=nodeVersion;var createLoaderWorker$1={},defineProperty$3={exports:{}},toPropertyKey$3={exports:{}},toPrimitive$3={exports:{}},hasRequiredToPrimitive$3,hasRequiredToPropertyKey$3,hasRequiredDefineProperty$3;function requireToPrimitive$3(){return hasRequiredToPrimitive$3||(hasRequiredToPrimitive$3=1,function(e){var r=require_typeof$3().default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(toPrimitive$3)),toPrimitive$3.exports}function requireToPropertyKey$3(){return hasRequiredToPropertyKey$3||(hasRequiredToPropertyKey$3=1,function(e){var r=require_typeof$3().default,t=requireToPrimitive$3();e.exports=function(e){var n=t(e,"string");return"symbol"===r(n)?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}(toPropertyKey$3)),toPropertyKey$3.exports}function requireDefineProperty$3(){return hasRequiredDefineProperty$3||(hasRequiredDefineProperty$3=1,function(e){var r=requireToPropertyKey$3();e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports}(defineProperty$3)),defineProperty$3.exports}var es5$e={},version$5={},hasRequiredVersion$4;function requireVersion$4(){if(hasRequiredVersion$4)return version$5;hasRequiredVersion$4=1,Object.defineProperty(version$5,"__esModule",{value:!0}),version$5.VERSION=void 0;return version$5.VERSION="3.3.3",version$5}var assert$7={},hasRequiredAssert$6;function requireAssert$6(){if(hasRequiredAssert$6)return assert$7;return hasRequiredAssert$6=1,Object.defineProperty(assert$7,"__esModule",{value:!0}),assert$7.assert=function(e,r){if(!e)throw new Error(r||"loaders.gl assertion failed.")},assert$7}var globals$2={},hasRequiredGlobals$2;function requireGlobals$2(){if(hasRequiredGlobals$2)return globals$2;hasRequiredGlobals$2=1;var e=interopRequireDefaultExports;Object.defineProperty(globals$2,"__esModule",{value:!0}),globals$2.window=globals$2.self=globals$2.nodeVersion=globals$2.isWorker=globals$2.isMobile=globals$2.isBrowser=globals$2.global=globals$2.document=void 0;var r=e(require_typeof$3()),t={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},n=t.self||t.window||t.global||{};globals$2.self=n;var a=t.window||t.self||t.global||{};globals$2.window=a;var i=t.global||t.self||t.window||{};globals$2.global=i;var o=t.document||{};globals$2.document=o;var u="object"!==("undefined"==typeof process?"undefined":(0,r.default)(process))||"[object process]"!==String(process)||process.browser;globals$2.isBrowser=u;var s="function"==typeof importScripts;globals$2.isWorker=s;var c="undefined"!=typeof window&&void 0!==window.orientation;globals$2.isMobile=c;var l="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version),f=l&&parseFloat(l[1])||0;return globals$2.nodeVersion=f,globals$2}var workerJob={},classCallCheck$3={exports:{}},hasRequiredClassCallCheck$3;function requireClassCallCheck$3(){return hasRequiredClassCallCheck$3||(hasRequiredClassCallCheck$3=1,function(e){e.exports=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}(classCallCheck$3)),classCallCheck$3.exports}var createClass$3={exports:{}},hasRequiredCreateClass$3,hasRequiredWorkerJob;function requireCreateClass$3(){return hasRequiredCreateClass$3||(hasRequiredCreateClass$3=1,function(e){var r=requireToPropertyKey$3();function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,r(a.key),a)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}(createClass$3)),createClass$3.exports}function requireWorkerJob(){if(hasRequiredWorkerJob)return workerJob;hasRequiredWorkerJob=1;var e=interopRequireDefaultExports;Object.defineProperty(workerJob,"__esModule",{value:!0}),workerJob.default=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=e(requireDefineProperty$3()),a=requireAssert$6(),i=function(){function e(t,a){var i=this;(0,r.default)(this,e),(0,n.default)(this,"name",void 0),(0,n.default)(this,"workerThread",void 0),(0,n.default)(this,"isRunning",!0),(0,n.default)(this,"result",void 0),(0,n.default)(this,"_resolve",(function(){})),(0,n.default)(this,"_reject",(function(){})),this.name=t,this.workerThread=a,this.result=new Promise((function(e,r){i._resolve=e,i._reject=r}))}return(0,t.default)(e,[{key:"postMessage",value:function(e,r){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:r})}},{key:"done",value:function(e){(0,a.assert)(this.isRunning),this.isRunning=!1,this._resolve(e)}},{key:"error",value:function(e){(0,a.assert)(this.isRunning),this.isRunning=!1,this._reject(e)}}]),e}();return workerJob.default=i,workerJob}var workerThread={},worker_threadsBrowser={},hasRequiredWorker_threadsBrowser;function requireWorker_threadsBrowser(){if(hasRequiredWorker_threadsBrowser)return worker_threadsBrowser;hasRequiredWorker_threadsBrowser=1;var e=interopRequireDefaultExports;Object.defineProperty(worker_threadsBrowser,"__esModule",{value:!0}),worker_threadsBrowser.parentPort=worker_threadsBrowser.Worker=worker_threadsBrowser.NodeWorkerType=worker_threadsBrowser.NodeWorker=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=function(){function e(){(0,r.default)(this,e)}return(0,t.default)(e,[{key:"terminate",value:function(){}}]),e}();worker_threadsBrowser.NodeWorkerType=worker_threadsBrowser.NodeWorker=worker_threadsBrowser.Worker=n;return worker_threadsBrowser.parentPort=null,worker_threadsBrowser}var getLoadableWorkerUrl={},hasRequiredGetLoadableWorkerUrl;function requireGetLoadableWorkerUrl(){if(hasRequiredGetLoadableWorkerUrl)return getLoadableWorkerUrl;hasRequiredGetLoadableWorkerUrl=1,Object.defineProperty(getLoadableWorkerUrl,"__esModule",{value:!0}),getLoadableWorkerUrl.getLoadableWorkerURL=function(n){(0,e.assert)(n.source&&!n.url||!n.source&&n.url);var a=r.get(n.source||n.url);a||(n.url&&(a=function(e){if(!e.startsWith("http"))return e;return t((r=e,"try {\n  importScripts('".concat(r,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")));var r}(n.url),r.set(n.url,a)),n.source&&(a=t(n.source),r.set(n.source,a)));return(0,e.assert)(a),a};var e=requireAssert$6(),r=new Map;function t(e){var r=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(r)}return getLoadableWorkerUrl}var getTransferList={},hasRequiredGetTransferList,hasRequiredWorkerThread;function requireGetTransferList(){if(hasRequiredGetTransferList)return getTransferList;hasRequiredGetTransferList=1;var e=interopRequireDefaultExports;Object.defineProperty(getTransferList,"__esModule",{value:!0}),getTransferList.getTransferList=function e(n){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,o=i||new Set;if(n){if(t(n))o.add(n);else if(t(n.buffer))o.add(n.buffer);else if(ArrayBuffer.isView(n));else if(a&&"object"===(0,r.default)(n))for(var u in n)e(n[u],a,o)}else;return void 0===i?Array.from(o):[]},getTransferList.getTransferListForWriter=function e(t){if(null===t)return{};var n=Object.assign({},t);return Object.keys(n).forEach((function(a){"object"!==(0,r.default)(t[a])||ArrayBuffer.isView(t[a])||t[a]instanceof Array?"function"==typeof n[a]||n[a]instanceof RegExp?n[a]={}:n[a]=t[a]:n[a]=e(t[a])})),n};var r=e(require_typeof$3());function t(e){return!!e&&(e instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&e instanceof MessagePort||("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}return getTransferList}function requireWorkerThread(){if(hasRequiredWorkerThread)return workerThread;hasRequiredWorkerThread=1;var e=interopRequireDefaultExports;Object.defineProperty(workerThread,"__esModule",{value:!0}),workerThread.default=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=e(requireDefineProperty$3()),a=requireWorker_threadsBrowser(),i=requireGlobals$2(),o=requireAssert$6(),u=requireGetLoadableWorkerUrl(),s=requireGetTransferList(),c=function(){},l=function(){function e(t){(0,r.default)(this,e),(0,n.default)(this,"name",void 0),(0,n.default)(this,"source",void 0),(0,n.default)(this,"url",void 0),(0,n.default)(this,"terminated",!1),(0,n.default)(this,"worker",void 0),(0,n.default)(this,"onMessage",void 0),(0,n.default)(this,"onError",void 0),(0,n.default)(this,"_loadableURL","");var a=t.name,u=t.source,s=t.url;(0,o.assert)(u||s),this.name=a,this.source=u,this.url=s,this.onMessage=c,this.onError=function(e){return console.log(e)},this.worker=i.isBrowser?this._createBrowserWorker():this._createNodeWorker()}return(0,t.default)(e,[{key:"destroy",value:function(){this.onMessage=c,this.onError=c,this.worker.terminate(),this.terminated=!0}},{key:"isRunning",get:function(){return Boolean(this.onMessage)}},{key:"postMessage",value:function(e,r){r=r||(0,s.getTransferList)(e),this.worker.postMessage(e,r)}},{key:"_getErrorFromErrorEvent",value:function(e){var r="Failed to load ";return r+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(r+="".concat(e.message," in ")),e.lineno&&(r+=":".concat(e.lineno,":").concat(e.colno)),new Error(r)}},{key:"_createBrowserWorker",value:function(){var e=this;this._loadableURL=(0,u.getLoadableWorkerURL)({source:this.source,url:this.url});var r=new Worker(this._loadableURL,{name:this.name});return r.onmessage=function(r){r.data?e.onMessage(r.data):e.onError(new Error("No data received"))},r.onerror=function(r){e.onError(e._getErrorFromErrorEvent(r)),e.terminated=!0},r.onmessageerror=function(e){return console.error(e)},r}},{key:"_createNodeWorker",value:function(){var e,r=this;if(this.url){var t=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new a.NodeWorker(t,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new a.NodeWorker(this.source,{eval:!0})}return e.on("message",(function(e){r.onMessage(e)})),e.on("error",(function(e){r.onError(e)})),e.on("exit",(function(e){})),e}}],[{key:"isSupported",value:function(){return"undefined"!=typeof Worker&&i.isBrowser||void 0!==a.NodeWorker&&!i.isBrowser}}]),e}();return workerThread.default=l,workerThread}var workerFarm={},workerPool={},hasRequiredWorkerPool,hasRequiredWorkerFarm;function requireWorkerPool(){if(hasRequiredWorkerPool)return workerPool;hasRequiredWorkerPool=1;var e=interopRequireDefaultExports;Object.defineProperty(workerPool,"__esModule",{value:!0}),workerPool.default=void 0;var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=e(requireClassCallCheck$3()),a=e(requireCreateClass$3()),i=e(requireDefineProperty$3()),o=requireGlobals$2(),u=e(requireWorkerThread()),s=e(requireWorkerJob());function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach((function(r){(0,i.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var f=function(){function e(r){(0,n.default)(this,e),(0,i.default)(this,"name","unnamed"),(0,i.default)(this,"source",void 0),(0,i.default)(this,"url",void 0),(0,i.default)(this,"maxConcurrency",1),(0,i.default)(this,"maxMobileConcurrency",1),(0,i.default)(this,"onDebug",(function(){})),(0,i.default)(this,"reuseWorkers",!0),(0,i.default)(this,"props",{}),(0,i.default)(this,"jobQueue",[]),(0,i.default)(this,"idleQueue",[]),(0,i.default)(this,"count",0),(0,i.default)(this,"isDestroyed",!1),this.source=r.source,this.url=r.url,this.setProps(r)}var c,f;return(0,a.default)(e,[{key:"destroy",value:function(){this.idleQueue.forEach((function(e){return e.destroy()})),this.isDestroyed=!0}},{key:"setProps",value:function(e){this.props=l(l({},this.props),e),void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}},{key:"startJob",value:(f=(0,t.default)(r.default.mark((function e(t){var n,a,i,o=this,u=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:function(e,r,t){return e.done(t)},a=u.length>2&&void 0!==u[2]?u[2]:function(e,r){return e.error(r)},i=new Promise((function(e){return o.jobQueue.push({name:t,onMessage:n,onError:a,onStart:e}),o})),this._startQueuedJob(),e.next=6,i;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"_startQueuedJob",value:(c=(0,t.default)(r.default.mark((function e(){var t,n,a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.jobQueue.length){e.next=2;break}return e.abrupt("return");case 2:if(t=this._getAvailableWorker()){e.next=5;break}return e.abrupt("return");case 5:if(!(n=this.jobQueue.shift())){e.next=18;break}return this.onDebug({message:"Starting job",name:n.name,workerThread:t,backlog:this.jobQueue.length}),a=new s.default(n.name,t),t.onMessage=function(e){return n.onMessage(a,e.type,e.payload)},t.onError=function(e){return n.onError(a,e)},n.onStart(a),e.prev=12,e.next=15,a.result;case 15:return e.prev=15,this.returnWorkerToQueue(t),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[12,,15,18]])}))),function(){return c.apply(this,arguments)})},{key:"returnWorkerToQueue",value:function(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}},{key:"_getAvailableWorker",value:function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;var e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new u.default({name:e,source:this.source,url:this.url})}return null}},{key:"_getMaxConcurrency",value:function(){return o.isMobile?this.maxMobileConcurrency:this.maxConcurrency}}],[{key:"isSupported",value:function(){return u.default.isSupported()}}]),e}();return workerPool.default=f,workerPool}function requireWorkerFarm(){if(hasRequiredWorkerFarm)return workerFarm;hasRequiredWorkerFarm=1;var e=interopRequireDefaultExports;Object.defineProperty(workerFarm,"__esModule",{value:!0}),workerFarm.default=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=e(requireDefineProperty$3()),a=e(requireWorkerPool()),i=e(requireWorkerThread());function o(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return u(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return u(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw i}}}}function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){(0,n.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var l={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:function(){}},f=function(){function e(t){(0,r.default)(this,e),(0,n.default)(this,"props",void 0),(0,n.default)(this,"workerPools",new Map),this.props=c({},l),this.setProps(t),this.workerPools=new Map}return(0,t.default)(e,[{key:"destroy",value:function(){var e,r=o(this.workerPools.values());try{for(r.s();!(e=r.n()).done;){e.value.destroy()}}catch(e){r.e(e)}finally{r.f()}this.workerPools=new Map}},{key:"setProps",value:function(e){this.props=c(c({},this.props),e);var r,t=o(this.workerPools.values());try{for(t.s();!(r=t.n()).done;){r.value.setProps(this._getWorkerPoolProps())}}catch(e){t.e(e)}finally{t.f()}}},{key:"getWorkerPool",value:function(e){var r=e.name,t=e.source,n=e.url,i=this.workerPools.get(r);return i||((i=new a.default({name:r,source:t,url:n})).setProps(this._getWorkerPoolProps()),this.workerPools.set(r,i)),i}},{key:"_getWorkerPoolProps",value:function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}],[{key:"isSupported",value:function(){return i.default.isSupported()}},{key:"getWorkerFarm",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e._workerFarm=e._workerFarm||new e({}),e._workerFarm.setProps(r),e._workerFarm}}]),e}();return workerFarm.default=f,(0,n.default)(f,"_workerFarm",void 0),workerFarm}var workerBody={},hasRequiredWorkerBody;function requireWorkerBody(){if(hasRequiredWorkerBody)return workerBody;hasRequiredWorkerBody=1;var _interopRequireDefault=interopRequireDefaultExports;Object.defineProperty(workerBody,"__esModule",{value:!0}),workerBody.default=void 0;var _classCallCheck2=_interopRequireDefault(requireClassCallCheck$3()),_createClass2=_interopRequireDefault(requireCreateClass$3()),_getTransferList=requireGetTransferList();function getParentPort(){var parentPort;try{eval("globalThis.parentPort = require('worker_threads').parentPort"),parentPort=globalThis.parentPort}catch(e){}return parentPort}var onMessageWrapperMap=new Map,WorkerBody=function(){function e(){(0,_classCallCheck2.default)(this,e)}return(0,_createClass2.default)(e,null,[{key:"inWorkerThread",value:function(){return"undefined"!=typeof self||Boolean(getParentPort())}},{key:"onmessage",set:function(e){function r(r){var t=getParentPort()?r:r.data,n=t.type,a=t.payload;e(n,a)}var t=getParentPort();t?(t.on("message",r),t.on("exit",(function(){return console.debug("Node worker closing")}))):globalThis.onmessage=r}},{key:"addEventListener",value:function(e){var r=onMessageWrapperMap.get(e);r||(r=function(r){if(isKnownMessage(r)){var t=getParentPort()?r:r.data,n=t.type,a=t.payload;e(n,a)}}),getParentPort()?console.error("not implemented"):globalThis.addEventListener("message",r)}},{key:"removeEventListener",value:function(e){var r=onMessageWrapperMap.get(e);onMessageWrapperMap.delete(e),getParentPort()?console.error("not implemented"):globalThis.removeEventListener("message",r)}},{key:"postMessage",value:function(e,r){var t={source:"loaders.gl",type:e,payload:r},n=(0,_getTransferList.getTransferList)(r),a=getParentPort();a?a.postMessage(t,n):globalThis.postMessage(t,n)}}]),e}();function isKnownMessage(e){var r=e.type,t=e.data;return"message"===r&&t&&"string"==typeof t.source&&t.source.startsWith("loaders.gl")}return workerBody.default=WorkerBody,workerBody}var processOnWorker={},getWorkerUrl={},hasRequiredGetWorkerUrl,hasRequiredProcessOnWorker;function requireGetWorkerUrl(){if(hasRequiredGetWorkerUrl)return getWorkerUrl;hasRequiredGetWorkerUrl=1,Object.defineProperty(getWorkerUrl,"__esModule",{value:!0}),getWorkerUrl.getWorkerName=function(e){var r=e.version!==t?" (worker-utils@".concat(t,")"):"";return"".concat(e.name,"@").concat(e.version).concat(r)},getWorkerUrl.getWorkerURL=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n[t.id]||{},i="".concat(t.id,"-worker.js"),o=a.workerUrl;o||"compression"!==t.id||(o=n.workerUrl);"test"===n._workerType&&(o="modules/".concat(t.module,"/dist/").concat(i));if(!o){var u=t.version;"latest"===u&&(u=r);var s=u?"@".concat(u):"";o="https://unpkg.com/@loaders.gl/".concat(t.module).concat(s,"/dist/").concat(i)}return(0,e.assert)(o),o};var e=requireAssert$6();requireVersion$4();var r="latest",t="3.3.3";return getWorkerUrl}function requireProcessOnWorker(){if(hasRequiredProcessOnWorker)return processOnWorker;hasRequiredProcessOnWorker=1;var e=interopRequireDefaultExports;Object.defineProperty(processOnWorker,"__esModule",{value:!0}),processOnWorker.canProcessOnWorker=function(e,r){if(!n.default.isSupported())return!1;return e.worker&&(null==r?void 0:r.worker)},processOnWorker.processOnWorker=function(e,r){return o.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=e(requireWorkerFarm()),a=requireGetWorkerUrl(),i=requireGetTransferList();function o(){return o=(0,t.default)(r.default.mark((function e(t,o){var s,c,l,f,d,p,h,y,v,m,b,g=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=g.length>2&&void 0!==g[2]?g[2]:{},c=g.length>3&&void 0!==g[3]?g[3]:{},l=(0,a.getWorkerName)(t),f=n.default.getWorkerFarm(s),d=s.source,p={name:l,source:d},d||(p.url=(0,a.getWorkerURL)(t,s)),h=f.getWorkerPool(p),y=s.jobName||t.name,e.next=11,h.startJob(y,u.bind(null,c));case 11:return v=e.sent,m=(0,i.getTransferListForWriter)(s),v.postMessage("process",{input:o,options:m}),e.next=16,v.result;case 16:return b=e.sent,e.abrupt("return",b.result);case 18:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function u(e,r,t,n){return s.apply(this,arguments)}function s(){return s=(0,t.default)(r.default.mark((function e(t,n,a,i){var o,u,s,c,l;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=a,e.next="done"===e.t0?3:"error"===e.t0?5:"process"===e.t0?7:23;break;case 3:return n.done(i),e.abrupt("break",24);case 5:return n.error(new Error(i.error)),e.abrupt("break",24);case 7:if(o=i.id,u=i.input,s=i.options,e.prev=8,t.process){e.next=12;break}return n.postMessage("error",{id:o,error:"Worker not set up to process on main thread"}),e.abrupt("return");case 12:return e.next=14,t.process(u,s);case 14:c=e.sent,n.postMessage("done",{id:o,result:c}),e.next=22;break;case 18:e.prev=18,e.t1=e.catch(8),l=e.t1 instanceof Error?e.t1.message:"unknown error",n.postMessage("error",{id:o,error:l});case 22:return e.abrupt("break",24);case 23:console.warn("process-on-worker: unknown message ".concat(a));case 24:case"end":return e.stop()}}),e,null,[[8,18]])}))),s.apply(this,arguments)}return processOnWorker}var createWorker={},asyncQueue$1={},hasRequiredAsyncQueue$1,hasRequiredCreateWorker;function requireAsyncQueue$1(){if(hasRequiredAsyncQueue$1)return asyncQueue$1;hasRequiredAsyncQueue$1=1;var e=interopRequireDefaultExports;Object.defineProperty(asyncQueue$1,"__esModule",{value:!0}),asyncQueue$1.default=void 0;var r,t=e(requireClassCallCheck$3()),n=e(requireCreateClass$3()),a=e(requireDefineProperty$3());r=Symbol.asyncIterator;var i=function(){function e(){(0,t.default)(this,e),(0,a.default)(this,"_values",void 0),(0,a.default)(this,"_settlers",void 0),(0,a.default)(this,"_closed",void 0),this._values=[],this._settlers=[],this._closed=!1}return(0,n.default)(e,[{key:r,value:function(){return this}},{key:"push",value:function(e){return this.enqueue(e)}},{key:"enqueue",value:function(e){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var r=this._settlers.shift();e instanceof Error?r.reject(e):r.resolve({value:e})}else this._values.push(e)}},{key:"close",value:function(){for(;this._settlers.length>0;){this._settlers.shift().resolve({done:!0})}this._closed=!0}},{key:"next",value:function(){var e=this;if(this._values.length>0){var r=this._values.shift();return r instanceof Error?Promise.reject(r):Promise.resolve({done:!1,value:r})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise((function(r,t){e._settlers.push({resolve:r,reject:t})}))}}]),e}();return asyncQueue$1.default=i,asyncQueue$1}function requireCreateWorker(){if(hasRequiredCreateWorker)return createWorker;hasRequiredCreateWorker=1;var e=interopRequireDefaultExports;Object.defineProperty(createWorker,"__esModule",{value:!0}),createWorker.createWorker=function(e,o){if(!a.default.inWorkerThread())return;var c={process:l};a.default.onmessage=(f=(0,t.default)(r.default.mark((function t(l,f){var d,p,h,y,v,m,b,g,_;return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.prev=0,r.t0=l,r.next="process"===r.t0?4:"process-in-batches"===r.t0?11:"input-batch"===r.t0?46:"input-done"===r.t0?48:50;break;case 4:if(e){r.next=6;break}throw new Error("Worker does not support atomic processing");case 6:return r.next=8,e(f.input,f.options||{},c);case 8:return d=r.sent,a.default.postMessage("done",{result:d}),r.abrupt("break",50);case 11:if(o){r.next=13;break}throw new Error("Worker does not support batched processing");case 13:u=new n.default,s=f.options||{},p=o(u,s,c),h=!1,y=!1,r.prev=18,m=i(p);case 20:return r.next=22,m.next();case 22:if(!(h=!(b=r.sent).done)){r.next=28;break}g=b.value,a.default.postMessage("output-batch",{result:g});case 25:h=!1,r.next=20;break;case 28:r.next=34;break;case 30:r.prev=30,r.t1=r.catch(18),y=!0,v=r.t1;case 34:if(r.prev=34,r.prev=35,!h||null==m.return){r.next=39;break}return r.next=39,m.return();case 39:if(r.prev=39,!y){r.next=42;break}throw v;case 42:return r.finish(39);case 43:return r.finish(34);case 44:return a.default.postMessage("done",{}),r.abrupt("break",50);case 46:return u.push(f.input),r.abrupt("break",50);case 48:return u.close(),r.abrupt("break",50);case 50:r.next=56;break;case 52:r.prev=52,r.t2=r.catch(0),_=r.t2 instanceof Error?r.t2.message:"",a.default.postMessage("error",{error:_});case 56:case"end":return r.stop()}}),t,null,[[0,52],[18,30,34,44],[35,,39,43]])}))),function(e,r){return f.apply(this,arguments)});var f};var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=e(requireAsyncQueue$1()),a=e(requireWorkerBody());function i(e){var r,t,n,a=2;for("undefined"!=typeof Symbol&&(t=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(t&&null!=(r=e[t]))return r.call(e);if(n&&null!=(r=e[n]))return new o(r.call(e));t="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function o(e){function r(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var r=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:r}}))}return o=function(e){this.s=e,this.n=e.next},o.prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):r(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):r(t.apply(this.s,arguments))}},new o(e)}var u,s,c=0;function l(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(t,n){var i=c++;a.default.addEventListener((function e(r,o){if(o.id===i)switch(r){case"done":a.default.removeEventListener(e),t(o.result);break;case"error":a.default.removeEventListener(e),n(o.error)}}));var o={id:i,input:e,options:r};a.default.postMessage("process",o)}))}return createWorker}var validateWorkerVersion={},hasRequiredValidateWorkerVersion;function requireValidateWorkerVersion(){if(hasRequiredValidateWorkerVersion)return validateWorkerVersion;hasRequiredValidateWorkerVersion=1,Object.defineProperty(validateWorkerVersion,"__esModule",{value:!0}),validateWorkerVersion.validateWorkerVersion=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.VERSION;(0,e.assert)(t,"no worker provided");var a=t.version;if(!n||!a)return!1;return!0};var e=requireAssert$6(),r=requireVersion$4();return validateWorkerVersion}var libraryUtils={},_nodeResolve_empty={},_nodeResolve_empty$1=Object.freeze({__proto__:null,default:_nodeResolve_empty}),require$$20=getAugmentedNamespace(_nodeResolve_empty$1),hasRequiredLibraryUtils,hasRequiredEs5$d;function requireLibraryUtils(){if(hasRequiredLibraryUtils)return libraryUtils;hasRequiredLibraryUtils=1;var e=interopRequireDefaultExports,r=require_typeof$3();Object.defineProperty(libraryUtils,"__esModule",{value:!0}),libraryUtils.getLibraryUrl=f,libraryUtils.loadLibrary=function(e){return l.apply(this,arguments)};var t=e(requireRegenerator()),n=e(requireAsyncToGenerator()),a=requireGlobals$2(),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(require$$20),o=requireAssert$6();function u(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(u=function(e){return e?t:r})(e)}requireVersion$4();var s="3.3.3",c={};function l(){return l=(0,n.default)(t.default.mark((function e(r){var n,a,i=arguments;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:{},(n=i.length>1&&void 0!==i[1]?i[1]:null)&&(r=f(r,n,a)),c[r]=c[r]||d(r),e.next=6,c[r];case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function f(e,r,t){if(e.startsWith("http"))return e;var n=t.modules||{};return n[e]?n[e]:a.isBrowser?t.CDN?((0,o.assert)(t.CDN.startsWith("http")),"".concat(t.CDN,"/").concat(r,"@").concat(s,"/dist/libs/").concat(e)):a.isWorker?"../src/libs/".concat(e):"modules/".concat(r,"/src/libs/").concat(e):"modules/".concat(r,"/dist/libs/").concat(e)}function d(e){return p.apply(this,arguments)}function p(){return(p=(0,n.default)(t.default.mark((function e(r){var n,o,u;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.endsWith("wasm")){e.next=7;break}return e.next=3,fetch(r);case 3:return n=e.sent,e.next=6,n.arrayBuffer();case 6:return e.abrupt("return",e.sent);case 7:if(a.isBrowser){e.next=20;break}if(e.prev=8,e.t0=i&&i.requireFromFile,!e.t0){e.next=14;break}return e.next=13,i.requireFromFile(r);case 13:e.t0=e.sent;case 14:return e.abrupt("return",e.t0);case 17:return e.prev=17,e.t1=e.catch(8),e.abrupt("return",null);case 20:if(!a.isWorker){e.next=22;break}return e.abrupt("return",importScripts(r));case 22:return e.next=24,fetch(r);case 24:return o=e.sent,e.next=27,o.text();case 27:return u=e.sent,e.abrupt("return",h(u,r));case 29:case"end":return e.stop()}}),e,null,[[8,17]])})))).apply(this,arguments)}function h(e,r){if(!a.isBrowser)return i.requireFromString&&i.requireFromString(e,r);if(a.isWorker)return eval.call(a.global,e),null;var t=document.createElement("script");t.id=r;try{t.appendChild(document.createTextNode(e))}catch(r){t.text=e}return document.body.appendChild(t),null}return libraryUtils}function requireEs5$d(){return hasRequiredEs5$d||(hasRequiredEs5$d=1,function(e){var r=interopRequireDefaultExports;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AsyncQueue",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(e,"ChildProcessProxy",{enumerable:!0,get:function(){return m.default}}),e.NullWorker=void 0,Object.defineProperty(e,"WorkerBody",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"WorkerFarm",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"WorkerJob",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"WorkerPool",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"WorkerThread",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"assert",{enumerable:!0,get:function(){return n.assert}}),Object.defineProperty(e,"canProcessOnWorker",{enumerable:!0,get:function(){return l.canProcessOnWorker}}),Object.defineProperty(e,"createWorker",{enumerable:!0,get:function(){return f.createWorker}}),Object.defineProperty(e,"getLibraryUrl",{enumerable:!0,get:function(){return y.getLibraryUrl}}),Object.defineProperty(e,"getTransferList",{enumerable:!0,get:function(){return h.getTransferList}}),Object.defineProperty(e,"getTransferListForWriter",{enumerable:!0,get:function(){return h.getTransferListForWriter}}),Object.defineProperty(e,"getWorkerURL",{enumerable:!0,get:function(){return d.getWorkerURL}}),Object.defineProperty(e,"isBrowser",{enumerable:!0,get:function(){return a.isBrowser}}),Object.defineProperty(e,"isWorker",{enumerable:!0,get:function(){return a.isWorker}}),Object.defineProperty(e,"loadLibrary",{enumerable:!0,get:function(){return y.loadLibrary}}),Object.defineProperty(e,"processOnWorker",{enumerable:!0,get:function(){return l.processOnWorker}}),Object.defineProperty(e,"validateWorkerVersion",{enumerable:!0,get:function(){return p.validateWorkerVersion}});var t=requireVersion$4(),n=requireAssert$6(),a=requireGlobals$2(),i=r(requireWorkerJob()),o=r(requireWorkerThread()),u=r(requireWorkerFarm()),s=r(requireWorkerPool()),c=r(requireWorkerBody()),l=requireProcessOnWorker(),f=requireCreateWorker(),d=requireGetWorkerUrl(),p=requireValidateWorkerVersion(),h=requireGetTransferList(),y=requireLibraryUtils(),v=r(requireAsyncQueue$1()),m=r(require$$20),b={id:"null",name:"null",module:"worker-utils",version:t.VERSION,options:{null:{}}};e.NullWorker=b}(es5$e)),es5$e}var _interopRequireDefault$u=interopRequireDefaultExports;Object.defineProperty(createLoaderWorker$1,"__esModule",{value:!0}),createLoaderWorker$1.createLoaderWorker=createLoaderWorker;var _regenerator$n=_interopRequireDefault$u(requireRegenerator()),_defineProperty2$9=_interopRequireDefault$u(requireDefineProperty$3()),_asyncToGenerator2$i=_interopRequireDefault$u(requireAsyncToGenerator()),_workerUtils$4=requireEs5$d();function ownKeys$8(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread$8(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys$8(Object(t),!0).forEach((function(r){(0,_defineProperty2$9.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys$8(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var requestId=0;function createLoaderWorker(e){var r;_workerUtils$4.WorkerBody.inWorkerThread()&&(_workerUtils$4.WorkerBody.onmessage=(r=(0,_asyncToGenerator2$i.default)(_regenerator$n.default.mark((function r(t,n){var a,i,o,u,s,c,l;return _regenerator$n.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=t,r.next="process"===r.t0?3:16;break;case 3:return r.prev=3,a=n.input,i=n.options,o=void 0===i?{}:i,u=n.context,s=void 0===u?{}:u,r.next=7,parseData({loader:e,arrayBuffer:a,options:o,context:_objectSpread$8(_objectSpread$8({},s),{},{parse:parseOnMainThread})});case 7:c=r.sent,_workerUtils$4.WorkerBody.postMessage("done",{result:c}),r.next=15;break;case 11:r.prev=11,r.t1=r.catch(3),l=r.t1 instanceof Error?r.t1.message:"",_workerUtils$4.WorkerBody.postMessage("error",{error:l});case 15:return r.abrupt("break",16);case 16:case"end":return r.stop()}}),r,null,[[3,11]])}))),function(e,t){return r.apply(this,arguments)}))}function parseOnMainThread(e,r){return new Promise((function(t,n){var a=requestId++;_workerUtils$4.WorkerBody.addEventListener((function e(r,i){if(i.id===a)switch(r){case"done":_workerUtils$4.WorkerBody.removeEventListener(e),t(i.result);break;case"error":_workerUtils$4.WorkerBody.removeEventListener(e),n(i.error)}}));var i={id:a,input:e,options:r};_workerUtils$4.WorkerBody.postMessage("process",i)}))}function parseData(e){return _parseData.apply(this,arguments)}function _parseData(){return(_parseData=(0,_asyncToGenerator2$i.default)(_regenerator$n.default.mark((function e(r){var t,n,a,i,o,u,s;return _regenerator$n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.loader,n=r.arrayBuffer,a=r.options,i=r.context,!t.parseSync&&!t.parse){e.next=6;break}o=n,u=t.parseSync||t.parse,e.next=13;break;case 6:if(!t.parseTextSync){e.next=12;break}s=new TextDecoder,o=s.decode(n),u=t.parseTextSync,e.next=13;break;case 12:throw new Error("Could not load data with ".concat(t.name," loader"));case 13:return a=_objectSpread$8(_objectSpread$8({},a),{},{modules:t&&t.options&&t.options.modules||{},worker:!1}),e.next=16,u(o,_objectSpread$8({},a),i,t);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var parseWithWorker$1={},_interopRequireDefault$t=interopRequireDefaultExports;Object.defineProperty(parseWithWorker$1,"__esModule",{value:!0}),parseWithWorker$1.canParseWithWorker=canParseWithWorker,parseWithWorker$1.parseWithWorker=parseWithWorker;var _regenerator$m=_interopRequireDefault$t(requireRegenerator()),_asyncToGenerator2$h=_interopRequireDefault$t(requireAsyncToGenerator()),_workerUtils$3=requireEs5$d();function canParseWithWorker(e,r){return!!_workerUtils$3.WorkerFarm.isSupported()&&(!!(_workerUtils$3.isBrowser||null!=r&&r._nodeWorkers)&&(e.worker&&(null==r?void 0:r.worker)))}function parseWithWorker(e,r,t,n,a){return _parseWithWorker.apply(this,arguments)}function _parseWithWorker(){return _parseWithWorker=(0,_asyncToGenerator2$h.default)(_regenerator$m.default.mark((function e(r,t,n,a,i){var o,u,s,c,l,f;return _regenerator$m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.id,u=(0,_workerUtils$3.getWorkerURL)(r,n),s=_workerUtils$3.WorkerFarm.getWorkerFarm(n),c=s.getWorkerPool({name:o,url:u}),n=JSON.parse(JSON.stringify(n)),a=JSON.parse(JSON.stringify(a||{})),e.next=8,c.startJob("process-on-worker",onMessage.bind(null,i));case 8:return(l=e.sent).postMessage("process",{input:t,options:n,context:a}),e.next=12,l.result;case 12:return f=e.sent,e.next=15,f.result;case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)}))),_parseWithWorker.apply(this,arguments)}function onMessage(e,r,t,n){return _onMessage.apply(this,arguments)}function _onMessage(){return _onMessage=(0,_asyncToGenerator2$h.default)(_regenerator$m.default.mark((function e(r,t,n,a){var i,o,u,s,c;return _regenerator$m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n,e.next="done"===e.t0?3:"error"===e.t0?5:"process"===e.t0?7:20;break;case 3:return t.done(a),e.abrupt("break",21);case 5:return t.error(new Error(a.error)),e.abrupt("break",21);case 7:return i=a.id,o=a.input,u=a.options,e.prev=8,e.next=11,r(o,u);case 11:s=e.sent,t.postMessage("done",{id:i,result:s}),e.next=19;break;case 15:e.prev=15,e.t1=e.catch(8),c=e.t1 instanceof Error?e.t1.message:"unknown error",t.postMessage("error",{id:i,error:c});case 19:return e.abrupt("break",21);case 20:console.warn("parse-with-worker unknown message ".concat(n));case 21:case"end":return e.stop()}}),e,null,[[8,15]])}))),_onMessage.apply(this,arguments)}var encodeWithWorker={};Object.defineProperty(encodeWithWorker,"__esModule",{value:!0}),encodeWithWorker.canEncodeWithWorker=canEncodeWithWorker;var _workerUtils$2=requireEs5$d(),_globals=globals$4;function canEncodeWithWorker(e,r){return!!_workerUtils$2.WorkerFarm.isSupported()&&(!!(_globals.isBrowser||null!=r&&r._nodeWorkers)&&(e.worker&&(null==r?void 0:r.worker)))}var parseJson={},getFirstCharacters$2={};function getFirstCharacters$1(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof e)return e.slice(0,r);if(ArrayBuffer.isView(e))return getMagicString$1(e.buffer,e.byteOffset,r);if(e instanceof ArrayBuffer){return getMagicString$1(e,0,r)}return""}function getMagicString$1(e,r,t){if(e.byteLength<=r+t)return"";for(var n=new DataView(e),a="",i=0;i<t;i++)a+=String.fromCharCode(n.getUint8(r+i));return a}Object.defineProperty(getFirstCharacters$2,"__esModule",{value:!0}),getFirstCharacters$2.getFirstCharacters=getFirstCharacters$1,getFirstCharacters$2.getMagicString=getMagicString$1,Object.defineProperty(parseJson,"__esModule",{value:!0}),parseJson.parseJSON=parseJSON;var _getFirstCharacters=getFirstCharacters$2;function parseJSON(e){try{return JSON.parse(e)}catch(r){throw new Error('Failed to parse JSON from data starting with "'.concat((0,_getFirstCharacters.getFirstCharacters)(e),'"'))}}var arrayBufferUtils={};function _createForOfIteratorHelper$3(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_unsupportedIterableToArray$3(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}function _unsupportedIterableToArray$3(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray$3(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray$3(e,r):void 0}}function _arrayLikeToArray$3(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function compareArrayBuffers(e,r,t){if(t=t||e.byteLength,e.byteLength<t||r.byteLength<t)return!1;for(var n=new Uint8Array(e),a=new Uint8Array(r),i=0;i<n.length;++i)if(n[i]!==a[i])return!1;return!0}function concatenateArrayBuffers(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var n,a=r.map((function(e){return e instanceof ArrayBuffer?new Uint8Array(e):e})),i=a.reduce((function(e,r){return e+r.byteLength}),0),o=new Uint8Array(i),u=0,s=_createForOfIteratorHelper$3(a);try{for(s.s();!(n=s.n()).done;){var c=n.value;o.set(c,u),u+=c.byteLength}}catch(e){s.e(e)}finally{s.f()}return o.buffer}function concatenateTypedArrays(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var n=r,a=n&&n.length>1&&n[0].constructor||null;if(!a)throw new Error('"concatenateTypedArrays" - incorrect quantity of arguments or arguments have incompatible data types');for(var i=new a(n.reduce((function(e,r){return e+r.length}),0)),o=0,u=0,s=n;u<s.length;u++){var c=s[u];i.set(c,o),o+=c.length}return i}function sliceArrayBuffer(e,r,t){var n=void 0!==t?new Uint8Array(e).subarray(r,r+t):new Uint8Array(e).subarray(r);return new Uint8Array(n).buffer}Object.defineProperty(arrayBufferUtils,"__esModule",{value:!0}),arrayBufferUtils.compareArrayBuffers=compareArrayBuffers,arrayBufferUtils.concatenateArrayBuffers=concatenateArrayBuffers,arrayBufferUtils.concatenateTypedArrays=concatenateTypedArrays,arrayBufferUtils.sliceArrayBuffer=sliceArrayBuffer;var memoryCopyUtils={};Object.defineProperty(memoryCopyUtils,"__esModule",{value:!0}),memoryCopyUtils.copyArrayBuffer=copyArrayBuffer,memoryCopyUtils.copyToArray=copyToArray,memoryCopyUtils.padToNBytes=padToNBytes;var _assert=assert$9;function padToNBytes(e,r){return(0,_assert.assert)(e>=0),(0,_assert.assert)(r>0),e+(r-1)&~(r-1)}function copyArrayBuffer(e,r,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.byteLength,a=new Uint8Array(e,t,n),i=new Uint8Array(r);return a.set(i),e}function copyToArray(e,r,t){var n;if(e instanceof ArrayBuffer)n=new Uint8Array(e);else{var a=e.byteOffset,i=e.byteLength;n=new Uint8Array(e.buffer||e.arrayBuffer,a,i)}return r.set(n,t),t+padToNBytes(n.byteLength,4)}var dataviewCopyUtils={};Object.defineProperty(dataviewCopyUtils,"__esModule",{value:!0}),dataviewCopyUtils.copyBinaryToDataView=copyBinaryToDataView,dataviewCopyUtils.copyPaddedArrayBufferToDataView=copyPaddedArrayBufferToDataView,dataviewCopyUtils.copyPaddedStringToDataView=copyPaddedStringToDataView,dataviewCopyUtils.copyStringToDataView=copyStringToDataView,dataviewCopyUtils.padStringToByteAlignment=padStringToByteAlignment;var _memoryCopyUtils=memoryCopyUtils;function padStringToByteAlignment(e,r){for(var t=e.length,n=Math.ceil(t/r)*r-t,a="",i=0;i<n;++i)a+=" ";return e+a}function copyStringToDataView(e,r,t,n){if(e)for(var a=0;a<n;a++)e.setUint8(r+a,t.charCodeAt(a));return r+n}function copyBinaryToDataView(e,r,t,n){if(e)for(var a=0;a<n;a++)e.setUint8(r+a,t[a]);return r+n}function copyPaddedArrayBufferToDataView(e,r,t,n){var a=(0,_memoryCopyUtils.padToNBytes)(t.byteLength,n),i=a-t.byteLength;if(e){var o=new Uint8Array(e.buffer,e.byteOffset+r,t.byteLength),u=new Uint8Array(t);o.set(u);for(var s=0;s<i;++s)e.setUint8(r+t.byteLength+s,32)}return r+=a}function copyPaddedStringToDataView(e,r,t,n){return r=copyPaddedArrayBufferToDataView(e,r,(new TextEncoder).encode(t),n)}var textIterators={},awaitAsyncGenerator={exports:{}},OverloadYield={exports:{}},hasRequiredOverloadYield,hasRequiredAwaitAsyncGenerator;function requireOverloadYield(){return hasRequiredOverloadYield||(hasRequiredOverloadYield=1,function(e){e.exports=function(e,r){this.v=e,this.k=r},e.exports.__esModule=!0,e.exports.default=e.exports}(OverloadYield)),OverloadYield.exports}function requireAwaitAsyncGenerator(){return hasRequiredAwaitAsyncGenerator||(hasRequiredAwaitAsyncGenerator=1,function(e){var r=requireOverloadYield();e.exports=function(e){return new r(e,0)},e.exports.__esModule=!0,e.exports.default=e.exports}(awaitAsyncGenerator)),awaitAsyncGenerator.exports}var wrapAsyncGenerator={exports:{}},AsyncGenerator={exports:{}},hasRequiredAsyncGenerator,hasRequiredWrapAsyncGenerator;function requireAsyncGenerator(){return hasRequiredAsyncGenerator||(hasRequiredAsyncGenerator=1,function(e){var r=requireOverloadYield();function t(e){var t,n;function a(t,n){try{var o=e[t](n),u=o.value,s=u instanceof r;Promise.resolve(s?u.v:u).then((function(r){if(s){var n="return"===t?"return":"next";if(!u.k||r.done)return a(n,r);r=e[n](r).value}i(o.done?"return":"normal",r)}),(function(e){a("throw",e)}))}catch(e){i("throw",e)}}function i(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?a(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise((function(i,o){var u={key:e,arg:r,resolve:i,reject:o,next:null};n?n=n.next=u:(t=n=u,a(e,r))}))},"function"!=typeof e.return&&(this.return=void 0)}t.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)},e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(AsyncGenerator)),AsyncGenerator.exports}function requireWrapAsyncGenerator(){return hasRequiredWrapAsyncGenerator||(hasRequiredWrapAsyncGenerator=1,function(e){var r=requireAsyncGenerator();e.exports=function(e){return function(){return new r(e.apply(this,arguments))}},e.exports.__esModule=!0,e.exports.default=e.exports}(wrapAsyncGenerator)),wrapAsyncGenerator.exports}var _interopRequireDefault$s=interopRequireDefaultExports;Object.defineProperty(textIterators,"__esModule",{value:!0}),textIterators.makeLineIterator=makeLineIterator,textIterators.makeNumberedLineIterator=makeNumberedLineIterator,textIterators.makeTextDecoderIterator=makeTextDecoderIterator,textIterators.makeTextEncoderIterator=makeTextEncoderIterator;var _regenerator$l=_interopRequireDefault$s(requireRegenerator()),_awaitAsyncGenerator2$4=_interopRequireDefault$s(requireAwaitAsyncGenerator()),_wrapAsyncGenerator2$4=_interopRequireDefault$s(requireWrapAsyncGenerator());function _asyncIterator$5(e){var r,t,n,a=2;for("undefined"!=typeof Symbol&&(t=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(t&&null!=(r=e[t]))return r.call(e);if(n&&null!=(r=e[n]))return new AsyncFromSyncIterator$5(r.call(e));t="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function AsyncFromSyncIterator$5(e){function r(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var r=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:r}}))}return AsyncFromSyncIterator$5=function(e){this.s=e,this.n=e.next},AsyncFromSyncIterator$5.prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):r(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):r(t.apply(this.s,arguments))}},new AsyncFromSyncIterator$5(e)}function makeTextDecoderIterator(e){return _makeTextDecoderIterator.apply(this,arguments)}function _makeTextDecoderIterator(){return _makeTextDecoderIterator=(0,_wrapAsyncGenerator2$4.default)(_regenerator$l.default.mark((function e(r){var t,n,a,i,o,u,s,c=arguments;return _regenerator$l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new TextDecoder(void 0,c.length>1&&void 0!==c[1]?c[1]:{}),n=!1,a=!1,e.prev=4,o=_asyncIterator$5(r);case 6:return e.next=8,(0,_awaitAsyncGenerator2$4.default)(o.next());case 8:if(!(n=!(u=e.sent).done)){e.next=15;break}return s=u.value,e.next=12,"string"==typeof s?s:t.decode(s,{stream:!0});case 12:n=!1,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),a=!0,i=e.t0;case 21:if(e.prev=21,e.prev=22,!n||null==o.return){e.next=26;break}return e.next=26,(0,_awaitAsyncGenerator2$4.default)(o.return());case 26:if(e.prev=26,!a){e.next=29;break}throw i;case 29:return e.finish(26);case 30:return e.finish(21);case 31:case"end":return e.stop()}}),e,null,[[4,17,21,31],[22,,26,30]])}))),_makeTextDecoderIterator.apply(this,arguments)}function makeTextEncoderIterator(e){return _makeTextEncoderIterator.apply(this,arguments)}function _makeTextEncoderIterator(){return(_makeTextEncoderIterator=(0,_wrapAsyncGenerator2$4.default)(_regenerator$l.default.mark((function e(r){var t,n,a,i,o,u,s;return _regenerator$l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new TextEncoder,n=!1,a=!1,e.prev=3,o=_asyncIterator$5(r);case 5:return e.next=7,(0,_awaitAsyncGenerator2$4.default)(o.next());case 7:if(!(n=!(u=e.sent).done)){e.next=14;break}return s=u.value,e.next=11,"string"==typeof s?t.encode(s):s;case 11:n=!1,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),a=!0,i=e.t0;case 20:if(e.prev=20,e.prev=21,!n||null==o.return){e.next=25;break}return e.next=25,(0,_awaitAsyncGenerator2$4.default)(o.return());case 25:if(e.prev=25,!a){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(20);case 30:case"end":return e.stop()}}),e,null,[[3,16,20,30],[21,,25,29]])})))).apply(this,arguments)}function makeLineIterator(e){return _makeLineIterator.apply(this,arguments)}function _makeLineIterator(){return(_makeLineIterator=(0,_wrapAsyncGenerator2$4.default)(_regenerator$l.default.mark((function e(r){var t,n,a,i,o,u,s,c,l;return _regenerator$l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="",n=!1,a=!1,e.prev=3,o=_asyncIterator$5(r);case 5:return e.next=7,(0,_awaitAsyncGenerator2$4.default)(o.next());case 7:if(!(n=!(u=e.sent).done)){e.next=21;break}s=u.value,t+=s,c=void 0;case 11:if(!((c=t.indexOf("\n"))>=0)){e.next=18;break}return l=t.slice(0,c+1),t=t.slice(c+1),e.next=16,l;case 16:e.next=11;break;case 18:n=!1,e.next=5;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(3),a=!0,i=e.t0;case 27:if(e.prev=27,e.prev=28,!n||null==o.return){e.next=32;break}return e.next=32,(0,_awaitAsyncGenerator2$4.default)(o.return());case 32:if(e.prev=32,!a){e.next=35;break}throw i;case 35:return e.finish(32);case 36:return e.finish(27);case 37:if(!(t.length>0)){e.next=40;break}return e.next=40,t;case 40:case"end":return e.stop()}}),e,null,[[3,23,27,37],[28,,32,36]])})))).apply(this,arguments)}function makeNumberedLineIterator(e){return _makeNumberedLineIterator.apply(this,arguments)}function _makeNumberedLineIterator(){return(_makeNumberedLineIterator=(0,_wrapAsyncGenerator2$4.default)(_regenerator$l.default.mark((function e(r){var t,n,a,i,o,u,s;return _regenerator$l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=1,n=!1,a=!1,e.prev=3,o=_asyncIterator$5(r);case 5:return e.next=7,(0,_awaitAsyncGenerator2$4.default)(o.next());case 7:if(!(n=!(u=e.sent).done)){e.next=15;break}return s=u.value,e.next=11,{counter:t,line:s};case 11:t++;case 12:n=!1,e.next=5;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),a=!0,i=e.t0;case 21:if(e.prev=21,e.prev=22,!n||null==o.return){e.next=26;break}return e.next=26,(0,_awaitAsyncGenerator2$4.default)(o.return());case 26:if(e.prev=26,!a){e.next=29;break}throw i;case 29:return e.finish(26);case 30:return e.finish(21);case 31:case"end":return e.stop()}}),e,null,[[3,17,21,31],[22,,26,30]])})))).apply(this,arguments)}var asyncIteration={},_interopRequireDefault$r=interopRequireDefaultExports;Object.defineProperty(asyncIteration,"__esModule",{value:!0}),asyncIteration.concatenateArrayBuffersAsync=concatenateArrayBuffersAsync,asyncIteration.concatenateStringsAsync=concatenateStringsAsync,asyncIteration.forEach=forEach;var _regenerator$k=_interopRequireDefault$r(requireRegenerator()),_asyncToGenerator2$g=_interopRequireDefault$r(requireAsyncToGenerator()),_arrayBufferUtils=arrayBufferUtils;function _asyncIterator$4(e){var r,t,n,a=2;for("undefined"!=typeof Symbol&&(t=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(t&&null!=(r=e[t]))return r.call(e);if(n&&null!=(r=e[n]))return new AsyncFromSyncIterator$4(r.call(e));t="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function AsyncFromSyncIterator$4(e){function r(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var r=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:r}}))}return AsyncFromSyncIterator$4=function(e){this.s=e,this.n=e.next},AsyncFromSyncIterator$4.prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):r(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):r(t.apply(this.s,arguments))}},new AsyncFromSyncIterator$4(e)}function forEach(e,r){return _forEach.apply(this,arguments)}function _forEach(){return(_forEach=(0,_asyncToGenerator2$g.default)(_regenerator$k.default.mark((function e(r,t){var n,a,i;return _regenerator$k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,r.next();case 3:if(n=e.sent,a=n.done,i=n.value,!a){e.next=9;break}return r.return(),e.abrupt("return");case 9:if(!t(i)){e.next=12;break}return e.abrupt("return");case 12:e.next=0;break;case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function concatenateArrayBuffersAsync(e){return _concatenateArrayBuffersAsync.apply(this,arguments)}function _concatenateArrayBuffersAsync(){return(_concatenateArrayBuffersAsync=(0,_asyncToGenerator2$g.default)(_regenerator$k.default.mark((function e(r){var t,n,a,i,o,u,s;return _regenerator$k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=!1,a=!1,e.prev=3,o=_asyncIterator$4(r);case 5:return e.next=7,o.next();case 7:if(!(n=!(u=e.sent).done)){e.next=13;break}s=u.value,t.push(s);case 10:n=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),a=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==o.return){e.next=24;break}return e.next=24,o.return();case 24:if(e.prev=24,!a){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",_arrayBufferUtils.concatenateArrayBuffers.apply(void 0,t));case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])})))).apply(this,arguments)}function concatenateStringsAsync(e){return _concatenateStringsAsync.apply(this,arguments)}function _concatenateStringsAsync(){return(_concatenateStringsAsync=(0,_asyncToGenerator2$g.default)(_regenerator$k.default.mark((function e(r){var t,n,a,i,o,u,s;return _regenerator$k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=!1,a=!1,e.prev=3,o=_asyncIterator$4(r);case 5:return e.next=7,o.next();case 7:if(!(n=!(u=e.sent).done)){e.next=13;break}s=u.value,t.push(s);case 10:n=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),a=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==o.return){e.next=24;break}return e.next=24,o.return();case 24:if(e.prev=24,!a){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",t.join(""));case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])})))).apply(this,arguments)}var requestScheduler={},es5$d={},stats={},stat={},hiResTimestamp$1={},hasRequiredHiResTimestamp$1,hasRequiredStat,hasRequiredStats,hasRequiredEs5$c,hasRequiredRequestScheduler;function requireHiResTimestamp$1(){if(hasRequiredHiResTimestamp$1)return hiResTimestamp$1;return hasRequiredHiResTimestamp$1=1,Object.defineProperty(hiResTimestamp$1,"__esModule",{value:!0}),hiResTimestamp$1.default=function(){var e;if("undefined"!=typeof window&&window.performance)e=window.performance.now();else if("undefined"!=typeof process&&process.hrtime){var r=process.hrtime();e=1e3*r[0]+r[1]/1e6}else e=Date.now();return e},hiResTimestamp$1}function requireStat(){if(hasRequiredStat)return stat;hasRequiredStat=1;var e=interopRequireDefaultExports;Object.defineProperty(stat,"__esModule",{value:!0}),stat.default=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=e(requireDefineProperty$3()),a=e(requireHiResTimestamp$1()),i=function(){function e(t,a){(0,r.default)(this,e),(0,n.default)(this,"name",void 0),(0,n.default)(this,"type",void 0),(0,n.default)(this,"sampleSize",1),(0,n.default)(this,"time",void 0),(0,n.default)(this,"count",void 0),(0,n.default)(this,"samples",void 0),(0,n.default)(this,"lastTiming",void 0),(0,n.default)(this,"lastSampleTime",void 0),(0,n.default)(this,"lastSampleCount",void 0),(0,n.default)(this,"_count",0),(0,n.default)(this,"_time",0),(0,n.default)(this,"_samples",0),(0,n.default)(this,"_startTime",0),(0,n.default)(this,"_timerPending",!1),this.name=t,this.type=a,this.reset()}return(0,t.default)(e,[{key:"setSampleSize",value:function(e){return this.sampleSize=e,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(e){return this._count+=e,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(e){return this._count-=e,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=(0,a.default)(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime((0,a.default)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),e}();return stat.default=i,stat}function requireStats(){if(hasRequiredStats)return stats;hasRequiredStats=1;var e=interopRequireDefaultExports;Object.defineProperty(stats,"__esModule",{value:!0}),stats.default=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=e(requireDefineProperty$3()),a=e(requireStat()),i=function(){function e(t){(0,r.default)(this,e),(0,n.default)(this,"id",void 0),(0,n.default)(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}return(0,t.default)(e,[{key:"get",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:e,type:r})}},{key:"size",get:function(){return Object.keys(this.stats).length}},{key:"reset",value:function(){for(var e in this.stats)this.stats[e].reset();return this}},{key:"forEach",value:function(e){for(var r in this.stats)e(this.stats[r])}},{key:"getTable",value:function(){var e={};return this.forEach((function(r){e[r.name]={time:r.time||0,count:r.count||0,average:r.getAverageTime()||0,hz:r.getHz()||0}})),e}},{key:"_initializeStats",value:function(){var e=this;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(r){return e._getOrCreate(r)}))}},{key:"_getOrCreate",value:function(e){if(!e||!e.name)return null;var r=e.name,t=e.type;return this.stats[r]||(e instanceof a.default?this.stats[r]=e:this.stats[r]=new a.default(r,t)),this.stats[r]}}]),e}();return stats.default=i,stats}function requireEs5$c(){return hasRequiredEs5$c||(hasRequiredEs5$c=1,function(e){var r=interopRequireDefaultExports;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Stat",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"Stats",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"_getHiResTimestamp",{enumerable:!0,get:function(){return a.default}});var t=r(requireStats()),n=r(requireStat()),a=r(requireHiResTimestamp$1())}(es5$d)),es5$d}function requireRequestScheduler(){if(hasRequiredRequestScheduler)return requestScheduler;hasRequiredRequestScheduler=1;var e=interopRequireDefaultExports;Object.defineProperty(requestScheduler,"__esModule",{value:!0}),requestScheduler.default=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=e(requireDefineProperty$3()),a=requireEs5$c();function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){(0,n.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var u={id:"request-scheduler",throttleRequests:!0,maxRequests:6},s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,e),(0,n.default)(this,"props",void 0),(0,n.default)(this,"stats",void 0),(0,n.default)(this,"activeRequestCount",0),(0,n.default)(this,"requestQueue",[]),(0,n.default)(this,"requestMap",new Map),(0,n.default)(this,"deferredUpdate",null),this.props=o(o({},u),t),this.stats=new a.Stats({id:this.props.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever")}return(0,t.default)(e,[{key:"scheduleRequest",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return 0};if(!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has(e))return this.requestMap.get(e);var t={handle:e,priority:0,getPriority:r},n=new Promise((function(e){return t.resolve=e,t}));return this.requestQueue.push(t),this.requestMap.set(e,n),this._issueNewRequests(),n}},{key:"_issueRequest",value:function(e){var r=this,t=e.handle,n=e.resolve,a=!1,i=function(){a||(a=!0,r.requestMap.delete(t),r.activeRequestCount--,r._issueNewRequests())};return this.activeRequestCount++,n?n({done:i}):Promise.resolve({done:i})}},{key:"_issueNewRequests",value:function(){var e=this;this.deferredUpdate||(this.deferredUpdate=setTimeout((function(){return e._issueNewRequestsAsync()}),0))}},{key:"_issueNewRequestsAsync",value:function(){this.deferredUpdate=null;var e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==e){this._updateAllRequests();for(var r=0;r<e;++r){var t=this.requestQueue.shift();t&&this._issueRequest(t)}}}},{key:"_updateAllRequests",value:function(){for(var e=this.requestQueue,r=0;r<e.length;++r){var t=e[r];this._updateRequest(t)||(e.splice(r,1),this.requestMap.delete(t.handle),r--)}e.sort((function(e,r){return e.priority-r.priority}))}},{key:"_updateRequest",value:function(e){return e.priority=e.getPriority(e.handle),!(e.priority<0)||(e.resolve(null),!1)}}]),e}();return requestScheduler.default=s,requestScheduler}var fileAliases={},hasRequiredFileAliases;function requireFileAliases(){if(hasRequiredFileAliases)return fileAliases;hasRequiredFileAliases=1,Object.defineProperty(fileAliases,"__esModule",{value:!0}),fileAliases.addAliases=function(e){Object.assign(r,e)},fileAliases.getPathPrefix=function(){return e},fileAliases.resolvePath=function(t){for(var n in r)if(t.startsWith(n)){var a=r[n];t=t.replace(n,a)}t.startsWith("http://")||t.startsWith("https://")||(t="".concat(e).concat(t));return t},fileAliases.setPathPrefix=function(r){e=r};var e="",r={};return fileAliases}var jsonLoader={},hasRequiredJsonLoader;function requireJsonLoader(){if(hasRequiredJsonLoader)return jsonLoader;hasRequiredJsonLoader=1;var e=interopRequireDefaultExports;Object.defineProperty(jsonLoader,"__esModule",{value:!0}),jsonLoader._typecheckJSONLoader=jsonLoader.JSONLoader=void 0;var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n={name:"JSON",id:"json",module:"json",version:"3.3.3",extensions:["json","geojson"],mimeTypes:["application/json"],category:"json",text:!0,parseTextSync:a,parse:function(){var e=(0,t.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a((new TextDecoder).decode(t)));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),options:{}};function a(e){return JSON.parse(e)}jsonLoader.JSONLoader=n;var i=n;return jsonLoader._typecheckJSONLoader=i,jsonLoader}var memoryConversionUtils={},hasRequiredMemoryConversionUtils;function requireMemoryConversionUtils(){if(hasRequiredMemoryConversionUtils)return memoryConversionUtils;hasRequiredMemoryConversionUtils=1;var e=interopRequireDefaultExports,r=require_typeof$3();Object.defineProperty(memoryConversionUtils,"__esModule",{value:!0}),memoryConversionUtils.isBuffer=i,memoryConversionUtils.toArrayBuffer=function(e){if(i(e))return n.toArrayBuffer(e);if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if("string"==typeof e){var r=e;return(new TextEncoder).encode(r).buffer}if(e&&"object"===(0,t.default)(e)&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")},memoryConversionUtils.toBuffer=function(e){return n.toBuffer?n.toBuffer(e):e};var t=e(require_typeof$3()),n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=o?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(i,u,s):i[u]=e[u]}i.default=e,n&&n.set(e,i);return i}(require$$20);function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}function i(e){return e&&"object"===(0,t.default)(e)&&e.isBuffer}return memoryConversionUtils}var promisify={},hasRequiredPromisify;function requirePromisify(){if(hasRequiredPromisify)return promisify;return hasRequiredPromisify=1,Object.defineProperty(promisify,"__esModule",{value:!0}),promisify.promisify1=function(e){return function(r){return new Promise((function(t,n){return e(r,(function(e,r){return e?n(e):t(r)}))}))}},promisify.promisify2=function(e){return function(r,t){return new Promise((function(n,a){return e(r,t,(function(e,r){return e?a(e):n(r)}))}))}},promisify.promisify3=function(e){return function(r,t,n){return new Promise((function(a,i){return e(r,t,n,(function(e,r){return e?i(e):a(r)}))}))}},promisify}var path={},hasRequiredPath;function requirePath(){if(hasRequiredPath)return path;return hasRequiredPath=1,Object.defineProperty(path,"__esModule",{value:!0}),path.dirname=function(e){var r=e&&e.lastIndexOf("/");return r>=0?e.substr(0,r):""},path.filename=function(e){var r=e&&e.lastIndexOf("/");return r>=0?e.substr(r+1):""},path.join=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return(r=r.map((function(e,t){return t&&(e=e.replace(new RegExp("^".concat("/")),"")),t!==r.length-1&&(e=e.replace(new RegExp("".concat("/","$")),"")),e}))).join("/")},path}var stream={},hasRequiredStream;function requireStream(){if(hasRequiredStream)return stream;hasRequiredStream=1;var e=interopRequireDefaultExports;Object.defineProperty(stream,"__esModule",{value:!0}),stream.isSupported=stream.Transform=void 0;var r,t=e(require$$20);stream.Transform=r;var n=Boolean(t.default);stream.isSupported=n;try{stream.Transform=r=t.default.Transform}catch(e){}return stream}var readableFile={},hasRequiredReadableFile;function requireReadableFile(){if(hasRequiredReadableFile)return readableFile;hasRequiredReadableFile=1;var e=interopRequireDefaultExports;Object.defineProperty(readableFile,"__esModule",{value:!0}),readableFile.makeReadableFile=function(e){if(e instanceof ArrayBuffer){var n=e;return{read:(i=(0,t.default)(r.default.mark((function t(n,a){return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Buffer.from(e,n,a));case 1:case"end":return r.stop()}}),t)}))),function(e,r){return i.apply(this,arguments)}),close:(a=(0,t.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),size:n.byteLength}}var a;var i;var o=e;return{read:(s=(0,t.default)(r.default.mark((function e(t,n){var a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.slice(t,t+n).arrayBuffer();case 2:return a=e.sent,e.abrupt("return",Buffer.from(a));case 4:case"end":return e.stop()}}),e)}))),function(e,r){return s.apply(this,arguments)}),close:(u=(0,t.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)}),size:o.size};var u;var s};var r=e(requireRegenerator()),t=e(requireAsyncToGenerator());return readableFile}var writableFile={},hasRequiredWritableFile;function requireWritableFile(){if(hasRequiredWritableFile)return writableFile;hasRequiredWritableFile=1;var e=interopRequireDefaultExports,r=require_typeof$3();Object.defineProperty(writableFile,"__esModule",{value:!0}),writableFile.makeWritableFile=function(e,r){if(a.isBrowser)return{write:(u=(0,n.default)(t.default.mark((function e(){return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)}),close:(o=(0,n.default)(t.default.mark((function e(){return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})};var o;var u;var s="string"==typeof e?i.createWriteStream(e,r):e;return{write:(c=(0,n.default)(t.default.mark((function e(r){return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){s.write(r,(function(r){return r?t(r):e()}))})));case 1:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)}),close:function(){return new Promise((function(e,r){s.close((function(t){return t?r(t):e()}))}))}};var c};var t=e(requireRegenerator()),n=e(requireAsyncToGenerator()),a=requireEs5$b(),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=i?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(a,u,s):a[u]=e[u]}a.default=e,n&&n.set(e,a);return a}(require$$20);function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}return writableFile}var nodeFilesystem={},hasRequiredNodeFilesystem,hasRequiredEs5$b;function requireNodeFilesystem(){if(hasRequiredNodeFilesystem)return nodeFilesystem;hasRequiredNodeFilesystem=1;var e=interopRequireDefaultExports,r=require_typeof$3();Object.defineProperty(nodeFilesystem,"__esModule",{value:!0}),nodeFilesystem.default=void 0;var t=e(requireRegenerator()),n=e(requireAsyncToGenerator()),a=e(requireClassCallCheck$3()),i=e(requireCreateClass$3()),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(require$$20);function u(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(u=function(e){return e?t:r})(e)}var s=function(){function e(r){(0,a.default)(this,e),this.fetch=r._fetch}var r,u,s,c,l,f,d;return(0,i.default)(e,[{key:"readdir",value:(d=(0,n.default)(t.default.mark((function e(){var r,n,a=arguments;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:".",n=a.length>1?a[1]:void 0,e.next=4,o.readdir(r,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),function(){return d.apply(this,arguments)})},{key:"stat",value:(f=(0,n.default)(t.default.mark((function e(r,n){var a;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.stat(r,n);case 2:return a=e.sent,e.abrupt("return",{size:Number(a.size),isDirectory:function(){return!1},info:a});case 4:case"end":return e.stop()}}),e)}))),function(e,r){return f.apply(this,arguments)})},{key:"fetch",value:(l=(0,n.default)(t.default.mark((function e(r,n){var a;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.fetch||this.fetch,e.abrupt("return",a(r,n));case 2:case"end":return e.stop()}}),e,this)}))),function(e,r){return l.apply(this,arguments)})},{key:"open",value:(c=(0,n.default)(t.default.mark((function e(r,n,a){return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.open(r,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e,r,t){return c.apply(this,arguments)})},{key:"close",value:(s=(0,n.default)(t.default.mark((function e(r){return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.close(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})},{key:"fstat",value:(u=(0,n.default)(t.default.mark((function e(r){var n;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.fstat(r);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})},{key:"read",value:(r=(0,n.default)(t.default.mark((function e(r,n){var a,i,u,s,c,l,f,d,p,h,y;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.buffer,i=void 0===a?null:a,u=n.offset,s=void 0===u?0:u,c=n.length,l=void 0===c?i.byteLength:c,f=n.position,d=void 0===f?null:f,p=0;case 2:if(!(p<l)){e.next=10;break}return e.next=5,o.read(r,i,s+p,l-p,d+p);case 5:h=e.sent,y=h.bytesRead,p+=y,e.next=2;break;case 10:return e.abrupt("return",{bytesRead:p,buffer:i});case 11:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})}]),e}();return nodeFilesystem.default=s,nodeFilesystem}function requireEs5$b(){return hasRequiredEs5$b||(hasRequiredEs5$b=1,function(e){var r=interopRequireDefaultExports,t=require_typeof$3();Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"JSONLoader",{enumerable:!0,get:function(){return m.JSONLoader}}),Object.defineProperty(e,"RequestScheduler",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(e,"_NodeFileSystem",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(e,"_addAliases",{enumerable:!0,get:function(){return v.addAliases}}),Object.defineProperty(e,"assert",{enumerable:!0,get:function(){return n.assert}}),Object.defineProperty(e,"canEncodeWithWorker",{enumerable:!0,get:function(){return u.canEncodeWithWorker}}),Object.defineProperty(e,"canParseWithWorker",{enumerable:!0,get:function(){return o.canParseWithWorker}}),Object.defineProperty(e,"compareArrayBuffers",{enumerable:!0,get:function(){return c.compareArrayBuffers}}),Object.defineProperty(e,"concatenateArrayBuffers",{enumerable:!0,get:function(){return c.concatenateArrayBuffers}}),Object.defineProperty(e,"concatenateArrayBuffersAsync",{enumerable:!0,get:function(){return h.concatenateArrayBuffersAsync}}),Object.defineProperty(e,"concatenateTypedArrays",{enumerable:!0,get:function(){return c.concatenateTypedArrays}}),Object.defineProperty(e,"copyArrayBuffer",{enumerable:!0,get:function(){return l.copyArrayBuffer}}),Object.defineProperty(e,"copyBinaryToDataView",{enumerable:!0,get:function(){return f.copyBinaryToDataView}}),Object.defineProperty(e,"copyPaddedArrayBufferToDataView",{enumerable:!0,get:function(){return f.copyPaddedArrayBufferToDataView}}),Object.defineProperty(e,"copyPaddedStringToDataView",{enumerable:!0,get:function(){return f.copyPaddedStringToDataView}}),Object.defineProperty(e,"copyStringToDataView",{enumerable:!0,get:function(){return f.copyStringToDataView}}),Object.defineProperty(e,"copyToArray",{enumerable:!0,get:function(){return l.copyToArray}}),Object.defineProperty(e,"createLoaderWorker",{enumerable:!0,get:function(){return i.createLoaderWorker}}),Object.defineProperty(e,"document",{enumerable:!0,get:function(){return a.document}}),Object.defineProperty(e,"forEach",{enumerable:!0,get:function(){return h.forEach}}),e.fs=void 0,Object.defineProperty(e,"getFirstCharacters",{enumerable:!0,get:function(){return d.getFirstCharacters}}),Object.defineProperty(e,"getMagicString",{enumerable:!0,get:function(){return d.getMagicString}}),Object.defineProperty(e,"getPathPrefix",{enumerable:!0,get:function(){return v.getPathPrefix}}),Object.defineProperty(e,"global",{enumerable:!0,get:function(){return a.global}}),Object.defineProperty(e,"isBrowser",{enumerable:!0,get:function(){return a.isBrowser}}),Object.defineProperty(e,"isBuffer",{enumerable:!0,get:function(){return b.isBuffer}}),Object.defineProperty(e,"isWorker",{enumerable:!0,get:function(){return a.isWorker}}),Object.defineProperty(e,"makeLineIterator",{enumerable:!0,get:function(){return p.makeLineIterator}}),Object.defineProperty(e,"makeNumberedLineIterator",{enumerable:!0,get:function(){return p.makeNumberedLineIterator}}),Object.defineProperty(e,"makeReadableFile",{enumerable:!0,get:function(){return O.makeReadableFile}}),Object.defineProperty(e,"makeTextDecoderIterator",{enumerable:!0,get:function(){return p.makeTextDecoderIterator}}),Object.defineProperty(e,"makeTextEncoderIterator",{enumerable:!0,get:function(){return p.makeTextEncoderIterator}}),Object.defineProperty(e,"makeWritableFile",{enumerable:!0,get:function(){return R.makeWritableFile}}),Object.defineProperty(e,"nodeVersion",{enumerable:!0,get:function(){return a.nodeVersion}}),Object.defineProperty(e,"padStringToByteAlignment",{enumerable:!0,get:function(){return f.padStringToByteAlignment}}),Object.defineProperty(e,"padToNBytes",{enumerable:!0,get:function(){return l.padToNBytes}}),Object.defineProperty(e,"parseJSON",{enumerable:!0,get:function(){return s.parseJSON}}),Object.defineProperty(e,"parseWithWorker",{enumerable:!0,get:function(){return o.parseWithWorker}}),e.path=void 0,Object.defineProperty(e,"promisify1",{enumerable:!0,get:function(){return g.promisify1}}),Object.defineProperty(e,"promisify2",{enumerable:!0,get:function(){return g.promisify2}}),Object.defineProperty(e,"resolvePath",{enumerable:!0,get:function(){return v.resolvePath}}),Object.defineProperty(e,"self",{enumerable:!0,get:function(){return a.self}}),Object.defineProperty(e,"setPathPrefix",{enumerable:!0,get:function(){return v.setPathPrefix}}),Object.defineProperty(e,"sliceArrayBuffer",{enumerable:!0,get:function(){return c.sliceArrayBuffer}}),e.stream=void 0,Object.defineProperty(e,"toArrayBuffer",{enumerable:!0,get:function(){return b.toArrayBuffer}}),Object.defineProperty(e,"toBuffer",{enumerable:!0,get:function(){return b.toBuffer}}),Object.defineProperty(e,"window",{enumerable:!0,get:function(){return a.window}});var n=assert$9,a=globals$4,i=createLoaderWorker$1,o=parseWithWorker$1,u=encodeWithWorker,s=parseJson,c=arrayBufferUtils,l=memoryCopyUtils,f=dataviewCopyUtils,d=getFirstCharacters$2,p=textIterators,h=asyncIteration,y=r(requireRequestScheduler()),v=requireFileAliases(),m=requireJsonLoader(),b=requireMemoryConversionUtils(),g=requirePromisify(),_=q(requirePath());e.path=_;var A=q(require$$20);e.fs=A;var T=q(requireStream());e.stream=T;var O=requireReadableFile(),R=requireWritableFile(),E=r(requireNodeFilesystem());function S(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(S=function(e){return e?t:r})(e)}function q(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var n=S(r);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}}(es5$f)),es5$f}var responseUtils={},isType={},hasRequiredIsType;function requireIsType(){if(hasRequiredIsType)return isType;hasRequiredIsType=1;var e=interopRequireDefaultExports;Object.defineProperty(isType,"__esModule",{value:!0}),isType.isWritableStream=isType.isWritableNodeStream=isType.isWritableDOMStream=isType.isResponse=isType.isReadableStream=isType.isReadableNodeStream=isType.isReadableDOMStream=isType.isPureObject=isType.isPromise=isType.isObject=isType.isIterator=isType.isIterable=isType.isFile=isType.isBuffer=isType.isBlob=isType.isAsyncIterable=void 0;var r=e(require_typeof$3()),t=function(e){return"boolean"==typeof e},n=function(e){return"function"==typeof e},a=function(e){return null!==e&&"object"===(0,r.default)(e)};isType.isObject=a;isType.isPureObject=function(e){return a(e)&&e.constructor==={}.constructor};isType.isPromise=function(e){return a(e)&&n(e.then)};isType.isIterable=function(e){return e&&"function"==typeof e[Symbol.iterator]};isType.isAsyncIterable=function(e){return e&&"function"==typeof e[Symbol.asyncIterator]};isType.isIterator=function(e){return e&&n(e.next)};isType.isResponse=function(e){return"undefined"!=typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json};isType.isFile=function(e){return"undefined"!=typeof File&&e instanceof File};isType.isBlob=function(e){return"undefined"!=typeof Blob&&e instanceof Blob};isType.isBuffer=function(e){return e&&"object"===(0,r.default)(e)&&e.isBuffer};var i=function(e){return a(e)&&n(e.abort)&&n(e.getWriter)};isType.isWritableDOMStream=i;var o=function(e){return"undefined"!=typeof ReadableStream&&e instanceof ReadableStream||a(e)&&n(e.tee)&&n(e.cancel)&&n(e.getReader)};isType.isReadableDOMStream=o;var u=function(e){return a(e)&&n(e.end)&&n(e.write)&&t(e.writable)};isType.isWritableNodeStream=u;var s=function(e){return a(e)&&n(e.read)&&n(e.pipe)&&t(e.readable)};isType.isReadableNodeStream=s;isType.isReadableStream=function(e){return o(e)||s(e)};return isType.isWritableStream=function(e){return i(e)||u(e)},isType}var resourceUtils={},mimeTypeUtils={},hasRequiredMimeTypeUtils,hasRequiredResourceUtils,hasRequiredResponseUtils;function requireMimeTypeUtils(){if(hasRequiredMimeTypeUtils)return mimeTypeUtils;hasRequiredMimeTypeUtils=1,Object.defineProperty(mimeTypeUtils,"__esModule",{value:!0}),mimeTypeUtils.parseMIMEType=function(e){var t=r.exec(e);if(t)return t[1];return e},mimeTypeUtils.parseMIMETypeFromURL=function(r){var t=e.exec(r);if(t)return t[1];return""};var e=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,r=/^([-\w.]+\/[-\w.+]+)/;return mimeTypeUtils}function requireResourceUtils(){if(hasRequiredResourceUtils)return resourceUtils;hasRequiredResourceUtils=1,Object.defineProperty(resourceUtils,"__esModule",{value:!0}),resourceUtils.getResourceContentLength=function(r){if((0,e.isResponse)(r))return r.headers["content-length"]||-1;if((0,e.isBlob)(r))return r.size;if("string"==typeof r)return r.length;if(r instanceof ArrayBuffer)return r.byteLength;if(ArrayBuffer.isView(r))return r.byteLength;return-1},resourceUtils.getResourceUrlAndType=function(t){if((0,e.isResponse)(t)){var a=n(t.url||""),i=t.headers.get("content-type")||"";return{url:a,type:(0,r.parseMIMEType)(i)||(0,r.parseMIMETypeFromURL)(a)}}if((0,e.isBlob)(t))return{url:n(t.name||""),type:t.type||""};if("string"==typeof t)return{url:n(t),type:(0,r.parseMIMETypeFromURL)(t)};return{url:"",type:""}};var e=requireIsType(),r=requireMimeTypeUtils(),t=/\?.*/;function n(e){return e.replace(t,"")}return resourceUtils}function requireResponseUtils(){if(hasRequiredResponseUtils)return responseUtils;hasRequiredResponseUtils=1;var e=interopRequireDefaultExports;Object.defineProperty(responseUtils,"__esModule",{value:!0}),responseUtils.checkResponse=function(e){return o.apply(this,arguments)},responseUtils.checkResponseSync=function(e){if(!e.ok){var r="".concat(e.status," ").concat(e.statusText);throw r=r.length>60?"".concat(r.slice(0,60),"..."):r,new Error(r)}},responseUtils.makeResponse=function(e){return i.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=requireIsType(),a=requireResourceUtils();function i(){return i=(0,t.default)(r.default.mark((function e(t){var i,o,u,s,l,f,d;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,n.isResponse)(t)){e.next=2;break}return e.abrupt("return",t);case 2:return i={},(o=(0,a.getResourceContentLength)(t))>=0&&(i["content-length"]=String(o)),u=(0,a.getResourceUrlAndType)(t),s=u.url,(l=u.type)&&(i["content-type"]=l),e.next=9,c(t);case 9:return(f=e.sent)&&(i["x-first-bytes"]=f),"string"==typeof t&&(t=(new TextEncoder).encode(t)),d=new Response(t,{headers:i}),Object.defineProperty(d,"url",{value:s}),e.abrupt("return",d);case 15:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}function o(){return(o=(0,t.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=5;break}return e.next=3,u(t);case 3:throw n=e.sent,new Error(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return s.apply(this,arguments)}function s(){return(s=(0,t.default)(r.default.mark((function e(t){var n,a,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): "),e.prev=1,a=t.headers.get("Content-Type"),i=t.statusText,!a.includes("application/json")){e.next=11;break}return e.t0=i,e.t1=" ",e.next=9,t.text();case 9:e.t2=e.sent,i=e.t0+=e.t1.concat.call(e.t1,e.t2);case 11:n=(n+=i).length>60?"".concat(n.slice(0,60),"..."):n,e.next=17;break;case 15:e.prev=15,e.t3=e.catch(1);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function c(e){return l.apply(this,arguments)}function l(){return(l=(0,t.default)(r.default.mark((function e(t){var n,a,i,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=5,"string"!=typeof t){e.next=3;break}return e.abrupt("return","data:,".concat(t.slice(0,n)));case 3:if(!(t instanceof Blob)){e.next=8;break}return a=t.slice(0,5),e.next=7,new Promise((function(e){var r=new FileReader;r.onload=function(r){var t;return e(null==r||null===(t=r.target)||void 0===t?void 0:t.result)},r.readAsDataURL(a)}));case 7:return e.abrupt("return",e.sent);case 8:if(!(t instanceof ArrayBuffer)){e.next=12;break}return i=t.slice(0,n),o=f(i),e.abrupt("return","data:base64,".concat(o));case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){for(var r="",t=new Uint8Array(e),n=0;n<t.byteLength;n++)r+=String.fromCharCode(t[n]);return btoa(r)}return responseUtils}var _interopRequireDefault$q=interopRequireDefaultExports;Object.defineProperty(fetchFile$1,"__esModule",{value:!0}),fetchFile$1.fetchFile=fetchFile;var _regenerator$j=_interopRequireDefault$q(requireRegenerator()),_asyncToGenerator2$f=_interopRequireDefault$q(requireAsyncToGenerator()),_loaderUtils$b=requireEs5$b(),_responseUtils=requireResponseUtils();function fetchFile(e,r){return _fetchFile$2.apply(this,arguments)}function _fetchFile$2(){return(_fetchFile$2=(0,_asyncToGenerator2$f.default)(_regenerator$j.default.mark((function e(r,t){var n;return _regenerator$j.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof r){e.next=7;break}return r=(0,_loaderUtils$b.resolvePath)(r),n=t,null!=t&&t.fetch&&"function"!=typeof(null==t?void 0:t.fetch)&&(n=t.fetch),e.next=6,fetch(r,n);case 6:case 9:return e.abrupt("return",e.sent);case 7:return e.next=9,(0,_responseUtils.makeResponse)(r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var readArrayBuffer$1={},_interopRequireDefault$p=interopRequireDefaultExports;Object.defineProperty(readArrayBuffer$1,"__esModule",{value:!0}),readArrayBuffer$1.readArrayBuffer=readArrayBuffer,readArrayBuffer$1.readBlob=readBlob;var _regenerator$i=_interopRequireDefault$p(requireRegenerator()),_asyncToGenerator2$e=_interopRequireDefault$p(requireAsyncToGenerator()),_loaderUtils$a=requireEs5$b();function readArrayBuffer(e,r,t){return _readArrayBuffer.apply(this,arguments)}function _readArrayBuffer(){return(_readArrayBuffer=(0,_asyncToGenerator2$e.default)(_regenerator$i.default.mark((function e(r,t,n){var a;return _regenerator$i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("number"!=typeof r){e.next=4;break}return e.next=3,_loaderUtils$a.fs._readToArrayBuffer(r,t,n);case 3:case 8:return e.abrupt("return",e.sent);case 4:return r instanceof Blob||(r=new Blob([r])),a=r.slice(t,t+n),e.next=8,readBlob(a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function readBlob(e){return _readBlob.apply(this,arguments)}function _readBlob(){return(_readBlob=(0,_asyncToGenerator2$e.default)(_regenerator$i.default.mark((function e(r){return _regenerator$i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){var n=new FileReader;n.onload=function(r){var t;return e(null==r||null===(t=r.target)||void 0===t?void 0:t.result)},n.onerror=function(e){return t(e)},n.readAsArrayBuffer(r)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var readFile={};Object.defineProperty(readFile,"__esModule",{value:!0}),readFile.readFileSync=readFileSync;var _loaderUtils$9=requireEs5$b();function readFileSync(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=(0,_loaderUtils$9.resolvePath)(e),!_loaderUtils$9.isBrowser){var t=_loaderUtils$9.fs.readFileSync(e,r);return"string"!=typeof t?(0,_loaderUtils$9.toArrayBuffer)(t):t}return r.nothrow||(0,_loaderUtils$9.assert)(!1),null}var writeFile$1={},_interopRequireDefault$o=interopRequireDefaultExports;Object.defineProperty(writeFile$1,"__esModule",{value:!0}),writeFile$1.writeFile=writeFile,writeFile$1.writeFileSync=writeFileSync;var _regenerator$h=_interopRequireDefault$o(requireRegenerator()),_asyncToGenerator2$d=_interopRequireDefault$o(requireAsyncToGenerator()),_loaderUtils$8=requireEs5$b();function writeFile(e,r,t){return _writeFile$2.apply(this,arguments)}function _writeFile$2(){return(_writeFile$2=(0,_asyncToGenerator2$d.default)(_regenerator$h.default.mark((function e(r,t,n){return _regenerator$h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,_loaderUtils$8.resolvePath)(r),_loaderUtils$8.isBrowser){e.next=4;break}return e.next=4,_loaderUtils$8.fs.writeFile(r,(0,_loaderUtils$8.toBuffer)(t),{flag:"w"});case 4:(0,_loaderUtils$8.assert)(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function writeFileSync(e,r,t){e=(0,_loaderUtils$8.resolvePath)(e),_loaderUtils$8.isBrowser||_loaderUtils$8.fs.writeFileSync(e,(0,_loaderUtils$8.toBuffer)(r),{flag:"w"}),(0,_loaderUtils$8.assert)(!1)}var loaderOptions={},optionUtils={},loggers={},es5$c={},log$1={},toConsumableArray$1={exports:{}},arrayWithoutHoles$1={exports:{}},arrayLikeToArray$3={exports:{}},hasRequiredArrayLikeToArray$3,hasRequiredArrayWithoutHoles$1;function requireArrayLikeToArray$3(){return hasRequiredArrayLikeToArray$3||(hasRequiredArrayLikeToArray$3=1,function(e){e.exports=function(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n},e.exports.__esModule=!0,e.exports.default=e.exports}(arrayLikeToArray$3)),arrayLikeToArray$3.exports}function requireArrayWithoutHoles$1(){return hasRequiredArrayWithoutHoles$1||(hasRequiredArrayWithoutHoles$1=1,function(e){var r=requireArrayLikeToArray$3();e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(arrayWithoutHoles$1)),arrayWithoutHoles$1.exports}var iterableToArray$1={exports:{}},hasRequiredIterableToArray$1;function requireIterableToArray$1(){return hasRequiredIterableToArray$1||(hasRequiredIterableToArray$1=1,function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(iterableToArray$1)),iterableToArray$1.exports}var unsupportedIterableToArray$3={exports:{}},hasRequiredUnsupportedIterableToArray$3;function requireUnsupportedIterableToArray$3(){return hasRequiredUnsupportedIterableToArray$3||(hasRequiredUnsupportedIterableToArray$3=1,function(e){var r=requireArrayLikeToArray$3();e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}(unsupportedIterableToArray$3)),unsupportedIterableToArray$3.exports}var nonIterableSpread$1={exports:{}},hasRequiredNonIterableSpread$1,hasRequiredToConsumableArray$1;function requireNonIterableSpread$1(){return hasRequiredNonIterableSpread$1||(hasRequiredNonIterableSpread$1=1,function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}(nonIterableSpread$1)),nonIterableSpread$1.exports}function requireToConsumableArray$1(){return hasRequiredToConsumableArray$1||(hasRequiredToConsumableArray$1=1,function(e){var r=requireArrayWithoutHoles$1(),t=requireIterableToArray$1(),n=requireUnsupportedIterableToArray$3(),a=requireNonIterableSpread$1();e.exports=function(e){return r(e)||t(e)||n(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports}(toConsumableArray$1)),toConsumableArray$1.exports}var es5$b={},globals$1={},isBrowser={},isElectron={},hasRequiredIsElectron,hasRequiredIsBrowser;function requireIsElectron(){if(hasRequiredIsElectron)return isElectron;hasRequiredIsElectron=1;var e=interopRequireDefaultExports;Object.defineProperty(isElectron,"__esModule",{value:!0}),isElectron.default=function(e){if("undefined"!=typeof window&&"object"===(0,r.default)(window.process)&&"renderer"===window.process.type)return!0;if("undefined"!=typeof process&&"object"===(0,r.default)(process.versions)&&Boolean(process.versions.electron))return!0;var t="object"===("undefined"==typeof navigator?"undefined":(0,r.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=e||t;if(n&&n.indexOf("Electron")>=0)return!0;return!1};var r=e(require_typeof$3());return isElectron}function requireIsBrowser(){if(hasRequiredIsBrowser)return isBrowser;hasRequiredIsBrowser=1;var e=interopRequireDefaultExports;Object.defineProperty(isBrowser,"__esModule",{value:!0}),isBrowser.default=n,isBrowser.isBrowserMainThread=function(){return n()&&"undefined"!=typeof document};var r=e(require_typeof$3()),t=e(requireIsElectron());function n(){return!("object"===("undefined"==typeof process?"undefined":(0,r.default)(process))&&"[object process]"===String(process)&&!process.browser)||(0,t.default)()}return isBrowser}var globals={},hasRequiredGlobals$1,hasRequiredGlobals;function requireGlobals$1(){if(hasRequiredGlobals$1)return globals;hasRequiredGlobals$1=1;var e=interopRequireDefaultExports;Object.defineProperty(globals,"__esModule",{value:!0}),globals.window=globals.self=globals.process=globals.global=globals.document=globals.console=void 0;var r=e(require_typeof$3()),t={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document,process:"object"===("undefined"==typeof process?"undefined":(0,r.default)(process))&&process},n=globalThis;globals.global=n;var a=t.self||t.window||t.global;globals.self=a;var i=t.window||t.self||t.global;globals.window=i;var o=t.document||{};globals.document=o;var u=t.process||{};globals.process=u;var s=console;return globals.console=s,globals}function requireGlobals(){return hasRequiredGlobals||(hasRequiredGlobals=1,function(e){var r=interopRequireDefaultExports;Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,Object.defineProperty(e,"console",{enumerable:!0,get:function(){return n.console}}),Object.defineProperty(e,"document",{enumerable:!0,get:function(){return n.document}}),Object.defineProperty(e,"global",{enumerable:!0,get:function(){return n.global}}),e.isBrowser=void 0,Object.defineProperty(e,"process",{enumerable:!0,get:function(){return n.process}}),Object.defineProperty(e,"self",{enumerable:!0,get:function(){return n.self}}),Object.defineProperty(e,"window",{enumerable:!0,get:function(){return n.window}});var t=r(requireIsBrowser()),n=requireGlobals$1(),a="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source";e.VERSION=a;var i=(0,t.default)();e.isBrowser=i}(globals$1)),globals$1}var getBrowser={},hasRequiredGetBrowser;function requireGetBrowser(){if(hasRequiredGetBrowser)return getBrowser;hasRequiredGetBrowser=1;var e=interopRequireDefaultExports;Object.defineProperty(getBrowser,"__esModule",{value:!0}),getBrowser.default=function(e){if(!e&&!(0,r.default)())return"Node";if((0,t.default)(e))return"Electron";var a="undefined"!=typeof navigator?navigator:{},i=e||a.userAgent||"";if(i.indexOf("Edge")>-1)return"Edge";var o=-1!==i.indexOf("MSIE "),u=-1!==i.indexOf("Trident/");if(o||u)return"IE";if(n.chrome)return"Chrome";if(n.safari)return"Safari";if(n.mozInnerScreenX)return"Firefox";return"Unknown"},getBrowser.isMobile=function(){return void 0!==n.orientation};var r=e(requireIsBrowser()),t=e(requireIsElectron()),n=globalThis;return getBrowser}var assert$6={},hasRequiredAssert$5,hasRequiredEs5$a;function requireAssert$5(){if(hasRequiredAssert$5)return assert$6;return hasRequiredAssert$5=1,Object.defineProperty(assert$6,"__esModule",{value:!0}),assert$6.default=function(e,r){if(!e)throw new Error(r||"Assertion failed")},assert$6}function requireEs5$a(){return hasRequiredEs5$a||(hasRequiredEs5$a=1,function(e){var r=interopRequireDefaultExports,t=require_typeof$3();Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"VERSION",{enumerable:!0,get:function(){return n.VERSION}}),Object.defineProperty(e,"assert",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"console",{enumerable:!0,get:function(){return a.console}}),Object.defineProperty(e,"document",{enumerable:!0,get:function(){return a.document}}),Object.defineProperty(e,"getBrowser",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"global",{enumerable:!0,get:function(){return a.global}}),Object.defineProperty(e,"isBrowser",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"isBrowserMainThread",{enumerable:!0,get:function(){return i.isBrowserMainThread}}),Object.defineProperty(e,"isElectron",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"isMobile",{enumerable:!0,get:function(){return o.isMobile}}),Object.defineProperty(e,"process",{enumerable:!0,get:function(){return a.process}}),Object.defineProperty(e,"self",{enumerable:!0,get:function(){return a.self}}),Object.defineProperty(e,"window",{enumerable:!0,get:function(){return a.window}});var n=requireGlobals(),a=requireGlobals$1(),i=l(requireIsBrowser()),o=l(requireGetBrowser()),u=r(requireIsElectron()),s=r(requireAssert$5());function c(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(c=function(e){return e?t:r})(e)}function l(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var n=c(r);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}}(es5$b)),es5$b}var localStorage={},hasRequiredLocalStorage;function requireLocalStorage(){if(hasRequiredLocalStorage)return localStorage;hasRequiredLocalStorage=1;var e=interopRequireDefaultExports;Object.defineProperty(localStorage,"__esModule",{value:!0}),localStorage.LocalStorage=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=e(requireDefineProperty$3());var a=function(){function e(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";(0,r.default)(this,e),(0,n.default)(this,"storage",void 0),(0,n.default)(this,"id",void 0),(0,n.default)(this,"config",void 0),this.storage=function(e){try{var r=window[e],t="__storage_test__";return r.setItem(t,t),r.removeItem(t),r}catch(e){return null}}(i),this.id=t,this.config=a,this._loadConfiguration()}return(0,t.default)(e,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(e){if(Object.assign(this.config,e),this.storage){var r=JSON.stringify(this.config);this.storage.setItem(this.id,r)}}},{key:"_loadConfiguration",value:function(){var e={};if(this.storage){var r=this.storage.getItem(this.id);e=r?JSON.parse(r):{}}return Object.assign(this.config,e),this}}]),e}();return localStorage.LocalStorage=a,localStorage}var formatters={},hasRequiredFormatters;function requireFormatters(){if(hasRequiredFormatters)return formatters;function e(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isInteger,a=void 0!==n&&n;if(Array.isArray(r)||ArrayBuffer.isView(r))return function(r,t){for(var n=t.maxElts,a=void 0===n?16:n,i=t.size,o=void 0===i?1:i,u="[",s=0;s<r.length&&s<a;++s)s>0&&(u+=",".concat(s%o==0?" ":"")),u+=e(r[s],t);var c=r.length>a?"...":"]";return"".concat(u).concat(c)}(r,t);if(!Number.isFinite(r))return String(r);if(Math.abs(r)<1e-16)return a?"0":"0.";if(a)return r.toFixed(0);if(Math.abs(r)>100&&Math.abs(r)<1e4)return r.toFixed(0);var i=r.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}return hasRequiredFormatters=1,Object.defineProperty(formatters,"__esModule",{value:!0}),formatters.formatImage=function(e,r,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,a=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>n&&(t=Math.min(t,n/e.width));var i=e.width*t,o=e.height*t,u=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(i/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(a,");"),"background-size:".concat(i,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(r," %c+"),u]},formatters.formatTime=function(e){var r;r=e<10?"".concat(e.toFixed(2),"ms"):e<100?"".concat(e.toFixed(1),"ms"):e<1e3?"".concat(e.toFixed(0),"ms"):"".concat((e/1e3).toFixed(2),"s");return r},formatters.formatValue=e,formatters.leftPad=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,t=Math.max(r-e.length,0);return"".concat(" ".repeat(t)).concat(e)},formatters.rightPad=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,t=Math.max(r-e.length,0);return"".concat(e).concat(" ".repeat(t))},formatters}var color={},hasRequiredColor;function requireColor(){if(hasRequiredColor)return color;hasRequiredColor=1,Object.defineProperty(color,"__esModule",{value:!0}),color.COLOR=void 0,color.addColor=function(e,n,a){r.isBrowser||"string"!=typeof e||(n&&(n=t(n),e="[".concat(n,"m").concat(e,"[39m")),a&&(n=t(a),e="[".concat(a+10,"m").concat(e,"[49m")));return e};var e,r=requireEs5$a();function t(r){return"string"==typeof r?e[r.toUpperCase()]||e.WHITE:r}return color.COLOR=e,function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(e||(color.COLOR=e={})),color}var autobind={},hasRequiredAutobind;function requireAutobind(){if(hasRequiredAutobind)return autobind;function e(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}return hasRequiredAutobind=1,Object.defineProperty(autobind,"__esModule",{value:!0}),autobind.autobind=function(r){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],a=Object.getPrototypeOf(r),i=function(r,t){var n="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=function(r,t){if(!r)return;if("string"==typeof r)return e(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(r);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(r,t)}(r))||t&&r&&"number"==typeof r.length){n&&(r=n);var a=0,i=function(){};return{s:i,n:function(){return a>=r.length?{done:!0}:{done:!1,value:r[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(r)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}(Object.getOwnPropertyNames(a));try{var o=function(){var e=t.value;"function"==typeof r[e]&&(n.find((function(r){return e===r}))||(r[e]=r[e].bind(r)))};for(i.s();!(t=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}},autobind}var assert$5={},hasRequiredAssert$4;function requireAssert$4(){if(hasRequiredAssert$4)return assert$5;return hasRequiredAssert$4=1,Object.defineProperty(assert$5,"__esModule",{value:!0}),assert$5.default=function(e,r){if(!e)throw new Error(r||"Assertion failed")},assert$5}var hiResTimestamp={},hasRequiredHiResTimestamp,hasRequiredLog$1;function requireHiResTimestamp(){if(hasRequiredHiResTimestamp)return hiResTimestamp;hasRequiredHiResTimestamp=1,Object.defineProperty(hiResTimestamp,"__esModule",{value:!0}),hiResTimestamp.getHiResTimestamp=function(){var r,t,n;if(e.isBrowser&&"performance"in e.window)r=null===e.window||void 0===e.window||null===(t=e.window.performance)||void 0===t||null===(n=t.now)||void 0===n?void 0:n.call(t);else if("hrtime"in e.process){var a,i=null===e.process||void 0===e.process||null===(a=e.process.hrtime)||void 0===a?void 0:a.call(e.process);r=1e3*i[0]+i[1]/1e6}else r=Date.now();return r};var e=requireEs5$a();return hiResTimestamp}function requireLog$1(){if(hasRequiredLog$1)return log$1;hasRequiredLog$1=1;var e=interopRequireDefaultExports;Object.defineProperty(log$1,"__esModule",{value:!0}),log$1.Log=void 0,log$1.normalizeArguments=_;var r=e(require_typeof$3()),t=e(requireToConsumableArray$1()),n=e(requireClassCallCheck$3()),a=e(requireCreateClass$3()),i=e(requireDefineProperty$3()),o=requireEs5$a(),u=requireLocalStorage(),s=requireFormatters(),c=requireColor(),l=requireAutobind(),f=e(requireAssert$4()),d=requireHiResTimestamp(),p={debug:o.isBrowser&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},h={enabled:!0,level:0};function y(){}var v={},m={once:!0},b=function(){function e(){var r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""}).id;(0,n.default)(this,e),(0,i.default)(this,"id",void 0),(0,i.default)(this,"VERSION",o.VERSION),(0,i.default)(this,"_startTs",(0,d.getHiResTimestamp)()),(0,i.default)(this,"_deltaTs",(0,d.getHiResTimestamp)()),(0,i.default)(this,"_storage",void 0),(0,i.default)(this,"userData",{}),(0,i.default)(this,"LOG_THROTTLE_TIMEOUT",0),this.id=r,this.userData={},this._storage=new u.LocalStorage("__probe-".concat(this.id,"__"),h),this.timeStamp("".concat(this.id," started")),(0,l.autobind)(this),Object.seal(this)}return(0,a.default)(e,[{key:"level",get:function(){return this.getLevel()},set:function(e){this.setLevel(e)}},{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number(((0,d.getHiResTimestamp)()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number(((0,d.getHiResTimestamp)()-this._deltaTs).toPrecision(10))}},{key:"priority",get:function(){return this.level},set:function(e){this.level=e}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.setConfiguration({enabled:e}),this}},{key:"setLevel",value:function(e){return this._storage.setConfiguration({level:e}),this}},{key:"get",value:function(e){return this._storage.config[e]}},{key:"set",value:function(e,r){this._storage.setConfiguration((0,i.default)({},e,r))}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"assert",value:function(e,r){(0,f.default)(e,r)}},{key:"warn",value:function(e){return this._getLogFunction(0,e,p.warn,arguments,m)}},{key:"error",value:function(e){return this._getLogFunction(0,e,p.error,arguments)}},{key:"deprecated",value:function(e,r){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(r,"` instead"))}},{key:"removed",value:function(e,r){return this.error("`".concat(e,"` has been removed. Use `").concat(r,"` instead"))}},{key:"probe",value:function(e,r){return this._getLogFunction(e,r,p.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(e,r){return this._getLogFunction(e,r,p.debug,arguments)}},{key:"info",value:function(e,r){return this._getLogFunction(e,r,console.info,arguments)}},{key:"once",value:function(e,r){for(var t=arguments.length,n=new Array(t>2?t-2:0),a=2;a<t;a++)n[a-2]=arguments[a];return this._getLogFunction(e,r,p.debug||p.info,arguments,m)}},{key:"table",value:function(e,r,t){return r?this._getLogFunction(e,r,console.table||y,t&&[t],{tag:A(r)}):y}},{key:"image",value:function(e){var r,n=e.logLevel,a=e.priority,i=e.image,u=e.message,c=void 0===u?"":u,l=e.scale,f=void 0===l?1:l;return this._shouldLog(n||a)?o.isBrowser?function(e){var r=e.image,n=e.message,a=void 0===n?"":n,i=e.scale,o=void 0===i?1:i;if("string"==typeof r){var u=new Image;return u.onload=function(){var e,r=(0,s.formatImage)(u,a,o);(e=console).log.apply(e,(0,t.default)(r))},u.src=r,y}var c=r.nodeName||"";if("img"===c.toLowerCase()){var l;return(l=console).log.apply(l,(0,t.default)((0,s.formatImage)(r,a,o))),y}if("canvas"===c.toLowerCase()){var f=new Image;return f.onload=function(){var e;return(e=console).log.apply(e,(0,t.default)((0,s.formatImage)(f,a,o)))},f.src=r.toDataURL(),y}return y}({image:i,message:c,scale:f}):((r={image:i,message:c,scale:f}).image,r.message,r.scale,console.warn("removed"),y):y}},{key:"time",value:function(e,r){return this._getLogFunction(e,r,console.time?console.time:console.info)}},{key:"timeEnd",value:function(e,r){return this._getLogFunction(e,r,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(e,r){return this._getLogFunction(e,r,console.timeStamp||y)}},{key:"group",value:function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},n=_({logLevel:e,message:r,opts:t}),a=t.collapsed;return n.method=(a?console.groupCollapsed:console.group)||console.info,this._getLogFunction(n)}},{key:"groupCollapsed",value:function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,r,Object.assign({},t,{collapsed:!0}))}},{key:"groupEnd",value:function(e){return this._getLogFunction(e,"",console.groupEnd||y)}},{key:"withGroup",value:function(e,r,t){this.group(e,r)();try{t()}finally{this.groupEnd(e)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(e){return this.isEnabled()&&this.getLevel()>=g(e)}},{key:"_getLogFunction",value:function(e,r,n,a,i){if(this._shouldLog(e)){var o;i=_({logLevel:e,message:r,args:a,opts:i}),n=n||i.method,(0,f.default)(n),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=(0,d.getHiResTimestamp)();var u=i.tag||i.message;if(i.once){if(v[u])return y;v[u]=(0,d.getHiResTimestamp)()}return r=function(e,r,t){if("string"==typeof r){var n=t.time?(0,s.leftPad)((0,s.formatTime)(t.total)):"";r=t.time?"".concat(e,": ").concat(n,"  ").concat(r):"".concat(e,": ").concat(r),r=(0,c.addColor)(r,t.color,t.background)}return r}(this.id,i.message,i),(o=n).bind.apply(o,[console,r].concat((0,t.default)(i.args)))}return y}}]),e}();function g(e){if(!e)return 0;var t;switch((0,r.default)(e)){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return(0,f.default)(Number.isFinite(t)&&t>=0),t}function _(e){var t=e.logLevel,n=e.message;e.logLevel=g(t);for(var a=e.args?Array.from(e.args):[];a.length&&a.shift()!==n;);switch((0,r.default)(t)){case"string":case"function":void 0!==n&&a.unshift(n),e.message=t;break;case"object":Object.assign(e,t)}"function"==typeof e.message&&(e.message=e.message());var i=(0,r.default)(e.message);return(0,f.default)("string"===i||"object"===i),Object.assign(e,{args:a},e.opts)}function A(e){for(var r in e)for(var t in e[r])return t||"untitled";return"empty"}return log$1.Log=b,(0,i.default)(b,"VERSION",o.VERSION),log$1}var init={},hasRequiredInit,hasRequiredEs5$9,hasRequiredLoggers;function requireInit(){return hasRequiredInit||(hasRequiredInit=1,globalThis.probe={}),init}function requireEs5$9(){return hasRequiredEs5$9||(hasRequiredEs5$9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"COLOR",{enumerable:!0,get:function(){return t.COLOR}}),Object.defineProperty(e,"LocalStorage",{enumerable:!0,get:function(){return i.LocalStorage}}),Object.defineProperty(e,"Log",{enumerable:!0,get:function(){return r.Log}}),Object.defineProperty(e,"addColor",{enumerable:!0,get:function(){return t.addColor}}),Object.defineProperty(e,"autobind",{enumerable:!0,get:function(){return a.autobind}}),e.default=void 0,Object.defineProperty(e,"getHiResTimestamp",{enumerable:!0,get:function(){return o.getHiResTimestamp}}),Object.defineProperty(e,"leftPad",{enumerable:!0,get:function(){return n.leftPad}}),Object.defineProperty(e,"rightPad",{enumerable:!0,get:function(){return n.rightPad}});var r=requireLog$1(),t=requireColor(),n=requireFormatters(),a=requireAutobind(),i=requireLocalStorage(),o=requireHiResTimestamp();requireInit();var u=new r.Log({id:"@probe.gl/log"});e.default=u}(es5$c)),es5$c}function requireLoggers(){if(hasRequiredLoggers)return loggers;hasRequiredLoggers=1;var e=interopRequireDefaultExports;Object.defineProperty(loggers,"__esModule",{value:!0}),loggers.probeLog=loggers.NullLog=loggers.ConsoleLog=void 0;var r=e(requireDefineProperty$3()),t=e(requireClassCallCheck$3()),n=e(requireCreateClass$3()),a=new(requireEs5$9().Log)({id:"loaders.gl"});loggers.probeLog=a;var i=function(){function e(){(0,t.default)(this,e)}return(0,n.default)(e,[{key:"log",value:function(){return function(){}}},{key:"info",value:function(){return function(){}}},{key:"warn",value:function(){return function(){}}},{key:"error",value:function(){return function(){}}}]),e}();loggers.NullLog=i;var o=function(){function e(){(0,t.default)(this,e),(0,r.default)(this,"console",void 0),this.console=console}return(0,n.default)(e,[{key:"log",value:function(){for(var e,r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return(e=this.console.log).bind.apply(e,[this.console].concat(t))}},{key:"info",value:function(){for(var e,r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return(e=this.console.info).bind.apply(e,[this.console].concat(t))}},{key:"warn",value:function(){for(var e,r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return(e=this.console.warn).bind.apply(e,[this.console].concat(t))}},{key:"error",value:function(){for(var e,r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return(e=this.console.error).bind.apply(e,[this.console].concat(t))}}]),e}();return loggers.ConsoleLog=o,loggers}var optionDefaults={},hasRequiredOptionDefaults;function requireOptionDefaults(){if(hasRequiredOptionDefaults)return optionDefaults;hasRequiredOptionDefaults=1,Object.defineProperty(optionDefaults,"__esModule",{value:!0}),optionDefaults.REMOVED_LOADER_OPTIONS=optionDefaults.DEFAULT_LOADER_OPTIONS=void 0;var e=requireEs5$b(),r={fetch:null,mimeType:void 0,nothrow:!1,log:new(requireLoggers().ConsoleLog),CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:e.isBrowser,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]};optionDefaults.DEFAULT_LOADER_OPTIONS=r;return optionDefaults.REMOVED_LOADER_OPTIONS={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"},optionDefaults}var _interopRequireDefault$n=interopRequireDefaultExports;Object.defineProperty(optionUtils,"__esModule",{value:!0}),optionUtils.getFetchFunction=getFetchFunction,optionUtils.getGlobalLoaderOptions=void 0,optionUtils.getGlobalLoaderState=getGlobalLoaderState,optionUtils.normalizeOptions=normalizeOptions,optionUtils.setGlobalOptions=setGlobalOptions;var _defineProperty2$8=_interopRequireDefault$n(requireDefineProperty$3()),_isType$4=requireIsType(),_fetchFile$1=fetchFile$1,_loggers=requireLoggers(),_optionDefaults=requireOptionDefaults();function _createForOfIteratorHelper$2(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_unsupportedIterableToArray$2(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}function _unsupportedIterableToArray$2(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray$2(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray$2(e,r):void 0}}function _arrayLikeToArray$2(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function ownKeys$7(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread$7(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys$7(Object(t),!0).forEach((function(r){(0,_defineProperty2$8.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys$7(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function getGlobalLoaderState(){globalThis.loaders=globalThis.loaders||{};var e=globalThis.loaders;return e._state=e._state||{},e._state}var getGlobalLoaderOptions=function(){var e=getGlobalLoaderState();return e.globalOptions=e.globalOptions||_objectSpread$7({},_optionDefaults.DEFAULT_LOADER_OPTIONS),e.globalOptions};function setGlobalOptions(e){var r=getGlobalLoaderState(),t=getGlobalLoaderOptions();r.globalOptions=normalizeOptionsInternal(t,e)}function normalizeOptions(e,r,t,n){return t=t||[],validateOptions(e,t=Array.isArray(t)?t:[t]),normalizeOptionsInternal(r,e,n)}function getFetchFunction(e,r){var t=getGlobalLoaderOptions(),n=e||t;return"function"==typeof n.fetch?n.fetch:(0,_isType$4.isObject)(n.fetch)?function(e){return(0,_fetchFile$1.fetchFile)(e,n)}:null!=r&&r.fetch?null==r?void 0:r.fetch:_fetchFile$1.fetchFile}function validateOptions(e,r){validateOptionsObject(e,null,_optionDefaults.DEFAULT_LOADER_OPTIONS,_optionDefaults.REMOVED_LOADER_OPTIONS,r);var t,n=_createForOfIteratorHelper$2(r);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=e&&e[a.id]||{},o=a.options&&a.options[a.id]||{},u=a.deprecatedOptions&&a.deprecatedOptions[a.id]||{};validateOptionsObject(i,a.id,o,u,r)}}catch(e){n.e(e)}finally{n.f()}}function validateOptionsObject(e,r,t,n,a){var i=r||"Top level",o=r?"".concat(r,"."):"";for(var u in e){var s=!r&&(0,_isType$4.isObject)(e[u]);if(!(u in t)&&!("baseUri"===u&&!r)&&!("workerUrl"===u&&r))if(u in n)_loggers.probeLog.warn("".concat(i," loader option '").concat(o).concat(u,"' no longer supported, use '").concat(n[u],"'"))();else if(!s){var c=findSimilarOption(u,a);_loggers.probeLog.warn("".concat(i," loader option '").concat(o).concat(u,"' not recognized. ").concat(c))()}}}function findSimilarOption(e,r){var t,n=e.toLowerCase(),a="",i=_createForOfIteratorHelper$2(r);try{for(i.s();!(t=i.n()).done;){var o=t.value;for(var u in o.options){if(e===u)return"Did you mean '".concat(o.id,".").concat(u,"'?");var s=u.toLowerCase();(n.startsWith(s)||s.startsWith(n))&&(a=a||"Did you mean '".concat(o.id,".").concat(u,"'?"))}}}catch(e){i.e(e)}finally{i.f()}return a}function normalizeOptionsInternal(e,r,t){var n=_objectSpread$7({},e.options||{});return addUrlOptions(n,t),null===n.log&&(n.log=new _loggers.NullLog),mergeNestedFields(n,getGlobalLoaderOptions()),mergeNestedFields(n,r),n}function mergeNestedFields(e,r){for(var t in r)if(t in r){var n=r[t];(0,_isType$4.isPureObject)(n)&&(0,_isType$4.isPureObject)(e[t])?e[t]=_objectSpread$7(_objectSpread$7({},e[t]),r[t]):e[t]=r[t]}}function addUrlOptions(e,r){r&&!("baseUri"in e)&&(e.baseUri=r)}optionUtils.getGlobalLoaderOptions=getGlobalLoaderOptions,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getLoaderOptions",{enumerable:!0,get:function(){return r.getGlobalLoaderOptions}}),Object.defineProperty(e,"setLoaderOptions",{enumerable:!0,get:function(){return r.setGlobalOptions}});var r=optionUtils}(loaderOptions);var registerLoaders$1={},normalizeLoader$1={},_interopRequireDefault$m=interopRequireDefaultExports;Object.defineProperty(normalizeLoader$1,"__esModule",{value:!0}),normalizeLoader$1.isLoaderObject=isLoaderObject,normalizeLoader$1.normalizeLoader=normalizeLoader;var _defineProperty2$7=_interopRequireDefault$m(requireDefineProperty$3()),_loaderUtils$7=requireEs5$b();function ownKeys$6(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread$6(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys$6(Object(t),!0).forEach((function(r){(0,_defineProperty2$7.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys$6(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function isLoaderObject(e){var r;return!!e&&(Array.isArray(e)&&(e=e[0]),Array.isArray(null===(r=e)||void 0===r?void 0:r.extensions))}function normalizeLoader(e){var r,t,n;return(0,_loaderUtils$7.assert)(e,"null loader"),(0,_loaderUtils$7.assert)(isLoaderObject(e),"invalid loader"),Array.isArray(e)&&(n=e[1],e=_objectSpread$6(_objectSpread$6({},e=e[0]),{},{options:_objectSpread$6(_objectSpread$6({},e.options),n)})),(null!==(r=e)&&void 0!==r&&r.parseTextSync||null!==(t=e)&&void 0!==t&&t.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}Object.defineProperty(registerLoaders$1,"__esModule",{value:!0}),registerLoaders$1._unregisterLoaders=_unregisterLoaders,registerLoaders$1.getRegisteredLoaders=getRegisteredLoaders,registerLoaders$1.registerLoaders=registerLoaders;var _normalizeLoader$6=normalizeLoader$1,_optionUtils$5=optionUtils;function _createForOfIteratorHelper$1(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_unsupportedIterableToArray$1(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}function _unsupportedIterableToArray$1(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray$1(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray$1(e,r):void 0}}function _arrayLikeToArray$1(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var getGlobalLoaderRegistry=function(){var e=(0,_optionUtils$5.getGlobalLoaderState)();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function registerLoaders(e){var r,t=getGlobalLoaderRegistry(),n=_createForOfIteratorHelper$1(e=Array.isArray(e)?e:[e]);try{var a=function(){var e=r.value,n=(0,_normalizeLoader$6.normalizeLoader)(e);t.find((function(e){return n===e}))||t.unshift(n)};for(n.s();!(r=n.n()).done;)a()}catch(e){n.e(e)}finally{n.f()}}function getRegisteredLoaders(){return getGlobalLoaderRegistry()}function _unregisterLoaders(){(0,_optionUtils$5.getGlobalLoaderState)().loaderRegistry=[]}var selectLoader$1={},log={},hasRequiredLog;function requireLog(){if(hasRequiredLog)return log;hasRequiredLog=1,Object.defineProperty(log,"__esModule",{value:!0}),log.log=void 0;var e=new(requireEs5$9().Log)({id:"loaders.gl"});return log.log=e,log}var _interopRequireDefault$l=interopRequireDefaultExports;Object.defineProperty(selectLoader$1,"__esModule",{value:!0}),selectLoader$1.selectLoader=selectLoader,selectLoader$1.selectLoaderSync=selectLoaderSync;var _regenerator$g=_interopRequireDefault$l(requireRegenerator()),_defineProperty2$6=_interopRequireDefault$l(requireDefineProperty$3()),_typeof2$3=_interopRequireDefault$l(require_typeof$3()),_toConsumableArray2=_interopRequireDefault$l(requireToConsumableArray$1()),_asyncToGenerator2$c=_interopRequireDefault$l(requireAsyncToGenerator()),_loaderUtils$6=requireEs5$b(),_normalizeLoader$5=normalizeLoader$1,_log=requireLog(),_resourceUtils$3=requireResourceUtils(),_registerLoaders=registerLoaders$1,_isType$3=requireIsType();function ownKeys$5(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread$5(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys$5(Object(t),!0).forEach((function(r){(0,_defineProperty2$6.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys$5(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _createForOfIteratorHelper(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_unsupportedIterableToArray(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var EXT_PATTERN=/\.([^.]+)$/;function selectLoader(e){return _selectLoader$3.apply(this,arguments)}function _selectLoader$3(){return _selectLoader$3=(0,_asyncToGenerator2$c.default)(_regenerator$g.default.mark((function e(r){var t,n,a,i,o=arguments;return _regenerator$g.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>1&&void 0!==o[1]?o[1]:[],n=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,validHTTPResponse(r)){e.next=5;break}return e.abrupt("return",null);case 5:if(!(i=selectLoaderSync(r,t,_objectSpread$5(_objectSpread$5({},n),{},{nothrow:!0}),a))){e.next=8;break}return e.abrupt("return",i);case 8:if(!(0,_isType$3.isBlob)(r)){e.next=13;break}return e.next=11,r.slice(0,10).arrayBuffer();case 11:r=e.sent,i=selectLoaderSync(r,t,n,a);case 13:if(i||null!=n&&n.nothrow){e.next=15;break}throw new Error(getNoValidLoaderMessage(r));case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)}))),_selectLoader$3.apply(this,arguments)}function selectLoaderSync(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(!validHTTPResponse(e))return null;if(r&&!Array.isArray(r))return(0,_normalizeLoader$5.normalizeLoader)(r);var a,i=[];(r&&(i=i.concat(r)),null!=t&&t.ignoreRegisteredLoaders)||(a=i).push.apply(a,(0,_toConsumableArray2.default)((0,_registerLoaders.getRegisteredLoaders)()));normalizeLoaders(i);var o=selectLoaderInternal(e,i,t,n);if(!(o||null!=t&&t.nothrow))throw new Error(getNoValidLoaderMessage(e));return o}function selectLoaderInternal(e,r,t,n){var a,i=(0,_resourceUtils$3.getResourceUrlAndType)(e),o=i.url,u=i.type,s=o||(null==n?void 0:n.url),c=null,l="";(null!=t&&t.mimeType&&(c=findLoaderByMIMEType(r,null==t?void 0:t.mimeType),l="match forced by supplied MIME type ".concat(null==t?void 0:t.mimeType)),c=c||findLoaderByUrl(r,s),l=l||(c?"matched url ".concat(s):""),c=c||findLoaderByMIMEType(r,u),l=l||(c?"matched MIME type ".concat(u):""),c=c||findLoaderByInitialBytes(r,e),l=l||(c?"matched initial data ".concat(getFirstCharacters(e)):""),c=c||findLoaderByMIMEType(r,null==t?void 0:t.fallbackMimeType),l=l||(c?"matched fallback MIME type ".concat(u):""))&&_log.log.log(1,"selectLoader selected ".concat(null===(a=c)||void 0===a?void 0:a.name,": ").concat(l,"."));return c}function validHTTPResponse(e){return!(e instanceof Response&&204===e.status)}function getNoValidLoaderMessage(e){var r=(0,_resourceUtils$3.getResourceUrlAndType)(e),t=r.url,n=r.type,a="No valid loader found (";a+=t?"".concat(_loaderUtils$6.path.filename(t),", "):"no url provided, ",a+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");var i=e?getFirstCharacters(e):"";return a+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",a+=")"}function normalizeLoaders(e){var r,t=_createForOfIteratorHelper(e);try{for(t.s();!(r=t.n()).done;){var n=r.value;(0,_normalizeLoader$5.normalizeLoader)(n)}}catch(e){t.e(e)}finally{t.f()}}function findLoaderByUrl(e,r){var t=r&&EXT_PATTERN.exec(r),n=t&&t[1];return n?findLoaderByExtension(e,n):null}function findLoaderByExtension(e,r){r=r.toLowerCase();var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var a,i=t.value,o=_createForOfIteratorHelper(i.extensions);try{for(o.s();!(a=o.n()).done;){if(a.value.toLowerCase()===r)return i}}catch(e){o.e(e)}finally{o.f()}}}catch(e){n.e(e)}finally{n.f()}return null}function findLoaderByMIMEType(e,r){var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.mimeTypes&&a.mimeTypes.includes(r))return a;if(r==="application/x.".concat(a.id))return a}}catch(e){n.e(e)}finally{n.f()}return null}function findLoaderByInitialBytes(e,r){if(!r)return null;var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if("string"==typeof r){if(testDataAgainstText(r,a))return a}else if(ArrayBuffer.isView(r)){if(testDataAgainstBinary(r.buffer,r.byteOffset,a))return a}else if(r instanceof ArrayBuffer){if(testDataAgainstBinary(r,0,a))return a}}}catch(e){n.e(e)}finally{n.f()}return null}function testDataAgainstText(e,r){return r.testText?r.testText(e):(Array.isArray(r.tests)?r.tests:[r.tests]).some((function(r){return e.startsWith(r)}))}function testDataAgainstBinary(e,r,t){return(Array.isArray(t.tests)?t.tests:[t.tests]).some((function(n){return testBinary(e,r,t,n)}))}function testBinary(e,r,t,n){if(n instanceof ArrayBuffer)return(0,_loaderUtils$6.compareArrayBuffers)(n,e,n.byteLength);switch((0,_typeof2$3.default)(n)){case"function":return n(e,t);case"string":return n===getMagicString(e,r,n.length);default:return!1}}function getFirstCharacters(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof e)return e.slice(0,r);if(ArrayBuffer.isView(e))return getMagicString(e.buffer,e.byteOffset,r);if(e instanceof ArrayBuffer){return getMagicString(e,0,r)}return""}function getMagicString(e,r,t){if(e.byteLength<r+t)return"";for(var n=new DataView(e),a="",i=0;i<t;i++)a+=String.fromCharCode(n.getUint8(r+i));return a}var parse$4={},getData={},makeIterator$1={},makeStringIterator$1={},_interopRequireDefault$k=interopRequireDefaultExports;Object.defineProperty(makeStringIterator$1,"__esModule",{value:!0}),makeStringIterator$1.makeStringIterator=makeStringIterator;var _regenerator$f=_interopRequireDefault$k(requireRegenerator()),_marked$1=_regenerator$f.default.mark(makeStringIterator),DEFAULT_CHUNK_SIZE$2=262144;function makeStringIterator(e,r){var t,n,a,i,o;return _regenerator$f.default.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:t=(null==r?void 0:r.chunkSize)||DEFAULT_CHUNK_SIZE$2,n=0,a=new TextEncoder;case 3:if(!(n<e.length)){u.next=11;break}return i=Math.min(e.length-n,t),o=e.slice(n,n+i),n+=i,u.next=9,a.encode(o);case 9:u.next=3;break;case 11:case"end":return u.stop()}}),_marked$1)}var makeArrayBufferIterator$1={},_interopRequireDefault$j=interopRequireDefaultExports;Object.defineProperty(makeArrayBufferIterator$1,"__esModule",{value:!0}),makeArrayBufferIterator$1.makeArrayBufferIterator=makeArrayBufferIterator;var _regenerator$e=_interopRequireDefault$j(requireRegenerator()),_marked=_regenerator$e.default.mark(makeArrayBufferIterator),DEFAULT_CHUNK_SIZE$1=262144;function makeArrayBufferIterator(e){var r,t,n,a,i,o,u=arguments;return _regenerator$e.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r=(u.length>1&&void 0!==u[1]?u[1]:{}).chunkSize,t=void 0===r?DEFAULT_CHUNK_SIZE$1:r,n=0;case 3:if(!(n<e.byteLength)){s.next=14;break}return a=Math.min(e.byteLength-n,t),i=new ArrayBuffer(a),o=new Uint8Array(e,n,a),new Uint8Array(i).set(o),n+=a,s.next=12,i;case 12:s.next=3;break;case 14:case"end":return s.stop()}}),_marked)}var makeBlobIterator$1={},_interopRequireDefault$i=interopRequireDefaultExports;Object.defineProperty(makeBlobIterator$1,"__esModule",{value:!0}),makeBlobIterator$1.makeBlobIterator=makeBlobIterator;var _regenerator$d=_interopRequireDefault$i(requireRegenerator()),_awaitAsyncGenerator2$3=_interopRequireDefault$i(requireAwaitAsyncGenerator()),_wrapAsyncGenerator2$3=_interopRequireDefault$i(requireWrapAsyncGenerator()),DEFAULT_CHUNK_SIZE=1048576;function makeBlobIterator(e,r){return _makeBlobIterator$1.apply(this,arguments)}function _makeBlobIterator$1(){return(_makeBlobIterator$1=(0,_wrapAsyncGenerator2$3.default)(_regenerator$d.default.mark((function e(r,t){var n,a,i,o;return _regenerator$d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(null==t?void 0:t.chunkSize)||DEFAULT_CHUNK_SIZE,a=0;case 2:if(!(a<r.size)){e.next=12;break}return i=a+n,e.next=6,(0,_awaitAsyncGenerator2$3.default)(r.slice(a,i).arrayBuffer());case 6:return o=e.sent,a=i,e.next=10,o;case 10:e.next=2;break;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var makeStreamIterator$1={},_interopRequireDefault$h=interopRequireDefaultExports;Object.defineProperty(makeStreamIterator$1,"__esModule",{value:!0}),makeStreamIterator$1.makeStreamIterator=makeStreamIterator;var _regenerator$c=_interopRequireDefault$h(requireRegenerator()),_awaitAsyncGenerator2$2=_interopRequireDefault$h(requireAwaitAsyncGenerator()),_wrapAsyncGenerator2$2=_interopRequireDefault$h(requireWrapAsyncGenerator()),_loaderUtils$5=requireEs5$b();function _asyncIterator$3(e){var r,t,n,a=2;for("undefined"!=typeof Symbol&&(t=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(t&&null!=(r=e[t]))return r.call(e);if(n&&null!=(r=e[n]))return new AsyncFromSyncIterator$3(r.call(e));t="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function AsyncFromSyncIterator$3(e){function r(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var r=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:r}}))}return AsyncFromSyncIterator$3=function(e){this.s=e,this.n=e.next},AsyncFromSyncIterator$3.prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):r(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):r(t.apply(this.s,arguments))}},new AsyncFromSyncIterator$3(e)}function makeStreamIterator(e,r){return _loaderUtils$5.isBrowser?makeBrowserStreamIterator(e,r):makeNodeStreamIterator(e,r)}function makeBrowserStreamIterator(e,r){return _makeBrowserStreamIterator.apply(this,arguments)}function _makeBrowserStreamIterator(){return _makeBrowserStreamIterator=(0,_wrapAsyncGenerator2$2.default)(_regenerator$c.default.mark((function e(r,t){var n,a,i,o,u,s;return _regenerator$c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.getReader(),e.prev=1;case 2:return i=a||n.read(),null!=t&&t._streamReadAhead&&(a=n.read()),e.next=7,(0,_awaitAsyncGenerator2$2.default)(i);case 7:if(o=e.sent,u=o.done,s=o.value,!u){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,(0,_loaderUtils$5.toArrayBuffer)(s);case 14:e.next=2;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),n.releaseLock();case 21:case"end":return e.stop()}}),e,null,[[1,18]])}))),_makeBrowserStreamIterator.apply(this,arguments)}function makeNodeStreamIterator(e,r){return _makeNodeStreamIterator.apply(this,arguments)}function _makeNodeStreamIterator(){return _makeNodeStreamIterator=(0,_wrapAsyncGenerator2$2.default)(_regenerator$c.default.mark((function e(r,t){var n,a,i,o,u,s;return _regenerator$c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=!1,e.prev=2,o=_asyncIterator$3(r);case 4:return e.next=6,(0,_awaitAsyncGenerator2$2.default)(o.next());case 6:if(!(n=!(u=e.sent).done)){e.next=13;break}return s=u.value,e.next=10,(0,_loaderUtils$5.toArrayBuffer)(s);case 10:n=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),a=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==o.return){e.next=24;break}return e.next=24,(0,_awaitAsyncGenerator2$2.default)(o.return());case 24:if(e.prev=24,!a){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:case"end":return e.stop()}}),e,null,[[2,15,19,29],[20,,24,28]])}))),_makeNodeStreamIterator.apply(this,arguments)}Object.defineProperty(makeIterator$1,"__esModule",{value:!0}),makeIterator$1.makeIterator=makeIterator;var _makeStringIterator=makeStringIterator$1,_makeArrayBufferIterator=makeArrayBufferIterator$1,_makeBlobIterator=makeBlobIterator$1,_makeStreamIterator=makeStreamIterator$1,_isType$2=requireIsType(),hasRequiredGetData;function makeIterator(e,r){if("string"==typeof e)return(0,_makeStringIterator.makeStringIterator)(e,r);if(e instanceof ArrayBuffer)return(0,_makeArrayBufferIterator.makeArrayBufferIterator)(e,r);if((0,_isType$2.isBlob)(e))return(0,_makeBlobIterator.makeBlobIterator)(e,r);if((0,_isType$2.isReadableStream)(e))return(0,_makeStreamIterator.makeStreamIterator)(e,r);if((0,_isType$2.isResponse)(e)){var t=e;return(0,_makeStreamIterator.makeStreamIterator)(t.body,r)}throw new Error("makeIterator")}function requireGetData(){if(hasRequiredGetData)return getData;hasRequiredGetData=1;var e=interopRequireDefaultExports;Object.defineProperty(getData,"__esModule",{value:!0}),getData.getArrayBufferOrStringFromData=function(e,r,t){return c.apply(this,arguments)},getData.getArrayBufferOrStringFromDataSync=s,getData.getAsyncIterableFromData=function(e,r){return l.apply(this,arguments)},getData.getReadableStream=function(e){return f.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=requireEs5$b(),a=requireIsType(),i=makeIterator$1,o=requireResponseUtils(),u="Cannot convert supplied data type";function s(e,r,t){if(r.text&&"string"==typeof e)return e;if((0,a.isBuffer)(e)&&(e=e.buffer),e instanceof ArrayBuffer){var n=e;return r.text&&!r.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)){if(r.text&&!r.binary)return new TextDecoder("utf8").decode(e);var i=e.buffer,o=e.byteLength||e.length;return 0===e.byteOffset&&o===i.byteLength||(i=i.slice(e.byteOffset,e.byteOffset+o)),i}throw new Error(u)}function c(){return(c=(0,t.default)(r.default.mark((function e(t,c,l){var f,d;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=t instanceof ArrayBuffer||ArrayBuffer.isView(t),"string"!=typeof t&&!f){e.next=3;break}return e.abrupt("return",s(t,c));case 3:if(!(0,a.isBlob)(t)){e.next=7;break}return e.next=6,(0,o.makeResponse)(t);case 6:t=e.sent;case 7:if(!(0,a.isResponse)(t)){e.next=21;break}return d=t,e.next=11,(0,o.checkResponse)(d);case 11:if(!c.binary){e.next=17;break}return e.next=14,d.arrayBuffer();case 14:e.t0=e.sent,e.next=20;break;case 17:return e.next=19,d.text();case 19:e.t0=e.sent;case 20:return e.abrupt("return",e.t0);case 21:if((0,a.isReadableStream)(t)&&(t=(0,i.makeIterator)(t,l)),!(0,a.isIterable)(t)&&!(0,a.isAsyncIterable)(t)){e.next=24;break}return e.abrupt("return",(0,n.concatenateArrayBuffersAsync)(t));case 24:throw new Error(u);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=(0,t.default)(r.default.mark((function e(t,n){var u,s;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,a.isIterator)(t)){e.next=2;break}return e.abrupt("return",t);case 2:if(!(0,a.isResponse)(t)){e.next=10;break}return u=t,e.next=6,(0,o.checkResponse)(u);case 6:return e.next=8,u.body;case 8:return s=e.sent,e.abrupt("return",(0,i.makeIterator)(s,n));case 10:if(!(0,a.isBlob)(t)&&!(0,a.isReadableStream)(t)){e.next=12;break}return e.abrupt("return",(0,i.makeIterator)(t,n));case 12:if(!(0,a.isAsyncIterable)(t)){e.next=14;break}return e.abrupt("return",t[Symbol.asyncIterator]());case 14:return e.abrupt("return",d(t));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=(0,t.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,a.isReadableStream)(t)){e.next=2;break}return e.abrupt("return",t);case 2:if(!(0,a.isResponse)(t)){e.next=4;break}return e.abrupt("return",t.body);case 4:return e.next=6,(0,o.makeResponse)(t);case 6:return n=e.sent,e.abrupt("return",n.body);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){if(ArrayBuffer.isView(e))return r.default.mark((function t(){return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.buffer;case 2:case"end":return r.stop()}}),t)}))();if(e instanceof ArrayBuffer)return r.default.mark((function t(){return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e;case 2:case"end":return r.stop()}}),t)}))();if((0,a.isIterator)(e))return e;if((0,a.isIterable)(e))return e[Symbol.iterator]();throw new Error(u)}return getData}var loaderContext={},hasRequiredLoaderContext;function requireLoaderContext(){if(hasRequiredLoaderContext)return loaderContext;hasRequiredLoaderContext=1;var e=interopRequireDefaultExports;Object.defineProperty(loaderContext,"__esModule",{value:!0}),loaderContext.getLoaderContext=function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(i)return i;var o=function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){(0,t.default)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}({fetch:(0,n.getFetchFunction)(r,e)},e);Array.isArray(o.loaders)||(o.loaders=null);return o},loaderContext.getLoadersFromContext=function(e,t){if(!t&&e&&!Array.isArray(e))return e;var n;e&&(n=Array.isArray(e)?e:[e]);if(t&&t.loaders){var a=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[].concat((0,r.default)(n),(0,r.default)(a)):a}return n&&n.length?n:null};var r=e(requireToConsumableArray$1()),t=e(requireDefineProperty$3()),n=optionUtils;function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}return loaderContext}var _interopRequireDefault$g=interopRequireDefaultExports;Object.defineProperty(parse$4,"__esModule",{value:!0}),parse$4.parse=parse$3;var _regenerator$b=_interopRequireDefault$g(requireRegenerator()),_typeof2$2=_interopRequireDefault$g(require_typeof$3()),_asyncToGenerator2$b=_interopRequireDefault$g(requireAsyncToGenerator()),_workerUtils$1=requireEs5$d(),_loaderUtils$4=requireEs5$b(),_normalizeLoader$4=normalizeLoader$1,_isType$1=requireIsType(),_optionUtils$4=optionUtils,_getData$2=requireGetData(),_loaderContext$2=requireLoaderContext(),_resourceUtils$2=requireResourceUtils(),_selectLoader$2=selectLoader$1;function parse$3(e,r,t,n){return _parse$5.apply(this,arguments)}function _parse$5(){return(_parse$5=(0,_asyncToGenerator2$b.default)(_regenerator$b.default.mark((function e(r,t,n,a){var i,o,u,s,c;return _regenerator$b.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,_workerUtils$1.assert)(!a||"object"===(0,_typeof2$2.default)(a)),!t||Array.isArray(t)||(0,_normalizeLoader$4.isLoaderObject)(t)||(a=void 0,n=t,t=void 0),e.next=4,r;case 4:return r=e.sent,n=n||{},i=(0,_resourceUtils$2.getResourceUrlAndType)(r),o=i.url,u=t,s=(0,_loaderContext$2.getLoadersFromContext)(u,a),e.next=11,(0,_selectLoader$2.selectLoader)(r,s,n);case 11:if(c=e.sent){e.next=14;break}return e.abrupt("return",null);case 14:return n=(0,_optionUtils$4.normalizeOptions)(n,c,s,o),a=(0,_loaderContext$2.getLoaderContext)({url:o,parse:parse$3,loaders:s},n,a),e.next=18,parseWithLoader(c,r,n,a);case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function parseWithLoader(e,r,t,n){return _parseWithLoader.apply(this,arguments)}function _parseWithLoader(){return _parseWithLoader=(0,_asyncToGenerator2$b.default)(_regenerator$b.default.mark((function e(r,t,n,a){var i,o,u,s,c,l,f,d;return _regenerator$b.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,_workerUtils$1.validateWorkerVersion)(r),(0,_isType$1.isResponse)(t)&&(o=(i=t).ok,u=i.redirected,s=i.status,c=i.statusText,l=i.type,f=i.url,d=Object.fromEntries(i.headers.entries()),a.response={headers:d,ok:o,redirected:u,status:s,statusText:c,type:l,url:f}),e.next=4,(0,_getData$2.getArrayBufferOrStringFromData)(t,r,n);case 4:if(t=e.sent,!r.parseTextSync||"string"!=typeof t){e.next=8;break}return n.dataType="text",e.abrupt("return",r.parseTextSync(t,n,a,r));case 8:if(!(0,_loaderUtils$4.canParseWithWorker)(r,n)){e.next=12;break}return e.next=11,(0,_loaderUtils$4.parseWithWorker)(r,t,n,a,parse$3);case 11:case 15:case 19:return e.abrupt("return",e.sent);case 12:if(!r.parseText||"string"!=typeof t){e.next=16;break}return e.next=15,r.parseText(t,n,a,r);case 16:if(!r.parse){e.next=20;break}return e.next=19,r.parse(t,n,a,r);case 20:throw(0,_workerUtils$1.assert)(!r.parseSync),new Error("".concat(r.id," loader - no parser found and worker is disabled"));case 22:case"end":return e.stop()}}),e)}))),_parseWithLoader.apply(this,arguments)}var parseSync$3={},_interopRequireDefault$f=interopRequireDefaultExports;Object.defineProperty(parseSync$3,"__esModule",{value:!0}),parseSync$3.parseSync=parseSync$2;var _typeof2$1=_interopRequireDefault$f(require_typeof$3()),_loaderUtils$3=requireEs5$b(),_selectLoader$1=selectLoader$1,_normalizeLoader$3=normalizeLoader$1,_optionUtils$3=optionUtils,_getData$1=requireGetData(),_loaderContext$1=requireLoaderContext(),_resourceUtils$1=requireResourceUtils();function parseSync$2(e,r,t,n){(0,_loaderUtils$3.assert)(!n||"object"===(0,_typeof2$1.default)(n)),Array.isArray(r)||(0,_normalizeLoader$3.isLoaderObject)(r)||(n=void 0,t=r,r=void 0),t=t||{};var a=r,i=(0,_loaderContext$1.getLoadersFromContext)(a,n),o=(0,_selectLoader$1.selectLoaderSync)(e,i,t);if(!o)return null;t=(0,_optionUtils$3.normalizeOptions)(t,o,i);var u=(0,_resourceUtils$1.getResourceUrlAndType)(e).url;return parseWithLoaderSync(o,e,t,n=(0,_loaderContext$1.getLoaderContext)({url:u,parseSync:parseSync$2,parse:function(){throw new Error("parseSync called parse")},loaders:r},t))}function parseWithLoaderSync(e,r,t,n){if(r=(0,_getData$1.getArrayBufferOrStringFromDataSync)(r,e,t),e.parseTextSync&&"string"==typeof r)return e.parseTextSync(r,t);if(e.parseSync&&r instanceof ArrayBuffer)return e.parseSync(r,t,n);throw new Error("".concat(e.name," loader: 'parseSync' not supported by this loader, use 'parse' instead. ").concat(n.url||""))}var parseInBatches$1={},asyncGeneratorDelegate={exports:{}},hasRequiredAsyncGeneratorDelegate;function requireAsyncGeneratorDelegate(){return hasRequiredAsyncGeneratorDelegate||(hasRequiredAsyncGeneratorDelegate=1,function(e){var r=requireOverloadYield();e.exports=function(e){var t={},n=!1;function a(t,a){return n=!0,a=new Promise((function(r){r(e[t](a))})),{done:!1,value:new r(a,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):a("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return a("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):a("return",e)}),t},e.exports.__esModule=!0,e.exports.default=e.exports}(asyncGeneratorDelegate)),asyncGeneratorDelegate.exports}var _interopRequireDefault$e=interopRequireDefaultExports;Object.defineProperty(parseInBatches$1,"__esModule",{value:!0}),parseInBatches$1.parseInBatches=parseInBatches;var _regenerator$a=_interopRequireDefault$e(requireRegenerator()),_defineProperty2$5=_interopRequireDefault$e(requireDefineProperty$3()),_typeof2=_interopRequireDefault$e(require_typeof$3()),_asyncToGenerator2$a=_interopRequireDefault$e(requireAsyncToGenerator()),_wrapAsyncGenerator2$1=_interopRequireDefault$e(requireWrapAsyncGenerator()),_awaitAsyncGenerator2$1=_interopRequireDefault$e(requireAwaitAsyncGenerator()),_asyncGeneratorDelegate2=_interopRequireDefault$e(requireAsyncGeneratorDelegate()),_loaderUtils$2=requireEs5$b(),_normalizeLoader$2=normalizeLoader$1,_optionUtils$2=optionUtils,_loaderContext=requireLoaderContext(),_getData=requireGetData(),_resourceUtils=requireResourceUtils(),_selectLoader=selectLoader$1,_parse$4=parse$4;function ownKeys$4(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread$4(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys$4(Object(t),!0).forEach((function(r){(0,_defineProperty2$5.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys$4(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _asyncIterator$2(e){var r,t,n,a=2;for("undefined"!=typeof Symbol&&(t=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(t&&null!=(r=e[t]))return r.call(e);if(n&&null!=(r=e[n]))return new AsyncFromSyncIterator$2(r.call(e));t="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function AsyncFromSyncIterator$2(e){function r(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var r=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:r}}))}return AsyncFromSyncIterator$2=function(e){this.s=e,this.n=e.next},AsyncFromSyncIterator$2.prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):r(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):r(t.apply(this.s,arguments))}},new AsyncFromSyncIterator$2(e)}function parseInBatches(e,r,t,n){return _parseInBatches$1.apply(this,arguments)}function _parseInBatches$1(){return(_parseInBatches$1=(0,_asyncToGenerator2$a.default)(_regenerator$a.default.mark((function e(r,t,n,a){var i,o,u;return _regenerator$a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,_loaderUtils$2.assert)(!a||"object"===(0,_typeof2.default)(a)),Array.isArray(t)||(0,_normalizeLoader$2.isLoaderObject)(t)||(a=void 0,n=t,t=void 0),e.next=4,r;case 4:return r=e.sent,n=n||{},i=(0,_resourceUtils.getResourceUrlAndType)(r),o=i.url,e.next=9,(0,_selectLoader.selectLoader)(r,t,n);case 9:if(u=e.sent){e.next=12;break}return e.abrupt("return",null);case 12:return n=(0,_optionUtils$2.normalizeOptions)(n,u,t,o),a=(0,_loaderContext.getLoaderContext)({url:o,parseInBatches:parseInBatches,parse:_parse$4.parse,loaders:t},n,a),e.next=16,parseWithLoaderInBatches(u,r,n,a);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function parseWithLoaderInBatches(e,r,t,n){return _parseWithLoaderInBatches.apply(this,arguments)}function _parseWithLoaderInBatches(){return _parseWithLoaderInBatches=(0,_asyncToGenerator2$a.default)(_regenerator$a.default.mark((function e(r,t,n,a){var i,o,u,s;return _regenerator$a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){return(s=(0,_wrapAsyncGenerator2$1.default)(_regenerator$a.default.mark((function e(r){return _regenerator$a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o;case 2:return e.delegateYield((0,_asyncGeneratorDelegate2.default)(_asyncIterator$2(r),_awaitAsyncGenerator2$1.default),"t0",3);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},u=function(e){return s.apply(this,arguments)},e.next=4,parseToOutputIterator(r,t,n,a);case 4:if(i=e.sent,n.metadata){e.next=7;break}return e.abrupt("return",i);case 7:return o={batchType:"metadata",metadata:{_loader:r,_context:a},data:[],bytesUsed:0},e.abrupt("return",u(i));case 9:case"end":return e.stop()}}),e)}))),_parseWithLoaderInBatches.apply(this,arguments)}function parseToOutputIterator(e,r,t,n){return _parseToOutputIterator.apply(this,arguments)}function _parseToOutputIterator(){return _parseToOutputIterator=(0,_asyncToGenerator2$a.default)(_regenerator$a.default.mark((function e(r,t,n,a){var i,o,u,s;return _regenerator$a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){return(s=(0,_wrapAsyncGenerator2$1.default)(_regenerator$a.default.mark((function e(){var t,i,u;return _regenerator$a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_awaitAsyncGenerator2$1.default)((0,_loaderUtils$2.concatenateArrayBuffersAsync)(o));case 2:return t=e.sent,e.next=5,(0,_awaitAsyncGenerator2$1.default)((0,_parse$4.parse)(t,r,_objectSpread$4(_objectSpread$4({},n),{},{mimeType:r.mimeTypes[0]}),a));case 5:return i=e.sent,u={mimeType:r.mimeTypes[0],shape:Array.isArray(i)?"row-table":"unknown",batchType:"data",data:i,length:Array.isArray(i)?i.length:1},e.next=9,u;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},u=function(){return s.apply(this,arguments)},e.next=4,(0,_getData.getAsyncIterableFromData)(t,n);case 4:return i=e.sent,e.next=7,applyInputTransforms(i,(null==n?void 0:n.transforms)||[]);case 7:if(o=e.sent,!r.parseInBatches){e.next=10;break}return e.abrupt("return",r.parseInBatches(o,n,a));case 10:return e.abrupt("return",u());case 11:case"end":return e.stop()}}),e)}))),_parseToOutputIterator.apply(this,arguments)}function applyInputTransforms(e){return _applyInputTransforms.apply(this,arguments)}function _applyInputTransforms(){return _applyInputTransforms=(0,_asyncToGenerator2$a.default)(_regenerator$a.default.mark((function e(r){var t,n,a,i,o,u,s,c,l=arguments;return _regenerator$a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.length>1&&void 0!==l[1]?l[1]:[],n=r,a=!1,i=!1,e.prev=4,u=_asyncIterator$2(t);case 6:return e.next=8,u.next();case 8:if(!(a=!(s=e.sent).done)){e.next=14;break}c=s.value,n=c(n);case 11:a=!1,e.next=6;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),i=!0,o=e.t0;case 20:if(e.prev=20,e.prev=21,!a||null==u.return){e.next=25;break}return e.next=25,u.return();case 25:if(e.prev=25,!i){e.next=28;break}throw o;case 28:return e.finish(25);case 29:return e.finish(20);case 30:return e.abrupt("return",n);case 31:case"end":return e.stop()}}),e,null,[[4,16,20,30],[21,,25,29]])}))),_applyInputTransforms.apply(this,arguments)}var load$1={},_interopRequireDefault$d=interopRequireDefaultExports;Object.defineProperty(load$1,"__esModule",{value:!0}),load$1.load=load;var _regenerator$9=_interopRequireDefault$d(requireRegenerator()),_asyncToGenerator2$9=_interopRequireDefault$d(requireAsyncToGenerator()),_isType=requireIsType(),_normalizeLoader$1=normalizeLoader$1,_optionUtils$1=optionUtils,_parse$3=parse$4;function load(e,r,t,n){return _load.apply(this,arguments)}function _load(){return(_load=(0,_asyncToGenerator2$9.default)(_regenerator$9.default.mark((function e(r,t,n,a){var i,o;return _regenerator$9.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)||(0,_normalizeLoader$1.isLoaderObject)(t)||(n=t,t=void 0),i=(0,_optionUtils$1.getFetchFunction)(n),o=r,"string"!=typeof r){e.next=7;break}return e.next=6,i(r);case 6:o=e.sent;case 7:if(!(0,_isType.isBlob)(r)){e.next=11;break}return e.next=10,i(r);case 10:o=e.sent;case 11:return e.next=13,(0,_parse$3.parse)(o,t,n);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var loadInBatches$1={},_interopRequireDefault$c=interopRequireDefaultExports;Object.defineProperty(loadInBatches$1,"__esModule",{value:!0}),loadInBatches$1.loadInBatches=loadInBatches;var _regenerator$8=_interopRequireDefault$c(requireRegenerator()),_asyncToGenerator2$8=_interopRequireDefault$c(requireAsyncToGenerator()),_normalizeLoader=normalizeLoader$1,_optionUtils=optionUtils,_parseInBatches=parseInBatches$1;function loadInBatches(e,r,t,n){Array.isArray(r)||(0,_normalizeLoader.isLoaderObject)(r)||(t=r,r=null);var a=(0,_optionUtils.getFetchFunction)(t||{});return Array.isArray(e)?e.map((function(e){return loadOneFileInBatches(e,r,t,a)})):loadOneFileInBatches(e,r,t,a)}function loadOneFileInBatches(e,r,t,n){return _loadOneFileInBatches.apply(this,arguments)}function _loadOneFileInBatches(){return(_loadOneFileInBatches=(0,_asyncToGenerator2$8.default)(_regenerator$8.default.mark((function e(r,t,n,a){var i,o;return _regenerator$8.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof r){e.next=8;break}return i=r,e.next=4,a(i);case 4:return o=e.sent,e.next=7,(0,_parseInBatches.parseInBatches)(o,t,n);case 7:case 10:return e.abrupt("return",e.sent);case 8:return e.next=10,(0,_parseInBatches.parseInBatches)(r,t,n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var encode$1={},_interopRequireDefault$b=interopRequireDefaultExports;Object.defineProperty(encode$1,"__esModule",{value:!0}),encode$1.encode=encode,encode$1.encodeInBatches=encodeInBatches,encode$1.encodeSync=encodeSync$3,encode$1.encodeText=encodeText,encode$1.encodeURLtoURL=encodeURLtoURL;var _regenerator$7=_interopRequireDefault$b(requireRegenerator()),_defineProperty2$4=_interopRequireDefault$b(requireDefineProperty$3()),_asyncToGenerator2$7=_interopRequireDefault$b(requireAsyncToGenerator()),_loaderUtils$1=requireEs5$b(),_workerUtils=requireEs5$d(),_writeFile$1=writeFile$1,_fetchFile=fetchFile$1,_loaderOptions=loaderOptions;function ownKeys$3(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread$3(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys$3(Object(t),!0).forEach((function(r){(0,_defineProperty2$4.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys$3(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _asyncIterator$1(e){var r,t,n,a=2;for("undefined"!=typeof Symbol&&(t=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(t&&null!=(r=e[t]))return r.call(e);if(n&&null!=(r=e[n]))return new AsyncFromSyncIterator$1(r.call(e));t="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function AsyncFromSyncIterator$1(e){function r(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var r=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:r}}))}return AsyncFromSyncIterator$1=function(e){this.s=e,this.n=e.next},AsyncFromSyncIterator$1.prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):r(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):r(t.apply(this.s,arguments))}},new AsyncFromSyncIterator$1(e)}function encode(e,r,t){return _encode$1.apply(this,arguments)}function _encode$1(){return(_encode$1=(0,_asyncToGenerator2$7.default)(_regenerator$7.default.mark((function e(r,t,n){var a,i,o,u,s,c,l,f,d,p,h,y,v;return _regenerator$7.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,_loaderOptions.getLoaderOptions)(),n=_objectSpread$3(_objectSpread$3({},a),n),!(0,_loaderUtils$1.canEncodeWithWorker)(t,n)){e.next=6;break}return e.next=5,(0,_workerUtils.processOnWorker)(t,r,n);case 5:return e.abrupt("return",e.sent);case 6:if(!t.encode){e.next=10;break}return e.next=9,t.encode(r,n);case 9:return e.abrupt("return",e.sent);case 10:if(!t.encodeSync){e.next=12;break}return e.abrupt("return",t.encodeSync(r,n));case 12:if(!t.encodeText){e.next=18;break}return e.t0=new TextEncoder,e.next=16,t.encodeText(r,n);case 16:return e.t1=e.sent,e.abrupt("return",e.t0.encode.call(e.t0,e.t1));case 18:if(!t.encodeInBatches){e.next=50;break}i=encodeInBatches(r,t,n),o=[],u=!1,s=!1,e.prev=23,l=_asyncIterator$1(i);case 25:return e.next=27,l.next();case 27:if(!(u=!(f=e.sent).done)){e.next=33;break}d=f.value,o.push(d);case 30:u=!1,e.next=25;break;case 33:e.next=39;break;case 35:e.prev=35,e.t2=e.catch(23),s=!0,c=e.t2;case 39:if(e.prev=39,e.prev=40,!u||null==l.return){e.next=44;break}return e.next=44,l.return();case 44:if(e.prev=44,!s){e.next=47;break}throw c;case 47:return e.finish(44);case 48:return e.finish(39);case 49:return e.abrupt("return",_loaderUtils$1.concatenateArrayBuffers.apply(void 0,o));case 50:if(_loaderUtils$1.isBrowser||!t.encodeURLtoURL){e.next=62;break}return p=getTemporaryFilename("input"),e.next=54,(0,_writeFile$1.writeFile)(p,r);case 54:return h=getTemporaryFilename("output"),e.next=57,encodeURLtoURL(p,h,t,n);case 57:return y=e.sent,e.next=60,(0,_fetchFile.fetchFile)(y);case 60:return v=e.sent,e.abrupt("return",v.arrayBuffer());case 62:throw new Error("Writer could not encode data");case 63:case"end":return e.stop()}}),e,null,[[23,35,39,49],[40,,44,48]])})))).apply(this,arguments)}function encodeSync$3(e,r,t){if(r.encodeSync)return r.encodeSync(e,t);throw new Error("Writer could not synchronously encode data")}function encodeText(e,r,t){return _encodeText.apply(this,arguments)}function _encodeText(){return(_encodeText=(0,_asyncToGenerator2$7.default)(_regenerator$7.default.mark((function e(r,t,n){var a;return _regenerator$7.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.text||!t.encodeText){e.next=4;break}return e.next=3,t.encodeText(r,n);case 3:return e.abrupt("return",e.sent);case 4:if(!t.text||!t.encode&&!t.encodeInBatches){e.next=9;break}return e.next=7,encode(r,t,n);case 7:return a=e.sent,e.abrupt("return",(new TextDecoder).decode(a));case 9:throw new Error("Writer could not encode data as text");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function encodeInBatches(e,r,t){if(r.encodeInBatches){var n=getIterator(e);return r.encodeInBatches(n,t)}throw new Error("Writer could not encode data in batches")}function encodeURLtoURL(e,r,t,n){return _encodeURLtoURL.apply(this,arguments)}function _encodeURLtoURL(){return(_encodeURLtoURL=(0,_asyncToGenerator2$7.default)(_regenerator$7.default.mark((function e(r,t,n,a){var i;return _regenerator$7.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,_loaderUtils$1.resolvePath)(r),t=(0,_loaderUtils$1.resolvePath)(t),!_loaderUtils$1.isBrowser&&n.encodeURLtoURL){e.next=4;break}throw new Error;case 4:return e.next=6,n.encodeURLtoURL(r,t,a);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function getIterator(e){return[{table:e,start:0,end:e.length}]}function getTemporaryFilename(e){return"/tmp/".concat(e)}var save$1={},_interopRequireDefault$a=interopRequireDefaultExports;Object.defineProperty(save$1,"__esModule",{value:!0}),save$1.save=save,save$1.saveSync=saveSync;var _regenerator$6=_interopRequireDefault$a(requireRegenerator()),_asyncToGenerator2$6=_interopRequireDefault$a(requireAsyncToGenerator()),_encode=encode$1,_writeFile=writeFile$1;function save(e,r,t,n){return _save.apply(this,arguments)}function _save(){return(_save=(0,_asyncToGenerator2$6.default)(_regenerator$6.default.mark((function e(r,t,n,a){var i;return _regenerator$6.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_encode.encode)(r,n,a);case 2:return i=e.sent,e.next=5,(0,_writeFile.writeFile)(t,i);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function saveSync(e,r,t,n){var a=(0,_encode.encodeSync)(e,t,n);return(0,_writeFile.writeFileSync)(r,a)}var makeDomStream={},_interopRequireDefault$9=interopRequireDefaultExports;Object.defineProperty(makeDomStream,"__esModule",{value:!0}),makeDomStream.makeStream=makeStream;var _regenerator$5=_interopRequireDefault$9(requireRegenerator()),_defineProperty2$3=_interopRequireDefault$9(requireDefineProperty$3()),_asyncToGenerator2$5=_interopRequireDefault$9(requireAsyncToGenerator());function ownKeys$2(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread$2(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys$2(Object(t),!0).forEach((function(r){(0,_defineProperty2$3.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys$2(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function makeStream(e,r){var t=e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]();return new ReadableStream({type:"bytes",pull:function(e){return(0,_asyncToGenerator2$5.default)(_regenerator$5.default.mark((function r(){var n,a,i;return _regenerator$5.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.next();case 3:n=r.sent,a=n.done,i=n.value,a?e.close():e.enqueue(new Uint8Array(i)),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),e.error(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},cancel:function(){return(0,_asyncToGenerator2$5.default)(_regenerator$5.default.mark((function e(){var r;return _regenerator$5.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==t||null===(r=t.return)||void 0===r?void 0:r.call(t);case 2:case"end":return e.stop()}}),e)})))()}},_objectSpread$2({highWaterMark:Math.pow(2,24)},r))}var nullLoader={},_interopRequireDefault$8=interopRequireDefaultExports;Object.defineProperty(nullLoader,"__esModule",{value:!0}),nullLoader.NullWorkerLoader=nullLoader.NullLoader=void 0;var _regenerator$4=_interopRequireDefault$8(requireRegenerator()),_asyncToGenerator2$4=_interopRequireDefault$8(requireAsyncToGenerator()),_awaitAsyncGenerator2=_interopRequireDefault$8(requireAwaitAsyncGenerator()),_wrapAsyncGenerator2=_interopRequireDefault$8(requireWrapAsyncGenerator());function _asyncIterator(e){var r,t,n,a=2;for("undefined"!=typeof Symbol&&(t=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(t&&null!=(r=e[t]))return r.call(e);if(n&&null!=(r=e[n]))return new AsyncFromSyncIterator(r.call(e));t="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function AsyncFromSyncIterator(e){function r(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var r=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:r}}))}return AsyncFromSyncIterator=function(e){this.s=e,this.n=e.next},AsyncFromSyncIterator.prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):r(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):r(t.apply(this.s,arguments))}},new AsyncFromSyncIterator(e)}var VERSION$1="3.3.3",NullWorkerLoader={name:"Null loader",id:"null",module:"core",version:VERSION$1,worker:!0,mimeTypes:["application/x.empty"],extensions:["null"],tests:[function(){return!1}],options:{null:{}}};function parseSync$1(e,r,t){return r.null.echoParameters?{arrayBuffer:e,options:r,context:t=t&&JSON.parse(JSON.stringify(t))}:null}nullLoader.NullWorkerLoader=NullWorkerLoader;var NullLoader={name:"Null loader",id:"null",module:"core",version:VERSION$1,mimeTypes:["application/x.empty"],extensions:["null"],parse:function(){var e=(0,_asyncToGenerator2$4.default)(_regenerator$4.default.mark((function e(r,t,n){return _regenerator$4.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",parseSync$1(r,t,n));case 1:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),parseSync:parseSync$1,parseInBatches:(_generator=(0,_wrapAsyncGenerator2.default)(_regenerator$4.default.mark((function e(r,t,n){var a,i,o,u,s,c;return _regenerator$4.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!1,i=!1,e.prev=2,u=_asyncIterator(r);case 4:return e.next=6,(0,_awaitAsyncGenerator2.default)(u.next());case 6:if(!(a=!(s=e.sent).done)){e.next=13;break}return c=s.value,e.next=10,parseSync$1(c,t,n);case 10:a=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),i=!0,o=e.t0;case 19:if(e.prev=19,e.prev=20,!a||null==u.return){e.next=24;break}return e.next=24,(0,_awaitAsyncGenerator2.default)(u.return());case 24:if(e.prev=24,!i){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(19);case 29:case"end":return e.stop()}}),e,null,[[2,15,19,29],[20,,24,28]])}))),function(e,r,t){return _generator.apply(this,arguments)}),tests:[function(){return!1}],options:{null:{echoParameters:!1}}},_generator;nullLoader.NullLoader=NullLoader;var fetchProgress={},hasRequiredFetchProgress;function requireFetchProgress(){if(hasRequiredFetchProgress)return fetchProgress;hasRequiredFetchProgress=1;var e=interopRequireDefaultExports;Object.defineProperty(fetchProgress,"__esModule",{value:!0}),fetchProgress.default=function(e,r){return n.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireAsyncToGenerator());function n(){return n=(0,t.default)(r.default.mark((function e(n,i){var o,u,s,c,l,f,d=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=d.length>2&&void 0!==d[2]?d[2]:function(){},u=d.length>3&&void 0!==d[3]?d[3]:function(){},e.next=4,n;case 4:if((n=e.sent).ok){e.next=7;break}return e.abrupt("return",n);case 7:if(s=n.body){e.next=10;break}return e.abrupt("return",n);case 10:if(c=n.headers.get("content-length")||0,l=c&&parseInt(c),c>0){e.next=14;break}return e.abrupt("return",n);case 14:if("undefined"!=typeof ReadableStream&&s.getReader){e.next=16;break}return e.abrupt("return",n);case 16:return f=new ReadableStream({start:function(e){return(0,t.default)(r.default.mark((function t(){var n;return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=s.getReader(),r.next=3,a(e,n,0,l,i,o,u);case 3:case"end":return r.stop()}}),t)})))()}}),e.abrupt("return",new Response(f));case 18:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}function a(e,r,t,n,a,o,u){return i.apply(this,arguments)}function i(){return(i=(0,t.default)(r.default.mark((function e(t,n,i,o,u,s,c){var l,f,d,p;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.read();case 3:if(l=e.sent,f=l.done,d=l.value,!f){e.next=10;break}return s(),t.close(),e.abrupt("return");case 10:return i+=d.byteLength,p=Math.round(i/o*100),u(p,{loadedBytes:i,totalBytes:o}),t.enqueue(d),e.next=16,a(t,n,i,o,u,s,c);case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),t.error(e.t0),c(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}return fetchProgress}var browserFilesystem={},hasRequiredBrowserFilesystem;function requireBrowserFilesystem(){if(hasRequiredBrowserFilesystem)return browserFilesystem;hasRequiredBrowserFilesystem=1;var e=interopRequireDefaultExports;Object.defineProperty(browserFilesystem,"__esModule",{value:!0}),browserFilesystem.default=void 0;var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=e(requireClassCallCheck$3()),a=e(requireCreateClass$3()),i=e(requireDefineProperty$3()),o=function(){function e(r,t){(0,n.default)(this,e),(0,i.default)(this,"_fetch",void 0),(0,i.default)(this,"files",{}),(0,i.default)(this,"lowerCaseFiles",{}),(0,i.default)(this,"usedFiles",{}),this._fetch=(null==t?void 0:t.fetch)||fetch;for(var a=0;a<r.length;++a){var o=r[a];this.files[o.name]=o,this.lowerCaseFiles[o.name.toLowerCase()]=o,this.usedFiles[o.name]=!1}this.fetch=this.fetch.bind(this)}var o,u,s,c,l,f,d;return(0,a.default)(e,[{key:"fetch",value:(d=(0,t.default)(r.default.mark((function e(t,n){var a,i,o,u,s,c,l,f,d;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.includes("://")){e.next=2;break}return e.abrupt("return",this._fetch(t,n));case 2:if(a=this.files[t]){e.next=5;break}return e.abrupt("return",new Response(t,{status:400,statusText:"NOT FOUND"}));case 5:if(i=new Headers(null==n?void 0:n.headers),o=i.get("Range"),!(u=o&&/bytes=($1)-($2)/.exec(o))){e.next=17;break}return s=parseInt(u[1]),c=parseInt(u[2]),e.next=13,a.slice(s,c).arrayBuffer();case 13:return l=e.sent,f=new Response(l),Object.defineProperty(f,"url",{value:t}),e.abrupt("return",f);case 17:return d=new Response(a),Object.defineProperty(d,"url",{value:t}),e.abrupt("return",d);case 20:case"end":return e.stop()}}),e,this)}))),function(e,r){return d.apply(this,arguments)})},{key:"readdir",value:(f=(0,t.default)(r.default.mark((function e(t){var n,a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in n=[],this.files)n.push(a);return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"stat",value:(l=(0,t.default)(r.default.mark((function e(t,n){var a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.files[t]){e.next=3;break}throw new Error(t);case 3:return e.abrupt("return",{size:a.size});case 4:case"end":return e.stop()}}),e,this)}))),function(e,r){return l.apply(this,arguments)})},{key:"unlink",value:(c=(0,t.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.files[t],delete this.lowerCaseFiles[t],this.usedFiles[t]=!0;case 3:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"open",value:(s=(0,t.default)(r.default.mark((function e(t,n,a){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.files[t]);case 1:case"end":return e.stop()}}),e,this)}))),function(e,r,t){return s.apply(this,arguments)})},{key:"read",value:(u=(0,t.default)(r.default.mark((function e(t,n){var a,i,o,u=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>3&&void 0!==u[3]?u[3]:n.byteLength,i=t,e.next=7,i.slice(0,0+a).arrayBuffer();case 7:return o=e.sent,e.abrupt("return",{bytesRead:a,buffer:o});case 9:case"end":return e.stop()}}),e)}))),function(e,r){return u.apply(this,arguments)})},{key:"close",value:(o=(0,t.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"_getFile",value:function(e,r){var t=this.files[e]||this.lowerCaseFiles[e];return t&&r&&(this.usedFiles[e]=!0),t}}]),e}();return browserFilesystem.default=o,browserFilesystem}!function(e){var r=interopRequireDefaultExports;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"JSONLoader",{enumerable:!0,get:function(){return v.JSONLoader}}),Object.defineProperty(e,"NullLoader",{enumerable:!0,get:function(){return g.NullLoader}}),Object.defineProperty(e,"NullWorkerLoader",{enumerable:!0,get:function(){return g.NullWorkerLoader}}),Object.defineProperty(e,"RequestScheduler",{enumerable:!0,get:function(){return v.RequestScheduler}}),Object.defineProperty(e,"_BrowserFileSystem",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(e,"_fetchProgress",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(e,"_unregisterLoaders",{enumerable:!0,get:function(){return u._unregisterLoaders}}),Object.defineProperty(e,"assert",{enumerable:!0,get:function(){return v.assert}}),Object.defineProperty(e,"concatenateArrayBuffersAsync",{enumerable:!0,get:function(){return v.concatenateArrayBuffersAsync}}),Object.defineProperty(e,"document",{enumerable:!0,get:function(){return v.document}}),Object.defineProperty(e,"encode",{enumerable:!0,get:function(){return h.encode}}),Object.defineProperty(e,"encodeInBatches",{enumerable:!0,get:function(){return h.encodeInBatches}}),Object.defineProperty(e,"encodeSync",{enumerable:!0,get:function(){return h.encodeSync}}),Object.defineProperty(e,"encodeText",{enumerable:!0,get:function(){return h.encodeText}}),Object.defineProperty(e,"encodeURLtoURL",{enumerable:!0,get:function(){return h.encodeURLtoURL}}),Object.defineProperty(e,"fetchFile",{enumerable:!0,get:function(){return t.fetchFile}}),Object.defineProperty(e,"forEach",{enumerable:!0,get:function(){return v.forEach}}),Object.defineProperty(e,"getLoaderOptions",{enumerable:!0,get:function(){return o.getLoaderOptions}}),Object.defineProperty(e,"getPathPrefix",{enumerable:!0,get:function(){return v.getPathPrefix}}),Object.defineProperty(e,"global",{enumerable:!0,get:function(){return v.global}}),Object.defineProperty(e,"isAsyncIterable",{enumerable:!0,get:function(){return T.isAsyncIterable}}),Object.defineProperty(e,"isBrowser",{enumerable:!0,get:function(){return v.isBrowser}}),Object.defineProperty(e,"isIterable",{enumerable:!0,get:function(){return T.isIterable}}),Object.defineProperty(e,"isIterator",{enumerable:!0,get:function(){return T.isIterator}}),Object.defineProperty(e,"isPromise",{enumerable:!0,get:function(){return T.isPromise}}),Object.defineProperty(e,"isPureObject",{enumerable:!0,get:function(){return T.isPureObject}}),Object.defineProperty(e,"isReadableStream",{enumerable:!0,get:function(){return T.isReadableStream}}),Object.defineProperty(e,"isResponse",{enumerable:!0,get:function(){return T.isResponse}}),Object.defineProperty(e,"isWorker",{enumerable:!0,get:function(){return v.isWorker}}),Object.defineProperty(e,"isWritableStream",{enumerable:!0,get:function(){return T.isWritableStream}}),Object.defineProperty(e,"load",{enumerable:!0,get:function(){return d.load}}),Object.defineProperty(e,"loadInBatches",{enumerable:!0,get:function(){return p.loadInBatches}}),Object.defineProperty(e,"makeIterator",{enumerable:!0,get:function(){return m.makeIterator}}),Object.defineProperty(e,"makeLineIterator",{enumerable:!0,get:function(){return v.makeLineIterator}}),Object.defineProperty(e,"makeNumberedLineIterator",{enumerable:!0,get:function(){return v.makeNumberedLineIterator}}),Object.defineProperty(e,"makeStream",{enumerable:!0,get:function(){return b.makeStream}}),Object.defineProperty(e,"makeTextDecoderIterator",{enumerable:!0,get:function(){return v.makeTextDecoderIterator}}),Object.defineProperty(e,"makeTextEncoderIterator",{enumerable:!0,get:function(){return v.makeTextEncoderIterator}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return c.parse}}),Object.defineProperty(e,"parseInBatches",{enumerable:!0,get:function(){return f.parseInBatches}}),Object.defineProperty(e,"parseSync",{enumerable:!0,get:function(){return l.parseSync}}),Object.defineProperty(e,"readArrayBuffer",{enumerable:!0,get:function(){return n.readArrayBuffer}}),Object.defineProperty(e,"readFileSync",{enumerable:!0,get:function(){return a.readFileSync}}),Object.defineProperty(e,"registerLoaders",{enumerable:!0,get:function(){return u.registerLoaders}}),Object.defineProperty(e,"resolvePath",{enumerable:!0,get:function(){return v.resolvePath}}),Object.defineProperty(e,"save",{enumerable:!0,get:function(){return y.save}}),Object.defineProperty(e,"saveSync",{enumerable:!0,get:function(){return y.saveSync}}),Object.defineProperty(e,"selectLoader",{enumerable:!0,get:function(){return s.selectLoader}}),Object.defineProperty(e,"selectLoaderSync",{enumerable:!0,get:function(){return s.selectLoaderSync}}),Object.defineProperty(e,"self",{enumerable:!0,get:function(){return v.self}}),Object.defineProperty(e,"setLoaderOptions",{enumerable:!0,get:function(){return o.setLoaderOptions}}),Object.defineProperty(e,"setPathPrefix",{enumerable:!0,get:function(){return v.setPathPrefix}}),Object.defineProperty(e,"window",{enumerable:!0,get:function(){return v.window}}),Object.defineProperty(e,"writeFile",{enumerable:!0,get:function(){return i.writeFile}}),Object.defineProperty(e,"writeFileSync",{enumerable:!0,get:function(){return i.writeFileSync}});var t=fetchFile$1,n=readArrayBuffer$1,a=readFile,i=writeFile$1,o=loaderOptions,u=registerLoaders$1,s=selectLoader$1,c=parse$4,l=parseSync$3,f=parseInBatches$1,d=load$1,p=loadInBatches$1,h=encode$1,y=save$1,v=requireEs5$b(),m=makeIterator$1,b=makeDomStream,g=nullLoader,_=r(requireFetchProgress()),A=r(requireBrowserFilesystem()),T=requireIsType()}(es5$g);var es5$a={},gltfLoader={},version$4={};Object.defineProperty(version$4,"__esModule",{value:!0}),version$4.VERSION=void 0;var VERSION="3.3.3";version$4.VERSION=VERSION;var parseGltf={},es5$9={},version$3={},hasRequiredVersion$3;function requireVersion$3(){if(hasRequiredVersion$3)return version$3;hasRequiredVersion$3=1,Object.defineProperty(version$3,"__esModule",{value:!0}),version$3.VERSION=void 0;return version$3.VERSION="3.3.3",version$3}var basisLoader={},parseBasis={},basisModuleLoader={},slicedToArray$2={exports:{}},arrayWithHoles$2={exports:{}},hasRequiredArrayWithHoles$2;function requireArrayWithHoles$2(){return hasRequiredArrayWithHoles$2||(hasRequiredArrayWithHoles$2=1,function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports}(arrayWithHoles$2)),arrayWithHoles$2.exports}var iterableToArrayLimit$2={exports:{}},hasRequiredIterableToArrayLimit$2;function requireIterableToArrayLimit$2(){return hasRequiredIterableToArrayLimit$2||(hasRequiredIterableToArrayLimit$2=1,function(e){e.exports=function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,i,o,u=[],s=!0,c=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;s=!1}else for(;!(s=(n=i.call(t)).done)&&(u.push(n.value),u.length!==r);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw a}}return u}},e.exports.__esModule=!0,e.exports.default=e.exports}(iterableToArrayLimit$2)),iterableToArrayLimit$2.exports}var nonIterableRest$2={exports:{}},hasRequiredNonIterableRest$2,hasRequiredSlicedToArray$2,hasRequiredBasisModuleLoader;function requireNonIterableRest$2(){return hasRequiredNonIterableRest$2||(hasRequiredNonIterableRest$2=1,function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}(nonIterableRest$2)),nonIterableRest$2.exports}function requireSlicedToArray$2(){return hasRequiredSlicedToArray$2||(hasRequiredSlicedToArray$2=1,function(e){var r=requireArrayWithHoles$2(),t=requireIterableToArrayLimit$2(),n=requireUnsupportedIterableToArray$3(),a=requireNonIterableRest$2();e.exports=function(e,i){return r(e)||t(e,i)||n(e,i)||a()},e.exports.__esModule=!0,e.exports.default=e.exports}(slicedToArray$2)),slicedToArray$2.exports}function requireBasisModuleLoader(){if(hasRequiredBasisModuleLoader)return basisModuleLoader;hasRequiredBasisModuleLoader=1;var e=interopRequireDefaultExports;Object.defineProperty(basisModuleLoader,"__esModule",{value:!0}),basisModuleLoader.loadBasisEncoderModule=function(e){return h.apply(this,arguments)},basisModuleLoader.loadBasisTrascoderModule=function(e){return l.apply(this,arguments)};var r,t,n=e(requireRegenerator()),a=e(requireSlicedToArray$2()),i=e(requireAsyncToGenerator()),o=requireEs5$d(),u="3.3.3",s="https://unpkg.com/@loaders.gl/textures@".concat(u,"/dist/libs/basis_encoder.wasm"),c="https://unpkg.com/@loaders.gl/textures@".concat(u,"/dist/libs/basis_encoder.js");function l(){return(l=(0,i.default)(n.default.mark((function e(t){var a;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.modules||{}).basis){e.next=3;break}return e.abrupt("return",a.basis);case 3:return r=r||f(t),e.next=6,r;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return d.apply(this,arguments)}function d(){return(d=(0,i.default)(n.default.mark((function e(r){var t,i,u,s;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,i=null,e.t0=Promise,e.next=5,(0,o.loadLibrary)("basis_transcoder.js","textures",r);case 5:return e.t1=e.sent,e.next=8,(0,o.loadLibrary)("basis_transcoder.wasm","textures",r);case 8:return e.t2=e.sent,e.t3=[e.t1,e.t2],e.next=12,e.t0.all.call(e.t0,e.t3);case 12:return u=e.sent,s=(0,a.default)(u,2),t=s[0],i=s[1],t=t||globalThis.BASIS,e.next=19,p(t,i);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,r){var t={};return r&&(t.wasmBinary=r),new Promise((function(r){e(t).then((function(e){var t=e.BasisFile;(0,e.initializeBasis)(),r({BasisFile:t})}))}))}function h(){return(h=(0,i.default)(n.default.mark((function e(r){var a;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=r.modules||{}).basisEncoder){e.next=3;break}return e.abrupt("return",a.basisEncoder);case 3:return t=t||y(r),e.next=6,t;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return v.apply(this,arguments)}function v(){return(v=(0,i.default)(n.default.mark((function e(r){var t,i,u,l;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,i=null,e.t0=Promise,e.next=5,(0,o.loadLibrary)(c,"textures",r);case 5:return e.t1=e.sent,e.next=8,(0,o.loadLibrary)(s,"textures",r);case 8:return e.t2=e.sent,e.t3=[e.t1,e.t2],e.next=12,e.t0.all.call(e.t0,e.t3);case 12:return u=e.sent,l=(0,a.default)(u,2),t=l[0],i=l[1],t=t||globalThis.BASIS,e.next=19,m(t,i);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,r){var t={};return r&&(t.wasmBinary=r),new Promise((function(r){e(t).then((function(e){var t=e.BasisFile,n=e.KTX2File,a=e.initializeBasis,i=e.BasisEncoder;a(),r({BasisFile:t,KTX2File:n,BasisEncoder:i})}))}))}return basisModuleLoader}var glExtensions={},hasRequiredGlExtensions;function requireGlExtensions(){if(hasRequiredGlExtensions)return glExtensions;hasRequiredGlExtensions=1,Object.defineProperty(glExtensions,"__esModule",{value:!0}),glExtensions.GL_EXTENSIONS_CONSTANTS=void 0;return glExtensions.GL_EXTENSIONS_CONSTANTS={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919},glExtensions}var textureFormats={},hasRequiredTextureFormats;function requireTextureFormats(){if(hasRequiredTextureFormats)return textureFormats;function e(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}hasRequiredTextureFormats=1,Object.defineProperty(textureFormats,"__esModule",{value:!0}),textureFormats.getSupportedGPUTextureFormats=function(a){if(!n){a=a||function(){try{return document.createElement("canvas").getContext("webgl")}catch(e){return null}}()||void 0,n=new Set;var i,o=function(r,t){var n="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=function(r,t){if(!r)return;if("string"==typeof r)return e(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(r);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(r,t)}(r))||t&&r&&"number"==typeof r.length){n&&(r=n);var a=0,i=function(){};return{s:i,n:function(){return a>=r.length?{done:!0}:{done:!1,value:r[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(r)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}(r);try{for(o.s();!(i=o.n()).done;){var u=i.value;for(var s in t)if(a&&a.getExtension("".concat(u).concat(s))){var c=t[s];n.add(c)}}}catch(e){o.e(e)}finally{o.f()}}return n};var r=["","WEBKIT_","MOZ_"],t={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"},n=null;return textureFormats}var parseKtx={},ktxParse={},hasRequiredKtxParse;function requireKtxParse(){if(hasRequiredKtxParse)return ktxParse;hasRequiredKtxParse=1;var e,r,t,n,a,i,o,u,s=new Uint8Array([0]),c=[171,75,84,88,32,50,48,187,13,10,26,10];!function(e){e[e.NONE=0]="NONE",e[e.BASISLZ=1]="BASISLZ",e[e.ZSTD=2]="ZSTD",e[e.ZLIB=3]="ZLIB"}(e||(e={})),function(e){e[e.BASICFORMAT=0]="BASICFORMAT"}(r||(r={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ETC1S=163]="ETC1S",e[e.UASTC=166]="UASTC"}(t||(t={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SRGB=1]="SRGB"}(n||(n={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.LINEAR=1]="LINEAR",e[e.SRGB=2]="SRGB",e[e.ITU=3]="ITU",e[e.NTSC=4]="NTSC",e[e.SLOG=5]="SLOG",e[e.SLOG2=6]="SLOG2"}(a||(a={})),function(e){e[e.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",e[e.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(i||(i={})),function(e){e[e.RGB=0]="RGB",e[e.RRR=3]="RRR",e[e.GGG=4]="GGG",e[e.AAA=15]="AAA"}(o||(o={})),function(e){e[e.RGB=0]="RGB",e[e.RGBA=3]="RGBA",e[e.RRR=4]="RRR",e[e.RRRG=5]="RRRG"}(u||(u={}));var l=function(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=e.NONE,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:r.BASICFORMAT,versionNumber:2,descriptorBlockSize:40,colorModel:t.UNSPECIFIED,colorPrimaries:n.SRGB,transferFunction:n.SRGB,flags:i.ALPHA_STRAIGHT,texelBlockDimension:{x:4,y:4,z:1,w:1},bytesPlane:[],samples:[]}],this.keyValue={},this.globalData=null},f=function(){function e(e,r,t,n){this._dataView=new DataView(e.buffer,e.byteOffset+r,t),this._littleEndian=n,this._offset=0}var r=e.prototype;return r._nextUint8=function(){var e=this._dataView.getUint8(this._offset);return this._offset+=1,e},r._nextUint16=function(){var e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e},r._nextUint32=function(){var e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e},r._nextUint64=function(){var e=this._dataView.getUint32(this._offset,this._littleEndian),r=this._dataView.getUint32(this._offset+4,this._littleEndian),t=e+Math.pow(2,32)*r;return this._offset+=8,t},r._skip=function(e){return this._offset+=e,this},r._scan=function(e,r){void 0===r&&(r=0);for(var t=this._offset,n=0;this._dataView.getUint8(this._offset)!==r&&n<e;)n++,this._offset++;return n<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+t,n)},e}();function d(){return(d=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function p(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function h(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,r){if(e){if("string"==typeof e)return p(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?p(e,void 0):void 0}}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function y(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):Buffer.from(e)}function v(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):Buffer.from(e).toString("utf8")}function m(e){for(var r,t=0,n=h(e);!(r=n()).done;)t+=r.value.byteLength;for(var a,i=new Uint8Array(t),o=0,u=h(e);!(a=u()).done;){var s=a.value;i.set(new Uint8Array(s),o),o+=s.byteLength}return i}var b={keepWriter:!1};return ktxParse.KTX2Container=l,ktxParse.read=function(e){var r=new Uint8Array(e.buffer,e.byteOffset,c.length);if(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||r[4]!==c[4]||r[5]!==c[5]||r[6]!==c[6]||r[7]!==c[7]||r[8]!==c[8]||r[9]!==c[9]||r[10]!==c[10]||r[11]!==c[11])throw new Error("Missing KTX 2.0 identifier.");var t=new l,n=17*Uint32Array.BYTES_PER_ELEMENT,a=new f(e,c.length,n,!0);t.vkFormat=a._nextUint32(),t.typeSize=a._nextUint32(),t.pixelWidth=a._nextUint32(),t.pixelHeight=a._nextUint32(),t.pixelDepth=a._nextUint32(),t.layerCount=a._nextUint32(),t.faceCount=a._nextUint32();var i=a._nextUint32();t.supercompressionScheme=a._nextUint32();for(var o=a._nextUint32(),u=a._nextUint32(),s=a._nextUint32(),d=a._nextUint32(),p=a._nextUint64(),h=a._nextUint64(),y=new f(e,c.length+n,3*i*8,!0),m=0;m<i;m++)t.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+y._nextUint64(),y._nextUint64()),uncompressedByteLength:y._nextUint64()});for(var b=new f(e,o,u,!0),g={vendorId:b._skip(4)._nextUint16(),descriptorType:b._nextUint16(),versionNumber:b._nextUint16(),descriptorBlockSize:b._nextUint16(),colorModel:b._nextUint8(),colorPrimaries:b._nextUint8(),transferFunction:b._nextUint8(),flags:b._nextUint8(),texelBlockDimension:{x:b._nextUint8()+1,y:b._nextUint8()+1,z:b._nextUint8()+1,w:b._nextUint8()+1},bytesPlane:[b._nextUint8(),b._nextUint8(),b._nextUint8(),b._nextUint8(),b._nextUint8(),b._nextUint8(),b._nextUint8(),b._nextUint8()],samples:[]},_=(g.descriptorBlockSize/4-6)/4,A=0;A<_;A++)g.samples[A]={bitOffset:b._nextUint16(),bitLength:b._nextUint8(),channelID:b._nextUint8(),samplePosition:[b._nextUint8(),b._nextUint8(),b._nextUint8(),b._nextUint8()],sampleLower:b._nextUint32(),sampleUpper:b._nextUint32()};t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(g);for(var T=new f(e,s,d,!0);T._offset<d;){var O=T._nextUint32(),R=T._scan(O),E=v(R),S=T._scan(O-R.byteLength);t.keyValue[E]=E.match(/^ktx/i)?v(S):S,O%4&&T._skip(4-O%4)}if(h<=0)return t;for(var q=new f(e,p,h,!0),C=q._nextUint16(),B=q._nextUint16(),x=q._nextUint32(),P=q._nextUint32(),w=q._nextUint32(),M=q._nextUint32(),I=[],k=0;k<i;k++)I.push({imageFlags:q._nextUint32(),rgbSliceByteOffset:q._nextUint32(),rgbSliceByteLength:q._nextUint32(),alphaSliceByteOffset:q._nextUint32(),alphaSliceByteLength:q._nextUint32()});var D=p+q._offset,L=D+x,G=L+P,j=G+w,$=new Uint8Array(e.buffer,e.byteOffset+D,x),N=new Uint8Array(e.buffer,e.byteOffset+L,P),F=new Uint8Array(e.buffer,e.byteOffset+G,w),U=new Uint8Array(e.buffer,e.byteOffset+j,M);return t.globalData={endpointCount:C,selectorCount:B,imageDescs:I,endpointsData:$,selectorsData:N,tablesData:F,extendedData:U},t},ktxParse.write=function(e,t){void 0===t&&(t={}),t=d({},b,t);var n=new ArrayBuffer(0);if(e.globalData){var a=new ArrayBuffer(20+5*e.globalData.imageDescs.length*4),i=new DataView(a);i.setUint16(0,e.globalData.endpointCount,!0),i.setUint16(2,e.globalData.selectorCount,!0),i.setUint32(4,e.globalData.endpointsData.byteLength,!0),i.setUint32(8,e.globalData.selectorsData.byteLength,!0),i.setUint32(12,e.globalData.tablesData.byteLength,!0),i.setUint32(16,e.globalData.extendedData.byteLength,!0);for(var o=0;o<e.globalData.imageDescs.length;o++){var u=e.globalData.imageDescs[o];i.setUint32(20+5*o*4+0,u.imageFlags,!0),i.setUint32(20+5*o*4+4,u.rgbSliceByteOffset,!0),i.setUint32(20+5*o*4+8,u.rgbSliceByteLength,!0),i.setUint32(20+5*o*4+12,u.alphaSliceByteOffset,!0),i.setUint32(20+5*o*4+16,u.alphaSliceByteLength,!0)}n=m([a,e.globalData.endpointsData,e.globalData.selectorsData,e.globalData.tablesData,e.globalData.extendedData])}var l=[],f=e.keyValue;for(var p in t.keepWriter||(f=d({},e.keyValue,{KTXwriter:"KTX-Parse v0.0.4"})),f){var h=f[p],v=y(p),g="string"==typeof h?y(h):h,_=v.byteLength+1+g.byteLength+1,A=_%4?4-_%4:0;l.push(m([new Uint32Array([_]),v,s,g,s,new Uint8Array(A).fill(0)]))}var T=m(l),O=new ArrayBuffer(44),R=new DataView(O);if(1!==e.dataFormatDescriptor.length||e.dataFormatDescriptor[0].descriptorType!==r.BASICFORMAT)throw new Error("Only BASICFORMAT Data Format Descriptor output supported.");var E=e.dataFormatDescriptor[0];R.setUint32(0,44,!0),R.setUint16(4,E.vendorId,!0),R.setUint16(6,E.descriptorType,!0),R.setUint16(8,E.versionNumber,!0),R.setUint16(10,E.descriptorBlockSize,!0),R.setUint8(12,E.colorModel),R.setUint8(13,E.colorPrimaries),R.setUint8(14,E.transferFunction),R.setUint8(15,E.flags),R.setUint8(16,E.texelBlockDimension.x-1),R.setUint8(17,E.texelBlockDimension.y-1),R.setUint8(18,E.texelBlockDimension.z-1),R.setUint8(19,E.texelBlockDimension.w-1);for(var S=0;S<8;S++)R.setUint8(20+S,E.bytesPlane[S]);for(var q=0;q<E.samples.length;q++){var C=E.samples[q],B=28+16*q;R.setUint16(B+0,C.bitOffset,!0),R.setUint8(B+2,C.bitLength),R.setUint8(B+3,C.channelID),R.setUint8(B+4,C.samplePosition[0]),R.setUint8(B+5,C.samplePosition[1]),R.setUint8(B+6,C.samplePosition[2]),R.setUint8(B+7,C.samplePosition[3]),R.setUint32(B+8,C.sampleLower,!0),R.setUint32(B+12,C.sampleUpper,!0)}var x=c.length+68+3*e.levels.length*8,P=x+O.byteLength,w=P+T.byteLength;w%8&&(w+=8-w%8);for(var M=[],I=new DataView(new ArrayBuffer(3*e.levels.length*8)),k=w+n.byteLength,D=0;D<e.levels.length;D++){var L=e.levels[D];M.push(L.levelData),I.setBigUint64(24*D+0,BigInt(k),!0),I.setBigUint64(24*D+8,BigInt(L.levelData.byteLength),!0),I.setBigUint64(24*D+16,BigInt(L.uncompressedByteLength),!0),k+=L.levelData.byteLength}var G=new ArrayBuffer(68),j=new DataView(G);return j.setUint32(0,e.vkFormat,!0),j.setUint32(4,e.typeSize,!0),j.setUint32(8,e.pixelWidth,!0),j.setUint32(12,e.pixelHeight,!0),j.setUint32(16,e.pixelDepth,!0),j.setUint32(20,e.layerCount,!0),j.setUint32(24,e.faceCount,!0),j.setUint32(28,e.levels.length,!0),j.setUint32(32,e.supercompressionScheme,!0),j.setUint32(36,x,!0),j.setUint32(40,O.byteLength,!0),j.setUint32(44,P,!0),j.setUint32(48,T.byteLength,!0),j.setBigUint64(52,BigInt(w),!0),j.setBigUint64(60,BigInt(n.byteLength),!0),new Uint8Array(m([new Uint8Array(c).buffer,G,I.buffer,O,T,new ArrayBuffer(w-(P+T.byteLength)),n].concat(M)))},ktxParse}var extractMipmapImages={},hasRequiredExtractMipmapImages;function requireExtractMipmapImages(){if(hasRequiredExtractMipmapImages)return extractMipmapImages;function e(e,r,t,n){return Array.isArray(e)?e[r].levelData:new Uint8Array(e.buffer,e.byteOffset+t,n)}function r(e,r,t,n,a){return Array.isArray(n)?e.sizeFunction(n[a]):e.sizeFunction(r,t)}return hasRequiredExtractMipmapImages=1,Object.defineProperty(extractMipmapImages,"__esModule",{value:!0}),extractMipmapImages.extractMipmapImages=function(t,n){for(var a=new Array(n.mipMapLevels),i=n.width,o=n.height,u=0,s=0;s<n.mipMapLevels;++s){var c=r(n,i,o,t,s),l=e(t,s,u,c);a[s]={compressed:!0,format:n.internalFormat,data:l,width:i,height:o,levelSize:c},i=Math.max(1,i>>1),o=Math.max(1,o>>1),u+=c}return a},extractMipmapImages}var ktxFormatHelper={},hasRequiredKtxFormatHelper,hasRequiredParseKtx,hasRequiredParseBasis,hasRequiredBasisLoader;function requireKtxFormatHelper(){if(hasRequiredKtxFormatHelper)return ktxFormatHelper;hasRequiredKtxFormatHelper=1,Object.defineProperty(ktxFormatHelper,"__esModule",{value:!0}),ktxFormatHelper.mapVkFormatToWebGL=function(e){return r[e]};var e=requireGlExtensions(),r={131:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB_S3TC_DXT1_EXT,132:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB_S3TC_DXT1_EXT,133:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_S3TC_DXT1_EXT,134:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,135:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_S3TC_DXT3_EXT,136:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,137:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_S3TC_DXT5_EXT,138:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,139:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RED_RGTC1_EXT,140:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SIGNED_RED_RGTC1_EXT,141:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RED_GREEN_RGTC2_EXT,142:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT,147:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB8_ETC2,148:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ETC2,149:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,150:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,151:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA8_ETC2_EAC,152:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,153:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_R11_EAC,154:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SIGNED_R11_EAC,155:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RG11_EAC,156:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SIGNED_RG11_EAC,157:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_4x4_KHR,158:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,159:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_5x4_KHR,160:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR,161:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_5x5_KHR,162:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,163:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_6x5_KHR,164:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,165:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_6x6_KHR,166:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,167:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_8x5_KHR,168:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,169:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_8x6_KHR,170:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,171:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_8x8_KHR,172:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,173:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10x5_KHR,174:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,175:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10x6_KHR,176:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,177:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10x8_KHR,178:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,179:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10x10_KHR,180:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,181:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_12x10_KHR,182:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,183:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_12x12_KHR,184:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR,1000054e3:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,1000054001:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,1000066e3:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_4x4_KHR,1000066001:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_5x4_KHR,1000066002:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_5x5_KHR,1000066003:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_6x5_KHR,1000066004:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_6x6_KHR,1000066005:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_8x5_KHR,1000066006:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_8x6_KHR,1000066007:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_8x8_KHR,1000066008:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10x5_KHR,1000066009:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10x6_KHR,1000066010:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10x8_KHR,1000066011:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10x10_KHR,1000066012:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_12x10_KHR,1000066013:e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_12x12_KHR};return ktxFormatHelper}function requireParseKtx(){if(hasRequiredParseKtx)return parseKtx;hasRequiredParseKtx=1,Object.defineProperty(parseKtx,"__esModule",{value:!0}),parseKtx.isKTX=function(e){var r=new Uint8Array(e);return!(r.byteLength<n.length||r[0]!==n[0]||r[1]!==n[1]||r[2]!==n[2]||r[3]!==n[3]||r[4]!==n[4]||r[5]!==n[5]||r[6]!==n[6]||r[7]!==n[7]||r[8]!==n[8]||r[9]!==n[9]||r[10]!==n[10]||r[11]!==n[11])},parseKtx.parseKTX=function(n){var a=new Uint8Array(n),i=(0,e.read)(a),o=Math.max(1,i.levels.length),u=i.pixelWidth,s=i.pixelHeight,c=(0,t.mapVkFormatToWebGL)(i.vkFormat);return(0,r.extractMipmapImages)(i.levels,{mipMapLevels:o,width:u,height:s,sizeFunction:function(e){return e.uncompressedByteLength},internalFormat:c})};var e=requireKtxParse(),r=requireExtractMipmapImages(),t=requireKtxFormatHelper(),n=[171,75,84,88,32,50,48,187,13,10,26,10];return parseKtx}function requireParseBasis(){if(hasRequiredParseBasis)return parseBasis;hasRequiredParseBasis=1;var e=interopRequireDefaultExports;Object.defineProperty(parseBasis,"__esModule",{value:!0}),parseBasis.default=function(e,r){return c.apply(this,arguments)},parseBasis.selectSupportedBasisFormat=y;var r=e(requireRegenerator()),t=e(require_typeof$3()),n=e(requireAsyncToGenerator()),a=requireBasisModuleLoader(),i=requireGlExtensions(),o=requireTextureFormats(),u=requireParseKtx(),s={etc1:{basisFormat:0,compressed:!0,format:i.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB_ETC1_WEBGL},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:i.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB_S3TC_DXT1_EXT},bc3:{basisFormat:3,compressed:!0,format:i.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_S3TC_DXT5_EXT},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:i.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB_PVRTC_4BPPV1_IMG},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:i.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG},"astc-4x4":{basisFormat:10,compressed:!0,format:i.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_4X4_KHR},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function c(){return(c=(0,n.default)(r.default.mark((function e(t,n){var i,o,s,c,f,p;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("auto"!==n.basis.containerFormat){e.next=11;break}if(!(0,u.isKTX)(t)){e.next=6;break}return e.next=4,(0,a.loadBasisEncoderModule)(n);case 4:return i=e.sent,e.abrupt("return",d(i.KTX2File,t,n));case 6:return e.next=8,(0,a.loadBasisTrascoderModule)(n);case 8:return o=e.sent,s=o.BasisFile,e.abrupt("return",l(s,t,n));case 11:e.t0=n.basis.module,e.next="encoder"===e.t0?14:(e.t0,22);break;case 14:return e.next=16,(0,a.loadBasisEncoderModule)(n);case 16:c=e.sent,e.t1=n.basis.containerFormat,e.next="ktx2"===e.t1?20:(e.t1,21);break;case 20:return e.abrupt("return",d(c.KTX2File,t,n));case 21:return e.abrupt("return",l(c.BasisFile,t,n));case 22:return e.next=24,(0,a.loadBasisTrascoderModule)(n);case 24:return f=e.sent,p=f.BasisFile,e.abrupt("return",l(p,t,n));case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,r,t){var n=new e(new Uint8Array(r));try{if(!n.startTranscoding())throw new Error("Failed to start basis transcoding");for(var a=n.getNumImages(),i=[],o=0;o<a;o++){for(var u=n.getNumLevels(o),s=[],c=0;c<u;c++)s.push(f(n,o,c,t));i.push(s)}return i}finally{n.close(),n.delete()}}function f(e,r,t,n){var a=e.getImageWidth(r,t),i=e.getImageHeight(r,t),o=e.getHasAlpha(),u=h(n,o),s=u.compressed,c=u.format,l=u.basisFormat,f=e.getImageTranscodedSizeInBytes(r,t,l),d=new Uint8Array(f);if(!e.transcodeImage(d,r,t,l,0,0))throw new Error("failed to start Basis transcoding");return{width:a,height:i,data:d,compressed:s,format:c,hasAlpha:o}}function d(e,r,t){var n=new e(new Uint8Array(r));try{if(!n.startTranscoding())throw new Error("failed to start KTX2 transcoding");for(var a=n.getLevels(),i=[],o=0;o<a;o++){i.push(p(n,o,t));break}return[i]}finally{n.close(),n.delete()}}function p(e,r,t){var n=e.getImageLevelInfo(r,0,0),a=n.alphaFlag,i=n.height,o=n.width,u=h(t,a),s=u.compressed,c=u.format,l=u.basisFormat,f=e.getImageTranscodedSizeInBytes(r,0,0,l),d=new Uint8Array(f);if(!e.transcodeImage(d,r,0,0,l,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:i,data:d,compressed:s,levelSize:f,hasAlpha:a,format:c}}function h(e,r){var n=e&&e.basis&&e.basis.format;return"auto"===n&&(n=y()),"object"===(0,t.default)(n)&&(n=r?n.alpha:n.noAlpha),n=n.toLowerCase(),s[n]}function y(){var e=(0,o.getSupportedGPUTextureFormats)();return e.has("astc")?"astc-4x4":e.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:e.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:e.has("etc1")?"etc1":e.has("etc2")?"etc2":"rgb565"}return parseBasis}function requireBasisLoader(){if(hasRequiredBasisLoader)return basisLoader;hasRequiredBasisLoader=1;var e=interopRequireDefaultExports;Object.defineProperty(basisLoader,"__esModule",{value:!0}),basisLoader._TypecheckBasisWorkerLoader=basisLoader._TypecheckBasisLoader=basisLoader.BasisWorkerLoader=basisLoader.BasisLoader=void 0;var r=e(requireDefineProperty$3()),t=requireEs5$d(),n=requireVersion$3(),a=e(requireParseBasis());function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var u={name:"Basis",id:t.isBrowser?"basis":"basis-nodejs",module:"textures",version:n.VERSION,worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}};basisLoader.BasisWorkerLoader=u;var s=o(o({},u),{},{parse:a.default});basisLoader.BasisLoader=s;var c=u;basisLoader._TypecheckBasisWorkerLoader=c;var l=s;return basisLoader._TypecheckBasisLoader=l,basisLoader}var compressedTextureLoader={},parseCompressedTexture={},parseDds={},hasRequiredParseDds;function requireParseDds(){if(hasRequiredParseDds)return parseDds;hasRequiredParseDds=1,Object.defineProperty(parseDds,"__esModule",{value:!0}),parseDds.getDxt1LevelSize=o,parseDds.getDxtXLevelSize=u,parseDds.isDDS=function(e){return new Uint32Array(e,0,n.HEADER_LENGTH)[n.MAGIC_NUMBER_INDEX]===n.MAGIC_NUMBER},parseDds.parseDDS=function(r){var o=new Int32Array(r,0,n.HEADER_LENGTH),u=o[n.HEADER_PF_FOURCC_INDEX];(0,e.assert)(Boolean(o[n.HEADER_PF_FLAGS_INDEX]&n.DDPF_FOURCC),"DDS: Unsupported format, must contain a FourCC code");var s=(f=u,String.fromCharCode(255&f,f>>8&255,f>>16&255,f>>24&255)),c=a[s],l=i[s];var f;(0,e.assert)(c&&l,"DDS: Unknown pixel format ".concat(u));var d=1;o[n.HEADER_FLAGS_INDEX]&n.DDSD_MIPMAPCOUNT&&(d=Math.max(1,o[n.MIPMAPCOUNT_INDEX]));var p=o[n.HEADER_WIDTH_INDEX],h=o[n.HEADER_HEIGHT_INDEX],y=o[n.HEADER_SIZE_INDEX]+4,v=new Uint8Array(r,y);return(0,t.extractMipmapImages)(v,{mipMapLevels:d,width:p,height:h,sizeFunction:l,internalFormat:c})};var e=requireEs5$b(),r=requireGlExtensions(),t=requireExtractMipmapImages(),n={MAGIC_NUMBER:542327876,HEADER_LENGTH:31,MAGIC_NUMBER_INDEX:0,HEADER_SIZE_INDEX:1,HEADER_FLAGS_INDEX:2,HEADER_HEIGHT_INDEX:3,HEADER_WIDTH_INDEX:4,MIPMAPCOUNT_INDEX:7,HEADER_PF_FLAGS_INDEX:20,HEADER_PF_FOURCC_INDEX:21,DDSD_MIPMAPCOUNT:131072,DDPF_FOURCC:4},a={DXT1:r.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB_S3TC_DXT1_EXT,DXT3:r.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_S3TC_DXT3_EXT,DXT5:r.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_S3TC_DXT5_EXT,"ATC ":r.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB_ATC_WEBGL,ATCA:r.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL,ATCI:r.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL},i={DXT1:o,DXT3:u,DXT5:u,"ATC ":o,ATCA:u,ATCI:u};function o(e,r){return(e+3>>2)*(r+3>>2)*8}function u(e,r){return(e+3>>2)*(r+3>>2)*16}return parseDds}var parsePvr={},hasRequiredParsePvr,hasRequiredParseCompressedTexture,hasRequiredCompressedTextureLoader;function requireParsePvr(){if(hasRequiredParsePvr)return parsePvr;hasRequiredParsePvr=1,Object.defineProperty(parsePvr,"__esModule",{value:!0}),parsePvr.isPVR=function(e){var r=new Uint32Array(e,0,t.HEADER_LENGTH)[t.MAGIC_NUMBER_INDEX];return r===t.MAGIC_NUMBER||r===t.MAGIC_NUMBER_EXTRA},parsePvr.parsePVR=function(e){var i=new Uint32Array(e,0,t.HEADER_LENGTH),o=i[t.PIXEL_FORMAT_INDEX],u=i[t.COLOUR_SPACE_INDEX],s=n[o]||[],c=s.length>1&&u?s[1]:s[0],l=a[o],f=i[t.MIPMAPCOUNT_INDEX],d=i[t.WIDTH_INDEX],p=i[t.HEIGHT_INDEX],h=t.HEADER_SIZE+i[t.METADATA_SIZE_INDEX],y=new Uint8Array(e,h);return(0,r.extractMipmapImages)(y,{mipMapLevels:f,width:d,height:p,sizeFunction:l,internalFormat:c})};var e=requireGlExtensions(),r=requireExtractMipmapImages(),t={MAGIC_NUMBER:55727696,MAGIC_NUMBER_EXTRA:1347834371,HEADER_LENGTH:13,HEADER_SIZE:52,MAGIC_NUMBER_INDEX:0,PIXEL_FORMAT_INDEX:2,COLOUR_SPACE_INDEX:4,HEIGHT_INDEX:6,WIDTH_INDEX:7,MIPMAPCOUNT_INDEX:11,METADATA_SIZE_INDEX:12},n={0:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB_PVRTC_2BPPV1_IMG],1:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG],2:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB_PVRTC_4BPPV1_IMG],3:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG],6:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB_ETC1_WEBGL],7:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB_S3TC_DXT1_EXT],9:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_S3TC_DXT3_EXT],11:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_S3TC_DXT5_EXT],22:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB8_ETC2],23:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA8_ETC2_EAC],24:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2],25:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_R11_EAC],26:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RG11_EAC],27:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_4X4_KHR,e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR],28:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_5X4_KHR,e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR],29:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_5X5_KHR,e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR],30:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_6X5_KHR,e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR],31:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_6X6_KHR,e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR],32:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_8X5_KHR,e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR],33:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_8X6_KHR,e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR],34:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_8X8_KHR,e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR],35:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10X5_KHR,e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR],36:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10X6_KHR,e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR],37:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10X8_KHR,e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR],38:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10X10_KHR,e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR],39:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_12X10_KHR,e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR],40:[e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_12X12_KHR,e.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR]},a={0:i,1:i,2:o,3:o,6:u,7:u,9:s,11:s,22:u,23:s,24:u,25:u,26:s,27:s,28:function(e,r){return Math.floor((e+4)/5)*Math.floor((r+3)/4)*16},29:function(e,r){return Math.floor((e+4)/5)*Math.floor((r+4)/5)*16},30:function(e,r){return Math.floor((e+5)/6)*Math.floor((r+4)/5)*16},31:function(e,r){return Math.floor((e+5)/6)*Math.floor((r+5)/6)*16},32:function(e,r){return Math.floor((e+7)/8)*Math.floor((r+4)/5)*16},33:function(e,r){return Math.floor((e+7)/8)*Math.floor((r+5)/6)*16},34:function(e,r){return Math.floor((e+7)/8)*Math.floor((r+7)/8)*16},35:function(e,r){return Math.floor((e+9)/10)*Math.floor((r+4)/5)*16},36:function(e,r){return Math.floor((e+9)/10)*Math.floor((r+5)/6)*16},37:function(e,r){return Math.floor((e+9)/10)*Math.floor((r+7)/8)*16},38:function(e,r){return Math.floor((e+9)/10)*Math.floor((r+9)/10)*16},39:function(e,r){return Math.floor((e+11)/12)*Math.floor((r+9)/10)*16},40:function(e,r){return Math.floor((e+11)/12)*Math.floor((r+11)/12)*16}};function i(e,r){return(e=Math.max(e,16))*(r=Math.max(r,8))/4}function o(e,r){return(e=Math.max(e,8))*(r=Math.max(r,8))/2}function u(e,r){return Math.floor((e+3)/4)*Math.floor((r+3)/4)*8}function s(e,r){return Math.floor((e+3)/4)*Math.floor((r+3)/4)*16}return parsePvr}function requireParseCompressedTexture(){if(hasRequiredParseCompressedTexture)return parseCompressedTexture;hasRequiredParseCompressedTexture=1,Object.defineProperty(parseCompressedTexture,"__esModule",{value:!0}),parseCompressedTexture.parseCompressedTexture=function(n){if((0,e.isKTX)(n))return(0,e.parseKTX)(n);if((0,r.isDDS)(n))return(0,r.parseDDS)(n);if((0,t.isPVR)(n))return(0,t.parsePVR)(n);throw new Error("Texture container format not recognized")};var e=requireParseKtx(),r=requireParseDds(),t=requireParsePvr();return parseCompressedTexture}function requireCompressedTextureLoader(){if(hasRequiredCompressedTextureLoader)return compressedTextureLoader;hasRequiredCompressedTextureLoader=1;var e=interopRequireDefaultExports;Object.defineProperty(compressedTextureLoader,"__esModule",{value:!0}),compressedTextureLoader._TypecheckCompressedTextureWorkerLoader=compressedTextureLoader._TypecheckCompressedTextureLoader=compressedTextureLoader.CompressedTextureWorkerLoader=compressedTextureLoader.CompressedTextureLoader=void 0;var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=e(requireDefineProperty$3()),a=requireVersion$3(),i=requireParseCompressedTexture(),o=e(requireParseBasis());function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach((function(r){(0,n.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var c={name:"Texture Containers",id:"compressed-texture",module:"textures",version:a.VERSION,worker:!0,extensions:["ktx","ktx2","dds","pvr"],mimeTypes:["image/ktx2","image/ktx","image/vnd-ms.dds","image/x-dds","application/octet-stream"],binary:!0,options:{"compressed-texture":{libraryPath:"libs/",useBasis:!1}}};compressedTextureLoader.CompressedTextureWorkerLoader=c;var l=s(s({},c),{},{parse:function(){var e=(0,t.default)(r.default.mark((function e(t,n){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n["compressed-texture"].useBasis){e.next=5;break}return n.basis=s(s({format:{alpha:"BC3",noAlpha:"BC1"}},n.basis),{},{containerFormat:"ktx2",module:"encoder"}),e.next=4,(0,o.default)(t,n);case 4:return e.abrupt("return",e.sent[0]);case 5:return e.abrupt("return",(0,i.parseCompressedTexture)(t));case 6:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()});compressedTextureLoader.CompressedTextureLoader=l;var f=c;compressedTextureLoader._TypecheckCompressedTextureWorkerLoader=f;var d=l;return compressedTextureLoader._TypecheckCompressedTextureLoader=d,compressedTextureLoader}var crunchLoader={},hasRequiredCrunchLoader;function requireCrunchLoader(){if(hasRequiredCrunchLoader)return crunchLoader;hasRequiredCrunchLoader=1,Object.defineProperty(crunchLoader,"__esModule",{value:!0}),crunchLoader._TypecheckCrunchLoader=crunchLoader.CrunchLoader=void 0;var e={id:"crunch",name:"Crunch",module:"textures",version:requireVersion$3().VERSION,worker:!0,extensions:["crn"],mimeTypes:["image/crn","image/x-crn","application/octet-stream"],binary:!0,options:{crunch:{libraryPath:"libs/"}}};crunchLoader.CrunchLoader=e;var r=e;return crunchLoader._TypecheckCrunchLoader=r,crunchLoader}var npyLoader={},parseNpy={},hasRequiredParseNpy,hasRequiredNpyLoader;function requireParseNpy(){if(hasRequiredParseNpy)return parseNpy;hasRequiredParseNpy=1,Object.defineProperty(parseNpy,"__esModule",{value:!0}),parseNpy.parseNPY=function(e,n){var a;if(!e)return null;var i=function(e){var r,t=e.getUint8(6),n=8;t>=2?(r=e.getUint32(n,!0),n+=4):(r=e.getUint16(n,!0),n+=2);var a=new TextDecoder(t<=2?"latin1":"utf-8"),i=new Uint8Array(e.buffer,n,r),o=a.decode(i);n+=r;var u=JSON.parse(o.replace(/'/g,'"').replace("False","false").replace("(","[").replace(/,*\),*/g,"]"));return{header:u,headerEndOffset:n}}(new DataView(e)),o=i.header,u=i.headerEndOffset,s=o.descr,c=t[s.slice(1,3)];if(!c)throw new Error("Unimplemented type ".concat(s));var l=(null===(a=o.shape)||void 0===a?void 0:a.reduce((function(e,r){return e*r})))*c.BYTES_PER_ELEMENT;if(e.byteLength<u+l)throw new Error("Buffer overflow");var f=new c(e.slice(u,u+l));if(">"===s[0]&&r||"<"===s[0]&&!r)throw new Error("Incorrect endianness");return{data:f,header:o}};var e,r=(e=new Uint32Array([305419896]),!(18===new Uint8Array(e.buffer,e.byteOffset,e.byteLength)[0])),t={u1:Uint8Array,i1:Int8Array,u2:Uint16Array,i2:Int16Array,u4:Uint32Array,i4:Int32Array,f4:Float32Array,f8:Float64Array};return parseNpy}function requireNpyLoader(){if(hasRequiredNpyLoader)return npyLoader;hasRequiredNpyLoader=1;var e=interopRequireDefaultExports;Object.defineProperty(npyLoader,"__esModule",{value:!0}),npyLoader._TypecheckNPYWorkerLoader=npyLoader._TypecheckNPYLoader=npyLoader.NPYWorkerLoader=npyLoader.NPYLoader=void 0;var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=e(requireDefineProperty$3()),a=requireVersion$3(),i=requireParseNpy();function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){(0,n.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var s=new Uint8Array([147,78,85,77,80,89]),c={name:"NPY",id:"npy",module:"textures",version:a.VERSION,worker:!0,extensions:["npy"],mimeTypes:[],tests:[s.buffer],options:{npy:{}}};npyLoader.NPYWorkerLoader=c;var l=u(u({},c),{},{parseSync:i.parseNPY,parse:function(){var e=(0,t.default)(r.default.mark((function e(t,n){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.parseNPY)(t,n));case 1:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()});npyLoader.NPYLoader=l;var f=c;npyLoader._TypecheckNPYWorkerLoader=f;var d=l;return npyLoader._TypecheckNPYLoader=d,npyLoader}var compressedTextureWriter={},encodeTexture={},hasRequiredEncodeTexture,hasRequiredCompressedTextureWriter;function requireEncodeTexture(){if(hasRequiredEncodeTexture)return encodeTexture;hasRequiredEncodeTexture=1;var e=interopRequireDefaultExports;Object.defineProperty(encodeTexture,"__esModule",{value:!0}),encodeTexture.encodeImageURLToCompressedTextureURL=function(e,r,t){return a.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=requireEs5$d();function a(){return(a=(0,t.default)(r.default.mark((function e(t,a,i){var o,u;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=["texture-compressor","--type","s3tc","--compression","DXT1","--quality","normal","--input",t,"--output",a],u=new n.ChildProcessProxy,e.next=4,u.start({command:"npx",arguments:o,spawn:i});case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return encodeTexture}function requireCompressedTextureWriter(){if(hasRequiredCompressedTextureWriter)return compressedTextureWriter;hasRequiredCompressedTextureWriter=1,Object.defineProperty(compressedTextureWriter,"__esModule",{value:!0}),compressedTextureWriter._TypecheckCompressedTextureWriter=compressedTextureWriter.CompressedTextureWriter=void 0;var e=requireVersion$3(),r=requireEncodeTexture(),t={name:"DDS Texture Container",id:"dds",module:"textures",version:e.VERSION,extensions:["dds"],options:{texture:{format:"auto",compression:"auto",quality:"auto",mipmap:!1,flipY:!1,toolFlags:""}},encodeURLtoURL:r.encodeImageURLToCompressedTextureURL};compressedTextureWriter.CompressedTextureWriter=t;var n=t;return compressedTextureWriter._TypecheckCompressedTextureWriter=n,compressedTextureWriter}var ktx2BasisWriter={},encodeKtx2BasisTexture={},hasRequiredEncodeKtx2BasisTexture,hasRequiredKtx2BasisWriter;function requireEncodeKtx2BasisTexture(){if(hasRequiredEncodeKtx2BasisTexture)return encodeKtx2BasisTexture;hasRequiredEncodeKtx2BasisTexture=1;var e=interopRequireDefaultExports;Object.defineProperty(encodeKtx2BasisTexture,"__esModule",{value:!0}),encodeKtx2BasisTexture.encodeKTX2BasisTexture=function(e){return a.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=requireBasisModuleLoader();function a(){return a=(0,t.default)(r.default.mark((function e(t){var a,i,o,u,s,c,l,f,d,p,h,y,v,m,b,g=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(a=g.length>1&&void 0!==g[1]?g[1]:{}).useSRGB,o=void 0!==i&&i,u=a.qualityLevel,s=void 0===u?10:u,c=a.encodeUASTC,l=void 0!==c&&c,f=a.mipmaps,d=void 0!==f&&f,e.next=4,(0,n.loadBasisEncoderModule)(a);case 4:return p=e.sent,h=p.BasisEncoder,y=new h,e.prev=7,v=new Uint8Array(t.width*t.height*4),y.setCreateKTX2File(!0),y.setKTX2UASTCSupercompression(!0),y.setKTX2SRGBTransferFunc(!0),y.setSliceSourceImage(0,t.data,t.width,t.height,!1),y.setPerceptual(o),y.setMipSRGB(o),y.setQualityLevel(s),y.setUASTC(l),y.setMipGen(d),m=y.encode(v),b=v.subarray(0,m).buffer,e.abrupt("return",b);case 23:throw e.prev=23,e.t0=e.catch(7),console.error("Basis Universal Supercompressed GPU Texture encoder Error: ",e.t0),e.t0;case 27:return e.prev=27,y.delete(),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[7,23,27,30]])}))),a.apply(this,arguments)}return encodeKtx2BasisTexture}function requireKtx2BasisWriter(){if(hasRequiredKtx2BasisWriter)return ktx2BasisWriter;hasRequiredKtx2BasisWriter=1,Object.defineProperty(ktx2BasisWriter,"__esModule",{value:!0}),ktx2BasisWriter._TypecheckKTX2TextureWriter=ktx2BasisWriter.KTX2BasisWriter=void 0;var e=requireVersion$3(),r=requireEncodeKtx2BasisTexture(),t={name:"Basis Universal Supercompressed GPU Texture",id:"ktx2-basis-writer",module:"textures",version:e.VERSION,extensions:["ktx2"],options:{useSRGB:!1,qualityLevel:10,encodeUASTC:!1,mipmaps:!1},encode:r.encodeKTX2BasisTexture};ktx2BasisWriter.KTX2BasisWriter=t;var n=t;return ktx2BasisWriter._TypecheckKTX2TextureWriter=n,ktx2BasisWriter}var loadImage$1={},es5$8={},imageLoader={},version$2={},hasRequiredVersion$2;function requireVersion$2(){if(hasRequiredVersion$2)return version$2;hasRequiredVersion$2=1,Object.defineProperty(version$2,"__esModule",{value:!0}),version$2.VERSION=void 0;return version$2.VERSION="3.3.3",version$2}var parseImage={},imageType={},hasRequiredImageType;function requireImageType(){if(hasRequiredImageType)return imageType;hasRequiredImageType=1,Object.defineProperty(imageType,"__esModule",{value:!0}),imageType.getDefaultImageType=function(){if(n)return"imagebitmap";if(t)return"image";if(i)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")},imageType.isImageTypeSupported=function(e){switch(e){case"auto":return n||t||i;case"imagebitmap":return n;case"image":return t;case"data":return i;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}};var e=requireEs5$b(),r=globalThis._parseImageNode,t="undefined"!=typeof Image,n="undefined"!=typeof ImageBitmap,a=Boolean(r),i=!!e.isBrowser||a;return imageType}var parsedImageApi={},hasRequiredParsedImageApi;function requireParsedImageApi(){if(hasRequiredParsedImageApi)return parsedImageApi;hasRequiredParsedImageApi=1;var e=interopRequireDefaultExports;Object.defineProperty(parsedImageApi,"__esModule",{value:!0}),parsedImageApi.deleteImage=function(e){if("imagebitmap"===t(e))e.close()},parsedImageApi.getImageData=n,parsedImageApi.getImageSize=function(e){return n(e)},parsedImageApi.getImageType=t,parsedImageApi.isImage=function(e){return Boolean(a(e))};var r=e(require_typeof$3());function t(e){var r=a(e);if(!r)throw new Error("Not an image");return r}function n(e){switch(t(e)){case"data":return e;case"image":case"imagebitmap":var r=document.createElement("canvas"),n=r.getContext("2d");if(!n)throw new Error("getImageData");return r.width=e.width,r.height=e.height,n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function a(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&e instanceof Image?"image":e&&"object"===(0,r.default)(e)&&e.data&&e.width&&e.height?"data":null}return parsedImageApi}var parseToImage={},svgUtils={},hasRequiredSvgUtils,hasRequiredParseToImage;function requireSvgUtils(){if(hasRequiredSvgUtils)return svgUtils;hasRequiredSvgUtils=1,Object.defineProperty(svgUtils,"__esModule",{value:!0}),svgUtils.getBlob=n,svgUtils.getBlobOrSVGDataUrl=function(e,r){if(t(r)){var a=(new TextDecoder).decode(e);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(a=unescape(encodeURIComponent(a)))}catch(e){throw new Error(e.message)}return"data:image/svg+xml;base64,".concat(btoa(a))}return n(e,r)},svgUtils.isSVG=t;var e=/^data:image\/svg\+xml/,r=/\.svg((\?|#).*)?$/;function t(t){return t&&(e.test(t)||r.test(t))}function n(e,r){if(t(r))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}return svgUtils}function requireParseToImage(){if(hasRequiredParseToImage)return parseToImage;hasRequiredParseToImage=1;var e=interopRequireDefaultExports;Object.defineProperty(parseToImage,"__esModule",{value:!0}),parseToImage.default=function(e,r,t){return a.apply(this,arguments)},parseToImage.loadToImage=i;var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=requireSvgUtils();function a(){return(a=(0,t.default)(r.default.mark((function e(t,a,o){var u,s,c;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=(0,n.getBlobOrSVGDataUrl)(t,o),s=self.URL||self.webkitURL,c="string"!=typeof u&&s.createObjectURL(u),e.prev=3,e.next=6,i(c||u,a);case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,c&&s.revokeObjectURL(c),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[3,,7,10]])})))).apply(this,arguments)}function i(e,r){return o.apply(this,arguments)}function o(){return(o=(0,t.default)(r.default.mark((function e(t,n){var a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=new Image).src=t,!(n.image&&n.image.decode&&a.decode)){e.next=6;break}return e.next=5,a.decode();case 5:return e.abrupt("return",a);case 6:return e.next=8,new Promise((function(e,r){try{a.onload=function(){return e(a)},a.onerror=function(e){return r(new Error("Could not load image ".concat(t,": ").concat(e)))}}catch(e){r(e)}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return parseToImage}var parseToImageBitmap={},hasRequiredParseToImageBitmap;function requireParseToImageBitmap(){if(hasRequiredParseToImageBitmap)return parseToImageBitmap;hasRequiredParseToImageBitmap=1;var e=interopRequireDefaultExports;Object.defineProperty(parseToImageBitmap,"__esModule",{value:!0}),parseToImageBitmap.default=function(e,r,t){return u.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=requireSvgUtils(),a=e(requireParseToImage()),i={},o=!0;function u(){return(u=(0,t.default)(r.default.mark((function e(t,i,o){var u,c,l;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,n.isSVG)(o)){e.next=7;break}return e.next=3,(0,a.default)(t,i,o);case 3:c=e.sent,u=c,e.next=8;break;case 7:u=(0,n.getBlob)(t,o);case 8:return l=i&&i.imagebitmap,e.next=11,s(u,l);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){return c.apply(this,arguments)}function c(){return c=(0,t.default)(r.default.mark((function e(t){var n,a=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l(n=a.length>1&&void 0!==a[1]?a[1]:null)&&o||(n=null),!n){e.next=13;break}return e.prev=3,e.next=6,createImageBitmap(t,n);case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(3),console.warn(e.t0),o=!1;case 13:return e.next=15,createImageBitmap(t);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),c.apply(this,arguments)}function l(e){for(var r in e||i)return!1;return!0}return parseToImageBitmap}var parseToNodeImage={},binaryImageApi={},hasRequiredBinaryImageApi,hasRequiredParseToNodeImage,hasRequiredParseImage,hasRequiredImageLoader;function requireBinaryImageApi(){if(hasRequiredBinaryImageApi)return binaryImageApi;hasRequiredBinaryImageApi=1,Object.defineProperty(binaryImageApi,"__esModule",{value:!0}),binaryImageApi.getBinaryImageMetadata=function(a){var i=n(a);return function(r){var t=n(r),a=t.byteLength>=24&&2303741511===t.getUint32(0,e);if(!a)return null;return{mimeType:"image/png",width:t.getUint32(16,e),height:t.getUint32(20,e)}}(i)||function(r){var t=n(r),a=t.byteLength>=3&&65496===t.getUint16(0,e)&&255===t.getUint8(2);if(!a)return null;var i=function(){for(var e=new Set([65499,65476,65484,65501,65534]),r=65504;r<65520;++r)e.add(r);var t=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:e,sofMarkers:t}}(),o=i.tableMarkers,u=i.sofMarkers,s=2;for(;s+9<t.byteLength;){var c=t.getUint16(s,e);if(u.has(c))return{mimeType:"image/jpeg",height:t.getUint16(s+5,e),width:t.getUint16(s+7,e)};if(!o.has(c))return null;s+=2,s+=t.getUint16(s,e)}return null}(i)||function(t){var a=n(t),i=a.byteLength>=10&&1195984440===a.getUint32(0,e);if(!i)return null;return{mimeType:"image/gif",width:a.getUint16(6,r),height:a.getUint16(8,r)}}(i)||t(i)},binaryImageApi.getBmpMetadata=t;var e=!1,r=!0;function t(t){var a=n(t);return a.byteLength>=14&&16973===a.getUint16(0,e)&&a.getUint32(2,r)===a.byteLength?{mimeType:"image/bmp",width:a.getUint32(18,r),height:a.getUint32(22,r)}:null}function n(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}return binaryImageApi}function requireParseToNodeImage(){if(hasRequiredParseToNodeImage)return parseToNodeImage;hasRequiredParseToNodeImage=1;var e=interopRequireDefaultExports;Object.defineProperty(parseToNodeImage,"__esModule",{value:!0}),parseToNodeImage.default=function(e,r){return i.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=requireEs5$b(),a=requireBinaryImageApi();function i(){return(i=(0,t.default)(r.default.mark((function e(t,i){var o,u,s;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,a.getBinaryImageMetadata)(t)||{},u=o.mimeType,s=globalThis._parseImageNode,(0,n.assert)(s),e.next=5,s(t,u);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return parseToNodeImage}function requireParseImage(){if(hasRequiredParseImage)return parseImage;hasRequiredParseImage=1;var e=interopRequireDefaultExports;Object.defineProperty(parseImage,"__esModule",{value:!0}),parseImage.default=function(e,r,t){return c.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=requireEs5$b(),a=requireImageType(),i=requireParsedImageApi(),o=e(requireParseToImage()),u=e(requireParseToImageBitmap()),s=e(requireParseToNodeImage());function c(){return c=(0,t.default)(r.default.mark((function e(t,a,c){var f,d,p,h,y;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f=(a=a||{}).image||{},d=f.type||"auto",p=(c||{}).url,h=l(d),e.t0=h,e.next="imagebitmap"===e.t0?8:"image"===e.t0?12:"data"===e.t0?16:20;break;case 8:return e.next=10,(0,u.default)(t,a,p);case 10:return y=e.sent,e.abrupt("break",21);case 12:return e.next=14,(0,o.default)(t,a,p);case 14:return y=e.sent,e.abrupt("break",21);case 16:return e.next=18,(0,s.default)(t,a);case 18:return y=e.sent,e.abrupt("break",21);case 20:(0,n.assert)(!1);case 21:return"data"===d&&(y=(0,i.getImageData)(y)),e.abrupt("return",y);case 23:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function l(e){switch(e){case"auto":case"data":return(0,a.getDefaultImageType)();default:return(0,a.isImageTypeSupported)(e),e}}return parseImage}function requireImageLoader(){if(hasRequiredImageLoader)return imageLoader;hasRequiredImageLoader=1;var e=interopRequireDefaultExports;Object.defineProperty(imageLoader,"__esModule",{value:!0}),imageLoader._typecheckImageLoader=imageLoader.ImageLoader=void 0;var r=requireVersion$2(),t=e(requireParseImage()),n=requireBinaryImageApi(),a={id:"image",module:"images",name:"Images",version:r.VERSION,mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:t.default,tests:[function(e){return Boolean((0,n.getBinaryImageMetadata)(new DataView(e)))}],options:{image:{type:"auto",decode:!0}}};imageLoader.ImageLoader=a;var i=a;return imageLoader._typecheckImageLoader=i,imageLoader}var imageWriter={},encodeImage={},hasRequiredEncodeImage,hasRequiredImageWriter;function requireEncodeImage(){if(hasRequiredEncodeImage)return encodeImage;hasRequiredEncodeImage=1;var e=interopRequireDefaultExports;Object.defineProperty(encodeImage,"__esModule",{value:!0}),encodeImage.encodeImage=function(e,r){return i.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=requireParsedImageApi(),a=globalThis._encodeImageNode;function i(){return(i=(0,t.default)(r.default.mark((function e(t,n){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=n||{}).image=n.image||{},e.abrupt("return",a?a(t,{type:n.image.mimeType}):u(t,n));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var o=!0;function u(e,r){return s.apply(this,arguments)}function s(){return(s=(0,t.default)(r.default.mark((function e(t,a){var i,u,s,l,f,d,p,h;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.image,u=i.mimeType,s=i.jpegQuality,l=(0,n.getImageSize)(t),f=l.width,d=l.height,(p=document.createElement("canvas")).width=f,p.height=d,c(t,p),e.next=8,new Promise((function(e){if(s&&o)try{return void p.toBlob(e,u,s)}catch(e){o=!1}p.toBlob(e,u)}));case 8:if(h=e.sent){e.next=11;break}throw new Error("image encoding failed");case 11:return e.next=13,h.arrayBuffer();case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e,r){if(0===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)&&0===(arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)&&"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var t=r.getContext("bitmaprenderer");if(t)return t.transferFromImageBitmap(e),r}var n=r.getContext("2d");if(e.data){var a=new Uint8ClampedArray(e.data),i=new ImageData(a,e.width,e.height);return n.putImageData(i,0,0),r}return n.drawImage(e,0,0),r}return encodeImage}function requireImageWriter(){if(hasRequiredImageWriter)return imageWriter;hasRequiredImageWriter=1,Object.defineProperty(imageWriter,"__esModule",{value:!0}),imageWriter.ImageWriter=void 0;var e=requireVersion$2(),r=requireEncodeImage(),t={name:"Images",id:"image",module:"images",version:e.VERSION,extensions:["jpeg"],options:{image:{mimeType:"image/png",jpegQuality:null}},encode:r.encodeImage};return imageWriter.ImageWriter=t,imageWriter}var imageFormat={},hasRequiredImageFormat;function requireImageFormat(){if(hasRequiredImageFormat)return imageFormat;hasRequiredImageFormat=1,Object.defineProperty(imageFormat,"__esModule",{value:!0}),imageFormat._isImageFormatSupported=function(n){void 0===t[n]&&(t[n]=function(t){switch(t){case"image/webp":return function(){if(!e.isBrowser)return!1;try{return 0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch(e){return!1}}();case"image/svg":return e.isBrowser;default:if(!e.isBrowser){var n=globalThis._parseImageNode;return Boolean(n)&&r.includes(t)}return!0}}(n));return t[n]};var e=requireEs5$b(),r=["image/png","image/jpeg","image/gif"],t={};return imageFormat}var loadImage={},generateUrl$1={},hasRequiredGenerateUrl$1;function requireGenerateUrl$1(){if(hasRequiredGenerateUrl$1)return generateUrl$1;hasRequiredGenerateUrl$1=1;var e=interopRequireDefaultExports;Object.defineProperty(generateUrl$1,"__esModule",{value:!0}),generateUrl$1.generateUrl=function(e,r,n){var i=e;"function"==typeof e&&(i=e(a(a({},r),n)));(0,t.assert)("string"==typeof i);var o=r.baseUrl;o&&(i="/"===o[o.length-1]?"".concat(o).concat(i):"".concat(o,"/").concat(i));return(0,t.resolvePath)(i)};var r=e(requireDefineProperty$3()),t=requireEs5$b();function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function a(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))}))}return e}return generateUrl$1}var deepLoad$1={},asyncDeepMap$1={},hasRequiredAsyncDeepMap$1,hasRequiredDeepLoad$1,hasRequiredLoadImage$1,hasRequiredEs5$8;function requireAsyncDeepMap$1(){if(hasRequiredAsyncDeepMap$1)return asyncDeepMap$1;hasRequiredAsyncDeepMap$1=1;var e=interopRequireDefaultExports;Object.defineProperty(asyncDeepMap$1,"__esModule",{value:!0}),asyncDeepMap$1.asyncDeepMap=function(e,r){return i.apply(this,arguments)},asyncDeepMap$1.mapSubtree=o;var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=e(require_typeof$3()),a=function(e){return e&&"object"===(0,n.default)(e)};function i(){return i=(0,t.default)(r.default.mark((function e(t,n){var a,i=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,o(t,n,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}function o(e,r,t){return u.apply(this,arguments)}function u(){return(u=(0,t.default)(r.default.mark((function e(t,n,i){var o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(t)){e.next=4;break}return e.next=3,l(t,n,i);case 3:case 7:case 11:return e.abrupt("return",e.sent);case 4:if(!a(t)){e.next=8;break}return e.next=7,s(t,n,i);case 8:return o=t,e.next=11,n(o,i);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e,r,t){return c.apply(this,arguments)}function c(){return(c=(0,t.default)(r.default.mark((function e(t,n,a){var i,u,s,c;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c in i=[],u={},s=function(e){var r=o(t[e],n,a).then((function(r){u[e]=r}));i.push(r)},t)s(c);return e.next=6,Promise.all(i);case 6:return e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,r){return f.apply(this,arguments)}function f(){return f=(0,t.default)(r.default.mark((function e(t,n){var a,i,u=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>2&&void 0!==u[2]?u[2]:{},i=t.map((function(e){return o(e,n,a)})),e.next=4,Promise.all(i);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}return asyncDeepMap$1}function requireDeepLoad$1(){if(hasRequiredDeepLoad$1)return deepLoad$1;hasRequiredDeepLoad$1=1;var e=interopRequireDefaultExports;Object.defineProperty(deepLoad$1,"__esModule",{value:!0}),deepLoad$1.deepLoad=function(e,r,t){return a.apply(this,arguments)},deepLoad$1.shallowLoad=i;var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=requireAsyncDeepMap$1();function a(){return a=(0,t.default)(r.default.mark((function e(t,a,o){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n.asyncDeepMap)(t,(function(e){return i(e,a,o)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}function i(e,r,t){return o.apply(this,arguments)}function o(){return o=(0,t.default)(r.default.mark((function e(t,n,a){var i,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,a.fetch);case 2:return i=e.sent,e.next=5,i.arrayBuffer();case 5:return o=e.sent,e.next=8,n(o,a);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}return deepLoad$1}function requireLoadImage$1(){if(hasRequiredLoadImage$1)return loadImage;hasRequiredLoadImage$1=1;var e=interopRequireDefaultExports;Object.defineProperty(loadImage,"__esModule",{value:!0}),loadImage.getImageUrls=d,loadImage.getMipLevels=v,loadImage.loadImage=function(e){return f.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireDefineProperty$3()),n=e(requireAsyncToGenerator()),a=requireEs5$b(),i=e(requireParseImage()),o=requireParsedImageApi(),u=requireGenerateUrl$1(),s=requireDeepLoad$1();function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?c(Object(n),!0).forEach((function(r){(0,t.default)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function f(){return f=(0,n.default)(r.default.mark((function e(t){var n,a,o=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,d(t,n);case 3:return a=e.sent,e.next=6,(0,s.deepLoad)(a,i.default,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function d(e,r){return p.apply(this,arguments)}function p(){return p=(0,n.default)(r.default.mark((function e(t,n){var a,i,o=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.length>2&&void 0!==o[2]?o[2]:{},0===(i=n&&n.image&&n.image.mipLevels||0)){e.next=8;break}return e.next=5,h(t,i,n,a);case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=(0,u.generateUrl)(t,n,a);case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function h(e,r,t,n){return y.apply(this,arguments)}function y(){return(y=(0,n.default)(r.default.mark((function e(t,n,c,f){var d,p,h,y,m,b,g,_;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=[],"auto"!==n){e.next=9;break}return p=(0,u.generateUrl)(t,c,l(l({},f),{},{lod:0})),e.next=5,(0,s.shallowLoad)(p,i.default,c);case 5:h=e.sent,y=(0,o.getImageSize)(h),m=y.width,b=y.height,n=v({width:m,height:b}),d.push(p);case 9:for((0,a.assert)(n>0),g=d.length;g<n;++g)_=(0,u.generateUrl)(t,c,l(l({},f),{},{lod:g})),d.push(_);return e.abrupt("return",d);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){var r=e.width,t=e.height;return 1+Math.floor(Math.log2(Math.max(r,t)))}return loadImage}function requireEs5$8(){return hasRequiredEs5$8||(hasRequiredEs5$8=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ImageLoader",{enumerable:!0,get:function(){return r.ImageLoader}}),Object.defineProperty(e,"ImageWriter",{enumerable:!0,get:function(){return t.ImageWriter}}),Object.defineProperty(e,"_isImageFormatSupported",{enumerable:!0,get:function(){return o._isImageFormatSupported}}),Object.defineProperty(e,"getBinaryImageMetadata",{enumerable:!0,get:function(){return n.getBinaryImageMetadata}}),Object.defineProperty(e,"getDefaultImageType",{enumerable:!0,get:function(){return a.getDefaultImageType}}),Object.defineProperty(e,"getImageData",{enumerable:!0,get:function(){return i.getImageData}}),Object.defineProperty(e,"getImageSize",{enumerable:!0,get:function(){return i.getImageSize}}),Object.defineProperty(e,"getImageType",{enumerable:!0,get:function(){return i.getImageType}}),Object.defineProperty(e,"isImage",{enumerable:!0,get:function(){return i.isImage}}),Object.defineProperty(e,"isImageTypeSupported",{enumerable:!0,get:function(){return a.isImageTypeSupported}}),Object.defineProperty(e,"loadImage",{enumerable:!0,get:function(){return u.loadImage}});var r=requireImageLoader(),t=requireImageWriter(),n=requireBinaryImageApi(),a=requireImageType(),i=requireParsedImageApi(),o=requireImageFormat(),u=requireLoadImage$1()}(es5$8)),es5$8}var generateUrl={},hasRequiredGenerateUrl;function requireGenerateUrl(){if(hasRequiredGenerateUrl)return generateUrl;hasRequiredGenerateUrl=1;var e=interopRequireDefaultExports;Object.defineProperty(generateUrl,"__esModule",{value:!0}),generateUrl.generateUrl=function(e,r,n){var i="function"==typeof e?e(a(a({},r),n)):e,o=r.baseUrl;o&&(i="/"===o[o.length-1]?"".concat(o).concat(i):"".concat(o,"/").concat(i));return(0,t.resolvePath)(i)};var r=e(requireDefineProperty$3()),t=requireEs5$b();function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function a(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))}))}return e}return generateUrl}var deepLoad={},asyncDeepMap={},hasRequiredAsyncDeepMap,hasRequiredDeepLoad,hasRequiredLoadImage;function requireAsyncDeepMap(){if(hasRequiredAsyncDeepMap)return asyncDeepMap;hasRequiredAsyncDeepMap=1;var e=interopRequireDefaultExports;Object.defineProperty(asyncDeepMap,"__esModule",{value:!0}),asyncDeepMap.asyncDeepMap=function(e,r){return i.apply(this,arguments)},asyncDeepMap.mapSubtree=o;var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=e(require_typeof$3()),a=function(e){return e&&"object"===(0,n.default)(e)};function i(){return i=(0,t.default)(r.default.mark((function e(t,n){var a,i=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,o(t,n,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}function o(e,r,t){return u.apply(this,arguments)}function u(){return(u=(0,t.default)(r.default.mark((function e(t,n,i){var o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(t)){e.next=4;break}return e.next=3,l(t,n,i);case 3:case 7:case 11:return e.abrupt("return",e.sent);case 4:if(!a(t)){e.next=8;break}return e.next=7,s(t,n,i);case 8:return o=t,e.next=11,n(o,i);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e,r,t){return c.apply(this,arguments)}function c(){return(c=(0,t.default)(r.default.mark((function e(t,n,a){var i,u,s,c;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c in i=[],u={},s=function(e){var r=o(t[e],n,a).then((function(r){u[e]=r}));i.push(r)},t)s(c);return e.next=6,Promise.all(i);case 6:return e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,r){return f.apply(this,arguments)}function f(){return f=(0,t.default)(r.default.mark((function e(t,n){var a,i,u=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>2&&void 0!==u[2]?u[2]:{},i=t.map((function(e){return o(e,n,a)})),e.next=4,Promise.all(i);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}return asyncDeepMap}function requireDeepLoad(){if(hasRequiredDeepLoad)return deepLoad;hasRequiredDeepLoad=1;var e=interopRequireDefaultExports;Object.defineProperty(deepLoad,"__esModule",{value:!0}),deepLoad.deepLoad=function(e,r,t){return a.apply(this,arguments)},deepLoad.shallowLoad=i;var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=requireAsyncDeepMap();function a(){return a=(0,t.default)(r.default.mark((function e(t,a,o){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n.asyncDeepMap)(t,(function(e){return i(e,a,o)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}function i(e,r,t){return o.apply(this,arguments)}function o(){return o=(0,t.default)(r.default.mark((function e(t,n,a){var i,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,a.fetch);case 2:return i=e.sent,e.next=5,i.arrayBuffer();case 5:return o=e.sent,e.next=8,n(o,a);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}return deepLoad}function requireLoadImage(){if(hasRequiredLoadImage)return loadImage$1;hasRequiredLoadImage=1;var e=interopRequireDefaultExports;Object.defineProperty(loadImage$1,"__esModule",{value:!0}),loadImage$1.getImageUrls=f,loadImage$1.getMipLevels=y,loadImage$1.loadImageTexture=function(e){return l.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireDefineProperty$3()),n=e(requireAsyncToGenerator()),a=requireEs5$b(),i=requireEs5$8(),o=requireGenerateUrl(),u=requireDeepLoad();function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?s(Object(n),!0).forEach((function(r){(0,t.default)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function l(){return l=(0,n.default)(r.default.mark((function e(t){var n,a,o=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,f(t,n);case 3:return a=e.sent,e.next=6,(0,u.deepLoad)(a,i.ImageLoader.parse,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function f(e,r){return d.apply(this,arguments)}function d(){return d=(0,n.default)(r.default.mark((function e(t,n){var a,i,u=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=u.length>2&&void 0!==u[2]?u[2]:{},0===(i=n&&n.image&&n.image.mipLevels||0)){e.next=8;break}return e.next=5,p(t,i,n,a);case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=(0,o.generateUrl)(t,n,a);case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(e,r,t,n){return h.apply(this,arguments)}function h(){return(h=(0,n.default)(r.default.mark((function e(t,n,s,l){var f,d,p,h,v,m,b,g;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=[],"auto"!==n){e.next=9;break}return d=(0,o.generateUrl)(t,s,c(c({},l),{},{lod:0})),e.next=5,(0,u.shallowLoad)(d,i.ImageLoader.parse,s);case 5:p=e.sent,h=(0,i.getImageSize)(p),v=h.width,m=h.height,n=y({width:v,height:m}),f.push(d);case 9:for((0,a.assert)(n>0),b=f.length;b<n;++b)g=(0,o.generateUrl)(t,s,c(c({},l),{},{lod:b})),f.push(g);return e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return 1+Math.floor(Math.log2(Math.max(e.width,e.height)))}return loadImage$1}var loadImageArray={},hasRequiredLoadImageArray;function requireLoadImageArray(){if(hasRequiredLoadImageArray)return loadImageArray;hasRequiredLoadImageArray=1;var e=interopRequireDefaultExports;Object.defineProperty(loadImageArray,"__esModule",{value:!0}),loadImageArray.getImageArrayUrls=u,loadImageArray.loadImageTextureArray=function(e,r){return o.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=requireEs5$8(),a=requireLoadImage(),i=requireDeepLoad();function o(){return o=(0,t.default)(r.default.mark((function e(t,a){var o,s,c=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.length>2&&void 0!==c[2]?c[2]:{},e.next=3,u(t,a,o);case 3:return s=e.sent,e.next=6,(0,i.deepLoad)(s,n.ImageLoader.parse,o);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function u(e,r){return s.apply(this,arguments)}function s(){return s=(0,t.default)(r.default.mark((function e(t,n){var i,o,u,s,c=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=c.length>2&&void 0!==c[2]?c[2]:{},o=[],u=0;u<t;u++)s=(0,a.getImageUrls)(n,i,{index:u}),o.push(s);return e.next=5,Promise.all(o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}return loadImageArray}var loadImageCube={},hasRequiredLoadImageCube,hasRequiredEs5$7;function requireLoadImageCube(){if(hasRequiredLoadImageCube)return loadImageCube;hasRequiredLoadImageCube=1;var e=interopRequireDefaultExports;Object.defineProperty(loadImageCube,"__esModule",{value:!0}),loadImageCube.getImageCubeUrls=l,loadImageCube.loadImageTextureCube=function(e){return d.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireDefineProperty$3()),n=e(requireAsyncToGenerator()),a=requireEs5$8(),i=requireLoadImage(),o=requireDeepLoad();function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function s(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?u(Object(n),!0).forEach((function(r){(0,t.default)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var c=[{face:34069,direction:"right",axis:"x",sign:"positive"},{face:34070,direction:"left",axis:"x",sign:"negative"},{face:34071,direction:"top",axis:"y",sign:"positive"},{face:34072,direction:"bottom",axis:"y",sign:"negative"},{face:34073,direction:"front",axis:"z",sign:"positive"},{face:34074,direction:"back",axis:"z",sign:"negative"}];function l(e,r){return f.apply(this,arguments)}function f(){return(f=(0,n.default)(r.default.mark((function e(t,n){var a,o,u,l,f;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a={},o=[],u=0,l=function(e){var r=c[u],l=(0,i.getImageUrls)(t,n,s(s({},r),{},{index:u++})).then((function(e){a[r.face]=e}));o.push(l)},f=0;f<c.length;++f)l();return e.next=7,Promise.all(o);case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return d=(0,n.default)(r.default.mark((function e(t){var n,i,u=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,l(t,n);case 3:return i=e.sent,e.next=6,(0,o.deepLoad)(i,a.ImageLoader.parse,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}return loadImageCube}function requireEs5$7(){return hasRequiredEs5$7||(hasRequiredEs5$7=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"BasisLoader",{enumerable:!0,get:function(){return n.BasisLoader}}),Object.defineProperty(e,"BasisWorkerLoader",{enumerable:!0,get:function(){return n.BasisWorkerLoader}}),Object.defineProperty(e,"CompressedTextureLoader",{enumerable:!0,get:function(){return a.CompressedTextureLoader}}),Object.defineProperty(e,"CompressedTextureWorkerLoader",{enumerable:!0,get:function(){return a.CompressedTextureWorkerLoader}}),Object.defineProperty(e,"CompressedTextureWriter",{enumerable:!0,get:function(){return u.CompressedTextureWriter}}),Object.defineProperty(e,"CrunchLoader",{enumerable:!0,get:function(){return i.CrunchLoader}}),Object.defineProperty(e,"CrunchWorkerLoader",{enumerable:!0,get:function(){return i.CrunchLoader}}),Object.defineProperty(e,"GL_EXTENSIONS_CONSTANTS",{enumerable:!0,get:function(){return d.GL_EXTENSIONS_CONSTANTS}}),Object.defineProperty(e,"KTX2BasisWriter",{enumerable:!0,get:function(){return s.KTX2BasisWriter}}),e.KTX2BasisWriterWorker=void 0,Object.defineProperty(e,"NPYLoader",{enumerable:!0,get:function(){return o.NPYLoader}}),Object.defineProperty(e,"NPYWorkerLoader",{enumerable:!0,get:function(){return o.NPYWorkerLoader}}),Object.defineProperty(e,"getSupportedGPUTextureFormats",{enumerable:!0,get:function(){return h.getSupportedGPUTextureFormats}}),Object.defineProperty(e,"loadImageTexture",{enumerable:!0,get:function(){return c.loadImageTexture}}),Object.defineProperty(e,"loadImageTextureArray",{enumerable:!0,get:function(){return l.loadImageTextureArray}}),Object.defineProperty(e,"loadImageTextureCube",{enumerable:!0,get:function(){return f.loadImageTextureCube}}),Object.defineProperty(e,"selectSupportedBasisFormat",{enumerable:!0,get:function(){return p.selectSupportedBasisFormat}});var r=requireEs5$b(),t=requireVersion$3(),n=requireBasisLoader(),a=requireCompressedTextureLoader(),i=requireCrunchLoader(),o=requireNpyLoader(),u=requireCompressedTextureWriter(),s=requireKtx2BasisWriter(),c=requireLoadImage(),l=requireLoadImageArray(),f=requireLoadImageCube(),d=requireGlExtensions(),p=requireParseBasis(),h=requireTextureFormats(),y={name:"Basis Universal Supercompressed GPU Texture",id:r.isBrowser?"ktx2-basis-writer":"ktx2-basis-writer-nodejs",module:"textures",version:t.VERSION,extensions:["ktx2"],worker:!0,options:{useSRGB:!1,qualityLevel:10,encodeUASTC:!1,mipmaps:!1}};e.KTX2BasisWriterWorker=y}(es5$9)),es5$9}var assert$4={},hasRequiredAssert$3;function requireAssert$3(){if(hasRequiredAssert$3)return assert$4;return hasRequiredAssert$3=1,Object.defineProperty(assert$4,"__esModule",{value:!0}),assert$4.assert=function(e,r){if(!e)throw new Error(r||"assert failed: gltf")},assert$4}var resolveUrl={},hasRequiredResolveUrl;function requireResolveUrl(){if(hasRequiredResolveUrl)return resolveUrl;return hasRequiredResolveUrl=1,Object.defineProperty(resolveUrl,"__esModule",{value:!0}),resolveUrl.resolveUrl=function(e,r){if(e.startsWith("data:")||e.startsWith("http:")||e.startsWith("https:"))return e;var t=r.baseUri||r.uri;if(!t)throw new Error("'baseUri' must be provided to resolve relative url ".concat(e));return t.substr(0,t.lastIndexOf("/")+1)+e},resolveUrl}var getTypedArray={},hasRequiredGetTypedArray;function requireGetTypedArray(){if(hasRequiredGetTypedArray)return getTypedArray;hasRequiredGetTypedArray=1,Object.defineProperty(getTypedArray,"__esModule",{value:!0}),getTypedArray.getTypedArrayForBufferView=r,getTypedArray.getTypedArrayForImageData=function(e,t,n){var a=e.images[n],i=e.bufferViews[a.bufferView];return r(e,t,i)};var e=requireAssert$3();function r(r,t,n){var a=r.bufferViews[n];(0,e.assert)(a);var i=t[a.buffer];(0,e.assert)(i);var o=(a.byteOffset||0)+i.byteOffset;return new Uint8Array(i.arrayBuffer,o,a.byteLength)}return getTypedArray}var gltfExtensions={},EXT_meshopt_compression={},gltfScenegraph={},gltfUtils={},hasRequiredGltfUtils,hasRequiredGltfScenegraph;function requireGltfUtils(){if(hasRequiredGltfUtils)return gltfUtils;hasRequiredGltfUtils=1,Object.defineProperty(gltfUtils,"__esModule",{value:!0}),gltfUtils.getAccessorArrayTypeAndLength=function(r,t){var n=o[r.componentType],u=a[r.type],s=i[r.componentType],c=r.count*u,l=r.count*u*s;return(0,e.assert)(l>=0&&l<=t.byteLength),{ArrayType:n,length:c,byteLength:l}},gltfUtils.getAccessorTypeFromSize=function(e){var t=r[e-1];return t||r[0]},gltfUtils.getComponentTypeFromArray=function(e){var r=n.get(e.constructor);if(!r)throw new Error("Illegal typed array");return r};var e=requireAssert$3(),r=["SCALAR","VEC2","VEC3","VEC4"],t=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],n=new Map(t),a={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},i={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},o={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};return gltfUtils}function requireGltfScenegraph(){if(hasRequiredGltfScenegraph)return gltfScenegraph;hasRequiredGltfScenegraph=1;var e=interopRequireDefaultExports;Object.defineProperty(gltfScenegraph,"__esModule",{value:!0}),gltfScenegraph.default=void 0;var r=e(require_typeof$3()),t=e(requireClassCallCheck$3()),n=e(requireCreateClass$3()),a=e(requireDefineProperty$3()),i=requireEs5$8(),o=requireEs5$b(),u=requireAssert$3(),s=requireGltfUtils();function c(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return l(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return l(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}function l(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function f(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?f(Object(t),!0).forEach((function(r){(0,a.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var p={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]},h=function(){function e(r){(0,t.default)(this,e),(0,a.default)(this,"gltf",void 0),(0,a.default)(this,"sourceBuffers",void 0),(0,a.default)(this,"byteLength",void 0),this.gltf=r||{json:d({},p),buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}return(0,n.default)(e,[{key:"json",get:function(){return this.gltf.json}},{key:"getApplicationData",value:function(e){return this.json[e]}},{key:"getExtraData",value:function(e){return(this.json.extras||{})[e]}},{key:"getExtension",value:function(e){var r=this.getUsedExtensions().find((function(r){return r===e})),t=this.json.extensions||{};return r?t[e]||!0:null}},{key:"getRequiredExtension",value:function(e){return this.getRequiredExtensions().find((function(r){return r===e}))?this.getExtension(e):null}},{key:"getRequiredExtensions",value:function(){return this.json.extensionsRequired||[]}},{key:"getUsedExtensions",value:function(){return this.json.extensionsUsed||[]}},{key:"getRemovedExtensions",value:function(){return this.json.extensionsRemoved||[]}},{key:"getObjectExtension",value:function(e,r){return(e.extensions||{})[r]}},{key:"getScene",value:function(e){return this.getObject("scenes",e)}},{key:"getNode",value:function(e){return this.getObject("nodes",e)}},{key:"getSkin",value:function(e){return this.getObject("skins",e)}},{key:"getMesh",value:function(e){return this.getObject("meshes",e)}},{key:"getMaterial",value:function(e){return this.getObject("materials",e)}},{key:"getAccessor",value:function(e){return this.getObject("accessors",e)}},{key:"getTexture",value:function(e){return this.getObject("textures",e)}},{key:"getSampler",value:function(e){return this.getObject("samplers",e)}},{key:"getImage",value:function(e){return this.getObject("images",e)}},{key:"getBufferView",value:function(e){return this.getObject("bufferViews",e)}},{key:"getBuffer",value:function(e){return this.getObject("buffers",e)}},{key:"getObject",value:function(e,t){if("object"===(0,r.default)(t))return t;var n=this.json[e]&&this.json[e][t];if(!n)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(t,"]"));return n}},{key:"getTypedArrayForBufferView",value:function(e){var r=(e=this.getBufferView(e)).buffer,t=this.gltf.buffers[r];(0,u.assert)(t);var n=(e.byteOffset||0)+t.byteOffset;return new Uint8Array(t.arrayBuffer,n,e.byteLength)}},{key:"getTypedArrayForAccessor",value:function(e){e=this.getAccessor(e);var r=this.getBufferView(e.bufferView),t=this.getBuffer(r.buffer).data,n=(0,s.getAccessorArrayTypeAndLength)(e,r),a=n.ArrayType,i=n.length;return new a(t,r.byteOffset+e.byteOffset,i)}},{key:"getTypedArrayForImageData",value:function(e){e=this.getAccessor(e);var r=this.getBufferView(e.bufferView),t=this.getBuffer(r.buffer).data,n=r.byteOffset||0;return new Uint8Array(t,n,r.byteLength)}},{key:"addApplicationData",value:function(e,r){return this.json[e]=r,this}},{key:"addExtraData",value:function(e,r){return this.json.extras=this.json.extras||{},this.json.extras[e]=r,this}},{key:"addObjectExtension",value:function(e,r,t){return e.extensions=e.extensions||{},e.extensions[r]=t,this.registerUsedExtension(r),this}},{key:"setObjectExtension",value:function(e,r,t){(e.extensions||{})[r]=t}},{key:"removeObjectExtension",value:function(e,r){var t=e.extensions||{},n=t[r];return delete t[r],n}},{key:"addExtension",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,u.assert)(r),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=r,this.registerUsedExtension(e),r}},{key:"addRequiredExtension",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,u.assert)(r),this.addExtension(e,r),this.registerRequiredExtension(e),r}},{key:"registerUsedExtension",value:function(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find((function(r){return r===e}))||this.json.extensionsUsed.push(e)}},{key:"registerRequiredExtension",value:function(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find((function(r){return r===e}))||this.json.extensionsRequired.push(e)}},{key:"removeExtension",value:function(e){if(this.getExtension(e)){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e],Array.isArray(this.json.extensionsRemoved)||(this.json.extensionsRemoved=[]);var r=this.json.extensionsRemoved;r.includes(e)||r.push(e)}}},{key:"setDefaultScene",value:function(e){this.json.scene=e}},{key:"addScene",value:function(e){var r=e.nodeIndices;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:r}),this.json.scenes.length-1}},{key:"addNode",value:function(e){var r=e.meshIndex,t=e.matrix;this.json.nodes=this.json.nodes||[];var n={mesh:r};return t&&(n.matrix=t),this.json.nodes.push(n),this.json.nodes.length-1}},{key:"addMesh",value:function(e){var r=e.attributes,t=e.indices,n=e.material,a=e.mode,i=void 0===a?4:a,o={primitives:[{attributes:this._addAttributes(r),mode:i}]};if(t){var u=this._addIndices(t);o.primitives[0].indices=u}return Number.isFinite(n)&&(o.primitives[0].material=n),this.json.meshes=this.json.meshes||[],this.json.meshes.push(o),this.json.meshes.length-1}},{key:"addPointCloud",value:function(e){var r={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(r),this.json.meshes.length-1}},{key:"addImage",value:function(e,r){var t=(0,i.getBinaryImageMetadata)(e),n=r||(null==t?void 0:t.mimeType),a={bufferView:this.addBufferView(e),mimeType:n};return this.json.images=this.json.images||[],this.json.images.push(a),this.json.images.length-1}},{key:"addBufferView",value:function(e){var r=e.byteLength;(0,u.assert)(Number.isFinite(r)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);var t={buffer:0,byteOffset:this.byteLength,byteLength:r};return this.byteLength+=(0,o.padToNBytes)(r,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(t),this.json.bufferViews.length-1}},{key:"addAccessor",value:function(e,r){var t={bufferView:e,type:(0,s.getAccessorTypeFromSize)(r.size),componentType:r.componentType,count:r.count,max:r.max,min:r.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(t),this.json.accessors.length-1}},{key:"addBinaryBuffer",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:3},t=this.addBufferView(e),n={min:r.min,max:r.max};n.min&&n.max||(n=this._getAccessorMinMax(e,r.size));var a={size:r.size,componentType:(0,s.getComponentTypeFromArray)(e),count:Math.round(e.length/r.size),min:n.min,max:n.max};return this.addAccessor(t,Object.assign(a,r))}},{key:"addTexture",value:function(e){var r={source:e.imageIndex};return this.json.textures=this.json.textures||[],this.json.textures.push(r),this.json.textures.length-1}},{key:"addMaterial",value:function(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}},{key:"createBinaryChunk",value:function(){var e,r;this.gltf.buffers=[];var t,n=this.byteLength,a=new ArrayBuffer(n),i=new Uint8Array(a),u=0,s=c(this.sourceBuffers||[]);try{for(s.s();!(t=s.n()).done;){var l=t.value;u=(0,o.copyToArray)(l,i,u)}}catch(e){s.e(e)}finally{s.f()}null!==(e=this.json)&&void 0!==e&&null!==(r=e.buffers)&&void 0!==r&&r[0]?this.json.buffers[0].byteLength=n:this.json.buffers=[{byteLength:n}],this.gltf.binary=a,this.sourceBuffers=[a]}},{key:"_removeStringFromArray",value:function(e,r){for(var t=!0;t;){var n=e.indexOf(r);n>-1?e.splice(n,1):t=!1}}},{key:"_addAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={};for(var t in e){var n=e[t],a=this._getGltfAttributeName(t),i=this.addBinaryBuffer(n.value,n);r[a]=i}return r}},{key:"_addIndices",value:function(e){return this.addBinaryBuffer(e,{size:1})}},{key:"_getGltfAttributeName",value:function(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}},{key:"_getAccessorMinMax",value:function(e,r){var t={min:null,max:null};if(e.length<r)return t;t.min=[],t.max=[];var n,a=c(e.subarray(0,r));try{for(a.s();!(n=a.n()).done;){var i=n.value;t.min.push(i),t.max.push(i)}}catch(e){a.e(e)}finally{a.f()}for(var o=r;o<e.length;o+=r)for(var u=0;u<r;u++)t.min[0+u]=Math.min(t.min[0+u],e[o+u]),t.max[0+u]=Math.max(t.max[0+u],e[o+u]);return t}}]),e}();return gltfScenegraph.default=h,gltfScenegraph}var meshoptDecoder={},hasRequiredMeshoptDecoder,hasRequiredEXT_meshopt_compression;function requireMeshoptDecoder(){if(hasRequiredMeshoptDecoder)return meshoptDecoder;hasRequiredMeshoptDecoder=1;var e=interopRequireDefaultExports;Object.defineProperty(meshoptDecoder,"__esModule",{value:!0}),meshoptDecoder.isMeshoptSupported=function(){return i},meshoptDecoder.meshoptDecodeGltfBuffer=function(e,r,t,n,a){return y.apply(this,arguments)},meshoptDecoder.meshoptDecodeIndexBuffer=function(e,r,t,n){return p.apply(this,arguments)},meshoptDecoder.meshoptDecodeIndexSequence=function(e,r,t,n){return h.apply(this,arguments)},meshoptDecoder.meshoptDecodeVertexBuffer=function(e,r,t,n){return d.apply(this,arguments)};var r,t=e(requireRegenerator()),n=e(requireAsyncToGenerator()),a=e(require_typeof$3()),i="object"!==("undefined"==typeof WebAssembly?"undefined":(0,a.default)(WebAssembly)),o="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",u="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",s=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),c=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),l={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},f={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function d(){return d=(0,n.default)(t.default.mark((function e(r,n,a,i){var o,u,s=arguments;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:"NONE",e.next=3,v();case 3:A(u=e.sent,u.exports.meshopt_decodeVertexBuffer,r,n,a,i,u.exports[l[o]]);case 5:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(){return(p=(0,n.default)(t.default.mark((function e(r,n,a,i){var o;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:A(o=e.sent,o.exports.meshopt_decodeIndexBuffer,r,n,a,i);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=(0,n.default)(t.default.mark((function e(r,n,a,i){var o;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:A(o=e.sent,o.exports.meshopt_decodeIndexSequence,r,n,a,i);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return y=(0,n.default)(t.default.mark((function e(r,n,a,i,o){var u,s,c=arguments;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=c.length>5&&void 0!==c[5]?c[5]:"NONE",e.next=3,v();case 3:A(s=e.sent,s.exports[f[o]],r,n,a,i,s.exports[l[u||"NONE"]]);case 5:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function v(){return m.apply(this,arguments)}function m(){return(m=(0,n.default)(t.default.mark((function e(){return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r||(r=b()),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return g.apply(this,arguments)}function g(){return(g=(0,n.default)(t.default.mark((function e(){var r,n;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o,WebAssembly.validate(s)&&(r=u,console.log("Warning: meshopt_decoder is using experimental SIMD support")),e.next=4,WebAssembly.instantiate(_(r),{});case 4:return n=e.sent,e.next=7,n.instance.exports.__wasm_call_ctors();case 7:return e.abrupt("return",n.instance);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){for(var r=new Uint8Array(e.length),t=0;t<e.length;++t){var n=e.charCodeAt(t);r[t]=n>96?n-71:n>64?n-65:n>47?n+4:n>46?63:62}for(var a=0,i=0;i<e.length;++i)r[a++]=r[i]<60?c[r[i]]:64*(r[i]-60)+r[++i];return r.buffer.slice(0,a)}function A(e,r,t,n,a,i,o){var u=e.exports.sbrk,s=n+3&-4,c=u(s*a),l=u(i.length),f=new Uint8Array(e.exports.memory.buffer);f.set(i,l);var d=r(c,n,a,l,i.length);if(0===d&&o&&o(c,s,a),t.set(f.subarray(c,c+n*a)),u(c-u(0)),0!==d)throw new Error("Malformed buffer data: ".concat(d))}return meshoptDecoder}function requireEXT_meshopt_compression(){if(hasRequiredEXT_meshopt_compression)return EXT_meshopt_compression;hasRequiredEXT_meshopt_compression=1;var e=interopRequireDefaultExports;Object.defineProperty(EXT_meshopt_compression,"__esModule",{value:!0}),EXT_meshopt_compression.decode=function(e,r){return c.apply(this,arguments)},EXT_meshopt_compression.name=void 0;var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=e(requireGltfScenegraph()),a=requireMeshoptDecoder();function i(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return o(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==t.return||t.return()}finally{if(s)throw i}}}}function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var u="EXT_meshopt_compression",s=u;function c(){return(c=(0,t.default)(r.default.mark((function e(t,a){var o,s,c,f,d,p;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=new n.default(t),null!=a&&null!==(o=a.gltf)&&void 0!==o&&o.decompressMeshes){e.next=3;break}return e.abrupt("return");case 3:c=[],f=i(t.json.bufferViews||[]);try{for(f.s();!(d=f.n()).done;)p=d.value,c.push(l(s,p))}catch(e){f.e(e)}finally{f.f()}return e.next=8,Promise.all(c);case 8:s.removeExtension(u);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,r){return f.apply(this,arguments)}function f(){return(f=(0,t.default)(r.default.mark((function e(t,n){var i,o,s,c,l,f,d,p,h,y,v,m,b,g;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=t.getObjectExtension(n,u))){e.next=9;break}return o=i.byteOffset,s=void 0===o?0:o,c=i.byteLength,l=void 0===c?0:c,f=i.byteStride,d=i.count,p=i.mode,h=i.filter,y=void 0===h?"NONE":h,v=i.buffer,m=t.gltf.buffers[v],b=new Uint8Array(m.arrayBuffer,m.byteOffset+s,l),g=new Uint8Array(t.gltf.buffers[n.buffer].arrayBuffer,n.byteOffset,n.byteLength),e.next=8,(0,a.meshoptDecodeGltfBuffer)(g,d,f,b,p,y);case 8:return e.abrupt("return",g);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return EXT_meshopt_compression.name=s,EXT_meshopt_compression}var EXT_texture_webp={},hasRequiredEXT_texture_webp;function requireEXT_texture_webp(){if(hasRequiredEXT_texture_webp)return EXT_texture_webp;hasRequiredEXT_texture_webp=1;var e=interopRequireDefaultExports;Object.defineProperty(EXT_texture_webp,"__esModule",{value:!0}),EXT_texture_webp.name=void 0,EXT_texture_webp.preprocess=function(e,i){var o=new t.default(e);if(!(0,r._isImageFormatSupported)("image/webp")){if(o.getRequiredExtensions().includes(a))throw new Error("gltf: Required extension ".concat(a," not supported by browser"));return}var u,s=function(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return n(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return n(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==t.return||t.return()}finally{if(s)throw o}}}}(o.json.textures||[]);try{for(s.s();!(u=s.n()).done;){var c=u.value,l=o.getObjectExtension(c,a);l&&(c.source=l.source),o.removeObjectExtension(c,a)}}catch(e){s.e(e)}finally{s.f()}o.removeExtension(a)};var r=requireEs5$8(),t=e(requireGltfScenegraph());function n(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var a="EXT_texture_webp",i=a;return EXT_texture_webp.name=i,EXT_texture_webp}var KHR_texture_basisu={},hasRequiredKHR_texture_basisu;function requireKHR_texture_basisu(){if(hasRequiredKHR_texture_basisu)return KHR_texture_basisu;hasRequiredKHR_texture_basisu=1;var e=interopRequireDefaultExports;Object.defineProperty(KHR_texture_basisu,"__esModule",{value:!0}),KHR_texture_basisu.name=void 0,KHR_texture_basisu.preprocess=function(e,a){var i,o=new r.default(e),u=function(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,r)}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}(o.json.textures||[]);try{for(u.s();!(i=u.n()).done;){var s=i.value,c=o.getObjectExtension(s,n);c&&(s.source=c.source),o.removeObjectExtension(s,n)}}catch(e){u.e(e)}finally{u.f()}o.removeExtension(n)};var r=e(requireGltfScenegraph());function t(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var n="KHR_texture_basisu",a=n;return KHR_texture_basisu.name=a,KHR_texture_basisu}var KHR_draco_mesh_compression={},es5$7={},dracoLoader={},version$1={},hasRequiredVersion$1,hasRequiredDracoLoader;function requireVersion$1(){if(hasRequiredVersion$1)return version$1;hasRequiredVersion$1=1,Object.defineProperty(version$1,"__esModule",{value:!0}),version$1.VERSION=void 0;return version$1.VERSION="3.3.3",version$1}function requireDracoLoader(){if(hasRequiredDracoLoader)return dracoLoader;hasRequiredDracoLoader=1;var e=interopRequireDefaultExports;Object.defineProperty(dracoLoader,"__esModule",{value:!0}),dracoLoader._TypecheckDracoLoader=dracoLoader.DracoLoader=void 0;var r=e(require_typeof$3()),t=requireEs5$d(),n=requireVersion$1(),a={draco:{decoderType:"object"===("undefined"==typeof WebAssembly?"undefined":(0,r.default)(WebAssembly))?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}},i={name:"Draco",id:t.isBrowser?"draco":"draco-nodejs",module:"draco",shapes:["mesh"],version:n.VERSION,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:a};dracoLoader.DracoLoader=i;var o=i;return dracoLoader._TypecheckDracoLoader=o,dracoLoader}var dracoParser={},es5$6={},tableBatchBuilder={},baseTableBatchAggregator={},hasRequiredBaseTableBatchAggregator;function requireBaseTableBatchAggregator(){if(hasRequiredBaseTableBatchAggregator)return baseTableBatchAggregator;hasRequiredBaseTableBatchAggregator=1;var e=interopRequireDefaultExports;Object.defineProperty(baseTableBatchAggregator,"__esModule",{value:!0}),baseTableBatchAggregator.default=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=e(requireDefineProperty$3()),a=function(){function e(t,a){if((0,r.default)(this,e),(0,n.default)(this,"schema",void 0),(0,n.default)(this,"options",void 0),(0,n.default)(this,"length",0),(0,n.default)(this,"rows",null),(0,n.default)(this,"cursor",0),(0,n.default)(this,"_headers",[]),this.options=a,this.schema=t,!Array.isArray(t))for(var i in this._headers=[],t)this._headers[t[i].index]=t[i].name}return(0,t.default)(e,[{key:"rowCount",value:function(){return this.length}},{key:"addArrayRow",value:function(e,r){Number.isFinite(r)&&(this.cursor=r),this.rows=this.rows||new Array(100),this.rows[this.length]=e,this.length++}},{key:"addObjectRow",value:function(e,r){Number.isFinite(r)&&(this.cursor=r),this.rows=this.rows||new Array(100),this.rows[this.length]=e,this.length++}},{key:"getBatch",value:function(){var e=this.rows;return e?(e=e.slice(0,this.length),this.rows=null,{shape:this.options.shape,batchType:"data",data:e,length:this.length,schema:this.schema,cursor:this.cursor}):null}}]),e}();return baseTableBatchAggregator.default=a,baseTableBatchAggregator}var rowTableBatchAggregator={},rowUtils={},hasRequiredRowUtils,hasRequiredRowTableBatchAggregator;function requireRowUtils(){if(hasRequiredRowUtils)return rowUtils;return hasRequiredRowUtils=1,Object.defineProperty(rowUtils,"__esModule",{value:!0}),rowUtils.convertToArrayRow=function(e,r){if(!e)throw new Error("null row");if(!r)throw new Error("no headers");for(var t=new Array(r.length),n=0;n<r.length;n++)t[n]=e[r[n]];return t},rowUtils.convertToObjectRow=function(e,r){if(!e)throw new Error("null row");if(!r)throw new Error("no headers");for(var t={},n=0;n<r.length;n++)t[r[n]]=e[n];return t},rowUtils}function requireRowTableBatchAggregator(){if(hasRequiredRowTableBatchAggregator)return rowTableBatchAggregator;hasRequiredRowTableBatchAggregator=1;var e=interopRequireDefaultExports;Object.defineProperty(rowTableBatchAggregator,"__esModule",{value:!0}),rowTableBatchAggregator.default=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=e(requireDefineProperty$3()),a=requireRowUtils(),i=function(){function e(t,a){if((0,r.default)(this,e),(0,n.default)(this,"schema",void 0),(0,n.default)(this,"options",void 0),(0,n.default)(this,"length",0),(0,n.default)(this,"objectRows",null),(0,n.default)(this,"arrayRows",null),(0,n.default)(this,"cursor",0),(0,n.default)(this,"_headers",[]),this.options=a,this.schema=t,!Array.isArray(t))for(var i in this._headers=[],t)this._headers[t[i].index]=t[i].name}return(0,t.default)(e,[{key:"rowCount",value:function(){return this.length}},{key:"addArrayRow",value:function(e,r){switch(Number.isFinite(r)&&(this.cursor=r),this.options.shape){case"object-row-table":var t=(0,a.convertToObjectRow)(e,this._headers);this.addObjectRow(t,r);break;case"array-row-table":this.arrayRows=this.arrayRows||new Array(100),this.arrayRows[this.length]=e,this.length++}}},{key:"addObjectRow",value:function(e,r){switch(Number.isFinite(r)&&(this.cursor=r),this.options.shape){case"array-row-table":var t=(0,a.convertToArrayRow)(e,this._headers);this.addArrayRow(t,r);break;case"object-row-table":this.objectRows=this.objectRows||new Array(100),this.objectRows[this.length]=e,this.length++}}},{key:"getBatch",value:function(){var e=this.arrayRows||this.objectRows;return e?(e=e.slice(0,this.length),this.arrayRows=null,this.objectRows=null,{shape:this.options.shape,batchType:"data",data:e,length:this.length,schema:this.schema,cursor:this.cursor}):null}}]),e}();return rowTableBatchAggregator.default=i,rowTableBatchAggregator}var columnarTableBatchAggregator={},hasRequiredColumnarTableBatchAggregator,hasRequiredTableBatchBuilder;function requireColumnarTableBatchAggregator(){if(hasRequiredColumnarTableBatchAggregator)return columnarTableBatchAggregator;hasRequiredColumnarTableBatchAggregator=1;var e=interopRequireDefaultExports;Object.defineProperty(columnarTableBatchAggregator,"__esModule",{value:!0}),columnarTableBatchAggregator.default=void 0;var r=e(requireSlicedToArray$2()),t=e(requireClassCallCheck$3()),n=e(requireCreateClass$3()),a=e(requireDefineProperty$3()),i=function(){function e(r,n){(0,t.default)(this,e),(0,a.default)(this,"schema",void 0),(0,a.default)(this,"length",0),(0,a.default)(this,"allocated",0),(0,a.default)(this,"columns",{}),this.schema=r,this._reallocateColumns()}return(0,n.default)(e,[{key:"rowCount",value:function(){return this.length}},{key:"addArrayRow",value:function(e){this._reallocateColumns();var r=0;for(var t in this.columns)this.columns[t][this.length]=e[r++];this.length++}},{key:"addObjectRow",value:function(e){for(var r in this._reallocateColumns(),e)this.columns[r][this.length]=e[r];this.length++}},{key:"getBatch",value:function(){this._pruneColumns();var e=Array.isArray(this.schema)?this.columns:{};if(!Array.isArray(this.schema))for(var r in this.schema){var t=this.schema[r];e[t.name]=this.columns[t.index]}return this.columns={},{shape:"columnar-table",batchType:"data",data:e,schema:this.schema,length:this.length}}},{key:"_reallocateColumns",value:function(){if(!(this.length<this.allocated))for(var e in this.allocated=this.allocated>0?this.allocated*=2:100,this.columns={},this.schema){var r=this.schema[e],t=r.type||Float32Array,n=this.columns[r.index];if(n&&ArrayBuffer.isView(n)){var a=new t(this.allocated);a.set(n),this.columns[r.index]=a}else n?(n.length=this.allocated,this.columns[r.index]=n):this.columns[r.index]=new t(this.allocated)}}},{key:"_pruneColumns",value:function(){for(var e=0,t=Object.entries(this.columns);e<t.length;e++){var n=(0,r.default)(t[e],2),a=n[0],i=n[1];this.columns[a]=i.slice(0,this.length)}}}]),e}();return columnarTableBatchAggregator.default=i,columnarTableBatchAggregator}function requireTableBatchBuilder(){if(hasRequiredTableBatchBuilder)return tableBatchBuilder;hasRequiredTableBatchBuilder=1;var e=interopRequireDefaultExports;Object.defineProperty(tableBatchBuilder,"__esModule",{value:!0}),tableBatchBuilder.default=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=e(requireDefineProperty$3()),a=e(requireBaseTableBatchAggregator()),i=e(requireRowTableBatchAggregator()),o=e(requireColumnarTableBatchAggregator());function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach((function(r){(0,n.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var c={shape:"array-row-table",batchSize:"auto",batchDebounceMs:0,limit:0,_limitMB:0},l="TableBatchBuilder",f=function(){function e(t,a){(0,r.default)(this,e),(0,n.default)(this,"schema",void 0),(0,n.default)(this,"options",void 0),(0,n.default)(this,"aggregator",null),(0,n.default)(this,"batchCount",0),(0,n.default)(this,"bytesUsed",0),(0,n.default)(this,"isChunkComplete",!1),(0,n.default)(this,"lastBatchEmittedMs",Date.now()),(0,n.default)(this,"totalLength",0),(0,n.default)(this,"totalBytes",0),(0,n.default)(this,"rowBytes",0),this.schema=t,this.options=s(s({},c),a)}return(0,t.default)(e,[{key:"limitReached",value:function(){var e,r;return!!(Boolean(null===(e=this.options)||void 0===e?void 0:e.limit)&&this.totalLength>=this.options.limit)||!!(Boolean(null===(r=this.options)||void 0===r?void 0:r._limitMB)&&this.totalBytes/1e6>=this.options._limitMB)}},{key:"addRow",value:function(e){this.limitReached()||(this.totalLength++,this.rowBytes=this.rowBytes||this._estimateRowMB(e),this.totalBytes+=this.rowBytes,Array.isArray(e)?this.addArrayRow(e):this.addObjectRow(e))}},{key:"addArrayRow",value:function(e){if(!this.aggregator){var r=this._getTableBatchType();this.aggregator=new r(this.schema,this.options)}this.aggregator.addArrayRow(e)}},{key:"addObjectRow",value:function(e){if(!this.aggregator){var r=this._getTableBatchType();this.aggregator=new r(this.schema,this.options)}this.aggregator.addObjectRow(e)}},{key:"chunkComplete",value:function(e){e instanceof ArrayBuffer&&(this.bytesUsed+=e.byteLength),"string"==typeof e&&(this.bytesUsed+=e.length),this.isChunkComplete=!0}},{key:"getFullBatch",value:function(e){return this._isFull()?this._getBatch(e):null}},{key:"getFinalBatch",value:function(e){return this._getBatch(e)}},{key:"_estimateRowMB",value:function(e){return Array.isArray(e)?8*e.length:8*Object.keys(e).length}},{key:"_isFull",value:function(){if(!this.aggregator||0===this.aggregator.rowCount())return!1;if("auto"===this.options.batchSize){if(!this.isChunkComplete)return!1}else if(this.options.batchSize>this.aggregator.rowCount())return!1;return!(this.options.batchDebounceMs>Date.now()-this.lastBatchEmittedMs)&&(this.isChunkComplete=!1,this.lastBatchEmittedMs=Date.now(),!0)}},{key:"_getBatch",value:function(e){if(!this.aggregator)return null;null!=e&&e.bytesUsed&&(this.bytesUsed=e.bytesUsed);var r=this.aggregator.getBatch();return r.count=this.batchCount,r.bytesUsed=this.bytesUsed,Object.assign(r,e),this.batchCount++,this.aggregator=null,r}},{key:"_getTableBatchType",value:function(){switch(this.options.shape){case"row-table":return a.default;case"array-row-table":case"object-row-table":return i.default;case"columnar-table":return o.default;case"arrow-table":if(!e.ArrowBatch)throw new Error(l);return e.ArrowBatch;default:throw new Error(l)}}}]),e}();return tableBatchBuilder.default=f,(0,n.default)(f,"ArrowBatch",void 0),tableBatchBuilder}var meshUtils={},hasRequiredMeshUtils;function requireMeshUtils(){if(hasRequiredMeshUtils)return meshUtils;return hasRequiredMeshUtils=1,Object.defineProperty(meshUtils,"__esModule",{value:!0}),meshUtils.getMeshBoundingBox=function(e){for(var r=1/0,t=1/0,n=1/0,a=-1/0,i=-1/0,o=-1/0,u=e.POSITION?e.POSITION.value:[],s=u&&u.length,c=0;c<s;c+=3){var l=u[c],f=u[c+1],d=u[c+2];r=l<r?l:r,t=f<t?f:t,n=d<n?d:n,a=l>a?l:a,i=f>i?f:i,o=d>o?d:o}return[[r,t,n],[a,i,o]]},meshUtils.getMeshSize=function(e){var r=0;for(var t in e){var n=e[t];ArrayBuffer.isView(n)&&(r+=n.byteLength*n.BYTES_PER_ELEMENT)}return r},meshUtils}var deduceMeshSchema={},schema$1={},schema={},assert$3={},hasRequiredAssert$2,hasRequiredSchema$1;function requireAssert$2(){if(hasRequiredAssert$2)return assert$3;return hasRequiredAssert$2=1,Object.defineProperty(assert$3,"__esModule",{value:!0}),assert$3.assert=function(e,r){if(!e)throw new Error(r||"loader assertion failed.")},assert$3}function requireSchema$1(){if(hasRequiredSchema$1)return schema;hasRequiredSchema$1=1;var e=interopRequireDefaultExports;Object.defineProperty(schema,"__esModule",{value:!0}),schema.default=void 0;var r=e(requireToConsumableArray$1()),t=e(requireClassCallCheck$3()),n=e(requireCreateClass$3()),a=e(requireDefineProperty$3()),i=requireAssert$2();function o(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return u(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return u(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw i}}}}function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var s=function(){function e(r,n){(0,t.default)(this,e),(0,a.default)(this,"fields",void 0),(0,a.default)(this,"metadata",void 0),(0,i.assert)(Array.isArray(r)),function(e){var r,t={},n=o(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;t[a.name]&&console.warn("Schema: duplicated field name",a.name,a),t[a.name]=!0}}catch(e){n.e(e)}finally{n.f()}}(r),this.fields=r,this.metadata=n||new Map}return(0,n.default)(e,[{key:"compareTo",value:function(e){if(this.metadata!==e.metadata)return!1;if(this.fields.length!==e.fields.length)return!1;for(var r=0;r<this.fields.length;++r)if(!this.fields[r].compareTo(e.fields[r]))return!1;return!0}},{key:"select",value:function(){for(var r=Object.create(null),t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var i=0,o=n;i<o.length;i++){var u=o[i];r[u]=!0}var s=this.fields.filter((function(e){return r[e.name]}));return new e(s,this.metadata)}},{key:"selectAt",value:function(){for(var r=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return new e(n.map((function(e){return r.fields[e]})).filter(Boolean),this.metadata)}},{key:"assign",value:function(r){var t,n=this.metadata;if(r instanceof e){var a=r;t=a.fields,n=c(c(new Map,this.metadata),a.metadata)}else t=r;var i,u=Object.create(null),s=o(this.fields);try{for(s.s();!(i=s.n()).done;){var l=i.value;u[l.name]=l}}catch(e){s.e(e)}finally{s.f()}var f,d=o(t);try{for(d.s();!(f=d.n()).done;){var p=f.value;u[p.name]=p}}catch(e){d.e(e)}finally{d.f()}return new e(Object.values(u),n)}}]),e}();function c(e,t){return new Map([].concat((0,r.default)(e||new Map),(0,r.default)(t||new Map)))}return schema.default=s,schema}var field={},hasRequiredField;function requireField(){if(hasRequiredField)return field;hasRequiredField=1;var e=interopRequireDefaultExports;Object.defineProperty(field,"__esModule",{value:!0}),field.default=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=e(requireDefineProperty$3()),a=function(){function e(t,a){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map;(0,r.default)(this,e),(0,n.default)(this,"name",void 0),(0,n.default)(this,"type",void 0),(0,n.default)(this,"nullable",void 0),(0,n.default)(this,"metadata",void 0),this.name=t,this.type=a,this.nullable=i,this.metadata=o}return(0,t.default)(e,[{key:"typeId",get:function(){return this.type&&this.type.typeId}},{key:"clone",value:function(){return new e(this.name,this.type,this.nullable,this.metadata)}},{key:"compareTo",value:function(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}},{key:"toString",value:function(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}]),e}();return field.default=a,field}var type={},assertThisInitialized$1={exports:{}},hasRequiredAssertThisInitialized$1;function requireAssertThisInitialized$1(){return hasRequiredAssertThisInitialized$1||(hasRequiredAssertThisInitialized$1=1,function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports}(assertThisInitialized$1)),assertThisInitialized$1.exports}var inherits$1={exports:{}},setPrototypeOf$1={exports:{}},hasRequiredSetPrototypeOf$1,hasRequiredInherits$1;function requireSetPrototypeOf$1(){return hasRequiredSetPrototypeOf$1||(hasRequiredSetPrototypeOf$1=1,function(e){function r(t,n){return e.exports=r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t,n)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(setPrototypeOf$1)),setPrototypeOf$1.exports}function requireInherits$1(){return hasRequiredInherits$1||(hasRequiredInherits$1=1,function(e){var r=requireSetPrototypeOf$1();e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports}(inherits$1)),inherits$1.exports}var possibleConstructorReturn$1={exports:{}},hasRequiredPossibleConstructorReturn$1;function requirePossibleConstructorReturn$1(){return hasRequiredPossibleConstructorReturn$1||(hasRequiredPossibleConstructorReturn$1=1,function(e){var r=require_typeof$3().default,t=requireAssertThisInitialized$1();e.exports=function(e,n){if(n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return t(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(possibleConstructorReturn$1)),possibleConstructorReturn$1.exports}var getPrototypeOf$1={exports:{}},hasRequiredGetPrototypeOf$1;function requireGetPrototypeOf$1(){return hasRequiredGetPrototypeOf$1||(hasRequiredGetPrototypeOf$1=1,function(e){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(getPrototypeOf$1)),getPrototypeOf$1.exports}var _enum={},hasRequired_enum,hasRequiredType,hasRequiredSchema;function require_enum(){return hasRequired_enum||(hasRequired_enum=1,Object.defineProperty(_enum,"__esModule",{value:!0}),_enum.Type=void 0,_enum.Type=e,function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"}(e||(_enum.Type=e={}))),_enum;var e}function requireType(){return hasRequiredType||(hasRequiredType=1,function(e){var r=interopRequireDefaultExports;Object.defineProperty(e,"__esModule",{value:!0}),e.TimestampSecond=e.TimestampNanosecond=e.TimestampMillisecond=e.TimestampMicrosecond=e.Timestamp=e.TimeSecond=e.TimeMillisecond=e.Time=e.Struct=e.Null=e.IntervalYearMonth=e.IntervalDayTime=e.Interval=e.Int8=e.Int64=e.Int32=e.Int16=e.Int=e.Float64=e.Float32=e.Float16=e.Float=e.FixedSizeList=e.DateMillisecond=e.DateDay=e.Date=e.DataType=e.Bool=e.Binary=void 0,Object.defineProperty(e,"Type",{enumerable:!0,get:function(){return m.Type}}),e.Utf8=e.Uint8=e.Uint64=e.Uint32=e.Uint16=void 0;var t,n,a,i,o,u,s,c,l=r(requireAssertThisInitialized$1()),f=r(requireDefineProperty$3()),d=r(requireInherits$1()),p=r(requirePossibleConstructorReturn$1()),h=r(requireGetPrototypeOf$1()),y=r(requireClassCallCheck$3()),v=r(requireCreateClass$3()),m=require_enum();function b(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,h.default)(e);if(r){var a=(0,h.default)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,p.default)(this,t)}}var g=function(){function e(){(0,y.default)(this,e)}return(0,v.default)(e,[{key:"typeId",get:function(){return m.Type.NONE}},{key:"compareTo",value:function(e){return this===e}}],[{key:"isNull",value:function(e){return e&&e.typeId===m.Type.Null}},{key:"isInt",value:function(e){return e&&e.typeId===m.Type.Int}},{key:"isFloat",value:function(e){return e&&e.typeId===m.Type.Float}},{key:"isBinary",value:function(e){return e&&e.typeId===m.Type.Binary}},{key:"isUtf8",value:function(e){return e&&e.typeId===m.Type.Utf8}},{key:"isBool",value:function(e){return e&&e.typeId===m.Type.Bool}},{key:"isDecimal",value:function(e){return e&&e.typeId===m.Type.Decimal}},{key:"isDate",value:function(e){return e&&e.typeId===m.Type.Date}},{key:"isTime",value:function(e){return e&&e.typeId===m.Type.Time}},{key:"isTimestamp",value:function(e){return e&&e.typeId===m.Type.Timestamp}},{key:"isInterval",value:function(e){return e&&e.typeId===m.Type.Interval}},{key:"isList",value:function(e){return e&&e.typeId===m.Type.List}},{key:"isStruct",value:function(e){return e&&e.typeId===m.Type.Struct}},{key:"isUnion",value:function(e){return e&&e.typeId===m.Type.Union}},{key:"isFixedSizeBinary",value:function(e){return e&&e.typeId===m.Type.FixedSizeBinary}},{key:"isFixedSizeList",value:function(e){return e&&e.typeId===m.Type.FixedSizeList}},{key:"isMap",value:function(e){return e&&e.typeId===m.Type.Map}},{key:"isDictionary",value:function(e){return e&&e.typeId===m.Type.Dictionary}}]),e}();e.DataType=g;var _=function(e,r){(0,d.default)(n,e);var t=b(n);function n(){return(0,y.default)(this,n),t.apply(this,arguments)}return(0,v.default)(n,[{key:"typeId",get:function(){return m.Type.Null}},{key:r,get:function(){return"Null"}},{key:"toString",value:function(){return"Null"}}]),n}(g,Symbol.toStringTag);e.Null=_;var A=function(e,r){(0,d.default)(n,e);var t=b(n);function n(){return(0,y.default)(this,n),t.apply(this,arguments)}return(0,v.default)(n,[{key:"typeId",get:function(){return m.Type.Bool}},{key:r,get:function(){return"Bool"}},{key:"toString",value:function(){return"Bool"}}]),n}(g,Symbol.toStringTag);e.Bool=A,t=Symbol.toStringTag;var T=function(e){(0,d.default)(n,e);var r=b(n);function n(e,t){var a;return(0,y.default)(this,n),a=r.call(this),(0,f.default)((0,l.default)(a),"isSigned",void 0),(0,f.default)((0,l.default)(a),"bitWidth",void 0),a.isSigned=e,a.bitWidth=t,a}return(0,v.default)(n,[{key:"typeId",get:function(){return m.Type.Int}},{key:t,get:function(){return"Int"}},{key:"toString",value:function(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}]),n}(g);e.Int=T;var O=function(e){(0,d.default)(t,e);var r=b(t);function t(){return(0,y.default)(this,t),r.call(this,!0,8)}return(0,v.default)(t)}(T);e.Int8=O;var R=function(e){(0,d.default)(t,e);var r=b(t);function t(){return(0,y.default)(this,t),r.call(this,!0,16)}return(0,v.default)(t)}(T);e.Int16=R;var E=function(e){(0,d.default)(t,e);var r=b(t);function t(){return(0,y.default)(this,t),r.call(this,!0,32)}return(0,v.default)(t)}(T);e.Int32=E;var S=function(e){(0,d.default)(t,e);var r=b(t);function t(){return(0,y.default)(this,t),r.call(this,!0,64)}return(0,v.default)(t)}(T);e.Int64=S;var q=function(e){(0,d.default)(t,e);var r=b(t);function t(){return(0,y.default)(this,t),r.call(this,!1,8)}return(0,v.default)(t)}(T);e.Uint8=q;var C=function(e){(0,d.default)(t,e);var r=b(t);function t(){return(0,y.default)(this,t),r.call(this,!1,16)}return(0,v.default)(t)}(T);e.Uint16=C;var B=function(e){(0,d.default)(t,e);var r=b(t);function t(){return(0,y.default)(this,t),r.call(this,!1,32)}return(0,v.default)(t)}(T);e.Uint32=B;var x=function(e){(0,d.default)(t,e);var r=b(t);function t(){return(0,y.default)(this,t),r.call(this,!1,64)}return(0,v.default)(t)}(T);e.Uint64=x;var P=16,w=32,M=64;n=Symbol.toStringTag;var I=function(e){(0,d.default)(t,e);var r=b(t);function t(e){var n;return(0,y.default)(this,t),n=r.call(this),(0,f.default)((0,l.default)(n),"precision",void 0),n.precision=e,n}return(0,v.default)(t,[{key:"typeId",get:function(){return m.Type.Float}},{key:n,get:function(){return"Float"}},{key:"toString",value:function(){return"Float".concat(this.precision)}}]),t}(g);e.Float=I;var k=function(e){(0,d.default)(t,e);var r=b(t);function t(){return(0,y.default)(this,t),r.call(this,P)}return(0,v.default)(t)}(I);e.Float16=k;var D=function(e){(0,d.default)(t,e);var r=b(t);function t(){return(0,y.default)(this,t),r.call(this,w)}return(0,v.default)(t)}(I);e.Float32=D;var L=function(e){(0,d.default)(t,e);var r=b(t);function t(){return(0,y.default)(this,t),r.call(this,M)}return(0,v.default)(t)}(I);e.Float64=L;var G=function(e,r){(0,d.default)(n,e);var t=b(n);function n(){return(0,y.default)(this,n),t.call(this)}return(0,v.default)(n,[{key:"typeId",get:function(){return m.Type.Binary}},{key:"toString",value:function(){return"Binary"}},{key:r,get:function(){return"Binary"}}]),n}(g,Symbol.toStringTag);e.Binary=G;var j=function(e,r){(0,d.default)(n,e);var t=b(n);function n(){return(0,y.default)(this,n),t.apply(this,arguments)}return(0,v.default)(n,[{key:"typeId",get:function(){return m.Type.Utf8}},{key:r,get:function(){return"Utf8"}},{key:"toString",value:function(){return"Utf8"}}]),n}(g,Symbol.toStringTag);e.Utf8=j;var $={DAY:0,MILLISECOND:1};a=Symbol.toStringTag;var N=function(e){(0,d.default)(t,e);var r=b(t);function t(e){var n;return(0,y.default)(this,t),n=r.call(this),(0,f.default)((0,l.default)(n),"unit",void 0),n.unit=e,n}return(0,v.default)(t,[{key:"typeId",get:function(){return m.Type.Date}},{key:a,get:function(){return"Date"}},{key:"toString",value:function(){return"Date".concat(32*(this.unit+1),"<").concat($[this.unit],">")}}]),t}(g);e.Date=N;var F=function(e){(0,d.default)(t,e);var r=b(t);function t(){return(0,y.default)(this,t),r.call(this,$.DAY)}return(0,v.default)(t)}(N);e.DateDay=F;var U=function(e){(0,d.default)(t,e);var r=b(t);function t(){return(0,y.default)(this,t),r.call(this,$.MILLISECOND)}return(0,v.default)(t)}(N);e.DateMillisecond=U;var H={SECOND:1,MILLISECOND:1e3,MICROSECOND:1e6,NANOSECOND:1e9};i=Symbol.toStringTag;var V=function(e){(0,d.default)(t,e);var r=b(t);function t(e,n){var a;return(0,y.default)(this,t),a=r.call(this),(0,f.default)((0,l.default)(a),"unit",void 0),(0,f.default)((0,l.default)(a),"bitWidth",void 0),a.unit=e,a.bitWidth=n,a}return(0,v.default)(t,[{key:"typeId",get:function(){return m.Type.Time}},{key:"toString",value:function(){return"Time".concat(this.bitWidth,"<").concat(H[this.unit],">")}},{key:i,get:function(){return"Time"}}]),t}(g);e.Time=V;var W=function(e){(0,d.default)(t,e);var r=b(t);function t(){return(0,y.default)(this,t),r.call(this,H.SECOND,32)}return(0,v.default)(t)}(V);e.TimeSecond=W;var K=function(e){(0,d.default)(t,e);var r=b(t);function t(){return(0,y.default)(this,t),r.call(this,H.MILLISECOND,32)}return(0,v.default)(t)}(V);e.TimeMillisecond=K,o=Symbol.toStringTag;var J=function(e){(0,d.default)(t,e);var r=b(t);function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,y.default)(this,t),n=r.call(this),(0,f.default)((0,l.default)(n),"unit",void 0),(0,f.default)((0,l.default)(n),"timezone",void 0),n.unit=e,n.timezone=a,n}return(0,v.default)(t,[{key:"typeId",get:function(){return m.Type.Timestamp}},{key:o,get:function(){return"Timestamp"}},{key:"toString",value:function(){return"Timestamp<".concat(H[this.unit]).concat(this.timezone?", ".concat(this.timezone):"",">")}}]),t}(g);e.Timestamp=J;var X=function(e){(0,d.default)(t,e);var r=b(t);function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,y.default)(this,t),r.call(this,H.SECOND,e)}return(0,v.default)(t)}(J);e.TimestampSecond=X;var z=function(e){(0,d.default)(t,e);var r=b(t);function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,y.default)(this,t),r.call(this,H.MILLISECOND,e)}return(0,v.default)(t)}(J);e.TimestampMillisecond=z;var Y=function(e){(0,d.default)(t,e);var r=b(t);function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,y.default)(this,t),r.call(this,H.MICROSECOND,e)}return(0,v.default)(t)}(J);e.TimestampMicrosecond=Y;var Q=function(e){(0,d.default)(t,e);var r=b(t);function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,y.default)(this,t),r.call(this,H.NANOSECOND,e)}return(0,v.default)(t)}(J);e.TimestampNanosecond=Q;var Z={DAY_TIME:0,YEAR_MONTH:1};u=Symbol.toStringTag;var ee=function(e){(0,d.default)(t,e);var r=b(t);function t(e){var n;return(0,y.default)(this,t),n=r.call(this),(0,f.default)((0,l.default)(n),"unit",void 0),n.unit=e,n}return(0,v.default)(t,[{key:"typeId",get:function(){return m.Type.Interval}},{key:u,get:function(){return"Interval"}},{key:"toString",value:function(){return"Interval<".concat(Z[this.unit],">")}}]),t}(g);e.Interval=ee;var re=function(e){(0,d.default)(t,e);var r=b(t);function t(){return(0,y.default)(this,t),r.call(this,Z.DAY_TIME)}return(0,v.default)(t)}(ee);e.IntervalDayTime=re;var te=function(e){(0,d.default)(t,e);var r=b(t);function t(){return(0,y.default)(this,t),r.call(this,Z.YEAR_MONTH)}return(0,v.default)(t)}(ee);e.IntervalYearMonth=te,s=Symbol.toStringTag;var ne=function(e){(0,d.default)(t,e);var r=b(t);function t(e,n){var a;return(0,y.default)(this,t),a=r.call(this),(0,f.default)((0,l.default)(a),"listSize",void 0),(0,f.default)((0,l.default)(a),"children",void 0),a.listSize=e,a.children=[n],a}return(0,v.default)(t,[{key:"typeId",get:function(){return m.Type.FixedSizeList}},{key:"valueType",get:function(){return this.children[0].type}},{key:"valueField",get:function(){return this.children[0]}},{key:s,get:function(){return"FixedSizeList"}},{key:"toString",value:function(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}]),t}(g);e.FixedSizeList=ne,c=Symbol.toStringTag;var ae=function(e){(0,d.default)(t,e);var r=b(t);function t(e){var n;return(0,y.default)(this,t),n=r.call(this),(0,f.default)((0,l.default)(n),"children",void 0),n.children=e,n}return(0,v.default)(t,[{key:"typeId",get:function(){return m.Type.Struct}},{key:"toString",value:function(){return"Struct<{".concat(this.children.map((function(e){return"".concat(e.name,":").concat(e.type)})).join(", "),"}>")}},{key:c,get:function(){return"Struct"}}]),t}(g);e.Struct=ae}(type)),type}function requireSchema(){return hasRequiredSchema||(hasRequiredSchema=1,function(e){var r=interopRequireDefaultExports;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Binary",{enumerable:!0,get:function(){return a.Binary}}),Object.defineProperty(e,"Bool",{enumerable:!0,get:function(){return a.Bool}}),Object.defineProperty(e,"DataType",{enumerable:!0,get:function(){return a.DataType}}),Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return a.Date}}),Object.defineProperty(e,"DateDay",{enumerable:!0,get:function(){return a.DateDay}}),Object.defineProperty(e,"DateMillisecond",{enumerable:!0,get:function(){return a.DateMillisecond}}),Object.defineProperty(e,"Field",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"FixedSizeList",{enumerable:!0,get:function(){return a.FixedSizeList}}),Object.defineProperty(e,"Float",{enumerable:!0,get:function(){return a.Float}}),Object.defineProperty(e,"Float16",{enumerable:!0,get:function(){return a.Float16}}),Object.defineProperty(e,"Float32",{enumerable:!0,get:function(){return a.Float32}}),Object.defineProperty(e,"Float64",{enumerable:!0,get:function(){return a.Float64}}),Object.defineProperty(e,"Int",{enumerable:!0,get:function(){return a.Int}}),Object.defineProperty(e,"Int16",{enumerable:!0,get:function(){return a.Int16}}),Object.defineProperty(e,"Int32",{enumerable:!0,get:function(){return a.Int32}}),Object.defineProperty(e,"Int64",{enumerable:!0,get:function(){return a.Int64}}),Object.defineProperty(e,"Int8",{enumerable:!0,get:function(){return a.Int8}}),Object.defineProperty(e,"Interval",{enumerable:!0,get:function(){return a.Interval}}),Object.defineProperty(e,"IntervalDayTime",{enumerable:!0,get:function(){return a.IntervalDayTime}}),Object.defineProperty(e,"IntervalYearMonth",{enumerable:!0,get:function(){return a.IntervalYearMonth}}),Object.defineProperty(e,"Null",{enumerable:!0,get:function(){return a.Null}}),Object.defineProperty(e,"Schema",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"Struct",{enumerable:!0,get:function(){return a.Struct}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return a.Time}}),Object.defineProperty(e,"TimeMillisecond",{enumerable:!0,get:function(){return a.TimeMillisecond}}),Object.defineProperty(e,"TimeSecond",{enumerable:!0,get:function(){return a.TimeSecond}}),Object.defineProperty(e,"Timestamp",{enumerable:!0,get:function(){return a.Timestamp}}),Object.defineProperty(e,"TimestampMicrosecond",{enumerable:!0,get:function(){return a.TimestampMicrosecond}}),Object.defineProperty(e,"TimestampMillisecond",{enumerable:!0,get:function(){return a.TimestampMillisecond}}),Object.defineProperty(e,"TimestampNanosecond",{enumerable:!0,get:function(){return a.TimestampNanosecond}}),Object.defineProperty(e,"TimestampSecond",{enumerable:!0,get:function(){return a.TimestampSecond}}),Object.defineProperty(e,"Type",{enumerable:!0,get:function(){return a.Type}}),Object.defineProperty(e,"Uint16",{enumerable:!0,get:function(){return a.Uint16}}),Object.defineProperty(e,"Uint32",{enumerable:!0,get:function(){return a.Uint32}}),Object.defineProperty(e,"Uint64",{enumerable:!0,get:function(){return a.Uint64}}),Object.defineProperty(e,"Uint8",{enumerable:!0,get:function(){return a.Uint8}}),Object.defineProperty(e,"Utf8",{enumerable:!0,get:function(){return a.Utf8}});var t=r(requireSchema$1()),n=r(requireField()),a=requireType()}(schema$1)),schema$1}var arrowLikeTypeUtils={},hasRequiredArrowLikeTypeUtils,hasRequiredDeduceMeshSchema;function requireArrowLikeTypeUtils(){if(hasRequiredArrowLikeTypeUtils)return arrowLikeTypeUtils;hasRequiredArrowLikeTypeUtils=1,Object.defineProperty(arrowLikeTypeUtils,"__esModule",{value:!0}),arrowLikeTypeUtils.getArrowTypeFromTypedArray=function(r){switch(r.constructor){case Int8Array:return new e.Int8;case Uint8Array:return new e.Uint8;case Int16Array:return new e.Int16;case Uint16Array:return new e.Uint16;case Int32Array:return new e.Int32;case Uint32Array:return new e.Uint32;case Float32Array:return new e.Float32;case Float64Array:return new e.Float64;default:throw new Error("array type not supported")}};var e=requireSchema();return arrowLikeTypeUtils}function requireDeduceMeshSchema(){if(hasRequiredDeduceMeshSchema)return deduceMeshSchema;hasRequiredDeduceMeshSchema=1,Object.defineProperty(deduceMeshSchema,"__esModule",{value:!0}),deduceMeshSchema.deduceMeshField=t,deduceMeshSchema.deduceMeshSchema=function(r,n){var a=function(e){var r=[];for(var n in e){var a=e[n];r.push(t(n,a))}return r}(r);return new e.Schema(a,n)},deduceMeshSchema.makeMeshAttributeMetadata=n;var e=requireSchema(),r=requireArrowLikeTypeUtils();function t(t,a,i){var o=(0,r.getArrowTypeFromTypedArray)(a.value),u=i||n(a);return new e.Field(t,new e.FixedSizeList(a.size,new e.Field("value",o)),!1,u)}function n(e){var r=new Map;return"byteOffset"in e&&r.set("byteOffset",e.byteOffset.toString(10)),"byteStride"in e&&r.set("byteStride",e.byteStride.toString(10)),"normalized"in e&&r.set("normalized",e.normalized.toString()),r}return deduceMeshSchema}var deduceColumnType={},hasRequiredDeduceColumnType;function requireDeduceColumnType(){if(hasRequiredDeduceColumnType)return deduceColumnType;return hasRequiredDeduceColumnType=1,Object.defineProperty(deduceColumnType,"__esModule",{value:!0}),deduceColumnType.deduceTypeFromColumn=function(e){if(e instanceof Date)return Date;if(e instanceof Number)return Float32Array;if("string"==typeof e)return String;return null},deduceColumnType.deduceTypeFromValue=function(e){if(e instanceof Date)return Date;if(e instanceof Number)return Float32Array;if("string"==typeof e)return String;return null},deduceColumnType}var getTypeInfo={},hasRequiredGetTypeInfo;function requireGetTypeInfo(){if(hasRequiredGetTypeInfo)return getTypeInfo;hasRequiredGetTypeInfo=1,Object.defineProperty(getTypeInfo,"__esModule",{value:!0}),getTypeInfo.getTypeInfo=function(e){return{typeId:e.typeId,ArrayType:e.ArrayType,typeName:e.toString(),typeEnumName:t(e.typeId),precision:e.precision}};var e=requireSchema();var r=null;function t(t){if(!r)for(var n in r={},e.Type)r[e.Type[n]]=n;return r[t]}return getTypeInfo}var asyncQueue={},wrapNativeSuper={exports:{}},isNativeFunction={exports:{}},hasRequiredIsNativeFunction;function requireIsNativeFunction(){return hasRequiredIsNativeFunction||(hasRequiredIsNativeFunction=1,function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports}(isNativeFunction)),isNativeFunction.exports}var construct={exports:{}},isNativeReflectConstruct={exports:{}},hasRequiredIsNativeReflectConstruct,hasRequiredConstruct,hasRequiredWrapNativeSuper,hasRequiredAsyncQueue,hasRequiredEs5$6;function requireIsNativeReflectConstruct(){return hasRequiredIsNativeReflectConstruct||(hasRequiredIsNativeReflectConstruct=1,function(e){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}(isNativeReflectConstruct)),isNativeReflectConstruct.exports}function requireConstruct(){return hasRequiredConstruct||(hasRequiredConstruct=1,function(e){var r=requireSetPrototypeOf$1(),t=requireIsNativeReflectConstruct();function n(a,i,o){return t()?(e.exports=n=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=n=function(e,t,n){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return n&&r(i,n.prototype),i},e.exports.__esModule=!0,e.exports.default=e.exports),n.apply(null,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(construct)),construct.exports}function requireWrapNativeSuper(){return hasRequiredWrapNativeSuper||(hasRequiredWrapNativeSuper=1,function(e){var r=requireGetPrototypeOf$1(),t=requireSetPrototypeOf$1(),n=requireIsNativeFunction(),a=requireConstruct();function i(o){var u="function"==typeof Map?new Map:void 0;return e.exports=i=function(e){if(null===e||!n(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==u){if(u.has(e))return u.get(e);u.set(e,i)}function i(){return a(e,arguments,r(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),t(i,e)},e.exports.__esModule=!0,e.exports.default=e.exports,i(o)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(wrapNativeSuper)),wrapNativeSuper.exports}function requireAsyncQueue(){if(hasRequiredAsyncQueue)return asyncQueue;hasRequiredAsyncQueue=1;var e=interopRequireDefaultExports;Object.defineProperty(asyncQueue,"__esModule",{value:!0}),asyncQueue.default=void 0,asyncQueue.takeAsync=function(e){return p.apply(this,arguments)};var r,t=e(requireRegenerator()),n=e(requireAsyncToGenerator()),a=e(requireDefineProperty$3()),i=e(requireClassCallCheck$3()),o=e(requireCreateClass$3()),u=e(requireInherits$1()),s=e(requirePossibleConstructorReturn$1()),c=e(requireGetPrototypeOf$1());function l(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,c.default)(e);if(r){var a=(0,c.default)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,s.default)(this,t)}}var f=function(e){(0,u.default)(t,e);var r=l(t);function t(){return(0,i.default)(this,t),r.apply(this,arguments)}return(0,o.default)(t,[{key:"enqueue",value:function(e){return this.push(e)}},{key:"dequeue",value:function(){return this.shift()}}]),t}((0,e(requireWrapNativeSuper()).default)(Array));r=Symbol.asyncIterator;var d=function(){function e(){(0,i.default)(this,e),(0,a.default)(this,"_values",void 0),(0,a.default)(this,"_settlers",void 0),(0,a.default)(this,"_closed",void 0),this._values=new f,this._settlers=new f,this._closed=!1}return(0,o.default)(e,[{key:"close",value:function(){for(;this._settlers.length>0;)this._settlers.dequeue().resolve({done:!0});this._closed=!0}},{key:r,value:function(){return this}},{key:"enqueue",value:function(e){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var r=this._settlers.dequeue();e instanceof Error?r.reject(e):r.resolve({value:e})}else this._values.enqueue(e)}},{key:"next",value:function(){var e=this;if(this._values.length>0){var r=this._values.dequeue();return r instanceof Error?Promise.reject(r):Promise.resolve({value:r})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0})}return new Promise((function(r,t){e._settlers.enqueue({resolve:r,reject:t})}))}}]),e}();function p(){return p=(0,n.default)(t.default.mark((function e(r){var n,a,i,o,u,s=arguments;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=s.length>1&&void 0!==s[1]?s[1]:1/0,a=[],i=r[Symbol.asyncIterator]();case 3:if(!(a.length<n)){e.next=14;break}return e.next=6,i.next();case 6:if(o=e.sent,u=o.value,!o.done){e.next=11;break}return e.abrupt("break",14);case 11:a.push(u),e.next=3;break;case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}return asyncQueue.default=d,asyncQueue}function requireEs5$6(){return hasRequiredEs5$6||(hasRequiredEs5$6=1,function(e){var r=interopRequireDefaultExports;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AsyncQueue",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"Binary",{enumerable:!0,get:function(){return s.Binary}}),Object.defineProperty(e,"Bool",{enumerable:!0,get:function(){return s.Bool}}),Object.defineProperty(e,"ColumnarTableBatchAggregator",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"DataType",{enumerable:!0,get:function(){return s.DataType}}),Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return s.Date}}),Object.defineProperty(e,"DateDay",{enumerable:!0,get:function(){return s.DateDay}}),Object.defineProperty(e,"DateMillisecond",{enumerable:!0,get:function(){return s.DateMillisecond}}),Object.defineProperty(e,"Field",{enumerable:!0,get:function(){return s.Field}}),Object.defineProperty(e,"FixedSizeList",{enumerable:!0,get:function(){return s.FixedSizeList}}),Object.defineProperty(e,"Float",{enumerable:!0,get:function(){return s.Float}}),Object.defineProperty(e,"Float16",{enumerable:!0,get:function(){return s.Float16}}),Object.defineProperty(e,"Float32",{enumerable:!0,get:function(){return s.Float32}}),Object.defineProperty(e,"Float64",{enumerable:!0,get:function(){return s.Float64}}),Object.defineProperty(e,"Int",{enumerable:!0,get:function(){return s.Int}}),Object.defineProperty(e,"Int16",{enumerable:!0,get:function(){return s.Int16}}),Object.defineProperty(e,"Int32",{enumerable:!0,get:function(){return s.Int32}}),Object.defineProperty(e,"Int64",{enumerable:!0,get:function(){return s.Int64}}),Object.defineProperty(e,"Int8",{enumerable:!0,get:function(){return s.Int8}}),Object.defineProperty(e,"Interval",{enumerable:!0,get:function(){return s.Interval}}),Object.defineProperty(e,"IntervalDayTime",{enumerable:!0,get:function(){return s.IntervalDayTime}}),Object.defineProperty(e,"IntervalYearMonth",{enumerable:!0,get:function(){return s.IntervalYearMonth}}),Object.defineProperty(e,"Null",{enumerable:!0,get:function(){return s.Null}}),Object.defineProperty(e,"RowTableBatchAggregator",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"Schema",{enumerable:!0,get:function(){return s.Schema}}),Object.defineProperty(e,"Struct",{enumerable:!0,get:function(){return s.Struct}}),Object.defineProperty(e,"TableBatchBuilder",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return s.Time}}),Object.defineProperty(e,"TimeMillisecond",{enumerable:!0,get:function(){return s.TimeMillisecond}}),Object.defineProperty(e,"TimeSecond",{enumerable:!0,get:function(){return s.TimeSecond}}),Object.defineProperty(e,"Timestamp",{enumerable:!0,get:function(){return s.Timestamp}}),Object.defineProperty(e,"TimestampMicrosecond",{enumerable:!0,get:function(){return s.TimestampMicrosecond}}),Object.defineProperty(e,"TimestampMillisecond",{enumerable:!0,get:function(){return s.TimestampMillisecond}}),Object.defineProperty(e,"TimestampNanosecond",{enumerable:!0,get:function(){return s.TimestampNanosecond}}),Object.defineProperty(e,"TimestampSecond",{enumerable:!0,get:function(){return s.TimestampSecond}}),Object.defineProperty(e,"Uint16",{enumerable:!0,get:function(){return s.Uint16}}),Object.defineProperty(e,"Uint32",{enumerable:!0,get:function(){return s.Uint32}}),Object.defineProperty(e,"Uint64",{enumerable:!0,get:function(){return s.Uint64}}),Object.defineProperty(e,"Uint8",{enumerable:!0,get:function(){return s.Uint8}}),Object.defineProperty(e,"Utf8",{enumerable:!0,get:function(){return s.Utf8}}),Object.defineProperty(e,"convertToArrayRow",{enumerable:!0,get:function(){return i.convertToArrayRow}}),Object.defineProperty(e,"convertToObjectRow",{enumerable:!0,get:function(){return i.convertToObjectRow}}),Object.defineProperty(e,"deduceMeshField",{enumerable:!0,get:function(){return u.deduceMeshField}}),Object.defineProperty(e,"deduceMeshSchema",{enumerable:!0,get:function(){return u.deduceMeshSchema}}),Object.defineProperty(e,"deduceTypeFromColumn",{enumerable:!0,get:function(){return c.deduceTypeFromColumn}}),Object.defineProperty(e,"deduceTypeFromValue",{enumerable:!0,get:function(){return c.deduceTypeFromValue}}),Object.defineProperty(e,"getArrowTypeFromTypedArray",{enumerable:!0,get:function(){return f.getArrowTypeFromTypedArray}}),Object.defineProperty(e,"getMeshBoundingBox",{enumerable:!0,get:function(){return o.getMeshBoundingBox}}),Object.defineProperty(e,"getMeshSize",{enumerable:!0,get:function(){return o.getMeshSize}}),Object.defineProperty(e,"getTypeInfo",{enumerable:!0,get:function(){return l.getTypeInfo}}),Object.defineProperty(e,"makeMeshAttributeMetadata",{enumerable:!0,get:function(){return u.makeMeshAttributeMetadata}});var t=r(requireTableBatchBuilder()),n=r(requireRowTableBatchAggregator()),a=r(requireColumnarTableBatchAggregator()),i=requireRowUtils(),o=requireMeshUtils(),u=requireDeduceMeshSchema(),s=requireSchema(),c=requireDeduceColumnType(),l=requireGetTypeInfo(),f=requireArrowLikeTypeUtils(),d=r(requireAsyncQueue())}(es5$6)),es5$6}var getDracoSchema={},hasRequiredGetDracoSchema,hasRequiredDracoParser;function requireGetDracoSchema(){if(hasRequiredGetDracoSchema)return getDracoSchema;hasRequiredGetDracoSchema=1,Object.defineProperty(getDracoSchema,"__esModule",{value:!0}),getDracoSchema.getDracoSchema=function(n,a,i){var o=t(a.metadata),u=[],s=function(e){var r={};for(var t in e){var n=e[t];r[n.name||"undefined"]=n}return r}(a.attributes);for(var c in n){var l=r(c,n[c],s[c]);u.push(l)}if(i){var f=r("indices",i);u.push(f)}return new e.Schema(u,o)};var e=requireEs5$6();function r(r,n,a){var i=a?t(a.metadata):void 0;return(0,e.deduceMeshField)(r,n,i)}function t(e){var r=new Map;for(var t in e)r.set("".concat(t,".string"),JSON.stringify(e[t]));return r}return getDracoSchema}function requireDracoParser(){if(hasRequiredDracoParser)return dracoParser;hasRequiredDracoParser=1;var e=interopRequireDefaultExports;Object.defineProperty(dracoParser,"__esModule",{value:!0}),dracoParser.default=void 0;var r=e(requireToConsumableArray$1()),t=e(requireSlicedToArray$2()),n=e(requireClassCallCheck$3()),a=e(requireCreateClass$3()),i=e(requireDefineProperty$3()),o=requireEs5$6(),u=requireGetDracoSchema();function s(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return c(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return c(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}function c(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach((function(r){(0,i.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var d={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},p={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},h=function(){function e(r){(0,n.default)(this,e),(0,i.default)(this,"draco",void 0),(0,i.default)(this,"decoder",void 0),(0,i.default)(this,"metadataQuerier",void 0),this.draco=r,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}return(0,a.default)(e,[{key:"destroy",value:function(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}},{key:"parseSync",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=new this.draco.DecoderBuffer;t.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(r);var n=this.decoder.GetEncodedGeometryType(t),a=n===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{var i;switch(n){case this.draco.TRIANGULAR_MESH:i=this.decoder.DecodeBufferToMesh(t,a);break;case this.draco.POINT_CLOUD:i=this.decoder.DecodeBufferToPointCloud(t,a);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!i.ok()||!a.ptr){var s="DRACO decompression failed: ".concat(i.error_msg());throw new Error(s)}var c=this._getDracoLoaderData(a,n,r),l=this._getMeshData(a,c,r),d=(0,o.getMeshBoundingBox)(l.attributes),p=(0,u.getDracoSchema)(l.attributes,c,l.indices);return f(f({loader:"draco",loaderData:c,header:{vertexCount:a.num_points(),boundingBox:d}},l),{},{schema:p})}finally{this.draco.destroy(t),a&&this.draco.destroy(a)}}},{key:"_getDracoLoaderData",value:function(e,r,t){var n=this._getTopLevelMetadata(e),a=this._getDracoAttributes(e,t);return{geometry_type:r,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:n,attributes:a}}},{key:"_getDracoAttributes",value:function(e,r){for(var t={},n=0;n<e.num_attributes();n++){var a=this.decoder.GetAttribute(e,n),i=this._getAttributeMetadata(e,n);t[a.unique_id()]={unique_id:a.unique_id(),attribute_type:a.attribute_type(),data_type:a.data_type(),num_components:a.num_components(),byte_offset:a.byte_offset(),byte_stride:a.byte_stride(),normalized:a.normalized(),attribute_index:n,metadata:i};var o=this._getQuantizationTransform(a,r);o&&(t[a.unique_id()].quantization_transform=o);var u=this._getOctahedronTransform(a,r);u&&(t[a.unique_id()].octahedron_transform=u)}return t}},{key:"_getMeshData",value:function(e,r,t){var n=this._getMeshAttributes(r,e,t);if(!n.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?"triangle-strip"===t.topology?{topology:"triangle-strip",mode:4,attributes:n,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:n,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:n}}},{key:"_getMeshAttributes",value:function(e,r,t){for(var n={},a=0,i=Object.values(e.attributes);a<i.length;a++){var o=i[a],u=this._deduceAttributeName(o,t);o.name=u;var s=this._getAttributeValues(r,o),c=s.value,l=s.size;n[u]={value:c,size:l,byteOffset:o.byte_offset,byteStride:o.byte_stride,normalized:o.normalized}}return n}},{key:"_getTriangleListIndices",value:function(e){var r=3*e.num_faces(),t=4*r,n=this.draco._malloc(t);try{return this.decoder.GetTrianglesUInt32Array(e,t,n),new Uint32Array(this.draco.HEAPF32.buffer,n,r).slice()}finally{this.draco._free(n)}}},{key:"_getTriangleStripIndices",value:function(e){var r=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,r),function(e){for(var r=e.size(),t=new Int32Array(r),n=0;n<r;n++)t[n]=e.GetValue(n);return t}(r)}finally{this.draco.destroy(r)}}},{key:"_getAttributeValues",value:function(e,r){var t,n=p[r.data_type],a=r.num_components,i=e.num_points()*a,o=i*n.BYTES_PER_ELEMENT,u=function(e,r){switch(r){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32;default:return e.DT_INVALID}}(this.draco,n),s=this.draco._malloc(o);try{var c=this.decoder.GetAttribute(e,r.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,c,u,o,s),t=new n(this.draco.HEAPF32.buffer,s,i).slice()}finally{this.draco._free(s)}return{value:t,size:a}}},{key:"_deduceAttributeName",value:function(e,r){for(var n=e.unique_id,a=0,i=Object.entries(r.extraAttributes||{});a<i.length;a++){var o=(0,t.default)(i[a],2),u=o[0];if(o[1]===n)return u}var s=e.attribute_type;for(var c in d){if(this.draco[c]===s)return d[c]}var l=r.attributeNameEntry||"name";return e.metadata[l]?e.metadata[l].string:"CUSTOM_ATTRIBUTE_".concat(n)}},{key:"_getTopLevelMetadata",value:function(e){var r=this.decoder.GetMetadata(e);return this._getDracoMetadata(r)}},{key:"_getAttributeMetadata",value:function(e,r){var t=this.decoder.GetAttributeMetadata(e,r);return this._getDracoMetadata(t)}},{key:"_getDracoMetadata",value:function(e){if(!e||!e.ptr)return{};for(var r={},t=this.metadataQuerier.NumEntries(e),n=0;n<t;n++){var a=this.metadataQuerier.GetEntryName(e,n);r[a]=this._getDracoMetadataField(e,a)}return r}},{key:"_getDracoMetadataField",value:function(e,r){var t=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,r,t);var n=function(e){for(var r=e.size(),t=new Int32Array(r),n=0;n<r;n++)t[n]=e.GetValue(n);return t}(t);return{int:this.metadataQuerier.GetIntEntry(e,r),string:this.metadataQuerier.GetStringEntry(e,r),double:this.metadataQuerier.GetDoubleEntry(e,r),intArray:n}}finally{this.draco.destroy(t)}}},{key:"_disableAttributeTransforms",value:function(e){var t,n=e.quantizedAttributes,a=void 0===n?[]:n,i=e.octahedronAttributes,o=void 0===i?[]:i,u=s([].concat((0,r.default)(a),(0,r.default)(o)));try{for(u.s();!(t=u.n()).done;){var c=t.value;this.decoder.SkipAttributeTransform(this.draco[c])}}catch(e){u.e(e)}finally{u.f()}}},{key:"_getQuantizationTransform",value:function(e,r){var t=this,n=r.quantizedAttributes,a=void 0===n?[]:n,i=e.attribute_type(),o=a.map((function(e){return t.decoder[e]})).includes(i);if(o){var u=new this.draco.AttributeQuantizationTransform;try{if(u.InitFromAttribute(e))return{quantization_bits:u.quantization_bits(),range:u.range(),min_values:new Float32Array([1,2,3]).map((function(e){return u.min_value(e)}))}}finally{this.draco.destroy(u)}}return null}},{key:"_getOctahedronTransform",value:function(e,r){var t=this,n=r.octahedronAttributes,a=void 0===n?[]:n,i=e.attribute_type(),o=a.map((function(e){return t.decoder[e]})).includes(i);if(o){var u=new this.draco.AttributeQuantizationTransform;try{if(u.InitFromAttribute(e))return{quantization_bits:u.quantization_bits()}}finally{this.draco.destroy(u)}}return null}}]),e}();return dracoParser.default=h,dracoParser}var dracoModuleLoader={},hasRequiredDracoModuleLoader;function requireDracoModuleLoader(){if(hasRequiredDracoModuleLoader)return dracoModuleLoader;hasRequiredDracoModuleLoader=1;var e=interopRequireDefaultExports;Object.defineProperty(dracoModuleLoader,"__esModule",{value:!0}),dracoModuleLoader.loadDracoDecoderModule=function(e){return y.apply(this,arguments)},dracoModuleLoader.loadDracoEncoderModule=function(e){return v.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireSlicedToArray$2()),n=e(requireDefineProperty$3()),a=e(requireAsyncToGenerator()),i=requireEs5$d();function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){(0,n.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var s,c,l="https://www.gstatic.com/draco/versioned/decoders/".concat("1.5.5"),f="".concat(l,"/draco_decoder.js"),d="".concat(l,"/draco_wasm_wrapper.js"),p="".concat(l,"/draco_decoder.wasm"),h="https://raw.githubusercontent.com/google/draco/".concat("1.4.1","/javascript/draco_encoder.js");function y(){return(y=(0,a.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.modules||{},s=n.draco3d?s||n.draco3d.createDecoderModule({}).then((function(e){return{draco:e}})):s||m(t),e.next=4,s;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=(0,a.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.modules||{},c=n.draco3d?c||n.draco3d.createEncoderModule({}).then((function(e){return{draco:e}})):c||_(t),e.next=4,c;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return b.apply(this,arguments)}function b(){return(b=(0,a.default)(r.default.mark((function e(n){var a,o,u,s;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n.draco&&n.draco.decoderType,e.next="js"===e.t0?3:(e.t0,7);break;case 3:return e.next=5,(0,i.loadLibrary)(f,"draco",n);case 5:return a=e.sent,e.abrupt("break",21);case 7:return e.t1=Promise,e.next=10,(0,i.loadLibrary)(d,"draco",n);case 10:return e.t2=e.sent,e.next=13,(0,i.loadLibrary)(p,"draco",n);case 13:return e.t3=e.sent,e.t4=[e.t2,e.t3],e.next=17,e.t1.all.call(e.t1,e.t4);case 17:u=e.sent,s=(0,t.default)(u,2),a=s[0],o=s[1];case 21:return a=a||globalThis.DracoDecoderModule,e.next=24,g(a,o);case 24:return e.abrupt("return",e.sent);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,r){var t={};return r&&(t.wasmBinary=r),new Promise((function(r){e(u(u({},t),{},{onModuleLoaded:function(e){return r({draco:e})}}))}))}function _(e){return A.apply(this,arguments)}function A(){return(A=(0,a.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.loadLibrary)(h,"draco",t);case 2:return n=(n=e.sent)||globalThis.DracoEncoderModule,e.abrupt("return",new Promise((function(e){n({onModuleLoaded:function(r){return e({draco:r})}})})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return dracoModuleLoader}var dracoWriter={},dracoBuilder={},hasRequiredDracoBuilder,hasRequiredDracoWriter,hasRequiredEs5$5;function requireDracoBuilder(){if(hasRequiredDracoBuilder)return dracoBuilder;hasRequiredDracoBuilder=1;var e=interopRequireDefaultExports;Object.defineProperty(dracoBuilder,"__esModule",{value:!0}),dracoBuilder.default=void 0;var r=e(require_typeof$3()),t=e(requireSlicedToArray$2()),n=e(requireToConsumableArray$1()),a=e(requireClassCallCheck$3()),i=e(requireCreateClass$3()),o=e(requireDefineProperty$3());function u(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return s(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return s(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}function s(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach((function(r){(0,o.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var f={POSITION:"POSITION",NORMAL:"NORMAL",COLOR_0:"COLOR",TEXCOORD_0:"TEX_COORD"},d=function(){},p=function(){function e(r){(0,a.default)(this,e),(0,o.default)(this,"draco",void 0),(0,o.default)(this,"dracoEncoder",void 0),(0,o.default)(this,"dracoMeshBuilder",void 0),(0,o.default)(this,"dracoMetadataBuilder",void 0),(0,o.default)(this,"log",void 0),this.draco=r,this.dracoEncoder=new this.draco.Encoder,this.dracoMeshBuilder=new this.draco.MeshBuilder,this.dracoMetadataBuilder=new this.draco.MetadataBuilder}return(0,i.default)(e,[{key:"destroy",value:function(){this.destroyEncodedObject(this.dracoMeshBuilder),this.destroyEncodedObject(this.dracoEncoder),this.destroyEncodedObject(this.dracoMetadataBuilder),this.dracoMeshBuilder=null,this.dracoEncoder=null,this.draco=null}},{key:"destroyEncodedObject",value:function(e){e&&this.draco.destroy(e)}},{key:"encodeSync",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.log=d,this._setOptions(r),r.pointcloud?this._encodePointCloud(e,r):this._encodeMesh(e,r)}},{key:"_getAttributesFromMesh",value:function(e){var r=l(l({},e),e.attributes);return e.indices&&(r.indices=e.indices),r}},{key:"_encodePointCloud",value:function(e,r){var t=new this.draco.PointCloud;r.metadata&&this._addGeometryMetadata(t,r.metadata);var n=this._getAttributesFromMesh(e);this._createDracoPointCloud(t,n,r);var a=new this.draco.DracoInt8Array;try{var i=this.dracoEncoder.EncodePointCloudToDracoBuffer(t,!1,a);if(!(i>0))throw new Error("Draco encoding failed.");return this.log("DRACO encoded ".concat(t.num_points()," points\n        with ").concat(t.num_attributes()," attributes into ").concat(i," bytes")),h(a)}finally{this.destroyEncodedObject(a),this.destroyEncodedObject(t)}}},{key:"_encodeMesh",value:function(e,r){var t=new this.draco.Mesh;r.metadata&&this._addGeometryMetadata(t,r.metadata);var n=this._getAttributesFromMesh(e);this._createDracoMesh(t,n,r);var a=new this.draco.DracoInt8Array;try{var i=this.dracoEncoder.EncodeMeshToDracoBuffer(t,a);if(i<=0)throw new Error("Draco encoding failed.");return this.log("DRACO encoded ".concat(t.num_points()," points\n        with ").concat(t.num_attributes()," attributes into ").concat(i," bytes")),h(a)}finally{this.destroyEncodedObject(a),this.destroyEncodedObject(t)}}},{key:"_setOptions",value:function(e){var r;"speed"in e&&(r=this.dracoEncoder).SetSpeedOptions.apply(r,(0,n.default)(e.speed));if("method"in e){var t=this.draco[e.method||"MESH_SEQUENTIAL_ENCODING"];this.dracoEncoder.SetEncodingMethod(t)}if("quantization"in e)for(var a in e.quantization){var i=e.quantization[a],o=this.draco[a];this.dracoEncoder.SetAttributeQuantization(o,i)}}},{key:"_createDracoMesh",value:function(e,r,t){var n=t.attributesMetadata||{};try{var a=this._getPositionAttribute(r);if(!a)throw new Error("positions");var i=a.length/3;for(var o in r){var u=r[o];o=f[o]||o;var s=this._addAttributeToMesh(e,o,u,i);-1!==s&&this._addAttributeMetadata(e,s,l({name:o},n[o]||{}))}}catch(r){throw this.destroyEncodedObject(e),r}return e}},{key:"_createDracoPointCloud",value:function(e,r,t){var n=t.attributesMetadata||{};try{var a=this._getPositionAttribute(r);if(!a)throw new Error("positions");var i=a.length/3;for(var o in r){var u=r[o];o=f[o]||o;var s=this._addAttributeToMesh(e,o,u,i);-1!==s&&this._addAttributeMetadata(e,s,l({name:o},n[o]||{}))}}catch(r){throw this.destroyEncodedObject(e),r}return e}},{key:"_addAttributeToMesh",value:function(e,r,t,n){if(!ArrayBuffer.isView(t))return-1;var a=this._getDracoAttributeType(r),i=t.length/n;if("indices"===a){var o=t.length/3;return this.log("Adding attribute ".concat(r,", size ").concat(o)),this.dracoMeshBuilder.AddFacesToMesh(e,o,t),-1}this.log("Adding attribute ".concat(r,", size ").concat(i));var u=this.dracoMeshBuilder,s=t.buffer;switch(t.constructor){case Int8Array:return u.AddInt8Attribute(e,a,n,i,new Int8Array(s));case Int16Array:return u.AddInt16Attribute(e,a,n,i,new Int16Array(s));case Int32Array:return u.AddInt32Attribute(e,a,n,i,new Int32Array(s));case Uint8Array:case Uint8ClampedArray:return u.AddUInt8Attribute(e,a,n,i,new Uint8Array(s));case Uint16Array:return u.AddUInt16Attribute(e,a,n,i,new Uint16Array(s));case Uint32Array:return u.AddUInt32Attribute(e,a,n,i,new Uint32Array(s));case Float32Array:default:return u.AddFloatAttribute(e,a,n,i,new Float32Array(s))}}},{key:"_getDracoAttributeType",value:function(e){switch(e.toLowerCase()){case"indices":return"indices";case"position":case"positions":case"vertices":return this.draco.POSITION;case"normal":case"normals":return this.draco.NORMAL;case"color":case"colors":return this.draco.COLOR;case"texcoord":case"texcoords":return this.draco.TEX_COORD;default:return this.draco.GENERIC}}},{key:"_getPositionAttribute",value:function(e){for(var r in e){var t=e[r];if(this._getDracoAttributeType(r)===this.draco.POSITION)return t}return null}},{key:"_addGeometryMetadata",value:function(e,r){var t=new this.draco.Metadata;this._populateDracoMetadata(t,r),this.dracoMeshBuilder.AddMetadata(e,t)}},{key:"_addAttributeMetadata",value:function(e,r,t){var n=new this.draco.Metadata;this._populateDracoMetadata(n,t),this.dracoMeshBuilder.SetMetadataForAttribute(e,r,n)}},{key:"_populateDracoMetadata",value:function(e,n){var a,i,o=u((i=n).entries&&!i.hasOwnProperty("entries")?i.entries():Object.entries(i));try{for(o.s();!(a=o.n()).done;){var s=(0,t.default)(a.value,2),c=s[0],l=s[1];switch((0,r.default)(l)){case"number":Math.trunc(l)===l?this.dracoMetadataBuilder.AddIntEntry(e,c,l):this.dracoMetadataBuilder.AddDoubleEntry(e,c,l);break;case"object":l instanceof Int32Array&&this.dracoMetadataBuilder.AddIntEntryArray(e,c,l,l.length);break;default:this.dracoMetadataBuilder.AddStringEntry(e,c,l)}}}catch(e){o.e(e)}finally{o.f()}}}]),e}();function h(e){for(var r=e.size(),t=new ArrayBuffer(r),n=new Int8Array(t),a=0;a<r;++a)n[a]=e.GetValue(a);return t}return dracoBuilder.default=p,dracoBuilder}function requireDracoWriter(){if(hasRequiredDracoWriter)return dracoWriter;hasRequiredDracoWriter=1;var e=interopRequireDefaultExports;Object.defineProperty(dracoWriter,"__esModule",{value:!0}),dracoWriter.DracoWriter=void 0;var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=e(requireDracoBuilder()),a=requireDracoModuleLoader(),i={name:"DRACO",id:"draco",module:"draco",version:requireVersion$1().VERSION,extensions:["drc"],encode:function(e){return o.apply(this,arguments)},options:{draco:{pointcloud:!1,attributeNameEntry:"name"}}};function o(){return o=(0,t.default)(r.default.mark((function e(t){var i,o,u,s,c=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,(0,a.loadDracoEncoderModule)(i);case 3:return o=e.sent,u=o.draco,s=new n.default(u),e.prev=6,e.abrupt("return",s.encodeSync(t,i.draco));case 8:return e.prev=8,s.destroy(),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[6,,8,11]])}))),o.apply(this,arguments)}return dracoWriter.DracoWriter=i,dracoWriter}function requireEs5$5(){return hasRequiredEs5$5||(hasRequiredEs5$5=1,function(e){var r=interopRequireDefaultExports;Object.defineProperty(e,"__esModule",{value:!0}),e.DracoLoader=void 0,Object.defineProperty(e,"DracoWorkerLoader",{enumerable:!0,get:function(){return i.DracoLoader}}),Object.defineProperty(e,"DracoWriter",{enumerable:!0,get:function(){return l.DracoWriter}}),e._TypecheckDracoLoader=e.DracoWriterWorker=void 0;var t=r(requireRegenerator()),n=r(requireAsyncToGenerator()),a=r(requireDefineProperty$3()),i=requireDracoLoader(),o=r(requireDracoParser()),u=requireDracoModuleLoader(),s=requireVersion$1(),c=requireEs5$d(),l=requireDracoWriter();function f(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?f(Object(t),!0).forEach((function(r){(0,a.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var p={id:c.isBrowser?"draco-writer":"draco-writer-nodejs",name:"Draco compressed geometry writer",module:"draco",version:s.VERSION,worker:!0,options:{draco:{},source:null}};e.DracoWriterWorker=p;var h=d(d({},i.DracoLoader),{},{parse:function(e,r){return y.apply(this,arguments)}});function y(){return y=(0,n.default)(t.default.mark((function e(r,n){var a,i,s;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.loadDracoDecoderModule)(n);case 2:return a=e.sent,i=a.draco,s=new o.default(i),e.prev=5,e.abrupt("return",s.parseSync(r,null==n?void 0:n.draco));case 7:return e.prev=7,s.destroy(),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[5,,7,10]])}))),y.apply(this,arguments)}e.DracoLoader=h;var v=h;e._TypecheckDracoLoader=v}(es5$7)),es5$7}var gltfAttributeUtils={},hasRequiredGltfAttributeUtils,hasRequiredKHR_draco_mesh_compression;function requireGltfAttributeUtils(){if(hasRequiredGltfAttributeUtils)return gltfAttributeUtils;hasRequiredGltfAttributeUtils=1,Object.defineProperty(gltfAttributeUtils,"__esModule",{value:!0}),gltfAttributeUtils.getGLTFAccessor=r,gltfAttributeUtils.getGLTFAccessors=function(e){var t={};for(var n in e){var a=e[n];if("indices"!==n){var i=r(a);t[n]=i}}return t};var e=requireGltfUtils();function r(r){var t=function(e){var r=e,t=1,n=0;e&&e.value&&(r=e.value,t=e.size||1);r&&(ArrayBuffer.isView(r)||(r=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;if(Array.isArray(e))return new r(e);if(t&&!(e instanceof r))return new r(e);return e}(r,Float32Array)),n=r.length/t);return{buffer:r,size:t,count:n}}(r),n=t.buffer,a=t.size;return{value:n,size:a,byteOffset:0,count:t.count,type:(0,e.getAccessorTypeFromSize)(a),componentType:(0,e.getComponentTypeFromArray)(n)}}return gltfAttributeUtils}function requireKHR_draco_mesh_compression(){if(hasRequiredKHR_draco_mesh_compression)return KHR_draco_mesh_compression;hasRequiredKHR_draco_mesh_compression=1;var e=requireRegenerator(),r=interopRequireDefaultExports;Object.defineProperty(KHR_draco_mesh_compression,"__esModule",{value:!0}),KHR_draco_mesh_compression.decode=function(e,r,t){return m.apply(this,arguments)},KHR_draco_mesh_compression.encode=function(e){var r,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new s.default(e),a=p(n.json.meshes||[]);try{for(a.s();!(r=a.n()).done;){_(r.value,t),n.addRequiredExtension(y)}}catch(e){a.e(e)}finally{a.f()}},KHR_draco_mesh_compression.name=void 0,KHR_draco_mesh_compression.preprocess=function(e,r,t){var n,a=new s.default(e),i=p(T(a));try{for(i.s();!(n=i.n()).done;){var o=n.value;a.getObjectExtension(o,y)}}catch(e){i.e(e)}finally{i.f()}};var t=r(requireRegenerator()),n=r(requireSlicedToArray$2()),a=r(requireDefineProperty$3()),i=r(requireAsyncToGenerator()),o=requireEs5$5(),u=requireEs5$b(),s=r(requireGltfScenegraph()),c=requireGltfAttributeUtils();function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach((function(r){(0,a.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var d=e.mark(T);function p(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return h(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}function h(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var y="KHR_draco_mesh_compression",v=y;function m(){return(m=(0,i.default)(t.default.mark((function e(r,n,a){var i,o,u,c,l,f;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n&&null!==(i=n.gltf)&&void 0!==i&&i.decompressMeshes){e.next=2;break}return e.abrupt("return");case 2:o=new s.default(r),u=[],c=p(T(o));try{for(c.s();!(l=c.n()).done;)f=l.value,o.getObjectExtension(f,y)&&u.push(b(o,f,n,a))}catch(e){c.e(e)}finally{c.f()}return e.next=8,Promise.all(u);case 8:o.removeExtension(y);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,r,t,n){return g.apply(this,arguments)}function g(){return g=(0,i.default)(t.default.mark((function e(r,a,i,s){var l,d,p,h,v,m,b,g,_,T,O,R,E,S;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=r.getObjectExtension(a,y)){e.next=3;break}return e.abrupt("return");case 3:return d=r.getTypedArrayForBufferView(l.bufferView),p=(0,u.sliceArrayBuffer)(d.buffer,d.byteOffset),h=s.parse,delete(v=f({},i))["3d-tiles"],e.next=10,h(p,o.DracoLoader,v,s);case 10:for(m=e.sent,b=(0,c.getGLTFAccessors)(m.attributes),g=0,_=Object.entries(b);g<_.length;g++)T=(0,n.default)(_[g],2),O=T[0],R=T[1],O in a.attributes&&(E=a.attributes[O],null!=(S=r.getAccessor(E))&&S.min&&null!=S&&S.max&&(R.min=S.min,R.max=S.max));a.attributes=b,m.indices&&(a.indices=(0,c.getGLTFAccessor)(m.indices)),A(a);case 16:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function _(e,r){var t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");var u=i.DracoWriter.encodeSync({attributes:e}),s=null==o||null===(t=o.parseSync)||void 0===t?void 0:t.call(o,{attributes:e}),c=i._addFauxAttributes(s.attributes),l=i.addBufferView(u);return{primitives:[{attributes:c,mode:n,extensions:(0,a.default)({},y,{bufferView:l,attributes:c})}]}}function A(e){if(!e.attributes&&Object.keys(e.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function T(e){var r,n,a,i,o,u;return t.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=p(e.json.meshes||[]),t.prev=1,r.s();case 3:if((n=r.n()).done){t.next=24;break}a=n.value,i=p(a.primitives),t.prev=6,i.s();case 8:if((o=i.n()).done){t.next=14;break}return u=o.value,t.next=12,u;case 12:t.next=8;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(6),i.e(t.t0);case 19:return t.prev=19,i.f(),t.finish(19);case 22:t.next=3;break;case 24:t.next=29;break;case 26:t.prev=26,t.t1=t.catch(1),r.e(t.t1);case 29:return t.prev=29,r.f(),t.finish(29);case 32:case"end":return t.stop()}}),d,null,[[1,26,29,32],[6,16,19,22]])}return KHR_draco_mesh_compression.name=v,KHR_draco_mesh_compression}var KHR_texture_transform={},es5$5={},interopRequireDefault$2={exports:{}},hasRequiredInteropRequireDefault$2;function requireInteropRequireDefault$2(){return hasRequiredInteropRequireDefault$2||(hasRequiredInteropRequireDefault$2=1,function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}(interopRequireDefault$2)),interopRequireDefault$2.exports}var vector2={},_typeof$2={exports:{}},hasRequired_typeof$2;function require_typeof$2(){return hasRequired_typeof$2||(hasRequired_typeof$2=1,function(e){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(_typeof$2)),_typeof$2.exports}var classCallCheck$2={exports:{}},hasRequiredClassCallCheck$2;function requireClassCallCheck$2(){return hasRequiredClassCallCheck$2||(hasRequiredClassCallCheck$2=1,function(e){e.exports=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}(classCallCheck$2)),classCallCheck$2.exports}var createClass$2={exports:{}},toPropertyKey$2={exports:{}},toPrimitive$2={exports:{}},hasRequiredToPrimitive$2,hasRequiredToPropertyKey$2,hasRequiredCreateClass$2;function requireToPrimitive$2(){return hasRequiredToPrimitive$2||(hasRequiredToPrimitive$2=1,function(e){var r=require_typeof$2().default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(toPrimitive$2)),toPrimitive$2.exports}function requireToPropertyKey$2(){return hasRequiredToPropertyKey$2||(hasRequiredToPropertyKey$2=1,function(e){var r=require_typeof$2().default,t=requireToPrimitive$2();e.exports=function(e){var n=t(e,"string");return"symbol"===r(n)?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}(toPropertyKey$2)),toPropertyKey$2.exports}function requireCreateClass$2(){return hasRequiredCreateClass$2||(hasRequiredCreateClass$2=1,function(e){var r=requireToPropertyKey$2();function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,r(a.key),a)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}(createClass$2)),createClass$2.exports}var inherits={exports:{}},setPrototypeOf={exports:{}},hasRequiredSetPrototypeOf,hasRequiredInherits;function requireSetPrototypeOf(){return hasRequiredSetPrototypeOf||(hasRequiredSetPrototypeOf=1,function(e){function r(t,n){return e.exports=r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t,n)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(setPrototypeOf)),setPrototypeOf.exports}function requireInherits(){return hasRequiredInherits||(hasRequiredInherits=1,function(e){var r=requireSetPrototypeOf();e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports}(inherits)),inherits.exports}var possibleConstructorReturn={exports:{}},assertThisInitialized={exports:{}},hasRequiredAssertThisInitialized,hasRequiredPossibleConstructorReturn;function requireAssertThisInitialized(){return hasRequiredAssertThisInitialized||(hasRequiredAssertThisInitialized=1,function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports}(assertThisInitialized)),assertThisInitialized.exports}function requirePossibleConstructorReturn(){return hasRequiredPossibleConstructorReturn||(hasRequiredPossibleConstructorReturn=1,function(e){var r=require_typeof$2().default,t=requireAssertThisInitialized();e.exports=function(e,n){if(n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return t(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(possibleConstructorReturn)),possibleConstructorReturn.exports}var getPrototypeOf={exports:{}},hasRequiredGetPrototypeOf;function requireGetPrototypeOf(){return hasRequiredGetPrototypeOf||(hasRequiredGetPrototypeOf=1,function(e){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(getPrototypeOf)),getPrototypeOf.exports}var vector={},mathArray={},common$1={},assert$2={},hasRequiredAssert$1,hasRequiredCommon$1,hasRequiredMathArray;function requireAssert$1(){if(hasRequiredAssert$1)return assert$2;return hasRequiredAssert$1=1,Object.defineProperty(assert$2,"__esModule",{value:!0}),assert$2.default=function(e,r){if(!e)throw new Error("math.gl assertion ".concat(r))},assert$2}function requireCommon$1(){if(hasRequiredCommon$1)return common$1;hasRequiredCommon$1=1;var e=requireInteropRequireDefault$2();Object.defineProperty(common$1,"__esModule",{value:!0}),common$1.configure=function(e){for(var r in e)(0,t.default)(r in i),i[r]=e[r];return i},common$1.formatValue=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.precision,n=void 0===t?i.precision:t;return e=function(e){return Math.round(e/i.EPSILON)*i.EPSILON}(e),"".concat(parseFloat(e.toPrecision(n)))},common$1.isArray=o,common$1.clone=function(e){return"clone"in e?e.clone():e.slice()},common$1.toRadians=function(e){return u(e)},common$1.toDegrees=function(e){return s(e)},common$1.radians=u,common$1.degrees=s,common$1.sin=function(e,r){return c(e,(function(e){return Math.sin(e)}),r)},common$1.cos=function(e,r){return c(e,(function(e){return Math.cos(e)}),r)},common$1.tan=function(e,r){return c(e,(function(e){return Math.tan(e)}),r)},common$1.asin=function(e,r){return c(e,(function(e){return Math.asin(e)}),r)},common$1.acos=function(e,r){return c(e,(function(e){return Math.acos(e)}),r)},common$1.atan=function(e,r){return c(e,(function(e){return Math.atan(e)}),r)},common$1.clamp=function(e,r,t){return c(e,(function(e){return Math.max(r,Math.min(t,e))}))},common$1.lerp=function e(r,t,n){if(o(r))return r.map((function(r,a){return e(r,t[a],n)}));return n*t+(1-n)*r},common$1.equals=function e(r,t,n){var a=i.EPSILON;n&&(i.EPSILON=n);try{if(r===t)return!0;if(o(r)&&o(t)){if(r.length!==t.length)return!1;for(var u=0;u<r.length;++u)if(!e(r[u],t[u]))return!1;return!0}return r&&r.equals?r.equals(t):t&&t.equals?t.equals(r):"number"==typeof r&&"number"==typeof t&&Math.abs(r-t)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(t))}finally{i.EPSILON=a}},common$1.exactEquals=function e(t,n){if(t===n)return!0;if(t&&"object"===(0,r.default)(t)&&n&&"object"===(0,r.default)(n)){if(t.constructor!==n.constructor)return!1;if(t.exactEquals)return t.exactEquals(n)}if(o(t)&&o(n)){if(t.length!==n.length)return!1;for(var a=0;a<t.length;++a)if(!e(t[a],n[a]))return!1;return!0}return!1},common$1.withEpsilon=function(e,r){var t,n=i.EPSILON;i.EPSILON=e;try{t=r()}finally{i.EPSILON=n}return t},common$1.config=void 0;var r=e(require_typeof$2()),t=e(requireAssert$1()),n=1/Math.PI*180,a=1/180*Math.PI,i={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function o(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function u(e,r){return c(e,(function(e){return e*a}),r)}function s(e,r){return c(e,(function(e){return e*n}),r)}function c(e,r,t){if(o(e)){var n=e;t=t||function(e){return e.clone?e.clone():new Array(e.length)}(n);for(var a=0;a<t.length&&a<n.length;++a)t[a]=r(e[a],a,t);return t}return r(e)}return common$1.config=i,common$1}function requireMathArray(){if(hasRequiredMathArray)return mathArray;hasRequiredMathArray=1;var e=requireInteropRequireDefault$2();Object.defineProperty(mathArray,"__esModule",{value:!0}),mathArray.default=void 0;var r=e(requireClassCallCheck$2()),t=e(requireCreateClass$2()),n=e(requireInherits()),a=e(requirePossibleConstructorReturn()),i=e(requireGetPrototypeOf()),o=requireCommon$1();function u(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,i.default)(e);if(r){var o=(0,i.default)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,a.default)(this,t)}}var s=function(e){(0,n.default)(i,e);var a=u(i);function i(){return(0,r.default)(this,i),a.apply(this,arguments)}return(0,t.default)(i,[{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=0;t<this.ELEMENTS;++t)this[t]=e[t+r];return this.check()}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=0;t<this.ELEMENTS;++t)e[r+t]=this[t];return e}},{key:"from",value:function(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}},{key:"to",value:function(e){return e===this?this:(0,o.isArray)(e)?this.toArray(e):this.toObject(e)}},{key:"toTarget",value:function(e){return e?this.to(e):this}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"toString",value:function(){return this.formatString(o.config)}},{key:"formatString",value:function(e){for(var r="",t=0;t<this.ELEMENTS;++t)r+=(t>0?", ":"")+(0,o.formatValue)(this[t],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(r,"]")}},{key:"equals",value:function(e){if(!e||this.length!==e.length)return!1;for(var r=0;r<this.ELEMENTS;++r)if(!(0,o.equals)(this[r],e[r]))return!1;return!0}},{key:"exactEquals",value:function(e){if(!e||this.length!==e.length)return!1;for(var r=0;r<this.ELEMENTS;++r)if(this[r]!==e[r])return!1;return!0}},{key:"negate",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}},{key:"lerp",value:function(e,r,t){if(void 0===t)return this.lerp(this,e,r);for(var n=0;n<this.ELEMENTS;++n){var a=e[n];this[n]=a+t*(r[n]-a)}return this.check()}},{key:"min",value:function(e){for(var r=0;r<this.ELEMENTS;++r)this[r]=Math.min(e[r],this[r]);return this.check()}},{key:"max",value:function(e){for(var r=0;r<this.ELEMENTS;++r)this[r]=Math.max(e[r],this[r]);return this.check()}},{key:"clamp",value:function(e,r){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.min(Math.max(this[t],e[t]),r[t]);return this.check()}},{key:"add",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];for(var n=0,a=r;n<a.length;n++)for(var i=a[n],o=0;o<this.ELEMENTS;++o)this[o]+=i[o];return this.check()}},{key:"subtract",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];for(var n=0,a=r;n<a.length;n++)for(var i=a[n],o=0;o<this.ELEMENTS;++o)this[o]-=i[o];return this.check()}},{key:"scale",value:function(e){if("number"==typeof e)for(var r=0;r<this.ELEMENTS;++r)this[r]*=e;else for(var t=0;t<this.ELEMENTS&&t<e.length;++t)this[t]*=e[t];return this.check()}},{key:"multiplyByScalar",value:function(e){for(var r=0;r<this.ELEMENTS;++r)this[r]*=e;return this.check()}},{key:"check",value:function(){if(o.config.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"validate",value:function(){for(var e=this.length===this.ELEMENTS,r=0;r<this.ELEMENTS;++r)e=e&&Number.isFinite(this[r]);return e}},{key:"sub",value:function(e){return this.subtract(e)}},{key:"setScalar",value:function(e){for(var r=0;r<this.ELEMENTS;++r)this[r]=e;return this.check()}},{key:"addScalar",value:function(e){for(var r=0;r<this.ELEMENTS;++r)this[r]+=e;return this.check()}},{key:"subScalar",value:function(e){return this.addScalar(-e)}},{key:"multiplyScalar",value:function(e){for(var r=0;r<this.ELEMENTS;++r)this[r]*=e;return this.check()}},{key:"divideScalar",value:function(e){return this.multiplyByScalar(1/e)}},{key:"clampScalar",value:function(e,r){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.min(Math.max(this[t],e),r);return this.check()}},{key:"elements",get:function(){return this}}]),i}(function(e){function r(){var r=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(r,Object.getPrototypeOf(this)),r}return r.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e,r}(Array));return mathArray.default=s,mathArray}var validators={},hasRequiredValidators,hasRequiredVector;function requireValidators(){if(hasRequiredValidators)return validators;hasRequiredValidators=1,Object.defineProperty(validators,"__esModule",{value:!0}),validators.validateVector=r,validators.checkNumber=function(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e},validators.checkVector=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(e.config.debug&&!r(t,n))throw new Error("math.gl: ".concat(a," some fields set to invalid numbers'"));return t},validators.deprecated=function(e,r){t[e]||(t[e]=!0,console.warn("".concat(e," has been removed in version ").concat(r,", see upgrade guide for more information")))};var e=requireCommon$1();function r(e,r){if(e.length!==r)return!1;for(var t=0;t<e.length;++t)if(!Number.isFinite(e[t]))return!1;return!0}var t={};return validators}function requireVector(){if(hasRequiredVector)return vector;hasRequiredVector=1;var e=requireInteropRequireDefault$2();Object.defineProperty(vector,"__esModule",{value:!0}),vector.default=void 0;var r=e(requireClassCallCheck$2()),t=e(requireCreateClass$2()),n=e(requireInherits()),a=e(requirePossibleConstructorReturn()),i=e(requireGetPrototypeOf()),o=e(requireMathArray()),u=requireValidators(),s=e(requireAssert$1());function c(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,i.default)(e);if(r){var o=(0,i.default)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,a.default)(this,t)}}var l=function(e){(0,n.default)(i,e);var a=c(i);function i(){return(0,r.default)(this,i),a.apply(this,arguments)}return(0,t.default)(i,[{key:"x",get:function(){return this[0]},set:function(e){this[0]=(0,u.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){this[1]=(0,u.checkNumber)(e)}},{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return this.len()}},{key:"lengthSquared",value:function(){for(var e=0,r=0;r<this.ELEMENTS;++r)e+=this[r]*this[r];return e}},{key:"magnitudeSquared",value:function(){return this.lengthSquared()}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSquared(e))}},{key:"distanceSquared",value:function(e){for(var r=0,t=0;t<this.ELEMENTS;++t){var n=this[t]-e[t];r+=n*n}return(0,u.checkNumber)(r)}},{key:"dot",value:function(e){for(var r=0,t=0;t<this.ELEMENTS;++t)r+=this[t]*e[t];return(0,u.checkNumber)(r)}},{key:"normalize",value:function(){var e=this.magnitude();if(0!==e)for(var r=0;r<this.ELEMENTS;++r)this[r]/=e;return this.check()}},{key:"multiply",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];for(var n=0,a=r;n<a.length;n++)for(var i=a[n],o=0;o<this.ELEMENTS;++o)this[o]*=i[o];return this.check()}},{key:"divide",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];for(var n=0,a=r;n<a.length;n++)for(var i=a[n],o=0;o<this.ELEMENTS;++o)this[o]/=i[o];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(e){return this.distance(e)}},{key:"distanceToSquared",value:function(e){return this.distanceSquared(e)}},{key:"getComponent",value:function(e){return(0,s.default)(e>=0&&e<this.ELEMENTS,"index is out of range"),(0,u.checkNumber)(this[e])}},{key:"setComponent",value:function(e,r){return(0,s.default)(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=r,this.check()}},{key:"addVectors",value:function(e,r){return this.copy(e).add(r)}},{key:"subVectors",value:function(e,r){return this.copy(e).subtract(r)}},{key:"multiplyVectors",value:function(e,r){return this.copy(e).multiply(r)}},{key:"addScaledVector",value:function(e,r){return this.add(new this.constructor(e).multiplyScalar(r))}}]),i}(o.default);return vector.default=l,vector}var vec2={},common={},hasRequiredCommon,hasRequiredVec2;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1,Object.defineProperty(common,"__esModule",{value:!0}),common.setMatrixArrayType=function(e){common.ARRAY_TYPE=r=e},common.toRadian=function(e){return e*n},common.equals=function(r,t){return Math.abs(r-t)<=e*Math.max(1,Math.abs(r),Math.abs(t))},common.RANDOM=common.ARRAY_TYPE=common.EPSILON=void 0;var e=1e-6;common.EPSILON=e;var r="undefined"!=typeof Float32Array?Float32Array:Array;common.ARRAY_TYPE=r;var t=Math.random;common.RANDOM=t;var n=Math.PI/180;return Math.hypot||(Math.hypot=function(){for(var e=0,r=arguments.length;r--;)e+=arguments[r]*arguments[r];return Math.sqrt(e)}),common}function requireVec2(){if(hasRequiredVec2)return vec2;function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}hasRequiredVec2=1,Object.defineProperty(vec2,"__esModule",{value:!0}),vec2.create=n,vec2.clone=function(e){var t=new r.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},vec2.fromValues=function(e,t){var n=new r.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n},vec2.copy=function(e,r){return e[0]=r[0],e[1]=r[1],e},vec2.set=function(e,r,t){return e[0]=r,e[1]=t,e},vec2.add=function(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e},vec2.subtract=a,vec2.multiply=i,vec2.divide=o,vec2.ceil=function(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e},vec2.floor=function(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e},vec2.min=function(e,r,t){return e[0]=Math.min(r[0],t[0]),e[1]=Math.min(r[1],t[1]),e},vec2.max=function(e,r,t){return e[0]=Math.max(r[0],t[0]),e[1]=Math.max(r[1],t[1]),e},vec2.round=function(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e},vec2.scale=function(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e},vec2.scaleAndAdd=function(e,r,t,n){return e[0]=r[0]+t[0]*n,e[1]=r[1]+t[1]*n,e},vec2.distance=u,vec2.squaredDistance=s,vec2.length=c,vec2.squaredLength=l,vec2.negate=function(e,r){return e[0]=-r[0],e[1]=-r[1],e},vec2.inverse=function(e,r){return e[0]=1/r[0],e[1]=1/r[1],e},vec2.normalize=function(e,r){var t=r[0],n=r[1],a=t*t+n*n;a>0&&(a=1/Math.sqrt(a));return e[0]=r[0]*a,e[1]=r[1]*a,e},vec2.dot=function(e,r){return e[0]*r[0]+e[1]*r[1]},vec2.cross=function(e,r,t){var n=r[0]*t[1]-r[1]*t[0];return e[0]=e[1]=0,e[2]=n,e},vec2.lerp=function(e,r,t,n){var a=r[0],i=r[1];return e[0]=a+n*(t[0]-a),e[1]=i+n*(t[1]-i),e},vec2.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},vec2.transformMat2=function(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[2]*a,e[1]=t[1]*n+t[3]*a,e},vec2.transformMat2d=function(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[2]*a+t[4],e[1]=t[1]*n+t[3]*a+t[5],e},vec2.transformMat3=function(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[3]*a+t[6],e[1]=t[1]*n+t[4]*a+t[7],e},vec2.transformMat4=function(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[4]*a+t[12],e[1]=t[1]*n+t[5]*a+t[13],e},vec2.rotate=function(e,r,t,n){var a=r[0]-t[0],i=r[1]-t[1],o=Math.sin(n),u=Math.cos(n);return e[0]=a*u-i*o+t[0],e[1]=a*o+i*u+t[1],e},vec2.angle=function(e,r){var t=e[0],n=e[1],a=r[0],i=r[1],o=Math.sqrt(t*t+n*n)*Math.sqrt(a*a+i*i),u=o&&(t*a+n*i)/o;return Math.acos(Math.min(Math.max(u,-1),1))},vec2.zero=function(e){return e[0]=0,e[1]=0,e},vec2.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},vec2.exactEquals=function(e,r){return e[0]===r[0]&&e[1]===r[1]},vec2.equals=function(e,t){var n=e[0],a=e[1],i=t[0],o=t[1];return Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-o)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(o))},vec2.forEach=vec2.sqrLen=vec2.sqrDist=vec2.dist=vec2.div=vec2.mul=vec2.sub=vec2.len=void 0;var r=function(r,n){if(!n&&r&&r.__esModule)return r;if(null===r||"object"!==e(r)&&"function"!=typeof r)return{default:r};var a=t(n);if(a&&a.has(r))return a.get(r);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var s=o?Object.getOwnPropertyDescriptor(r,u):null;s&&(s.get||s.set)?Object.defineProperty(i,u,s):i[u]=r[u]}i.default=r,a&&a.set(r,i);return i}(requireCommon());function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function n(){var e=new r.ARRAY_TYPE(2);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function a(e,r,t){return e[0]=r[0]-t[0],e[1]=r[1]-t[1],e}function i(e,r,t){return e[0]=r[0]*t[0],e[1]=r[1]*t[1],e}function o(e,r,t){return e[0]=r[0]/t[0],e[1]=r[1]/t[1],e}function u(e,r){var t=r[0]-e[0],n=r[1]-e[1];return Math.hypot(t,n)}function s(e,r){var t=r[0]-e[0],n=r[1]-e[1];return t*t+n*n}function c(e){var r=e[0],t=e[1];return Math.hypot(r,t)}function l(e){var r=e[0],t=e[1];return r*r+t*t}var f=c;vec2.len=f;var d=a;vec2.sub=d;var p=i;vec2.mul=p;var h=o;vec2.div=h;var y=u;vec2.dist=y;var v=s;vec2.sqrDist=v;var m=l;vec2.sqrLen=m;var b,g=(b=n(),function(e,r,t,n,a,i){var o,u;for(r||(r=2),t||(t=0),u=n?Math.min(n*r+t,e.length):e.length,o=t;o<u;o+=r)b[0]=e[o],b[1]=e[o+1],a(b,b,i),e[o]=b[0],e[o+1]=b[1];return e});return vec2.forEach=g,vec2}var glMatrixExtras={},hasRequiredGlMatrixExtras,hasRequiredVector2;function requireGlMatrixExtras(){if(hasRequiredGlMatrixExtras)return glMatrixExtras;return hasRequiredGlMatrixExtras=1,Object.defineProperty(glMatrixExtras,"__esModule",{value:!0}),glMatrixExtras.vec2_transformMat4AsVector=function(e,r,t){var n=r[0],a=r[1],i=t[3]*n+t[7]*a||1;return e[0]=(t[0]*n+t[4]*a)/i,e[1]=(t[1]*n+t[5]*a)/i,e},glMatrixExtras.vec3_transformMat4AsVector=function(e,r,t){var n=r[0],a=r[1],i=r[2],o=t[3]*n+t[7]*a+t[11]*i||1;return e[0]=(t[0]*n+t[4]*a+t[8]*i)/o,e[1]=(t[1]*n+t[5]*a+t[9]*i)/o,e[2]=(t[2]*n+t[6]*a+t[10]*i)/o,e},glMatrixExtras.vec3_transformMat2=function(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[2]*a,e[1]=t[1]*n+t[3]*a,e[2]=r[2],e},glMatrixExtras.vec4_transformMat2=function(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[2]*a,e[1]=t[1]*n+t[3]*a,e[2]=r[2],e[3]=r[3],e},glMatrixExtras.vec4_transformMat3=function(e,r,t){var n=r[0],a=r[1],i=r[2];return e[0]=t[0]*n+t[3]*a+t[6]*i,e[1]=t[1]*n+t[4]*a+t[7]*i,e[2]=t[2]*n+t[5]*a+t[8]*i,e[3]=r[3],e},glMatrixExtras}function requireVector2(){if(hasRequiredVector2)return vector2;hasRequiredVector2=1;var e=requireInteropRequireDefault$2(),r=require_typeof$2();Object.defineProperty(vector2,"__esModule",{value:!0}),vector2.default=void 0;var t=e(requireClassCallCheck$2()),n=e(requireCreateClass$2()),a=e(requireInherits()),i=e(requirePossibleConstructorReturn()),o=e(requireGetPrototypeOf()),u=e(requireVector()),s=requireCommon$1(),c=requireValidators(),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(requireVec2()),f=requireGlMatrixExtras();function d(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:r})(e)}function p(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,o.default)(e);if(r){var a=(0,o.default)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,i.default)(this,t)}}var h=function(e){(0,a.default)(i,e);var r=p(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,t.default)(this,i),e=r.call(this,2),(0,s.isArray)(n)&&1===arguments.length?e.copy(n):(s.config.debug&&((0,c.checkNumber)(n),(0,c.checkNumber)(a)),e[0]=n,e[1]=a),e}return(0,n.default)(i,[{key:"set",value:function(e,r){return this[0]=e,this[1]=r,this.check()}},{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this.check()}},{key:"fromObject",value:function(e){return s.config.debug&&((0,c.checkNumber)(e.x),(0,c.checkNumber)(e.y)),this[0]=e.x,this[1]=e.y,this.check()}},{key:"toObject",value:function(e){return e.x=this[0],e.y=this[1],e}},{key:"ELEMENTS",get:function(){return 2}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"transform",value:function(e){return this.transformAsPoint(e)}},{key:"transformAsPoint",value:function(e){return l.transformMat4(this,this,e),this.check()}},{key:"transformAsVector",value:function(e){return(0,f.vec2_transformMat4AsVector)(this,this,e),this.check()}},{key:"transformByMatrix3",value:function(e){return l.transformMat3(this,this,e),this.check()}},{key:"transformByMatrix2x3",value:function(e){return l.transformMat2d(this,this,e),this.check()}},{key:"transformByMatrix2",value:function(e){return l.transformMat2(this,this,e),this.check()}}]),i}(u.default);return vector2.default=h,vector2}var vector3={},vec3={},hasRequiredVec3,hasRequiredVector3;function requireVec3(){if(hasRequiredVec3)return vec3;function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}hasRequiredVec3=1,Object.defineProperty(vec3,"__esModule",{value:!0}),vec3.create=n,vec3.clone=function(e){var t=new r.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},vec3.length=a,vec3.fromValues=function(e,t,n){var a=new r.ARRAY_TYPE(3);return a[0]=e,a[1]=t,a[2]=n,a},vec3.copy=function(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e},vec3.set=function(e,r,t,n){return e[0]=r,e[1]=t,e[2]=n,e},vec3.add=function(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e},vec3.subtract=i,vec3.multiply=o,vec3.divide=u,vec3.ceil=function(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e[2]=Math.ceil(r[2]),e},vec3.floor=function(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e[2]=Math.floor(r[2]),e},vec3.min=function(e,r,t){return e[0]=Math.min(r[0],t[0]),e[1]=Math.min(r[1],t[1]),e[2]=Math.min(r[2],t[2]),e},vec3.max=function(e,r,t){return e[0]=Math.max(r[0],t[0]),e[1]=Math.max(r[1],t[1]),e[2]=Math.max(r[2],t[2]),e},vec3.round=function(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e[2]=Math.round(r[2]),e},vec3.scale=function(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e},vec3.scaleAndAdd=function(e,r,t,n){return e[0]=r[0]+t[0]*n,e[1]=r[1]+t[1]*n,e[2]=r[2]+t[2]*n,e},vec3.distance=s,vec3.squaredDistance=c,vec3.squaredLength=l,vec3.negate=function(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e},vec3.inverse=function(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e},vec3.normalize=function(e,r){var t=r[0],n=r[1],a=r[2],i=t*t+n*n+a*a;i>0&&(i=1/Math.sqrt(i));return e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e},vec3.dot=f,vec3.cross=function(e,r,t){var n=r[0],a=r[1],i=r[2],o=t[0],u=t[1],s=t[2];return e[0]=a*s-i*u,e[1]=i*o-n*s,e[2]=n*u-a*o,e},vec3.lerp=function(e,r,t,n){var a=r[0],i=r[1],o=r[2];return e[0]=a+n*(t[0]-a),e[1]=i+n*(t[1]-i),e[2]=o+n*(t[2]-o),e},vec3.hermite=function(e,r,t,n,a,i){var o=i*i,u=o*(2*i-3)+1,s=o*(i-2)+i,c=o*(i-1),l=o*(3-2*i);return e[0]=r[0]*u+t[0]*s+n[0]*c+a[0]*l,e[1]=r[1]*u+t[1]*s+n[1]*c+a[1]*l,e[2]=r[2]*u+t[2]*s+n[2]*c+a[2]*l,e},vec3.bezier=function(e,r,t,n,a,i){var o=1-i,u=o*o,s=i*i,c=u*o,l=3*i*u,f=3*s*o,d=s*i;return e[0]=r[0]*c+t[0]*l+n[0]*f+a[0]*d,e[1]=r[1]*c+t[1]*l+n[1]*f+a[1]*d,e[2]=r[2]*c+t[2]*l+n[2]*f+a[2]*d,e},vec3.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI,a=2*r.RANDOM()-1,i=Math.sqrt(1-a*a)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=a*t,e},vec3.transformMat4=function(e,r,t){var n=r[0],a=r[1],i=r[2],o=t[3]*n+t[7]*a+t[11]*i+t[15];return o=o||1,e[0]=(t[0]*n+t[4]*a+t[8]*i+t[12])/o,e[1]=(t[1]*n+t[5]*a+t[9]*i+t[13])/o,e[2]=(t[2]*n+t[6]*a+t[10]*i+t[14])/o,e},vec3.transformMat3=function(e,r,t){var n=r[0],a=r[1],i=r[2];return e[0]=n*t[0]+a*t[3]+i*t[6],e[1]=n*t[1]+a*t[4]+i*t[7],e[2]=n*t[2]+a*t[5]+i*t[8],e},vec3.transformQuat=function(e,r,t){var n=t[0],a=t[1],i=t[2],o=t[3],u=r[0],s=r[1],c=r[2],l=a*c-i*s,f=i*u-n*c,d=n*s-a*u,p=a*d-i*f,h=i*l-n*d,y=n*f-a*l,v=2*o;return l*=v,f*=v,d*=v,p*=2,h*=2,y*=2,e[0]=u+l+p,e[1]=s+f+h,e[2]=c+d+y,e},vec3.rotateX=function(e,r,t,n){var a=[],i=[];return a[0]=r[0]-t[0],a[1]=r[1]-t[1],a[2]=r[2]-t[2],i[0]=a[0],i[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),i[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),e[0]=i[0]+t[0],e[1]=i[1]+t[1],e[2]=i[2]+t[2],e},vec3.rotateY=function(e,r,t,n){var a=[],i=[];return a[0]=r[0]-t[0],a[1]=r[1]-t[1],a[2]=r[2]-t[2],i[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),i[1]=a[1],i[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),e[0]=i[0]+t[0],e[1]=i[1]+t[1],e[2]=i[2]+t[2],e},vec3.rotateZ=function(e,r,t,n){var a=[],i=[];return a[0]=r[0]-t[0],a[1]=r[1]-t[1],a[2]=r[2]-t[2],i[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),i[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),i[2]=a[2],e[0]=i[0]+t[0],e[1]=i[1]+t[1],e[2]=i[2]+t[2],e},vec3.angle=function(e,r){var t=e[0],n=e[1],a=e[2],i=r[0],o=r[1],u=r[2],s=Math.sqrt(t*t+n*n+a*a),c=Math.sqrt(i*i+o*o+u*u),l=s*c,d=l&&f(e,r)/l;return Math.acos(Math.min(Math.max(d,-1),1))},vec3.zero=function(e){return e[0]=0,e[1]=0,e[2]=0,e},vec3.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},vec3.exactEquals=function(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]},vec3.equals=function(e,t){var n=e[0],a=e[1],i=e[2],o=t[0],u=t[1],s=t[2];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-u)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(i-s)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))},vec3.forEach=vec3.sqrLen=vec3.len=vec3.sqrDist=vec3.dist=vec3.div=vec3.mul=vec3.sub=void 0;var r=function(r,n){if(!n&&r&&r.__esModule)return r;if(null===r||"object"!==e(r)&&"function"!=typeof r)return{default:r};var a=t(n);if(a&&a.has(r))return a.get(r);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var s=o?Object.getOwnPropertyDescriptor(r,u):null;s&&(s.get||s.set)?Object.defineProperty(i,u,s):i[u]=r[u]}i.default=r,a&&a.set(r,i);return i}(requireCommon());function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function n(){var e=new r.ARRAY_TYPE(3);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function a(e){var r=e[0],t=e[1],n=e[2];return Math.hypot(r,t,n)}function i(e,r,t){return e[0]=r[0]-t[0],e[1]=r[1]-t[1],e[2]=r[2]-t[2],e}function o(e,r,t){return e[0]=r[0]*t[0],e[1]=r[1]*t[1],e[2]=r[2]*t[2],e}function u(e,r,t){return e[0]=r[0]/t[0],e[1]=r[1]/t[1],e[2]=r[2]/t[2],e}function s(e,r){var t=r[0]-e[0],n=r[1]-e[1],a=r[2]-e[2];return Math.hypot(t,n,a)}function c(e,r){var t=r[0]-e[0],n=r[1]-e[1],a=r[2]-e[2];return t*t+n*n+a*a}function l(e){var r=e[0],t=e[1],n=e[2];return r*r+t*t+n*n}function f(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}var d=i;vec3.sub=d;var p=o;vec3.mul=p;var h=u;vec3.div=h;var y=s;vec3.dist=y;var v=c;vec3.sqrDist=v;var m=a;vec3.len=m;var b=l;vec3.sqrLen=b;var g,_=(g=n(),function(e,r,t,n,a,i){var o,u;for(r||(r=3),t||(t=0),u=n?Math.min(n*r+t,e.length):e.length,o=t;o<u;o+=r)g[0]=e[o],g[1]=e[o+1],g[2]=e[o+2],a(g,g,i),e[o]=g[0],e[o+1]=g[1],e[o+2]=g[2];return e});return vec3.forEach=_,vec3}function requireVector3(){if(hasRequiredVector3)return vector3;hasRequiredVector3=1;var e=requireInteropRequireDefault$2(),r=require_typeof$2();Object.defineProperty(vector3,"__esModule",{value:!0}),vector3.default=void 0;var t=e(requireClassCallCheck$2()),n=e(requireCreateClass$2()),a=e(requireInherits()),i=e(requirePossibleConstructorReturn()),o=e(requireGetPrototypeOf()),u=e(requireVector()),s=requireCommon$1(),c=requireValidators(),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(requireVec3()),f=requireGlMatrixExtras();function d(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:r})(e)}function p(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,o.default)(e);if(r){var a=(0,o.default)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,i.default)(this,t)}}var h,y=[0,0,0],v=function(e){(0,a.default)(i,e);var r=p(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,t.default)(this,i),e=r.call(this,-0,-0,-0),1===arguments.length&&(0,s.isArray)(n)?e.copy(n):(s.config.debug&&((0,c.checkNumber)(n),(0,c.checkNumber)(a),(0,c.checkNumber)(o)),e[0]=n,e[1]=a,e[2]=o),e}return(0,n.default)(i,[{key:"set",value:function(e,r,t){return this[0]=e,this[1]=r,this[2]=t,this.check()}},{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}},{key:"fromObject",value:function(e){return s.config.debug&&((0,c.checkNumber)(e.x),(0,c.checkNumber)(e.y),(0,c.checkNumber)(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}},{key:"toObject",value:function(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(e){this[2]=(0,c.checkNumber)(e)}},{key:"angle",value:function(e){return l.angle(this,e)}},{key:"cross",value:function(e){return l.cross(this,this,e),this.check()}},{key:"rotateX",value:function(e){var r=e.radians,t=e.origin,n=void 0===t?y:t;return l.rotateX(this,this,n,r),this.check()}},{key:"rotateY",value:function(e){var r=e.radians,t=e.origin,n=void 0===t?y:t;return l.rotateY(this,this,n,r),this.check()}},{key:"rotateZ",value:function(e){var r=e.radians,t=e.origin,n=void 0===t?y:t;return l.rotateZ(this,this,n,r),this.check()}},{key:"transform",value:function(e){return this.transformAsPoint(e)}},{key:"transformAsPoint",value:function(e){return l.transformMat4(this,this,e),this.check()}},{key:"transformAsVector",value:function(e){return(0,f.vec3_transformMat4AsVector)(this,this,e),this.check()}},{key:"transformByMatrix3",value:function(e){return l.transformMat3(this,this,e),this.check()}},{key:"transformByMatrix2",value:function(e){return(0,f.vec3_transformMat2)(this,this,e),this.check()}},{key:"transformByQuaternion",value:function(e){return l.transformQuat(this,this,e),this.check()}}],[{key:"ZERO",get:function(){return h||(h=new i(0,0,0),Object.freeze(h)),h}}]),i}(u.default);return vector3.default=v,vector3}var vector4={},hasRequiredVector4;function requireVector4(){if(hasRequiredVector4)return vector4;hasRequiredVector4=1;var e=requireInteropRequireDefault$2(),r=require_typeof$2();Object.defineProperty(vector4,"__esModule",{value:!0}),vector4.default=void 0;var t,n=e(requireClassCallCheck$2()),a=e(requireCreateClass$2()),i=e(requireInherits()),o=e(requirePossibleConstructorReturn()),u=e(requireGetPrototypeOf()),s=e(requireVector()),c=requireCommon$1(),l=requireValidators(),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(requireVec3()),d=requireGlMatrixExtras();function p(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(p=function(e){return e?t:r})(e)}function h(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,u.default)(e);if(r){var a=(0,u.default)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,o.default)(this,t)}}var y=function(e){(0,i.default)(o,e);var r=h(o);function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return(0,n.default)(this,o),e=r.call(this,-0,-0,-0,-0),(0,c.isArray)(t)&&1===arguments.length?e.copy(t):(c.config.debug&&((0,l.checkNumber)(t),(0,l.checkNumber)(a),(0,l.checkNumber)(i),(0,l.checkNumber)(u)),e[0]=t,e[1]=a,e[2]=i,e[3]=u),e}return(0,a.default)(o,[{key:"set",value:function(e,r,t,n){return this[0]=e,this[1]=r,this[2]=t,this[3]=n,this.check()}},{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}},{key:"fromObject",value:function(e){return c.config.debug&&((0,l.checkNumber)(e.x),(0,l.checkNumber)(e.y),(0,l.checkNumber)(e.z),(0,l.checkNumber)(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}},{key:"toObject",value:function(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}},{key:"ELEMENTS",get:function(){return 4}},{key:"z",get:function(){return this[2]},set:function(e){this[2]=(0,l.checkNumber)(e)}},{key:"w",get:function(){return this[3]},set:function(e){this[3]=(0,l.checkNumber)(e)}},{key:"transform",value:function(e){return f.transformMat4(this,this,e),this.check()}},{key:"transformByMatrix3",value:function(e){return(0,d.vec4_transformMat3)(this,this,e),this.check()}},{key:"transformByMatrix2",value:function(e){return(0,d.vec4_transformMat2)(this,this,e),this.check()}},{key:"transformByQuaternion",value:function(e){return f.transformQuat(this,this,e),this.check()}},{key:"applyMatrix4",value:function(e){return e.transform(this,this),this}}],[{key:"ZERO",get:function(){return t||(t=new o(0,0,0,0),Object.freeze(t)),t}}]),o}(s.default);return vector4.default=y,vector4}var matrix3={},matrix={},hasRequiredMatrix;function requireMatrix(){if(hasRequiredMatrix)return matrix;hasRequiredMatrix=1;var e=requireInteropRequireDefault$2();Object.defineProperty(matrix,"__esModule",{value:!0}),matrix.default=void 0;var r=e(requireClassCallCheck$2()),t=e(requireCreateClass$2()),n=e(requireInherits()),a=e(requirePossibleConstructorReturn()),i=e(requireGetPrototypeOf()),o=e(requireMathArray()),u=requireValidators(),s=requireCommon$1();function c(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,i.default)(e);if(r){var o=(0,i.default)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,a.default)(this,t)}}var l=function(e){(0,n.default)(i,e);var a=c(i);function i(){return(0,r.default)(this,i),a.apply(this,arguments)}return(0,t.default)(i,[{key:"toString",value:function(){var e="[";if(s.config.printRowMajor){e+="row-major:";for(var r=0;r<this.RANK;++r)for(var t=0;t<this.RANK;++t)e+=" ".concat(this[t*this.RANK+r])}else{e+="column-major:";for(var n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]"}},{key:"getElementIndex",value:function(e,r){return r*this.RANK+e}},{key:"getElement",value:function(e,r){return this[r*this.RANK+e]}},{key:"setElement",value:function(e,r,t){return this[r*this.RANK+e]=(0,u.checkNumber)(t),this}},{key:"getColumn",value:function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0),t=e*this.RANK,n=0;n<this.RANK;++n)r[n]=this[t+n];return r}},{key:"setColumn",value:function(e,r){for(var t=e*this.RANK,n=0;n<this.RANK;++n)this[t+n]=r[n];return this}}]),i}(o.default);return matrix.default=l,matrix}var mat3={},hasRequiredMat3,hasRequiredMatrix3;function requireMat3(){if(hasRequiredMat3)return mat3;function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}hasRequiredMat3=1,Object.defineProperty(mat3,"__esModule",{value:!0}),mat3.create=function(){var e=new r.ARRAY_TYPE(9);r.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0);return e[0]=1,e[4]=1,e[8]=1,e},mat3.fromMat4=function(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[4],e[4]=r[5],e[5]=r[6],e[6]=r[8],e[7]=r[9],e[8]=r[10],e},mat3.clone=function(e){var t=new r.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},mat3.copy=function(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e},mat3.fromValues=function(e,t,n,a,i,o,u,s,c){var l=new r.ARRAY_TYPE(9);return l[0]=e,l[1]=t,l[2]=n,l[3]=a,l[4]=i,l[5]=o,l[6]=u,l[7]=s,l[8]=c,l},mat3.set=function(e,r,t,n,a,i,o,u,s,c){return e[0]=r,e[1]=t,e[2]=n,e[3]=a,e[4]=i,e[5]=o,e[6]=u,e[7]=s,e[8]=c,e},mat3.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},mat3.transpose=function(e,r){if(e===r){var t=r[1],n=r[2],a=r[5];e[1]=r[3],e[2]=r[6],e[3]=t,e[5]=r[7],e[6]=n,e[7]=a}else e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8];return e},mat3.invert=function(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],o=r[4],u=r[5],s=r[6],c=r[7],l=r[8],f=l*o-u*c,d=-l*i+u*s,p=c*i-o*s,h=t*f+n*d+a*p;if(!h)return null;return h=1/h,e[0]=f*h,e[1]=(-l*n+a*c)*h,e[2]=(u*n-a*o)*h,e[3]=d*h,e[4]=(l*t-a*s)*h,e[5]=(-u*t+a*i)*h,e[6]=p*h,e[7]=(-c*t+n*s)*h,e[8]=(o*t-n*i)*h,e},mat3.adjoint=function(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],o=r[4],u=r[5],s=r[6],c=r[7],l=r[8];return e[0]=o*l-u*c,e[1]=a*c-n*l,e[2]=n*u-a*o,e[3]=u*s-i*l,e[4]=t*l-a*s,e[5]=a*i-t*u,e[6]=i*c-o*s,e[7]=n*s-t*c,e[8]=t*o-n*i,e},mat3.determinant=function(e){var r=e[0],t=e[1],n=e[2],a=e[3],i=e[4],o=e[5],u=e[6],s=e[7],c=e[8];return r*(c*i-o*s)+t*(-c*a+o*u)+n*(s*a-i*u)},mat3.multiply=n,mat3.translate=function(e,r,t){var n=r[0],a=r[1],i=r[2],o=r[3],u=r[4],s=r[5],c=r[6],l=r[7],f=r[8],d=t[0],p=t[1];return e[0]=n,e[1]=a,e[2]=i,e[3]=o,e[4]=u,e[5]=s,e[6]=d*n+p*o+c,e[7]=d*a+p*u+l,e[8]=d*i+p*s+f,e},mat3.rotate=function(e,r,t){var n=r[0],a=r[1],i=r[2],o=r[3],u=r[4],s=r[5],c=r[6],l=r[7],f=r[8],d=Math.sin(t),p=Math.cos(t);return e[0]=p*n+d*o,e[1]=p*a+d*u,e[2]=p*i+d*s,e[3]=p*o-d*n,e[4]=p*u-d*a,e[5]=p*s-d*i,e[6]=c,e[7]=l,e[8]=f,e},mat3.scale=function(e,r,t){var n=t[0],a=t[1];return e[0]=n*r[0],e[1]=n*r[1],e[2]=n*r[2],e[3]=a*r[3],e[4]=a*r[4],e[5]=a*r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e},mat3.fromTranslation=function(e,r){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=r[0],e[7]=r[1],e[8]=1,e},mat3.fromRotation=function(e,r){var t=Math.sin(r),n=Math.cos(r);return e[0]=n,e[1]=t,e[2]=0,e[3]=-t,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},mat3.fromScaling=function(e,r){return e[0]=r[0],e[1]=0,e[2]=0,e[3]=0,e[4]=r[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},mat3.fromMat2d=function(e,r){return e[0]=r[0],e[1]=r[1],e[2]=0,e[3]=r[2],e[4]=r[3],e[5]=0,e[6]=r[4],e[7]=r[5],e[8]=1,e},mat3.fromQuat=function(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],o=t+t,u=n+n,s=a+a,c=t*o,l=n*o,f=n*u,d=a*o,p=a*u,h=a*s,y=i*o,v=i*u,m=i*s;return e[0]=1-f-h,e[3]=l-m,e[6]=d+v,e[1]=l+m,e[4]=1-c-h,e[7]=p-y,e[2]=d-v,e[5]=p+y,e[8]=1-c-f,e},mat3.normalFromMat4=function(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],o=r[4],u=r[5],s=r[6],c=r[7],l=r[8],f=r[9],d=r[10],p=r[11],h=r[12],y=r[13],v=r[14],m=r[15],b=t*u-n*o,g=t*s-a*o,_=t*c-i*o,A=n*s-a*u,T=n*c-i*u,O=a*c-i*s,R=l*y-f*h,E=l*v-d*h,S=l*m-p*h,q=f*v-d*y,C=f*m-p*y,B=d*m-p*v,x=b*B-g*C+_*q+A*S-T*E+O*R;if(!x)return null;return x=1/x,e[0]=(u*B-s*C+c*q)*x,e[1]=(s*S-o*B-c*E)*x,e[2]=(o*C-u*S+c*R)*x,e[3]=(a*C-n*B-i*q)*x,e[4]=(t*B-a*S+i*E)*x,e[5]=(n*S-t*C-i*R)*x,e[6]=(y*O-v*T+m*A)*x,e[7]=(v*_-h*O-m*g)*x,e[8]=(h*T-y*_+m*b)*x,e},mat3.projection=function(e,r,t){return e[0]=2/r,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/t,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},mat3.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},mat3.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},mat3.add=function(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e[3]=r[3]+t[3],e[4]=r[4]+t[4],e[5]=r[5]+t[5],e[6]=r[6]+t[6],e[7]=r[7]+t[7],e[8]=r[8]+t[8],e},mat3.subtract=a,mat3.multiplyScalar=function(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e[3]=r[3]*t,e[4]=r[4]*t,e[5]=r[5]*t,e[6]=r[6]*t,e[7]=r[7]*t,e[8]=r[8]*t,e},mat3.multiplyScalarAndAdd=function(e,r,t,n){return e[0]=r[0]+t[0]*n,e[1]=r[1]+t[1]*n,e[2]=r[2]+t[2]*n,e[3]=r[3]+t[3]*n,e[4]=r[4]+t[4]*n,e[5]=r[5]+t[5]*n,e[6]=r[6]+t[6]*n,e[7]=r[7]+t[7]*n,e[8]=r[8]+t[8]*n,e},mat3.exactEquals=function(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]&&e[4]===r[4]&&e[5]===r[5]&&e[6]===r[6]&&e[7]===r[7]&&e[8]===r[8]},mat3.equals=function(e,t){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],d=t[0],p=t[1],h=t[2],y=t[3],v=t[4],m=t[5],b=t[6],g=t[7],_=t[8];return Math.abs(n-d)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(a-p)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(i-h)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(o-y)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(u-v)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(s-m)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(c-b)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(l-g)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(f-_)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(_))},mat3.sub=mat3.mul=void 0;var r=function(r,n){if(!n&&r&&r.__esModule)return r;if(null===r||"object"!==e(r)&&"function"!=typeof r)return{default:r};var a=t(n);if(a&&a.has(r))return a.get(r);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var s=o?Object.getOwnPropertyDescriptor(r,u):null;s&&(s.get||s.set)?Object.defineProperty(i,u,s):i[u]=r[u]}i.default=r,a&&a.set(r,i);return i}(requireCommon());function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function n(e,r,t){var n=r[0],a=r[1],i=r[2],o=r[3],u=r[4],s=r[5],c=r[6],l=r[7],f=r[8],d=t[0],p=t[1],h=t[2],y=t[3],v=t[4],m=t[5],b=t[6],g=t[7],_=t[8];return e[0]=d*n+p*o+h*c,e[1]=d*a+p*u+h*l,e[2]=d*i+p*s+h*f,e[3]=y*n+v*o+m*c,e[4]=y*a+v*u+m*l,e[5]=y*i+v*s+m*f,e[6]=b*n+g*o+_*c,e[7]=b*a+g*u+_*l,e[8]=b*i+g*s+_*f,e}function a(e,r,t){return e[0]=r[0]-t[0],e[1]=r[1]-t[1],e[2]=r[2]-t[2],e[3]=r[3]-t[3],e[4]=r[4]-t[4],e[5]=r[5]-t[5],e[6]=r[6]-t[6],e[7]=r[7]-t[7],e[8]=r[8]-t[8],e}var i=n;mat3.mul=i;var o=a;return mat3.sub=o,mat3}function requireMatrix3(){if(hasRequiredMatrix3)return matrix3;hasRequiredMatrix3=1;var e=requireInteropRequireDefault$2(),r=require_typeof$2();Object.defineProperty(matrix3,"__esModule",{value:!0}),matrix3.default=void 0;var t,n=e(requireClassCallCheck$2()),a=e(requireCreateClass$2()),i=e(requireInherits()),o=e(requirePossibleConstructorReturn()),u=e(requireGetPrototypeOf()),s=e(requireMatrix()),c=requireValidators(),l=requireGlMatrixExtras(),f=y(requireMat3()),d=y(requireVec2()),p=y(requireVec3());function h(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(h=function(e){return e?t:r})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}function v(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,u.default)(e);if(r){var a=(0,u.default)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,o.default)(this,t)}}!function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL1ROW0=3]="COL1ROW0",e[e.COL1ROW1=4]="COL1ROW1",e[e.COL1ROW2=5]="COL1ROW2",e[e.COL2ROW0=6]="COL2ROW0",e[e.COL2ROW1=7]="COL2ROW1",e[e.COL2ROW2=8]="COL2ROW2"}(t||(t={}));var m,b,g=Object.freeze([1,0,0,0,1,0,0,0,1]),_=function(e){(0,i.default)(o,e);var r=v(o);function o(e){for(var t,a=arguments.length,i=new Array(a>1?a-1:0),u=1;u<a;u++)i[u-1]=arguments[u];return(0,n.default)(this,o),t=r.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?t.copy(e):i.length>0?t.copy([e].concat(i)):t.identity(),t}return(0,a.default)(o,[{key:"ELEMENTS",get:function(){return 9}},{key:"RANK",get:function(){return 3}},{key:"INDICES",get:function(){return t}},{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}},{key:"identity",value:function(){return this.copy(g)}},{key:"fromObject",value:function(e){return this.check()}},{key:"fromQuaternion",value:function(e){return f.fromQuat(this,e),this.check()}},{key:"set",value:function(e,r,t,n,a,i,o,u,s){return this[0]=e,this[1]=r,this[2]=t,this[3]=n,this[4]=a,this[5]=i,this[6]=o,this[7]=u,this[8]=s,this.check()}},{key:"setRowMajor",value:function(e,r,t,n,a,i,o,u,s){return this[0]=e,this[1]=n,this[2]=o,this[3]=r,this[4]=a,this[5]=u,this[6]=t,this[7]=i,this[8]=s,this.check()}},{key:"determinant",value:function(){return f.determinant(this)}},{key:"transpose",value:function(){return f.transpose(this,this),this.check()}},{key:"invert",value:function(){return f.invert(this,this),this.check()}},{key:"multiplyLeft",value:function(e){return f.multiply(this,e,this),this.check()}},{key:"multiplyRight",value:function(e){return f.multiply(this,this,e),this.check()}},{key:"rotate",value:function(e){return f.rotate(this,this,e),this.check()}},{key:"scale",value:function(e){return Array.isArray(e)?f.scale(this,this,e):f.scale(this,this,[e,e]),this.check()}},{key:"translate",value:function(e){return f.translate(this,this,e),this.check()}},{key:"transform",value:function(e,r){var t;switch(e.length){case 2:t=d.transformMat3(r||[-0,-0],e,this);break;case 3:t=p.transformMat3(r||[-0,-0,-0],e,this);break;case 4:t=(0,l.vec4_transformMat3)(r||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return(0,c.checkVector)(t,e.length),t}},{key:"transformVector",value:function(e,r){return this.transform(e,r)}},{key:"transformVector2",value:function(e,r){return this.transform(e,r)}},{key:"transformVector3",value:function(e,r){return this.transform(e,r)}}],[{key:"IDENTITY",get:function(){return T()}},{key:"ZERO",get:function(){return A()}}]),o}(s.default);function A(){return m||(m=new _([0,0,0,0,0,0,0,0,0]),Object.freeze(m)),m}function T(){return b||(b=new _,Object.freeze(b)),b}return matrix3.default=_,matrix3}var matrix4={},mat4={},hasRequiredMat4;function requireMat4(){if(hasRequiredMat4)return mat4;function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}hasRequiredMat4=1,Object.defineProperty(mat4,"__esModule",{value:!0}),mat4.create=function(){var e=new r.ARRAY_TYPE(16);r.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},mat4.clone=function(e){var t=new r.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},mat4.copy=function(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e},mat4.fromValues=function(e,t,n,a,i,o,u,s,c,l,f,d,p,h,y,v){var m=new r.ARRAY_TYPE(16);return m[0]=e,m[1]=t,m[2]=n,m[3]=a,m[4]=i,m[5]=o,m[6]=u,m[7]=s,m[8]=c,m[9]=l,m[10]=f,m[11]=d,m[12]=p,m[13]=h,m[14]=y,m[15]=v,m},mat4.set=function(e,r,t,n,a,i,o,u,s,c,l,f,d,p,h,y,v){return e[0]=r,e[1]=t,e[2]=n,e[3]=a,e[4]=i,e[5]=o,e[6]=u,e[7]=s,e[8]=c,e[9]=l,e[10]=f,e[11]=d,e[12]=p,e[13]=h,e[14]=y,e[15]=v,e},mat4.identity=n,mat4.transpose=function(e,r){if(e===r){var t=r[1],n=r[2],a=r[3],i=r[6],o=r[7],u=r[11];e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=t,e[6]=r[9],e[7]=r[13],e[8]=n,e[9]=i,e[11]=r[14],e[12]=a,e[13]=o,e[14]=u}else e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15];return e},mat4.invert=function(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],o=r[4],u=r[5],s=r[6],c=r[7],l=r[8],f=r[9],d=r[10],p=r[11],h=r[12],y=r[13],v=r[14],m=r[15],b=t*u-n*o,g=t*s-a*o,_=t*c-i*o,A=n*s-a*u,T=n*c-i*u,O=a*c-i*s,R=l*y-f*h,E=l*v-d*h,S=l*m-p*h,q=f*v-d*y,C=f*m-p*y,B=d*m-p*v,x=b*B-g*C+_*q+A*S-T*E+O*R;if(!x)return null;return x=1/x,e[0]=(u*B-s*C+c*q)*x,e[1]=(a*C-n*B-i*q)*x,e[2]=(y*O-v*T+m*A)*x,e[3]=(d*T-f*O-p*A)*x,e[4]=(s*S-o*B-c*E)*x,e[5]=(t*B-a*S+i*E)*x,e[6]=(v*_-h*O-m*g)*x,e[7]=(l*O-d*_+p*g)*x,e[8]=(o*C-u*S+c*R)*x,e[9]=(n*S-t*C-i*R)*x,e[10]=(h*T-y*_+m*b)*x,e[11]=(f*_-l*T-p*b)*x,e[12]=(u*E-o*q-s*R)*x,e[13]=(t*q-n*E+a*R)*x,e[14]=(y*g-h*A-v*b)*x,e[15]=(l*A-f*g+d*b)*x,e},mat4.adjoint=function(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],o=r[4],u=r[5],s=r[6],c=r[7],l=r[8],f=r[9],d=r[10],p=r[11],h=r[12],y=r[13],v=r[14],m=r[15];return e[0]=u*(d*m-p*v)-f*(s*m-c*v)+y*(s*p-c*d),e[1]=-(n*(d*m-p*v)-f*(a*m-i*v)+y*(a*p-i*d)),e[2]=n*(s*m-c*v)-u*(a*m-i*v)+y*(a*c-i*s),e[3]=-(n*(s*p-c*d)-u*(a*p-i*d)+f*(a*c-i*s)),e[4]=-(o*(d*m-p*v)-l*(s*m-c*v)+h*(s*p-c*d)),e[5]=t*(d*m-p*v)-l*(a*m-i*v)+h*(a*p-i*d),e[6]=-(t*(s*m-c*v)-o*(a*m-i*v)+h*(a*c-i*s)),e[7]=t*(s*p-c*d)-o*(a*p-i*d)+l*(a*c-i*s),e[8]=o*(f*m-p*y)-l*(u*m-c*y)+h*(u*p-c*f),e[9]=-(t*(f*m-p*y)-l*(n*m-i*y)+h*(n*p-i*f)),e[10]=t*(u*m-c*y)-o*(n*m-i*y)+h*(n*c-i*u),e[11]=-(t*(u*p-c*f)-o*(n*p-i*f)+l*(n*c-i*u)),e[12]=-(o*(f*v-d*y)-l*(u*v-s*y)+h*(u*d-s*f)),e[13]=t*(f*v-d*y)-l*(n*v-a*y)+h*(n*d-a*f),e[14]=-(t*(u*v-s*y)-o*(n*v-a*y)+h*(n*s-a*u)),e[15]=t*(u*d-s*f)-o*(n*d-a*f)+l*(n*s-a*u),e},mat4.determinant=function(e){var r=e[0],t=e[1],n=e[2],a=e[3],i=e[4],o=e[5],u=e[6],s=e[7],c=e[8],l=e[9],f=e[10],d=e[11],p=e[12],h=e[13],y=e[14],v=e[15];return(r*o-t*i)*(f*v-d*y)-(r*u-n*i)*(l*v-d*h)+(r*s-a*i)*(l*y-f*h)+(t*u-n*o)*(c*v-d*p)-(t*s-a*o)*(c*y-f*p)+(n*s-a*u)*(c*h-l*p)},mat4.multiply=a,mat4.translate=function(e,r,t){var n,a,i,o,u,s,c,l,f,d,p,h,y=t[0],v=t[1],m=t[2];r===e?(e[12]=r[0]*y+r[4]*v+r[8]*m+r[12],e[13]=r[1]*y+r[5]*v+r[9]*m+r[13],e[14]=r[2]*y+r[6]*v+r[10]*m+r[14],e[15]=r[3]*y+r[7]*v+r[11]*m+r[15]):(n=r[0],a=r[1],i=r[2],o=r[3],u=r[4],s=r[5],c=r[6],l=r[7],f=r[8],d=r[9],p=r[10],h=r[11],e[0]=n,e[1]=a,e[2]=i,e[3]=o,e[4]=u,e[5]=s,e[6]=c,e[7]=l,e[8]=f,e[9]=d,e[10]=p,e[11]=h,e[12]=n*y+u*v+f*m+r[12],e[13]=a*y+s*v+d*m+r[13],e[14]=i*y+c*v+p*m+r[14],e[15]=o*y+l*v+h*m+r[15]);return e},mat4.scale=function(e,r,t){var n=t[0],a=t[1],i=t[2];return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=r[3]*n,e[4]=r[4]*a,e[5]=r[5]*a,e[6]=r[6]*a,e[7]=r[7]*a,e[8]=r[8]*i,e[9]=r[9]*i,e[10]=r[10]*i,e[11]=r[11]*i,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e},mat4.rotate=function(e,t,n,a){var i,o,u,s,c,l,f,d,p,h,y,v,m,b,g,_,A,T,O,R,E,S,q,C,B=a[0],x=a[1],P=a[2],w=Math.hypot(B,x,P);if(w<r.EPSILON)return null;B*=w=1/w,x*=w,P*=w,i=Math.sin(n),o=Math.cos(n),u=1-o,s=t[0],c=t[1],l=t[2],f=t[3],d=t[4],p=t[5],h=t[6],y=t[7],v=t[8],m=t[9],b=t[10],g=t[11],_=B*B*u+o,A=x*B*u+P*i,T=P*B*u-x*i,O=B*x*u-P*i,R=x*x*u+o,E=P*x*u+B*i,S=B*P*u+x*i,q=x*P*u-B*i,C=P*P*u+o,e[0]=s*_+d*A+v*T,e[1]=c*_+p*A+m*T,e[2]=l*_+h*A+b*T,e[3]=f*_+y*A+g*T,e[4]=s*O+d*R+v*E,e[5]=c*O+p*R+m*E,e[6]=l*O+h*R+b*E,e[7]=f*O+y*R+g*E,e[8]=s*S+d*q+v*C,e[9]=c*S+p*q+m*C,e[10]=l*S+h*q+b*C,e[11]=f*S+y*q+g*C,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e},mat4.rotateX=function(e,r,t){var n=Math.sin(t),a=Math.cos(t),i=r[4],o=r[5],u=r[6],s=r[7],c=r[8],l=r[9],f=r[10],d=r[11];r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]);return e[4]=i*a+c*n,e[5]=o*a+l*n,e[6]=u*a+f*n,e[7]=s*a+d*n,e[8]=c*a-i*n,e[9]=l*a-o*n,e[10]=f*a-u*n,e[11]=d*a-s*n,e},mat4.rotateY=function(e,r,t){var n=Math.sin(t),a=Math.cos(t),i=r[0],o=r[1],u=r[2],s=r[3],c=r[8],l=r[9],f=r[10],d=r[11];r!==e&&(e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]);return e[0]=i*a-c*n,e[1]=o*a-l*n,e[2]=u*a-f*n,e[3]=s*a-d*n,e[8]=i*n+c*a,e[9]=o*n+l*a,e[10]=u*n+f*a,e[11]=s*n+d*a,e},mat4.rotateZ=function(e,r,t){var n=Math.sin(t),a=Math.cos(t),i=r[0],o=r[1],u=r[2],s=r[3],c=r[4],l=r[5],f=r[6],d=r[7];r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]);return e[0]=i*a+c*n,e[1]=o*a+l*n,e[2]=u*a+f*n,e[3]=s*a+d*n,e[4]=c*a-i*n,e[5]=l*a-o*n,e[6]=f*a-u*n,e[7]=d*a-s*n,e},mat4.fromTranslation=function(e,r){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},mat4.fromScaling=function(e,r){return e[0]=r[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=r[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},mat4.fromRotation=function(e,t,n){var a,i,o,u=n[0],s=n[1],c=n[2],l=Math.hypot(u,s,c);if(l<r.EPSILON)return null;return u*=l=1/l,s*=l,c*=l,a=Math.sin(t),i=Math.cos(t),o=1-i,e[0]=u*u*o+i,e[1]=s*u*o+c*a,e[2]=c*u*o-s*a,e[3]=0,e[4]=u*s*o-c*a,e[5]=s*s*o+i,e[6]=c*s*o+u*a,e[7]=0,e[8]=u*c*o+s*a,e[9]=s*c*o-u*a,e[10]=c*c*o+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},mat4.fromXRotation=function(e,r){var t=Math.sin(r),n=Math.cos(r);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=t,e[7]=0,e[8]=0,e[9]=-t,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},mat4.fromYRotation=function(e,r){var t=Math.sin(r),n=Math.cos(r);return e[0]=n,e[1]=0,e[2]=-t,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=t,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},mat4.fromZRotation=function(e,r){var t=Math.sin(r),n=Math.cos(r);return e[0]=n,e[1]=t,e[2]=0,e[3]=0,e[4]=-t,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},mat4.fromRotationTranslation=i,mat4.fromQuat2=function(e,t){var n=new r.ARRAY_TYPE(3),a=-t[0],o=-t[1],u=-t[2],s=t[3],c=t[4],l=t[5],f=t[6],d=t[7],p=a*a+o*o+u*u+s*s;p>0?(n[0]=2*(c*s+d*a+l*u-f*o)/p,n[1]=2*(l*s+d*o+f*a-c*u)/p,n[2]=2*(f*s+d*u+c*o-l*a)/p):(n[0]=2*(c*s+d*a+l*u-f*o),n[1]=2*(l*s+d*o+f*a-c*u),n[2]=2*(f*s+d*u+c*o-l*a));return i(e,t,n),e},mat4.getTranslation=function(e,r){return e[0]=r[12],e[1]=r[13],e[2]=r[14],e},mat4.getScaling=o,mat4.getRotation=function(e,t){var n=new r.ARRAY_TYPE(3);o(n,t);var a=1/n[0],i=1/n[1],u=1/n[2],s=t[0]*a,c=t[1]*i,l=t[2]*u,f=t[4]*a,d=t[5]*i,p=t[6]*u,h=t[8]*a,y=t[9]*i,v=t[10]*u,m=s+d+v,b=0;m>0?(b=2*Math.sqrt(m+1),e[3]=.25*b,e[0]=(p-y)/b,e[1]=(h-l)/b,e[2]=(c-f)/b):s>d&&s>v?(b=2*Math.sqrt(1+s-d-v),e[3]=(p-y)/b,e[0]=.25*b,e[1]=(c+f)/b,e[2]=(h+l)/b):d>v?(b=2*Math.sqrt(1+d-s-v),e[3]=(h-l)/b,e[0]=(c+f)/b,e[1]=.25*b,e[2]=(p+y)/b):(b=2*Math.sqrt(1+v-s-d),e[3]=(c-f)/b,e[0]=(h+l)/b,e[1]=(p+y)/b,e[2]=.25*b);return e},mat4.fromRotationTranslationScale=function(e,r,t,n){var a=r[0],i=r[1],o=r[2],u=r[3],s=a+a,c=i+i,l=o+o,f=a*s,d=a*c,p=a*l,h=i*c,y=i*l,v=o*l,m=u*s,b=u*c,g=u*l,_=n[0],A=n[1],T=n[2];return e[0]=(1-(h+v))*_,e[1]=(d+g)*_,e[2]=(p-b)*_,e[3]=0,e[4]=(d-g)*A,e[5]=(1-(f+v))*A,e[6]=(y+m)*A,e[7]=0,e[8]=(p+b)*T,e[9]=(y-m)*T,e[10]=(1-(f+h))*T,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},mat4.fromRotationTranslationScaleOrigin=function(e,r,t,n,a){var i=r[0],o=r[1],u=r[2],s=r[3],c=i+i,l=o+o,f=u+u,d=i*c,p=i*l,h=i*f,y=o*l,v=o*f,m=u*f,b=s*c,g=s*l,_=s*f,A=n[0],T=n[1],O=n[2],R=a[0],E=a[1],S=a[2],q=(1-(y+m))*A,C=(p+_)*A,B=(h-g)*A,x=(p-_)*T,P=(1-(d+m))*T,w=(v+b)*T,M=(h+g)*O,I=(v-b)*O,k=(1-(d+y))*O;return e[0]=q,e[1]=C,e[2]=B,e[3]=0,e[4]=x,e[5]=P,e[6]=w,e[7]=0,e[8]=M,e[9]=I,e[10]=k,e[11]=0,e[12]=t[0]+R-(q*R+x*E+M*S),e[13]=t[1]+E-(C*R+P*E+I*S),e[14]=t[2]+S-(B*R+w*E+k*S),e[15]=1,e},mat4.fromQuat=function(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],o=t+t,u=n+n,s=a+a,c=t*o,l=n*o,f=n*u,d=a*o,p=a*u,h=a*s,y=i*o,v=i*u,m=i*s;return e[0]=1-f-h,e[1]=l+m,e[2]=d-v,e[3]=0,e[4]=l-m,e[5]=1-c-h,e[6]=p+y,e[7]=0,e[8]=d+v,e[9]=p-y,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},mat4.frustum=function(e,r,t,n,a,i,o){var u=1/(t-r),s=1/(a-n),c=1/(i-o);return e[0]=2*i*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*s,e[6]=0,e[7]=0,e[8]=(t+r)*u,e[9]=(a+n)*s,e[10]=(o+i)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*i*2*c,e[15]=0,e},mat4.perspectiveNO=u,mat4.perspectiveZO=function(e,r,t,n,a){var i,o=1/Math.tan(r/2);e[0]=o/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(i=1/(n-a),e[10]=a*i,e[14]=a*n*i):(e[10]=-1,e[14]=-n);return e},mat4.perspectiveFromFieldOfView=function(e,r,t,n){var a=Math.tan(r.upDegrees*Math.PI/180),i=Math.tan(r.downDegrees*Math.PI/180),o=Math.tan(r.leftDegrees*Math.PI/180),u=Math.tan(r.rightDegrees*Math.PI/180),s=2/(o+u),c=2/(a+i);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-u)*s*.5,e[9]=(a-i)*c*.5,e[10]=n/(t-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*t/(t-n),e[15]=0,e},mat4.orthoNO=c,mat4.orthoZO=function(e,r,t,n,a,i,o){var u=1/(r-t),s=1/(n-a),c=1/(i-o);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=c,e[11]=0,e[12]=(r+t)*u,e[13]=(a+n)*s,e[14]=i*c,e[15]=1,e},mat4.lookAt=function(e,t,a,i){var o,u,s,c,l,f,d,p,h,y,v=t[0],m=t[1],b=t[2],g=i[0],_=i[1],A=i[2],T=a[0],O=a[1],R=a[2];if(Math.abs(v-T)<r.EPSILON&&Math.abs(m-O)<r.EPSILON&&Math.abs(b-R)<r.EPSILON)return n(e);d=v-T,p=m-O,h=b-R,y=1/Math.hypot(d,p,h),o=_*(h*=y)-A*(p*=y),u=A*(d*=y)-g*h,s=g*p-_*d,(y=Math.hypot(o,u,s))?(o*=y=1/y,u*=y,s*=y):(o=0,u=0,s=0);c=p*s-h*u,l=h*o-d*s,f=d*u-p*o,(y=Math.hypot(c,l,f))?(c*=y=1/y,l*=y,f*=y):(c=0,l=0,f=0);return e[0]=o,e[1]=c,e[2]=d,e[3]=0,e[4]=u,e[5]=l,e[6]=p,e[7]=0,e[8]=s,e[9]=f,e[10]=h,e[11]=0,e[12]=-(o*v+u*m+s*b),e[13]=-(c*v+l*m+f*b),e[14]=-(d*v+p*m+h*b),e[15]=1,e},mat4.targetTo=function(e,r,t,n){var a=r[0],i=r[1],o=r[2],u=n[0],s=n[1],c=n[2],l=a-t[0],f=i-t[1],d=o-t[2],p=l*l+f*f+d*d;p>0&&(l*=p=1/Math.sqrt(p),f*=p,d*=p);var h=s*d-c*f,y=c*l-u*d,v=u*f-s*l;(p=h*h+y*y+v*v)>0&&(h*=p=1/Math.sqrt(p),y*=p,v*=p);return e[0]=h,e[1]=y,e[2]=v,e[3]=0,e[4]=f*v-d*y,e[5]=d*h-l*v,e[6]=l*y-f*h,e[7]=0,e[8]=l,e[9]=f,e[10]=d,e[11]=0,e[12]=a,e[13]=i,e[14]=o,e[15]=1,e},mat4.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},mat4.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},mat4.add=function(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e[3]=r[3]+t[3],e[4]=r[4]+t[4],e[5]=r[5]+t[5],e[6]=r[6]+t[6],e[7]=r[7]+t[7],e[8]=r[8]+t[8],e[9]=r[9]+t[9],e[10]=r[10]+t[10],e[11]=r[11]+t[11],e[12]=r[12]+t[12],e[13]=r[13]+t[13],e[14]=r[14]+t[14],e[15]=r[15]+t[15],e},mat4.subtract=f,mat4.multiplyScalar=function(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e[3]=r[3]*t,e[4]=r[4]*t,e[5]=r[5]*t,e[6]=r[6]*t,e[7]=r[7]*t,e[8]=r[8]*t,e[9]=r[9]*t,e[10]=r[10]*t,e[11]=r[11]*t,e[12]=r[12]*t,e[13]=r[13]*t,e[14]=r[14]*t,e[15]=r[15]*t,e},mat4.multiplyScalarAndAdd=function(e,r,t,n){return e[0]=r[0]+t[0]*n,e[1]=r[1]+t[1]*n,e[2]=r[2]+t[2]*n,e[3]=r[3]+t[3]*n,e[4]=r[4]+t[4]*n,e[5]=r[5]+t[5]*n,e[6]=r[6]+t[6]*n,e[7]=r[7]+t[7]*n,e[8]=r[8]+t[8]*n,e[9]=r[9]+t[9]*n,e[10]=r[10]+t[10]*n,e[11]=r[11]+t[11]*n,e[12]=r[12]+t[12]*n,e[13]=r[13]+t[13]*n,e[14]=r[14]+t[14]*n,e[15]=r[15]+t[15]*n,e},mat4.exactEquals=function(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]&&e[4]===r[4]&&e[5]===r[5]&&e[6]===r[6]&&e[7]===r[7]&&e[8]===r[8]&&e[9]===r[9]&&e[10]===r[10]&&e[11]===r[11]&&e[12]===r[12]&&e[13]===r[13]&&e[14]===r[14]&&e[15]===r[15]},mat4.equals=function(e,t){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],d=e[9],p=e[10],h=e[11],y=e[12],v=e[13],m=e[14],b=e[15],g=t[0],_=t[1],A=t[2],T=t[3],O=t[4],R=t[5],E=t[6],S=t[7],q=t[8],C=t[9],B=t[10],x=t[11],P=t[12],w=t[13],M=t[14],I=t[15];return Math.abs(n-g)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(a-_)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(i-A)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(o-T)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(u-O)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(s-R)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(c-E)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(l-S)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(f-q)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(q))&&Math.abs(d-C)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-B)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(B))&&Math.abs(h-x)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(y-P)<=r.EPSILON*Math.max(1,Math.abs(y),Math.abs(P))&&Math.abs(v-w)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(w))&&Math.abs(m-M)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(M))&&Math.abs(b-I)<=r.EPSILON*Math.max(1,Math.abs(b),Math.abs(I))},mat4.sub=mat4.mul=mat4.ortho=mat4.perspective=void 0;var r=function(r,n){if(!n&&r&&r.__esModule)return r;if(null===r||"object"!==e(r)&&"function"!=typeof r)return{default:r};var a=t(n);if(a&&a.has(r))return a.get(r);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var s=o?Object.getOwnPropertyDescriptor(r,u):null;s&&(s.get||s.set)?Object.defineProperty(i,u,s):i[u]=r[u]}i.default=r,a&&a.set(r,i);return i}(requireCommon());function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function n(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function a(e,r,t){var n=r[0],a=r[1],i=r[2],o=r[3],u=r[4],s=r[5],c=r[6],l=r[7],f=r[8],d=r[9],p=r[10],h=r[11],y=r[12],v=r[13],m=r[14],b=r[15],g=t[0],_=t[1],A=t[2],T=t[3];return e[0]=g*n+_*u+A*f+T*y,e[1]=g*a+_*s+A*d+T*v,e[2]=g*i+_*c+A*p+T*m,e[3]=g*o+_*l+A*h+T*b,g=t[4],_=t[5],A=t[6],T=t[7],e[4]=g*n+_*u+A*f+T*y,e[5]=g*a+_*s+A*d+T*v,e[6]=g*i+_*c+A*p+T*m,e[7]=g*o+_*l+A*h+T*b,g=t[8],_=t[9],A=t[10],T=t[11],e[8]=g*n+_*u+A*f+T*y,e[9]=g*a+_*s+A*d+T*v,e[10]=g*i+_*c+A*p+T*m,e[11]=g*o+_*l+A*h+T*b,g=t[12],_=t[13],A=t[14],T=t[15],e[12]=g*n+_*u+A*f+T*y,e[13]=g*a+_*s+A*d+T*v,e[14]=g*i+_*c+A*p+T*m,e[15]=g*o+_*l+A*h+T*b,e}function i(e,r,t){var n=r[0],a=r[1],i=r[2],o=r[3],u=n+n,s=a+a,c=i+i,l=n*u,f=n*s,d=n*c,p=a*s,h=a*c,y=i*c,v=o*u,m=o*s,b=o*c;return e[0]=1-(p+y),e[1]=f+b,e[2]=d-m,e[3]=0,e[4]=f-b,e[5]=1-(l+y),e[6]=h+v,e[7]=0,e[8]=d+m,e[9]=h-v,e[10]=1-(l+p),e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function o(e,r){var t=r[0],n=r[1],a=r[2],i=r[4],o=r[5],u=r[6],s=r[8],c=r[9],l=r[10];return e[0]=Math.hypot(t,n,a),e[1]=Math.hypot(i,o,u),e[2]=Math.hypot(s,c,l),e}function u(e,r,t,n,a){var i,o=1/Math.tan(r/2);return e[0]=o/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(i=1/(n-a),e[10]=(a+n)*i,e[14]=2*a*n*i):(e[10]=-1,e[14]=-2*n),e}var s=u;function c(e,r,t,n,a,i,o){var u=1/(r-t),s=1/(n-a),c=1/(i-o);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(r+t)*u,e[13]=(a+n)*s,e[14]=(o+i)*c,e[15]=1,e}mat4.perspective=s;var l=c;function f(e,r,t){return e[0]=r[0]-t[0],e[1]=r[1]-t[1],e[2]=r[2]-t[2],e[3]=r[3]-t[3],e[4]=r[4]-t[4],e[5]=r[5]-t[5],e[6]=r[6]-t[6],e[7]=r[7]-t[7],e[8]=r[8]-t[8],e[9]=r[9]-t[9],e[10]=r[10]-t[10],e[11]=r[11]-t[11],e[12]=r[12]-t[12],e[13]=r[13]-t[13],e[14]=r[14]-t[14],e[15]=r[15]-t[15],e}mat4.ortho=l;var d=a;mat4.mul=d;var p=f;return mat4.sub=p,mat4}var vec4={},hasRequiredVec4,hasRequiredMatrix4;function requireVec4(){if(hasRequiredVec4)return vec4;function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}hasRequiredVec4=1,Object.defineProperty(vec4,"__esModule",{value:!0}),vec4.create=n,vec4.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},vec4.fromValues=function(e,t,n,a){var i=new r.ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=a,i},vec4.copy=function(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e},vec4.set=function(e,r,t,n,a){return e[0]=r,e[1]=t,e[2]=n,e[3]=a,e},vec4.add=function(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e[3]=r[3]+t[3],e},vec4.subtract=a,vec4.multiply=i,vec4.divide=o,vec4.ceil=function(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e[2]=Math.ceil(r[2]),e[3]=Math.ceil(r[3]),e},vec4.floor=function(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e[2]=Math.floor(r[2]),e[3]=Math.floor(r[3]),e},vec4.min=function(e,r,t){return e[0]=Math.min(r[0],t[0]),e[1]=Math.min(r[1],t[1]),e[2]=Math.min(r[2],t[2]),e[3]=Math.min(r[3],t[3]),e},vec4.max=function(e,r,t){return e[0]=Math.max(r[0],t[0]),e[1]=Math.max(r[1],t[1]),e[2]=Math.max(r[2],t[2]),e[3]=Math.max(r[3],t[3]),e},vec4.round=function(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e[2]=Math.round(r[2]),e[3]=Math.round(r[3]),e},vec4.scale=function(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e[3]=r[3]*t,e},vec4.scaleAndAdd=function(e,r,t,n){return e[0]=r[0]+t[0]*n,e[1]=r[1]+t[1]*n,e[2]=r[2]+t[2]*n,e[3]=r[3]+t[3]*n,e},vec4.distance=u,vec4.squaredDistance=s,vec4.length=c,vec4.squaredLength=l,vec4.negate=function(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e[3]=-r[3],e},vec4.inverse=function(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e[3]=1/r[3],e},vec4.normalize=function(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],o=t*t+n*n+a*a+i*i;o>0&&(o=1/Math.sqrt(o));return e[0]=t*o,e[1]=n*o,e[2]=a*o,e[3]=i*o,e},vec4.dot=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]},vec4.cross=function(e,r,t,n){var a=t[0]*n[1]-t[1]*n[0],i=t[0]*n[2]-t[2]*n[0],o=t[0]*n[3]-t[3]*n[0],u=t[1]*n[2]-t[2]*n[1],s=t[1]*n[3]-t[3]*n[1],c=t[2]*n[3]-t[3]*n[2],l=r[0],f=r[1],d=r[2],p=r[3];return e[0]=f*c-d*s+p*u,e[1]=-l*c+d*o-p*i,e[2]=l*s-f*o+p*a,e[3]=-l*u+f*i-d*a,e},vec4.lerp=function(e,r,t,n){var a=r[0],i=r[1],o=r[2],u=r[3];return e[0]=a+n*(t[0]-a),e[1]=i+n*(t[1]-i),e[2]=o+n*(t[2]-o),e[3]=u+n*(t[3]-u),e},vec4.random=function(e,t){var n,a,i,o,u,s;t=t||1;do{u=(n=2*r.RANDOM()-1)*n+(a=2*r.RANDOM()-1)*a}while(u>=1);do{s=(i=2*r.RANDOM()-1)*i+(o=2*r.RANDOM()-1)*o}while(s>=1);var c=Math.sqrt((1-u)/s);return e[0]=t*n,e[1]=t*a,e[2]=t*i*c,e[3]=t*o*c,e},vec4.transformMat4=function(e,r,t){var n=r[0],a=r[1],i=r[2],o=r[3];return e[0]=t[0]*n+t[4]*a+t[8]*i+t[12]*o,e[1]=t[1]*n+t[5]*a+t[9]*i+t[13]*o,e[2]=t[2]*n+t[6]*a+t[10]*i+t[14]*o,e[3]=t[3]*n+t[7]*a+t[11]*i+t[15]*o,e},vec4.transformQuat=function(e,r,t){var n=r[0],a=r[1],i=r[2],o=t[0],u=t[1],s=t[2],c=t[3],l=c*n+u*i-s*a,f=c*a+s*n-o*i,d=c*i+o*a-u*n,p=-o*n-u*a-s*i;return e[0]=l*c+p*-o+f*-s-d*-u,e[1]=f*c+p*-u+d*-o-l*-s,e[2]=d*c+p*-s+l*-u-f*-o,e[3]=r[3],e},vec4.zero=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},vec4.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},vec4.exactEquals=function(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]},vec4.equals=function(e,t){var n=e[0],a=e[1],i=e[2],o=e[3],u=t[0],s=t[1],c=t[2],l=t[3];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-s)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))},vec4.forEach=vec4.sqrLen=vec4.len=vec4.sqrDist=vec4.dist=vec4.div=vec4.mul=vec4.sub=void 0;var r=function(r,n){if(!n&&r&&r.__esModule)return r;if(null===r||"object"!==e(r)&&"function"!=typeof r)return{default:r};var a=t(n);if(a&&a.has(r))return a.get(r);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var s=o?Object.getOwnPropertyDescriptor(r,u):null;s&&(s.get||s.set)?Object.defineProperty(i,u,s):i[u]=r[u]}i.default=r,a&&a.set(r,i);return i}(requireCommon());function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function n(){var e=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function a(e,r,t){return e[0]=r[0]-t[0],e[1]=r[1]-t[1],e[2]=r[2]-t[2],e[3]=r[3]-t[3],e}function i(e,r,t){return e[0]=r[0]*t[0],e[1]=r[1]*t[1],e[2]=r[2]*t[2],e[3]=r[3]*t[3],e}function o(e,r,t){return e[0]=r[0]/t[0],e[1]=r[1]/t[1],e[2]=r[2]/t[2],e[3]=r[3]/t[3],e}function u(e,r){var t=r[0]-e[0],n=r[1]-e[1],a=r[2]-e[2],i=r[3]-e[3];return Math.hypot(t,n,a,i)}function s(e,r){var t=r[0]-e[0],n=r[1]-e[1],a=r[2]-e[2],i=r[3]-e[3];return t*t+n*n+a*a+i*i}function c(e){var r=e[0],t=e[1],n=e[2],a=e[3];return Math.hypot(r,t,n,a)}function l(e){var r=e[0],t=e[1],n=e[2],a=e[3];return r*r+t*t+n*n+a*a}var f=a;vec4.sub=f;var d=i;vec4.mul=d;var p=o;vec4.div=p;var h=u;vec4.dist=h;var y=s;vec4.sqrDist=y;var v=c;vec4.len=v;var m=l;vec4.sqrLen=m;var b,g=(b=n(),function(e,r,t,n,a,i){var o,u;for(r||(r=4),t||(t=0),u=n?Math.min(n*r+t,e.length):e.length,o=t;o<u;o+=r)b[0]=e[o],b[1]=e[o+1],b[2]=e[o+2],b[3]=e[o+3],a(b,b,i),e[o]=b[0],e[o+1]=b[1],e[o+2]=b[2],e[o+3]=b[3];return e});return vec4.forEach=g,vec4}function requireMatrix4(){if(hasRequiredMatrix4)return matrix4;hasRequiredMatrix4=1;var e=requireInteropRequireDefault$2(),r=require_typeof$2();Object.defineProperty(matrix4,"__esModule",{value:!0}),matrix4.default=void 0;var t,n=e(requireClassCallCheck$2()),a=e(requireCreateClass$2()),i=e(requireInherits()),o=e(requirePossibleConstructorReturn()),u=e(requireGetPrototypeOf()),s=e(requireMatrix()),c=requireValidators(),l=requireGlMatrixExtras(),f=v(requireMat4()),d=v(requireVec2()),p=v(requireVec3()),h=v(requireVec4());function y(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(y=function(e){return e?t:r})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}function m(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,u.default)(e);if(r){var a=(0,u.default)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,o.default)(this,t)}}!function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"}(t||(t={}));var b,g,_=45*Math.PI/180,A=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),T=function(e){(0,i.default)(o,e);var r=m(o);function o(e){var t;return(0,n.default)(this,o),t=r.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?t.copy(e):t.identity(),t}return(0,a.default)(o,[{key:"ELEMENTS",get:function(){return 16}},{key:"RANK",get:function(){return 4}},{key:"INDICES",get:function(){return t}},{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}},{key:"set",value:function(e,r,t,n,a,i,o,u,s,c,l,f,d,p,h,y){return this[0]=e,this[1]=r,this[2]=t,this[3]=n,this[4]=a,this[5]=i,this[6]=o,this[7]=u,this[8]=s,this[9]=c,this[10]=l,this[11]=f,this[12]=d,this[13]=p,this[14]=h,this[15]=y,this.check()}},{key:"setRowMajor",value:function(e,r,t,n,a,i,o,u,s,c,l,f,d,p,h,y){return this[0]=e,this[1]=a,this[2]=s,this[3]=d,this[4]=r,this[5]=i,this[6]=c,this[7]=p,this[8]=t,this[9]=o,this[10]=l,this[11]=h,this[12]=n,this[13]=u,this[14]=f,this[15]=y,this.check()}},{key:"toRowMajor",value:function(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}},{key:"identity",value:function(){return this.copy(A)}},{key:"fromObject",value:function(e){return this.check()}},{key:"fromQuaternion",value:function(e){return f.fromQuat(this,e),this.check()}},{key:"frustum",value:function(e){var r=e.left,t=e.right,n=e.bottom,a=e.top,i=e.near,o=void 0===i?.1:i,u=e.far,s=void 0===u?500:u;return s===1/0?function(e,r,t,n,a,i){var o=2*i/(t-r),u=2*i/(a-n),s=(t+r)/(t-r),c=(a+n)/(a-n),l=-1,f=-1,d=-2*i;e[0]=o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=s,e[9]=c,e[10]=l,e[11]=f,e[12]=0,e[13]=0,e[14]=d,e[15]=0}(this,r,t,n,a,o):f.frustum(this,r,t,n,a,o,s),this.check()}},{key:"lookAt",value:function(e){var r=e.eye,t=e.center,n=void 0===t?[0,0,0]:t,a=e.up,i=void 0===a?[0,1,0]:a;return f.lookAt(this,r,n,i),this.check()}},{key:"ortho",value:function(e){var r=e.left,t=e.right,n=e.bottom,a=e.top,i=e.near,o=void 0===i?.1:i,u=e.far,s=void 0===u?500:u;return f.ortho(this,r,t,n,a,o,s),this.check()}},{key:"orthographic",value:function(e){var r=e.fovy,t=void 0===r?_:r,n=e.aspect,a=void 0===n?1:n,i=e.focalDistance,o=void 0===i?1:i,u=e.near,s=void 0===u?.1:u,c=e.far,l=void 0===c?500:c;E(t);var f=t/2,d=o*Math.tan(f),p=d*a;return this.ortho({left:-p,right:p,bottom:-d,top:d,near:s,far:l})}},{key:"perspective",value:function(e){var r=e.fovy,t=void 0===r?45*Math.PI/180:r,n=e.aspect,a=void 0===n?1:n,i=e.near,o=void 0===i?.1:i,u=e.far,s=void 0===u?500:u;return E(t),f.perspective(this,t,a,o,s),this.check()}},{key:"determinant",value:function(){return f.determinant(this)}},{key:"getScale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}},{key:"getTranslation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}},{key:"getRotation",value:function(e,r){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];var t=this.getScale(r),n=1/t[0],a=1/t[1],i=1/t[2];return e[0]=this[0]*n,e[1]=this[1]*a,e[2]=this[2]*i,e[3]=0,e[4]=this[4]*n,e[5]=this[5]*a,e[6]=this[6]*i,e[7]=0,e[8]=this[8]*n,e[9]=this[9]*a,e[10]=this[10]*i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{key:"getRotationMatrix3",value:function(e,r){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];var t=this.getScale(r),n=1/t[0],a=1/t[1],i=1/t[2];return e[0]=this[0]*n,e[1]=this[1]*a,e[2]=this[2]*i,e[3]=this[4]*n,e[4]=this[5]*a,e[5]=this[6]*i,e[6]=this[8]*n,e[7]=this[9]*a,e[8]=this[10]*i,e}},{key:"transpose",value:function(){return f.transpose(this,this),this.check()}},{key:"invert",value:function(){return f.invert(this,this),this.check()}},{key:"multiplyLeft",value:function(e){return f.multiply(this,e,this),this.check()}},{key:"multiplyRight",value:function(e){return f.multiply(this,this,e),this.check()}},{key:"rotateX",value:function(e){return f.rotateX(this,this,e),this.check()}},{key:"rotateY",value:function(e){return f.rotateY(this,this,e),this.check()}},{key:"rotateZ",value:function(e){return f.rotateZ(this,this,e),this.check()}},{key:"rotateXYZ",value:function(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}},{key:"rotateAxis",value:function(e,r){return f.rotate(this,this,e,r),this.check()}},{key:"scale",value:function(e){return f.scale(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}},{key:"translate",value:function(e){return f.translate(this,this,e),this.check()}},{key:"transform",value:function(e,r){return 4===e.length?(r=h.transformMat4(r||[-0,-0,-0,-0],e,this),(0,c.checkVector)(r,4),r):this.transformAsPoint(e,r)}},{key:"transformAsPoint",value:function(e,r){var t;switch(e.length){case 2:t=d.transformMat4(r||[-0,-0],e,this);break;case 3:t=p.transformMat4(r||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return(0,c.checkVector)(t,e.length),t}},{key:"transformAsVector",value:function(e,r){var t;switch(e.length){case 2:t=(0,l.vec2_transformMat4AsVector)(r||[-0,-0],e,this);break;case 3:t=(0,l.vec3_transformMat4AsVector)(r||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return(0,c.checkVector)(t,e.length),t}},{key:"transformPoint",value:function(e,r){return this.transformAsPoint(e,r)}},{key:"transformVector",value:function(e,r){return this.transformAsPoint(e,r)}},{key:"transformDirection",value:function(e,r){return this.transformAsVector(e,r)}},{key:"makeRotationX",value:function(e){return this.identity().rotateX(e)}},{key:"makeTranslation",value:function(e,r,t){return this.identity().translate([e,r,t])}}],[{key:"IDENTITY",get:function(){return R()}},{key:"ZERO",get:function(){return O()}}]),o}(s.default);function O(){return b||(b=new T([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(b)),b}function R(){return g||(g=new T,Object.freeze(g)),g}function E(e){if(e>2*Math.PI)throw Error("expected radians")}return matrix4.default=T,matrix4}var quaternion={},quat={},hasRequiredQuat,hasRequiredQuaternion;function requireQuat(){if(hasRequiredQuat)return quat;function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}hasRequiredQuat=1,Object.defineProperty(quat,"__esModule",{value:!0}),quat.create=u,quat.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},quat.setAxisAngle=s,quat.getAxisAngle=function(e,t){var n=2*Math.acos(t[3]),a=Math.sin(n/2);a>r.EPSILON?(e[0]=t[0]/a,e[1]=t[1]/a,e[2]=t[2]/a):(e[0]=1,e[1]=0,e[2]=0);return n},quat.getAngle=function(e,r){var t=A(e,r);return Math.acos(2*t*t-1)},quat.multiply=c,quat.rotateX=function(e,r,t){t*=.5;var n=r[0],a=r[1],i=r[2],o=r[3],u=Math.sin(t),s=Math.cos(t);return e[0]=n*s+o*u,e[1]=a*s+i*u,e[2]=i*s-a*u,e[3]=o*s-n*u,e},quat.rotateY=function(e,r,t){t*=.5;var n=r[0],a=r[1],i=r[2],o=r[3],u=Math.sin(t),s=Math.cos(t);return e[0]=n*s-i*u,e[1]=a*s+o*u,e[2]=i*s+n*u,e[3]=o*s-a*u,e},quat.rotateZ=function(e,r,t){t*=.5;var n=r[0],a=r[1],i=r[2],o=r[3],u=Math.sin(t),s=Math.cos(t);return e[0]=n*s+a*u,e[1]=a*s-n*u,e[2]=i*s+o*u,e[3]=o*s-i*u,e},quat.calculateW=function(e,r){var t=r[0],n=r[1],a=r[2];return e[0]=t,e[1]=n,e[2]=a,e[3]=Math.sqrt(Math.abs(1-t*t-n*n-a*a)),e},quat.exp=l,quat.ln=f,quat.pow=function(e,r,t){return f(e,r),_(e,e,t),l(e,e),e},quat.slerp=d,quat.random=function(e){var t=r.RANDOM(),n=r.RANDOM(),a=r.RANDOM(),i=Math.sqrt(1-t),o=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*n),e[1]=i*Math.cos(2*Math.PI*n),e[2]=o*Math.sin(2*Math.PI*a),e[3]=o*Math.cos(2*Math.PI*a),e},quat.invert=function(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],o=t*t+n*n+a*a+i*i,u=o?1/o:0;return e[0]=-t*u,e[1]=-n*u,e[2]=-a*u,e[3]=i*u,e},quat.conjugate=function(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e[3]=r[3],e},quat.fromMat3=p,quat.fromEuler=function(e,r,t,n){var a=.5*Math.PI/180;r*=a,t*=a,n*=a;var i=Math.sin(r),o=Math.cos(r),u=Math.sin(t),s=Math.cos(t),c=Math.sin(n),l=Math.cos(n);return e[0]=i*s*l-o*u*c,e[1]=o*u*l+i*s*c,e[2]=o*s*c-i*u*l,e[3]=o*s*l+i*u*c,e},quat.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},quat.setAxes=quat.sqlerp=quat.rotationTo=quat.equals=quat.exactEquals=quat.normalize=quat.sqrLen=quat.squaredLength=quat.len=quat.length=quat.lerp=quat.dot=quat.scale=quat.mul=quat.add=quat.set=quat.copy=quat.fromValues=quat.clone=void 0;var r=o(requireCommon()),t=o(requireMat3()),n=o(requireVec3()),a=o(requireVec4());function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function o(r,t){if(!t&&r&&r.__esModule)return r;if(null===r||"object"!==e(r)&&"function"!=typeof r)return{default:r};var n=i(t);if(n&&n.has(r))return n.get(r);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var s=o?Object.getOwnPropertyDescriptor(r,u):null;s&&(s.get||s.set)?Object.defineProperty(a,u,s):a[u]=r[u]}return a.default=r,n&&n.set(r,a),a}function u(){var e=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function s(e,r,t){t*=.5;var n=Math.sin(t);return e[0]=n*r[0],e[1]=n*r[1],e[2]=n*r[2],e[3]=Math.cos(t),e}function c(e,r,t){var n=r[0],a=r[1],i=r[2],o=r[3],u=t[0],s=t[1],c=t[2],l=t[3];return e[0]=n*l+o*u+a*c-i*s,e[1]=a*l+o*s+i*u-n*c,e[2]=i*l+o*c+n*s-a*u,e[3]=o*l-n*u-a*s-i*c,e}function l(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],o=Math.sqrt(t*t+n*n+a*a),u=Math.exp(i),s=o>0?u*Math.sin(o)/o:0;return e[0]=t*s,e[1]=n*s,e[2]=a*s,e[3]=u*Math.cos(o),e}function f(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],o=Math.sqrt(t*t+n*n+a*a),u=o>0?Math.atan2(o,i)/o:0;return e[0]=t*u,e[1]=n*u,e[2]=a*u,e[3]=.5*Math.log(t*t+n*n+a*a+i*i),e}function d(e,t,n,a){var i,o,u,s,c,l=t[0],f=t[1],d=t[2],p=t[3],h=n[0],y=n[1],v=n[2],m=n[3];return(o=l*h+f*y+d*v+p*m)<0&&(o=-o,h=-h,y=-y,v=-v,m=-m),1-o>r.EPSILON?(i=Math.acos(o),u=Math.sin(i),s=Math.sin((1-a)*i)/u,c=Math.sin(a*i)/u):(s=1-a,c=a),e[0]=s*l+c*h,e[1]=s*f+c*y,e[2]=s*d+c*v,e[3]=s*p+c*m,e}function p(e,r){var t,n=r[0]+r[4]+r[8];if(n>0)t=Math.sqrt(n+1),e[3]=.5*t,t=.5/t,e[0]=(r[5]-r[7])*t,e[1]=(r[6]-r[2])*t,e[2]=(r[1]-r[3])*t;else{var a=0;r[4]>r[0]&&(a=1),r[8]>r[3*a+a]&&(a=2);var i=(a+1)%3,o=(a+2)%3;t=Math.sqrt(r[3*a+a]-r[3*i+i]-r[3*o+o]+1),e[a]=.5*t,t=.5/t,e[3]=(r[3*i+o]-r[3*o+i])*t,e[i]=(r[3*i+a]+r[3*a+i])*t,e[o]=(r[3*o+a]+r[3*a+o])*t}return e}var h=a.clone;quat.clone=h;var y=a.fromValues;quat.fromValues=y;var v=a.copy;quat.copy=v;var m=a.set;quat.set=m;var b=a.add;quat.add=b;var g=c;quat.mul=g;var _=a.scale;quat.scale=_;var A=a.dot;quat.dot=A;var T=a.lerp;quat.lerp=T;var O=a.length;quat.length=O;var R=O;quat.len=R;var E=a.squaredLength;quat.squaredLength=E;var S=E;quat.sqrLen=S;var q=a.normalize;quat.normalize=q;var C=a.exactEquals;quat.exactEquals=C;var B=a.equals;quat.equals=B;var x,P,w,M=(x=n.create(),P=n.fromValues(1,0,0),w=n.fromValues(0,1,0),function(e,r,t){var a=n.dot(r,t);return a<-.999999?(n.cross(x,P,r),n.len(x)<1e-6&&n.cross(x,w,r),n.normalize(x,x),s(e,x,Math.PI),e):a>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(n.cross(x,r,t),e[0]=x[0],e[1]=x[1],e[2]=x[2],e[3]=1+a,q(e,e))});quat.rotationTo=M;var I,k,D=(I=u(),k=u(),function(e,r,t,n,a,i){return d(I,r,a,i),d(k,t,n,i),d(e,I,k,2*i*(1-i)),e});quat.sqlerp=D;var L,G=(L=t.create(),function(e,r,t,n){return L[0]=t[0],L[3]=t[1],L[6]=t[2],L[1]=n[0],L[4]=n[1],L[7]=n[2],L[2]=-r[0],L[5]=-r[1],L[8]=-r[2],q(e,p(e,L))});return quat.setAxes=G,quat}function requireQuaternion(){if(hasRequiredQuaternion)return quaternion;hasRequiredQuaternion=1;var e=requireInteropRequireDefault$2(),r=require_typeof$2();Object.defineProperty(quaternion,"__esModule",{value:!0}),quaternion.default=void 0;var t=e(requireClassCallCheck$2()),n=e(requireCreateClass$2()),a=e(requireInherits()),i=e(requirePossibleConstructorReturn()),o=e(requireGetPrototypeOf()),u=e(requireMathArray()),s=requireValidators(),c=e(requireVector4()),l=p(requireQuat()),f=p(requireVec4());function d(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:r})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}function h(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,o.default)(e);if(r){var a=(0,o.default)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,i.default)(this,t)}}var y=[0,0,0,1],v=function(e){(0,a.default)(i,e);var r=h(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,t.default)(this,i),e=r.call(this,-0,-0,-0,-0),Array.isArray(n)&&1===arguments.length?e.copy(n):e.set(n,a,o,u),e}return(0,n.default)(i,[{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}},{key:"set",value:function(e,r,t,n){return this[0]=e,this[1]=r,this[2]=t,this[3]=n,this.check()}},{key:"fromObject",value:function(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}},{key:"fromMatrix3",value:function(e){return l.fromMat3(this,e),this.check()}},{key:"fromAxisRotation",value:function(e,r){return l.setAxisAngle(this,e,r),this.check()}},{key:"identity",value:function(){return l.identity(this),this.check()}},{key:"setAxisAngle",value:function(e,r){return this.fromAxisRotation(e,r)}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(e){this[0]=(0,s.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){this[1]=(0,s.checkNumber)(e)}},{key:"z",get:function(){return this[2]},set:function(e){this[2]=(0,s.checkNumber)(e)}},{key:"w",get:function(){return this[3]},set:function(e){this[3]=(0,s.checkNumber)(e)}},{key:"len",value:function(){return l.length(this)}},{key:"lengthSquared",value:function(){return l.squaredLength(this)}},{key:"dot",value:function(e){return l.dot(this,e)}},{key:"rotationTo",value:function(e,r){return l.rotationTo(this,e,r),this.check()}},{key:"add",value:function(e){return l.add(this,this,e),this.check()}},{key:"calculateW",value:function(){return l.calculateW(this,this),this.check()}},{key:"conjugate",value:function(){return l.conjugate(this,this),this.check()}},{key:"invert",value:function(){return l.invert(this,this),this.check()}},{key:"lerp",value:function(e,r,t){return void 0===t?this.lerp(this,e,r):(l.lerp(this,e,r,t),this.check())}},{key:"multiplyRight",value:function(e){return l.multiply(this,this,e),this.check()}},{key:"multiplyLeft",value:function(e){return l.multiply(this,e,this),this.check()}},{key:"normalize",value:function(){var e=this.len(),r=e>0?1/e:0;return this[0]=this[0]*r,this[1]=this[1]*r,this[2]=this[2]*r,this[3]=this[3]*r,0===e&&(this[3]=1),this.check()}},{key:"rotateX",value:function(e){return l.rotateX(this,this,e),this.check()}},{key:"rotateY",value:function(e){return l.rotateY(this,this,e),this.check()}},{key:"rotateZ",value:function(e){return l.rotateZ(this,this,e),this.check()}},{key:"scale",value:function(e){return l.scale(this,this,e),this.check()}},{key:"slerp",value:function(e,r,t){var n,a,i;switch(arguments.length){case 1:var o=e,u=o.start;n=void 0===u?y:u,a=o.target,i=o.ratio;break;case 2:n=this,a=e,i=r;break;default:n=e,a=r,i=t}return l.slerp(this,n,a,i),this.check()}},{key:"transformVector4",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new c.default;return f.transformQuat(r,e,this),(0,s.checkVector)(r,4)}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"setFromAxisAngle",value:function(e,r){return this.setAxisAngle(e,r)}},{key:"premultiply",value:function(e){return this.multiplyLeft(e)}},{key:"multiply",value:function(e){return this.multiplyRight(e)}}]),i}(u.default);return quaternion.default=v,quaternion}var sphericalCoordinates={},slicedToArray$1={exports:{}},arrayWithHoles$1={exports:{}},hasRequiredArrayWithHoles$1;function requireArrayWithHoles$1(){return hasRequiredArrayWithHoles$1||(hasRequiredArrayWithHoles$1=1,function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports}(arrayWithHoles$1)),arrayWithHoles$1.exports}var iterableToArrayLimit$1={exports:{}},hasRequiredIterableToArrayLimit$1;function requireIterableToArrayLimit$1(){return hasRequiredIterableToArrayLimit$1||(hasRequiredIterableToArrayLimit$1=1,function(e){e.exports=function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,i,o,u=[],s=!0,c=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;s=!1}else for(;!(s=(n=i.call(t)).done)&&(u.push(n.value),u.length!==r);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw a}}return u}},e.exports.__esModule=!0,e.exports.default=e.exports}(iterableToArrayLimit$1)),iterableToArrayLimit$1.exports}var unsupportedIterableToArray$2={exports:{}},arrayLikeToArray$2={exports:{}},hasRequiredArrayLikeToArray$2,hasRequiredUnsupportedIterableToArray$2;function requireArrayLikeToArray$2(){return hasRequiredArrayLikeToArray$2||(hasRequiredArrayLikeToArray$2=1,function(e){e.exports=function(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n},e.exports.__esModule=!0,e.exports.default=e.exports}(arrayLikeToArray$2)),arrayLikeToArray$2.exports}function requireUnsupportedIterableToArray$2(){return hasRequiredUnsupportedIterableToArray$2||(hasRequiredUnsupportedIterableToArray$2=1,function(e){var r=requireArrayLikeToArray$2();e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}(unsupportedIterableToArray$2)),unsupportedIterableToArray$2.exports}var nonIterableRest$1={exports:{}},hasRequiredNonIterableRest$1,hasRequiredSlicedToArray$1;function requireNonIterableRest$1(){return hasRequiredNonIterableRest$1||(hasRequiredNonIterableRest$1=1,function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}(nonIterableRest$1)),nonIterableRest$1.exports}function requireSlicedToArray$1(){return hasRequiredSlicedToArray$1||(hasRequiredSlicedToArray$1=1,function(e){var r=requireArrayWithHoles$1(),t=requireIterableToArrayLimit$1(),n=requireUnsupportedIterableToArray$2(),a=requireNonIterableRest$1();e.exports=function(e,i){return r(e)||t(e,i)||n(e,i)||a()},e.exports.__esModule=!0,e.exports.default=e.exports}(slicedToArray$1)),slicedToArray$1.exports}var defineProperty$2={exports:{}},hasRequiredDefineProperty$2,hasRequiredSphericalCoordinates;function requireDefineProperty$2(){return hasRequiredDefineProperty$2||(hasRequiredDefineProperty$2=1,function(e){var r=requireToPropertyKey$2();e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports}(defineProperty$2)),defineProperty$2.exports}function requireSphericalCoordinates(){if(hasRequiredSphericalCoordinates)return sphericalCoordinates;hasRequiredSphericalCoordinates=1;var e=requireInteropRequireDefault$2(),r=require_typeof$2();Object.defineProperty(sphericalCoordinates,"__esModule",{value:!0}),sphericalCoordinates.default=void 0;var t=e(requireSlicedToArray$1()),n=e(requireClassCallCheck$2()),a=e(requireCreateClass$2()),i=e(requireDefineProperty$2()),o=e(requireVector3()),u=requireCommon$1(),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(requireVec3());function c(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(c=function(e){return e?t:r})(e)}var l=1e-6,f=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.phi,a=void 0===t?0:t,o=r.theta,u=void 0===o?0:o,s=r.radius,c=void 0===s?1:s,l=r.bearing,f=r.pitch,d=r.altitude,p=r.radiusScale,h=void 0===p?6371e3:p;(0,n.default)(this,e),(0,i.default)(this,"phi",void 0),(0,i.default)(this,"theta",void 0),(0,i.default)(this,"radius",void 0),(0,i.default)(this,"radiusScale",void 0),this.phi=a,this.theta=u,this.radius=c||d||1,this.radiusScale=h||1,void 0!==l&&(this.bearing=l),void 0!==f&&(this.pitch=f),this.check()}return(0,a.default)(e,[{key:"toString",value:function(){return this.formatString(u.config)}},{key:"formatString",value:function(e){var r=e.printTypes,t=void 0!==r&&r,n=u.formatValue;return"".concat(t?"Spherical":"","[rho:").concat(n(this.radius),",theta:").concat(n(this.theta),",phi:").concat(n(this.phi),"]")}},{key:"equals",value:function(e){return(0,u.equals)(this.radius,e.radius)&&(0,u.equals)(this.theta,e.theta)&&(0,u.equals)(this.phi,e.phi)}},{key:"exactEquals",value:function(e){return this.radius===e.radius&&this.theta===e.theta&&this.phi===e.phi}},{key:"bearing",get:function(){return 180-(0,u.degrees)(this.phi)},set:function(e){this.phi=Math.PI-(0,u.radians)(e)}},{key:"pitch",get:function(){return(0,u.degrees)(this.theta)},set:function(e){this.theta=(0,u.radians)(e)}},{key:"longitude",get:function(){return(0,u.degrees)(this.phi)}},{key:"latitude",get:function(){return(0,u.degrees)(this.theta)}},{key:"lng",get:function(){return(0,u.degrees)(this.phi)}},{key:"lat",get:function(){return(0,u.degrees)(this.theta)}},{key:"z",get:function(){return(this.radius-1)*this.radiusScale}},{key:"set",value:function(e,r,t){return this.radius=e,this.phi=r,this.theta=t,this.check()}},{key:"clone",value:function(){return(new e).copy(this)}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this.check()}},{key:"fromLngLatZ",value:function(e){var r=(0,t.default)(e,3),n=r[0],a=r[1],i=r[2];return this.radius=1+i/this.radiusScale,this.phi=(0,u.radians)(a),this.theta=(0,u.radians)(n),this.check()}},{key:"fromVector3",value:function(e){return this.radius=s.length(e),this.radius>0&&(this.theta=Math.atan2(e[0],e[1]),this.phi=Math.acos((0,u.clamp)(e[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function(){return new o.default(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function(){return this.phi=Math.max(l,Math.min(Math.PI-l,this.phi)),this}},{key:"check",value:function(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}}]),e}();return sphericalCoordinates.default=f,sphericalCoordinates}var pose={},euler={},hasRequiredEuler,hasRequiredPose;function requireEuler(){if(hasRequiredEuler)return euler;hasRequiredEuler=1;var e=requireInteropRequireDefault$2();Object.defineProperty(euler,"__esModule",{value:!0}),euler.default=void 0;var r=e(requireSlicedToArray$1()),t=e(requireClassCallCheck$2()),n=e(requireCreateClass$2()),a=e(requireInherits()),i=e(requirePossibleConstructorReturn()),o=e(requireGetPrototypeOf()),u=e(requireMathArray()),s=e(requireQuaternion()),c=requireCommon$1(),l=requireValidators();function f(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,o.default)(e);if(r){var a=(0,o.default)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,i.default)(this,t)}}var d,p="Unknown Euler angle order",h=.99999;!function(e){e[e.ZYX=0]="ZYX",e[e.YXZ=1]="YXZ",e[e.XZY=2]="XZY",e[e.ZXY=3]="ZXY",e[e.YZX=4]="YZX",e[e.XYZ=5]="XYZ"}(d||(d={}));var y=function(e){(0,a.default)(o,e);var i=f(o);function o(){var e,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.DefaultOrder;((0,t.default)(this,o),e=i.call(this,-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0]))?(r=e).fromVector3.apply(r,arguments):e.set(n,a,u,s);return e}return(0,n.default)(o,[{key:"ELEMENTS",get:function(){return 4}},{key:"fromQuaternion",value:function(e){var t=(0,r.default)(e,4),n=t[0],a=t[1],i=t[2],u=t[3],s=a*a,c=-2*(s+i*i)+1,l=2*(n*a+u*i),f=-2*(n*i-u*a),d=2*(a*i+u*n),p=-2*(n*n+s)+1;f=(f=f>1?1:f)<-1?-1:f;var h=Math.atan2(d,p),y=Math.asin(f),v=Math.atan2(l,c);return this.set(h,y,v,o.RollPitchYaw)}},{key:"fromObject",value:function(e){throw new Error("not implemented")}},{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=Number.isFinite(e[3])||this.order,this.check()}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;return this[0]=e,this[1]=r,this[2]=t,this[3]=Number.isFinite(n)?n:this[3],this.check()}},{key:"validate",value:function(){return(e=this[3])>=0&&e<6&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2]);var e}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[r]=this[0],e[r+1]=this[1],e[r+2]=this[2],e}},{key:"toArray4",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[r]=this[0],e[r+1]=this[1],e[r+2]=this[2],e[r+3]=this[3],e}},{key:"toVector3",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=this[0],e[1]=this[1],e[2]=this[2],e}},{key:"x",get:function(){return this[0]},set:function(e){this[0]=(0,l.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){this[1]=(0,l.checkNumber)(e)}},{key:"z",get:function(){return this[2]},set:function(e){this[2]=(0,l.checkNumber)(e)}},{key:"alpha",get:function(){return this[0]},set:function(e){this[0]=(0,l.checkNumber)(e)}},{key:"beta",get:function(){return this[1]},set:function(e){this[1]=(0,l.checkNumber)(e)}},{key:"gamma",get:function(){return this[2]},set:function(e){this[2]=(0,l.checkNumber)(e)}},{key:"phi",get:function(){return this[0]},set:function(e){this[0]=(0,l.checkNumber)(e)}},{key:"theta",get:function(){return this[1]},set:function(e){this[1]=(0,l.checkNumber)(e)}},{key:"psi",get:function(){return this[2]},set:function(e){this[2]=(0,l.checkNumber)(e)}},{key:"roll",get:function(){return this[0]},set:function(e){this[0]=(0,l.checkNumber)(e)}},{key:"pitch",get:function(){return this[1]},set:function(e){this[1]=(0,l.checkNumber)(e)}},{key:"yaw",get:function(){return this[2]},set:function(e){this[2]=(0,l.checkNumber)(e)}},{key:"order",get:function(){return this[3]},set:function(e){this[3]=function(e){if(e<0&&e>=6)throw new Error(p);return e}(e)}},{key:"fromVector3",value:function(e,r){return this.set(e[0],e[1],e[2],Number.isFinite(r)?r:this[3])}},{key:"fromArray",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=e[0+r],this[1]=e[1+r],this[2]=e[2+r],void 0!==e[3]&&(this[3]=e[3]),this.check()}},{key:"fromRollPitchYaw",value:function(e,r,t){return this.set(e,r,t,d.ZYX)}},{key:"fromRotationMatrix",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.DefaultOrder;return this._fromRotationMatrix(e,r),this.check()}},{key:"getRotationMatrix",value:function(e){return this._getRotationMatrix(e)}},{key:"getQuaternion",value:function(){var e=new s.default;switch(this[4]){case d.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case d.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case d.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case d.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case d.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case d.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(p)}}},{key:"_fromRotationMatrix",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.DefaultOrder,t=e[0],n=e[4],a=e[8],i=e[1],u=e[5],s=e[9],l=e[2],f=e[6],d=e[10];switch(r=r||this[3]){case o.XYZ:this[1]=Math.asin((0,c.clamp)(a,-1,1)),Math.abs(a)<h?(this[0]=Math.atan2(-s,d),this[2]=Math.atan2(-n,t)):(this[0]=Math.atan2(f,u),this[2]=0);break;case o.YXZ:this[0]=Math.asin(-(0,c.clamp)(s,-1,1)),Math.abs(s)<h?(this[1]=Math.atan2(a,d),this[2]=Math.atan2(i,u)):(this[1]=Math.atan2(-l,t),this[2]=0);break;case o.ZXY:this[0]=Math.asin((0,c.clamp)(f,-1,1)),Math.abs(f)<h?(this[1]=Math.atan2(-l,d),this[2]=Math.atan2(-n,u)):(this[1]=0,this[2]=Math.atan2(i,t));break;case o.ZYX:this[1]=Math.asin(-(0,c.clamp)(l,-1,1)),Math.abs(l)<h?(this[0]=Math.atan2(f,d),this[2]=Math.atan2(i,t)):(this[0]=0,this[2]=Math.atan2(-n,u));break;case o.YZX:this[2]=Math.asin((0,c.clamp)(i,-1,1)),Math.abs(i)<h?(this[0]=Math.atan2(-s,u),this[1]=Math.atan2(-l,t)):(this[0]=0,this[1]=Math.atan2(a,d));break;case o.XZY:this[2]=Math.asin(-(0,c.clamp)(n,-1,1)),Math.abs(n)<h?(this[0]=Math.atan2(f,u),this[1]=Math.atan2(a,t)):(this[0]=Math.atan2(-s,d),this[1]=0);break;default:throw new Error(p)}return this[3]=r,this}},{key:"_getRotationMatrix",value:function(e){var r=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=this.x,n=this.y,a=this.z,i=Math.cos(t),u=Math.cos(n),s=Math.cos(a),c=Math.sin(t),l=Math.sin(n),f=Math.sin(a);switch(this[3]){case o.XYZ:var d=i*s,h=i*f,y=c*s,v=c*f;r[0]=u*s,r[4]=-u*f,r[8]=l,r[1]=h+y*l,r[5]=d-v*l,r[9]=-c*u,r[2]=v-d*l,r[6]=y+h*l,r[10]=i*u;break;case o.YXZ:var m=u*s,b=u*f,g=l*s,_=l*f;r[0]=m+_*c,r[4]=g*c-b,r[8]=i*l,r[1]=i*f,r[5]=i*s,r[9]=-c,r[2]=b*c-g,r[6]=_+m*c,r[10]=i*u;break;case o.ZXY:var A=u*s,T=u*f,O=l*s,R=l*f;r[0]=A-R*c,r[4]=-i*f,r[8]=O+T*c,r[1]=T+O*c,r[5]=i*s,r[9]=R-A*c,r[2]=-i*l,r[6]=c,r[10]=i*u;break;case o.ZYX:var E=i*s,S=i*f,q=c*s,C=c*f;r[0]=u*s,r[4]=q*l-S,r[8]=E*l+C,r[1]=u*f,r[5]=C*l+E,r[9]=S*l-q,r[2]=-l,r[6]=c*u,r[10]=i*u;break;case o.YZX:var B=i*u,x=i*l,P=c*u,w=c*l;r[0]=u*s,r[4]=w-B*f,r[8]=P*f+x,r[1]=f,r[5]=i*s,r[9]=-c*s,r[2]=-l*s,r[6]=x*f+P,r[10]=B-w*f;break;case o.XZY:var M=i*u,I=i*l,k=c*u,D=c*l;r[0]=u*s,r[4]=-f,r[8]=l*s,r[1]=M*f+D,r[5]=i*s,r[9]=I*f-k,r[2]=k*f-I,r[6]=c*s,r[10]=D*f+M;break;default:throw new Error(p)}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},{key:"toQuaternion",value:function(){var e=Math.cos(.5*this.yaw),r=Math.sin(.5*this.yaw),t=Math.cos(.5*this.roll),n=Math.sin(.5*this.roll),a=Math.cos(.5*this.pitch),i=Math.sin(.5*this.pitch),o=e*t*a+r*n*i,u=e*n*a-r*t*i,c=e*t*i+r*n*a,l=r*t*a-e*n*i;return new s.default(u,c,l,o)}}],[{key:"ZYX",get:function(){return d.ZYX}},{key:"YXZ",get:function(){return d.YXZ}},{key:"XZY",get:function(){return d.XZY}},{key:"ZXY",get:function(){return d.ZXY}},{key:"YZX",get:function(){return d.YZX}},{key:"XYZ",get:function(){return d.XYZ}},{key:"RollPitchYaw",get:function(){return d.ZYX}},{key:"DefaultOrder",get:function(){return d.ZYX}},{key:"RotationOrders",get:function(){return d}},{key:"rotationOrder",value:function(e){return d[e]}}]),o}(u.default);return euler.default=y,euler}function requirePose(){if(hasRequiredPose)return pose;hasRequiredPose=1;var e=requireInteropRequireDefault$2();Object.defineProperty(pose,"__esModule",{value:!0}),pose.default=void 0;var r=e(requireClassCallCheck$2()),t=e(requireCreateClass$2()),n=e(requireDefineProperty$2()),a=e(requireMatrix4()),i=e(requireVector3()),o=e(requireEuler()),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.x,u=void 0===a?0:a,s=t.y,c=void 0===s?0:s,l=t.z,f=void 0===l?0:l,d=t.roll,p=void 0===d?0:d,h=t.pitch,y=void 0===h?0:h,v=t.yaw,m=void 0===v?0:v,b=t.position,g=t.orientation;(0,r.default)(this,e),(0,n.default)(this,"position",void 0),(0,n.default)(this,"orientation",void 0),Array.isArray(b)&&3===b.length?this.position=new i.default(b):this.position=new i.default(u,c,f),Array.isArray(g)&&4===g.length?this.orientation=new o.default(g,g[3]):this.orientation=new o.default(p,y,m,o.default.RollPitchYaw)}return(0,t.default)(e,[{key:"x",get:function(){return this.position.x},set:function(e){this.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){this.position.y=e}},{key:"z",get:function(){return this.position.z},set:function(e){this.position.z=e}},{key:"roll",get:function(){return this.orientation.roll},set:function(e){this.orientation.roll=e}},{key:"pitch",get:function(){return this.orientation.pitch},set:function(e){this.orientation.pitch=e}},{key:"yaw",get:function(){return this.orientation.yaw},set:function(e){this.orientation.yaw=e}},{key:"getPosition",value:function(){return this.position}},{key:"getOrientation",value:function(){return this.orientation}},{key:"equals",value:function(e){return!!e&&(this.position.equals(e.position)&&this.orientation.equals(e.orientation))}},{key:"exactEquals",value:function(e){return!!e&&(this.position.exactEquals(e.position)&&this.orientation.exactEquals(e.orientation))}},{key:"getTransformationMatrix",value:function(){var e=Math.sin(this.roll),r=Math.sin(this.pitch),t=Math.sin(this.yaw),n=Math.cos(this.roll),i=Math.cos(this.pitch),o=Math.cos(this.yaw);return(new a.default).setRowMajor(o*i,-t*n+o*r*e,t*e+o*r*n,this.x,t*i,o*n+t*r*e,-o*e+t*r*n,this.y,-r,i*e,i*n,this.z,0,0,0,1)}},{key:"getTransformationMatrixFromPose",value:function(e){return(new a.default).multiplyRight(this.getTransformationMatrix()).multiplyRight(e.getTransformationMatrix().invert())}},{key:"getTransformationMatrixToPose",value:function(e){return(new a.default).multiplyRight(e.getTransformationMatrix()).multiplyRight(this.getTransformationMatrix().invert())}}]),e}();return pose.default=u,pose}var mathUtils={},hasRequiredMathUtils,hasRequiredEs5$4;function requireMathUtils(){if(hasRequiredMathUtils)return mathUtils;hasRequiredMathUtils=1,Object.defineProperty(mathUtils,"__esModule",{value:!0}),mathUtils.default=void 0;var e={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI};return mathUtils.default=e,mathUtils}function requireEs5$4(){return hasRequiredEs5$4||(hasRequiredEs5$4=1,function(e){var r=requireInteropRequireDefault$2();Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Vector2",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"Vector3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"Vector4",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"Matrix3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"Matrix4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"Quaternion",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"SphericalCoordinates",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"_SphericalCoordinates",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"Pose",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"_Pose",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"Euler",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"_Euler",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"_MathUtils",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"assert",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"config",{enumerable:!0,get:function(){return p.config}}),Object.defineProperty(e,"configure",{enumerable:!0,get:function(){return p.configure}}),Object.defineProperty(e,"formatValue",{enumerable:!0,get:function(){return p.formatValue}}),Object.defineProperty(e,"isArray",{enumerable:!0,get:function(){return p.isArray}}),Object.defineProperty(e,"clone",{enumerable:!0,get:function(){return p.clone}}),Object.defineProperty(e,"equals",{enumerable:!0,get:function(){return p.equals}}),Object.defineProperty(e,"exactEquals",{enumerable:!0,get:function(){return p.exactEquals}}),Object.defineProperty(e,"toRadians",{enumerable:!0,get:function(){return p.toRadians}}),Object.defineProperty(e,"toDegrees",{enumerable:!0,get:function(){return p.toDegrees}}),Object.defineProperty(e,"radians",{enumerable:!0,get:function(){return p.radians}}),Object.defineProperty(e,"degrees",{enumerable:!0,get:function(){return p.degrees}}),Object.defineProperty(e,"sin",{enumerable:!0,get:function(){return p.sin}}),Object.defineProperty(e,"cos",{enumerable:!0,get:function(){return p.cos}}),Object.defineProperty(e,"tan",{enumerable:!0,get:function(){return p.tan}}),Object.defineProperty(e,"asin",{enumerable:!0,get:function(){return p.asin}}),Object.defineProperty(e,"acos",{enumerable:!0,get:function(){return p.acos}}),Object.defineProperty(e,"atan",{enumerable:!0,get:function(){return p.atan}}),Object.defineProperty(e,"clamp",{enumerable:!0,get:function(){return p.clamp}}),Object.defineProperty(e,"lerp",{enumerable:!0,get:function(){return p.lerp}}),Object.defineProperty(e,"withEpsilon",{enumerable:!0,get:function(){return p.withEpsilon}});var t=r(requireVector2()),n=r(requireVector3()),a=r(requireVector4()),i=r(requireMatrix3()),o=r(requireMatrix4()),u=r(requireQuaternion()),s=r(requireSphericalCoordinates()),c=r(requirePose()),l=r(requireEuler()),f=r(requireMathUtils()),d=r(requireAssert$1()),p=requireCommon$1()}(es5$5)),es5$5}var gltfConstants={},hasRequiredGltfConstants,hasRequiredKHR_texture_transform;function requireGltfConstants(){if(hasRequiredGltfConstants)return gltfConstants;hasRequiredGltfConstants=1,Object.defineProperty(gltfConstants,"__esModule",{value:!0}),gltfConstants.COMPONENTS=gltfConstants.BYTES=void 0,gltfConstants.getBytesFromComponentType=function(e){return r[e]},gltfConstants.getGLEnumFromSamplerParameter=function(e){return{magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243}[e]},gltfConstants.getSizeFromAccessorType=function(r){return e[r]};var e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};gltfConstants.COMPONENTS=e;var r={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4};return gltfConstants.BYTES=r,gltfConstants}function requireKHR_texture_transform(){if(hasRequiredKHR_texture_transform)return KHR_texture_transform;hasRequiredKHR_texture_transform=1;var e=interopRequireDefaultExports;Object.defineProperty(KHR_texture_transform,"__esModule",{value:!0}),KHR_texture_transform.decode=function(e,r){return y.apply(this,arguments)},KHR_texture_transform.name=void 0;var r=e(requireRegenerator()),t=e(requireSlicedToArray$2()),n=e(requireAsyncToGenerator()),a=requireEs5$4(),i=requireGltfUtils(),o=requireGltfConstants(),u=e(requireGltfScenegraph());function s(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return c(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return c(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}function c(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var l="KHR_texture_transform",f=l;KHR_texture_transform.name=f;var d=new a.Vector3,p=new a.Matrix3,h=new a.Matrix3;function y(){return y=(0,n.default)(r.default.mark((function e(t,n){var a,i,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new u.default(t),a.getExtension(l)){e.next=4;break}return e.abrupt("return");case 4:for(i=t.json.materials||[],o=0;o<i.length;o++)v(o,t);case 6:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function v(e,r){var t,n,a,i=[],o=null===(t=r.json.materials)||void 0===t?void 0:t[e],u=null==o||null===(n=o.pbrMetallicRoughness)||void 0===n?void 0:n.baseColorTexture;u&&m(r,e,u,i);var s=null==o?void 0:o.emissiveTexture;s&&m(r,e,s,i);var c=null==o?void 0:o.normalTexture;c&&m(r,e,c,i);var l=null==o?void 0:o.occlusionTexture;l&&m(r,e,l,i);var f=null==o||null===(a=o.pbrMetallicRoughness)||void 0===a?void 0:a.metallicRoughnessTexture;f&&m(r,e,f,i)}function m(e,r,n,i){var o=function(e,r){var n,i=null===(n=e.extensions)||void 0===n?void 0:n[l],o=e.texCoord,u=void 0===o?0:o,s=i.texCoord,c=void 0===s?u:s,f=-1!==r.findIndex((function(e){var r=(0,t.default)(e,2),n=r[0],a=r[1];return n===u&&a===c}));if(!f){var d=(v=(y=i).offset,m=void 0===v?[0,0]:v,b=y.rotation,g=void 0===b?0:b,_=y.scale,A=void 0===_?[1,1]:_,T=(new a.Matrix3).set(1,0,0,0,1,0,m[0],m[1],1),O=p.set(Math.cos(g),Math.sin(g),0,-Math.sin(g),Math.cos(g),0,0,0,1),R=h.set(A[0],0,0,0,A[1],0,0,0,1),T.multiplyRight(O).multiplyRight(R));return u!==c&&(e.texCoord=c),r.push([u,c]),{originalTexCoord:u,texCoord:c,matrix:d}}var y,v,m,b,g,_,A,T,O,R;return null}(n,i);if(o){var u,c=s(e.json.meshes||[]);try{for(c.s();!(u=c.n()).done;){var f,d=s(u.value.primitives);try{for(d.s();!(f=d.n()).done;){var y=f.value,v=y.material;Number.isFinite(v)&&r===v&&b(e,y,o)}}catch(e){d.e(e)}finally{d.f()}}}catch(e){c.e(e)}finally{c.f()}}}function b(e,r,t){var n=t.originalTexCoord,a=t.texCoord,u=t.matrix,s=r.attributes["TEXCOORD_".concat(n)];if(Number.isFinite(s)){var c,l=null===(c=e.json.accessors)||void 0===c?void 0:c[s];if(l&&l.bufferView){var f,p=null===(f=e.json.bufferViews)||void 0===f?void 0:f[l.bufferView];if(p){for(var h=e.buffers[p.buffer],y=h.arrayBuffer,v=(h.byteOffset||0)+(l.byteOffset||0)+(p.byteOffset||0),m=(0,i.getAccessorArrayTypeAndLength)(l,p),b=m.ArrayType,g=m.length,_=o.BYTES[l.componentType],A=o.COMPONENTS[l.type],T=p.byteStride||_*A,O=new Float32Array(g),R=0;R<l.count;R++){var E=new b(y,v+R*T,2);d.set(E[0],E[1],1),d.transformByMatrix3(u),O.set([d[0],d[1]],R*A)}n===a?function(e,r,t,n){e.componentType=5126,t.push({arrayBuffer:n.buffer,byteOffset:0,byteLength:n.buffer.byteLength}),r.buffer=t.length-1,r.byteLength=n.buffer.byteLength,r.byteOffset=0,delete r.byteStride}(l,p,e.buffers,O):function(e,r,t,n,a){n.buffers.push({arrayBuffer:a.buffer,byteOffset:0,byteLength:a.buffer.byteLength});var i=n.json.bufferViews;if(!i)return;i.push({buffer:n.buffers.length-1,byteLength:a.buffer.byteLength,byteOffset:0});var o=n.json.accessors;if(!o)return;o.push({bufferView:(null==i?void 0:i.length)-1,byteOffset:0,componentType:5126,count:r.count,type:"VEC2"}),t.attributes["TEXCOORD_".concat(e)]=o.length-1}(a,l,r,e,O)}}}}return KHR_texture_transform}var KHR_lights_punctual={},hasRequiredKHR_lights_punctual;function requireKHR_lights_punctual(){if(hasRequiredKHR_lights_punctual)return KHR_lights_punctual;hasRequiredKHR_lights_punctual=1;var e=interopRequireDefaultExports;Object.defineProperty(KHR_lights_punctual,"__esModule",{value:!0}),KHR_lights_punctual.decode=function(e){return c.apply(this,arguments)},KHR_lights_punctual.encode=function(e){return l.apply(this,arguments)},KHR_lights_punctual.name=void 0;var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=requireAssert$3(),a=e(requireGltfScenegraph());function i(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return o(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==t.return||t.return()}finally{if(s)throw i}}}}function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var u="KHR_lights_punctual",s=u;function c(){return c=(0,t.default)(r.default.mark((function e(t){var n,o,s,c,l,f,d;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new a.default(t),o=n.json,(s=n.getExtension(u))&&(n.json.lights=s.lights,n.removeExtension(u)),c=i(o.nodes||[]);try{for(c.s();!(l=c.n()).done;)f=l.value,(d=n.getObjectExtension(f,u))&&(f.light=d.light),n.removeObjectExtension(f,u)}catch(e){c.e(e)}finally{c.f()}case 6:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function l(){return l=(0,t.default)(r.default.mark((function e(t){var o,s,c,l,f,d,p;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=new a.default(t),(s=o.json).lights&&(c=o.addExtension(u),(0,n.assert)(!c.lights),c.lights=s.lights,delete s.lights),o.json.lights){l=i(o.json.lights);try{for(l.s();!(f=l.n()).done;)d=f.value,p=d.node,o.addObjectExtension(p,u,d)}catch(e){l.e(e)}finally{l.f()}delete o.json.lights}case 4:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}return KHR_lights_punctual.name=s,KHR_lights_punctual}var KHR_materials_unlit={},hasRequiredKHR_materials_unlit;function requireKHR_materials_unlit(){if(hasRequiredKHR_materials_unlit)return KHR_materials_unlit;hasRequiredKHR_materials_unlit=1;var e=interopRequireDefaultExports;Object.defineProperty(KHR_materials_unlit,"__esModule",{value:!0}),KHR_materials_unlit.decode=function(e){return s.apply(this,arguments)},KHR_materials_unlit.encode=function(e){var r=new n.default(e),t=r.json;if(r.materials){var i,u=a(t.materials||[]);try{for(u.s();!(i=u.n()).done;){var s=i.value;s.unlit&&(delete s.unlit,r.addObjectExtension(s,o,{}),r.addExtension(o))}}catch(e){u.e(e)}finally{u.f()}}},KHR_materials_unlit.name=void 0;var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=e(requireGltfScenegraph());function a(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==t.return||t.return()}finally{if(s)throw o}}}}function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var o="KHR_materials_unlit",u=o;function s(){return s=(0,t.default)(r.default.mark((function e(t){var i,u,s,c,l;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=new n.default(t),u=i.json,s=a(u.materials||[]);try{for(s.s();!(c=s.n()).done;)l=c.value,l.extensions&&l.extensions.KHR_materials_unlit&&(l.unlit=!0),i.removeObjectExtension(l,o)}catch(e){s.e(e)}finally{s.f()}i.removeExtension(o);case 5:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}return KHR_materials_unlit.name=u,KHR_materials_unlit}var KHR_techniques_webgl={},hasRequiredKHR_techniques_webgl;function requireKHR_techniques_webgl(){if(hasRequiredKHR_techniques_webgl)return KHR_techniques_webgl;hasRequiredKHR_techniques_webgl=1;var e=interopRequireDefaultExports;Object.defineProperty(KHR_techniques_webgl,"__esModule",{value:!0}),KHR_techniques_webgl.decode=function(e){return c.apply(this,arguments)},KHR_techniques_webgl.encode=function(e,r){return l.apply(this,arguments)},KHR_techniques_webgl.name=void 0;var r=e(requireRegenerator()),t=e(require_typeof$3()),n=e(requireAsyncToGenerator()),a=e(requireGltfScenegraph());function i(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return o(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==t.return||t.return()}finally{if(s)throw i}}}}function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var u="KHR_techniques_webgl",s=u;function c(){return c=(0,n.default)(r.default.mark((function e(t){var n,o,s,c,l,p,h,y;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new a.default(t),o=n.json,s=n.getExtension(u)){c=f(s,n),l=i(o.materials||[]);try{for(l.s();!(p=l.n()).done;)h=p.value,(y=n.getObjectExtension(h,u))&&(h.technique=Object.assign({},y,c[y.technique]),h.technique.values=d(h.technique,n)),n.removeObjectExtension(h,u)}catch(e){l.e(e)}finally{l.f()}n.removeExtension(u)}case 4:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function l(){return(l=(0,n.default)(r.default.mark((function e(t,n){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,r){var t=e.programs,n=void 0===t?[]:t,a=e.shaders,i=void 0===a?[]:a,o=e.techniques,u=void 0===o?[]:o,s=new TextDecoder;return i.forEach((function(e){if(!Number.isFinite(e.bufferView))throw new Error("KHR_techniques_webgl: no shader code");e.code=s.decode(r.getTypedArrayForBufferView(e.bufferView))})),n.forEach((function(e){e.fragmentShader=i[e.fragmentShader],e.vertexShader=i[e.vertexShader]})),u.forEach((function(e){e.program=n[e.program]})),u}function d(e,r){var n=Object.assign({},e.values);return Object.keys(e.uniforms||{}).forEach((function(r){e.uniforms[r].value&&!(r in n)&&(n[r]=e.uniforms[r].value)})),Object.keys(n).forEach((function(e){"object"===(0,t.default)(n[e])&&void 0!==n[e].index&&(n[e].texture=r.getTexture(n[e].index))})),n}return KHR_techniques_webgl.name=s,KHR_techniques_webgl}var EXT_feature_metadata={},hasRequiredEXT_feature_metadata,hasRequiredGltfExtensions;function requireEXT_feature_metadata(){if(hasRequiredEXT_feature_metadata)return EXT_feature_metadata;hasRequiredEXT_feature_metadata=1;var e=interopRequireDefaultExports;Object.defineProperty(EXT_feature_metadata,"__esModule",{value:!0}),EXT_feature_metadata.decode=function(e){return o.apply(this,arguments)},EXT_feature_metadata.name=void 0;var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=e(requireGltfScenegraph()),a="EXT_feature_metadata",i=a;function o(){return(o=(0,t.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(new n.default(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){var r,t=e.getExtension(a),n=null==t||null===(r=t.schema)||void 0===r?void 0:r.classes,i=null==t?void 0:t.featureTables;if((null==t?void 0:t.featureTextures)&&console.warn('featureTextures is not yet supported in the "EXT_feature_metadata" extension.'),n&&i)for(var o in n){var u=n[o],c=l(i,o);c&&s(e,c,u)}}function s(e,r,t){for(var n in t.properties){var a,i=t.properties[n],o=null==r||null===(a=r.properties)||void 0===a?void 0:a[n],u=r.count;if(o){var s=c(e,i,u,o);o.data=s}}}function c(e,r,t,n){var a=n.bufferView,i=e.getTypedArrayForBufferView(a);if("STRING"===r.type){var o=n.stringOffsetBufferView;i=function(e,r,t){for(var n=[],a=new TextDecoder("utf8"),i=0,o=4,u=0;u<t;u++){var s=r[(u+1)*o]-r[u*o],c=e.subarray(i,s+i),l=a.decode(c);n.push(l),i+=s}return n}(i,e.getTypedArrayForBufferView(o),t)}return i}function l(e,r){for(var t in e){var n=e[t];if(n.class===r)return n}return null}return EXT_feature_metadata.name=i,EXT_feature_metadata}function requireGltfExtensions(){if(hasRequiredGltfExtensions)return gltfExtensions;hasRequiredGltfExtensions=1;var e=interopRequireDefaultExports,r=require_typeof$3();Object.defineProperty(gltfExtensions,"__esModule",{value:!0}),gltfExtensions.EXTENSIONS=void 0,gltfExtensions.decodeExtensions=function(e){return h.apply(this,arguments)},gltfExtensions.preprocessExtensions=function(e){var r,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=f(p.filter((function(e){return y(e.name,t)})));try{for(a.s();!(r=a.n()).done;){var i,o=r.value;null===(i=o.preprocess)||void 0===i||i.call(o,e,t,n)}}catch(e){a.e(e)}finally{a.f()}};var t=e(requireRegenerator()),n=e(requireAsyncToGenerator()),a=l(requireEXT_meshopt_compression()),i=l(requireEXT_texture_webp()),o=l(requireKHR_texture_basisu()),u=l(requireKHR_draco_mesh_compression()),s=l(requireKHR_texture_transform());function c(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(c=function(e){return e?t:r})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}function f(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return d(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return d(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var p=[a,i,o,u,l(requireKHR_lights_punctual()),l(requireKHR_materials_unlit()),l(requireKHR_techniques_webgl()),s,l(requireEXT_feature_metadata())];function h(){return h=(0,n.default)(t.default.mark((function e(r){var n,a,i,o,u,s,c,l=arguments;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=l.length>1&&void 0!==l[1]?l[1]:{},a=l.length>2?l[2]:void 0,i=p.filter((function(e){return y(e.name,n)})),o=f(i),e.prev=4,o.s();case 6:if((u=o.n()).done){e.next=12;break}return c=u.value,e.next=10,null===(s=c.decode)||void 0===s?void 0:s.call(c,r,n,a);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),o.e(e.t0);case 17:return e.prev=17,o.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[4,14,17,20]])}))),h.apply(this,arguments)}function y(e,r){var t,n=(null==r||null===(t=r.gltf)||void 0===t?void 0:t.excludeExtensions)||{};return!(e in n&&!n[e])}return gltfExtensions.EXTENSIONS=p,gltfExtensions}var normalizeGltfV1={},KHR_binary_gltf={},hasRequiredKHR_binary_gltf,hasRequiredNormalizeGltfV1;function requireKHR_binary_gltf(){if(hasRequiredKHR_binary_gltf)return KHR_binary_gltf;hasRequiredKHR_binary_gltf=1;var e=interopRequireDefaultExports;Object.defineProperty(KHR_binary_gltf,"__esModule",{value:!0}),KHR_binary_gltf.name=void 0,KHR_binary_gltf.preprocess=function(e){var a,i=new r.default(e),o=i.json,u=function(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,r)}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}(o.images||[]);try{for(u.s();!(a=u.n()).done;){var s=a.value,c=i.getObjectExtension(s,n);c&&Object.assign(s,c),i.removeObjectExtension(s,n)}}catch(e){u.e(e)}finally{u.f()}o.buffers&&o.buffers[0]&&delete o.buffers[0].uri;i.removeExtension(n)};var r=e(requireGltfScenegraph());function t(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var n="KHR_binary_glTF",a=n;return KHR_binary_gltf.name=a,KHR_binary_gltf}function requireNormalizeGltfV1(){if(hasRequiredNormalizeGltfV1)return normalizeGltfV1;hasRequiredNormalizeGltfV1=1;var e=interopRequireDefaultExports,r=require_typeof$3();Object.defineProperty(normalizeGltfV1,"__esModule",{value:!0}),normalizeGltfV1.normalizeGLTFV1=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(new f).normalize(e,r)};var t=e(requireClassCallCheck$3()),n=e(requireCreateClass$3()),a=e(requireDefineProperty$3()),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=i?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(a,u,s):a[u]=e[u]}a.default=e,n&&n.set(e,a);return a}(requireKHR_binary_gltf());function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}function u(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return s(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return s(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}function s(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var c={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},l={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"},f=function(){function e(){(0,t.default)(this,e),(0,a.default)(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),(0,a.default)(this,"json",void 0)}return(0,n.default)(e,[{key:"normalize",value:function(e,r){this.json=e.json;var t=e.json;switch(t.asset&&t.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(t.asset.version))}if(!r.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(t),this._convertTopLevelObjectsToArrays(t),i.preprocess(e),this._convertObjectIdsToArrayIndices(t),this._updateObjects(t),this._updateMaterial(t)}},{key:"_addAsset",value:function(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}},{key:"_convertTopLevelObjectsToArrays",value:function(e){for(var r in c)this._convertTopLevelObjectToArray(e,r)}},{key:"_convertTopLevelObjectToArray",value:function(e,r){var t=e[r];if(t&&!Array.isArray(t))for(var n in e[r]=[],t){var a=t[n];a.id=a.id||n;var i=e[r].length;e[r].push(a),this.idToIndexMap[r][n]=i}}},{key:"_convertObjectIdsToArrayIndices",value:function(e){for(var r in c)this._convertIdsToIndices(e,r);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));var t,n=u(e.textures);try{for(n.s();!(t=n.n()).done;){var a=t.value;this._convertTextureIds(a)}}catch(e){n.e(e)}finally{n.f()}var i,o=u(e.meshes);try{for(o.s();!(i=o.n()).done;){var s=i.value;this._convertMeshIds(s)}}catch(e){o.e(e)}finally{o.f()}var l,f=u(e.nodes);try{for(f.s();!(l=f.n()).done;){var d=l.value;this._convertNodeIds(d)}}catch(e){f.e(e)}finally{f.f()}var p,h=u(e.scenes);try{for(h.s();!(p=h.n()).done;){var y=p.value;this._convertSceneIds(y)}}catch(e){h.e(e)}finally{h.f()}}},{key:"_convertTextureIds",value:function(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}},{key:"_convertMeshIds",value:function(e){var r,t=u(e.primitives);try{for(t.s();!(r=t.n()).done;){var n=r.value,a=n.attributes,i=n.indices,o=n.material;for(var s in a)a[s]=this._convertIdToIndex(a[s],"accessor");i&&(n.indices=this._convertIdToIndex(i,"accessor")),o&&(n.material=this._convertIdToIndex(o,"material"))}}catch(e){t.e(e)}finally{t.f()}}},{key:"_convertNodeIds",value:function(e){var r=this;e.children&&(e.children=e.children.map((function(e){return r._convertIdToIndex(e,"node")}))),e.meshes&&(e.meshes=e.meshes.map((function(e){return r._convertIdToIndex(e,"mesh")})))}},{key:"_convertSceneIds",value:function(e){var r=this;e.nodes&&(e.nodes=e.nodes.map((function(e){return r._convertIdToIndex(e,"node")})))}},{key:"_convertIdsToIndices",value:function(e,r){e[r]||(console.warn("gltf v1: json doesn't contain attribute ".concat(r)),e[r]=[]);var t,n=u(e[r]);try{for(n.s();!(t=n.n()).done;){var a=t.value;for(var i in a){var o=a[i],s=this._convertIdToIndex(o,i);a[i]=s}}}catch(e){n.e(e)}finally{n.f()}}},{key:"_convertIdToIndex",value:function(e,r){var t=l[r];if(t in this.idToIndexMap){var n=this.idToIndexMap[t][e];if(!Number.isFinite(n))throw new Error("gltf v1: failed to resolve ".concat(r," with id ").concat(e));return n}return e}},{key:"_updateObjects",value:function(e){var r,t=u(this.json.buffers);try{for(t.s();!(r=t.n()).done;){delete r.value.type}}catch(e){t.e(e)}finally{t.f()}}},{key:"_updateMaterial",value:function(e){var r,t=u(e.materials);try{var n=function(){var t,n,a,i=r.value;i.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};var o=(null===(t=i.values)||void 0===t?void 0:t.tex)||(null===(n=i.values)||void 0===n?void 0:n.texture2d_0)||(null===(a=i.values)||void 0===a?void 0:a.diffuseTex),u=e.textures.findIndex((function(e){return e.id===o}));-1!==u&&(i.pbrMetallicRoughness.baseColorTexture={index:u})};for(t.s();!(r=t.n()).done;)n()}catch(e){t.e(e)}finally{t.f()}}}]),e}();return normalizeGltfV1}var postProcessGltf={},hasRequiredPostProcessGltf;function requirePostProcessGltf(){if(hasRequiredPostProcessGltf)return postProcessGltf;hasRequiredPostProcessGltf=1;var e=interopRequireDefaultExports;Object.defineProperty(postProcessGltf,"__esModule",{value:!0}),postProcessGltf.postProcessGLTF=function(e,r){return(new A).postProcess(e,r)};var r,t=e(require_typeof$3()),n=e(requireClassCallCheck$3()),a=e(requireCreateClass$3()),i=e(requireDefineProperty$3()),o=requireAssert$3(),u=requireGltfUtils();function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){(0,i.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var l={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},f={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},d=10240,p=10241,h=10242,y=10243,v=10497,m=9729,b=9986,g={magFilter:d,minFilter:p,wrapS:h,wrapT:y},_=(r={},(0,i.default)(r,d,m),(0,i.default)(r,p,b),(0,i.default)(r,h,v),(0,i.default)(r,y,v),r);var A=function(){function e(){(0,n.default)(this,e),(0,i.default)(this,"baseUri",""),(0,i.default)(this,"json",{}),(0,i.default)(this,"buffers",[]),(0,i.default)(this,"images",[])}return(0,a.default)(e,[{key:"postProcess",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.json,n=e.buffers,a=void 0===n?[]:n,i=e.images,u=void 0===i?[]:i,s=e.baseUri,c=void 0===s?"":s;return(0,o.assert)(t),this.baseUri=c,this.json=t,this.buffers=a,this.images=u,this._resolveTree(this.json,r),this.json}},{key:"_resolveTree",value:function(e){var r=this;e.bufferViews&&(e.bufferViews=e.bufferViews.map((function(e,t){return r._resolveBufferView(e,t)}))),e.images&&(e.images=e.images.map((function(e,t){return r._resolveImage(e,t)}))),e.samplers&&(e.samplers=e.samplers.map((function(e,t){return r._resolveSampler(e,t)}))),e.textures&&(e.textures=e.textures.map((function(e,t){return r._resolveTexture(e,t)}))),e.accessors&&(e.accessors=e.accessors.map((function(e,t){return r._resolveAccessor(e,t)}))),e.materials&&(e.materials=e.materials.map((function(e,t){return r._resolveMaterial(e,t)}))),e.meshes&&(e.meshes=e.meshes.map((function(e,t){return r._resolveMesh(e,t)}))),e.nodes&&(e.nodes=e.nodes.map((function(e,t){return r._resolveNode(e,t)}))),e.skins&&(e.skins=e.skins.map((function(e,t){return r._resolveSkin(e,t)}))),e.scenes&&(e.scenes=e.scenes.map((function(e,t){return r._resolveScene(e,t)}))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}},{key:"getScene",value:function(e){return this._get("scenes",e)}},{key:"getNode",value:function(e){return this._get("nodes",e)}},{key:"getSkin",value:function(e){return this._get("skins",e)}},{key:"getMesh",value:function(e){return this._get("meshes",e)}},{key:"getMaterial",value:function(e){return this._get("materials",e)}},{key:"getAccessor",value:function(e){return this._get("accessors",e)}},{key:"getCamera",value:function(e){return null}},{key:"getTexture",value:function(e){return this._get("textures",e)}},{key:"getSampler",value:function(e){return this._get("samplers",e)}},{key:"getImage",value:function(e){return this._get("images",e)}},{key:"getBufferView",value:function(e){return this._get("bufferViews",e)}},{key:"getBuffer",value:function(e){return this._get("buffers",e)}},{key:"_get",value:function(e,r){if("object"===(0,t.default)(r))return r;var n=this.json[e]&&this.json[e][r];return n||console.warn("glTF file error: Could not find ".concat(e,"[").concat(r,"]")),n}},{key:"_resolveScene",value:function(e,r){var t=this;return e.id=e.id||"scene-".concat(r),e.nodes=(e.nodes||[]).map((function(e){return t.getNode(e)})),e}},{key:"_resolveNode",value:function(e,r){var t=this;return e.id=e.id||"node-".concat(r),e.children&&(e.children=e.children.map((function(e){return t.getNode(e)}))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((function(e,r){var n=t.getMesh(r);return e.id=n.id,e.primitives=e.primitives.concat(n.primitives),e}),{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}},{key:"_resolveSkin",value:function(e,r){return e.id=e.id||"skin-".concat(r),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}},{key:"_resolveMesh",value:function(e,r){var t=this;return e.id=e.id||"mesh-".concat(r),e.primitives&&(e.primitives=e.primitives.map((function(e){var r=(e=c({},e)).attributes;for(var n in e.attributes={},r)e.attributes[n]=t.getAccessor(r[n]);return void 0!==e.indices&&(e.indices=t.getAccessor(e.indices)),void 0!==e.material&&(e.material=t.getMaterial(e.material)),e}))),e}},{key:"_resolveMaterial",value:function(e,r){if(e.id=e.id||"material-".concat(r),e.normalTexture&&(e.normalTexture=c({},e.normalTexture),e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture=c({},e.occlustionTexture),e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture=c({},e.emmisiveTexture),e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness=c({},e.pbrMetallicRoughness);var t=e.pbrMetallicRoughness;t.baseColorTexture&&(t.baseColorTexture=c({},t.baseColorTexture),t.baseColorTexture.texture=this.getTexture(t.baseColorTexture.index)),t.metallicRoughnessTexture&&(t.metallicRoughnessTexture=c({},t.metallicRoughnessTexture),t.metallicRoughnessTexture.texture=this.getTexture(t.metallicRoughnessTexture.index))}return e}},{key:"_resolveAccessor",value:function(e,r){var t;if(e.id=e.id||"accessor-".concat(r),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=(t=e.componentType,f[t]),e.components=function(e){return l[e]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){var n=e.bufferView.buffer,a=(0,u.getAccessorArrayTypeAndLength)(e,e.bufferView),i=a.ArrayType,o=a.byteLength,s=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+n.byteOffset,c=n.arrayBuffer.slice(s,s+o);e.bufferView.byteStride&&(c=this._getValueFromInterleavedBuffer(n,s,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new i(c)}return e}},{key:"_getValueFromInterleavedBuffer",value:function(e,r,t,n,a){for(var i=new Uint8Array(a*n),o=0;o<a;o++){var u=r+o*t;i.set(new Uint8Array(e.arrayBuffer.slice(u,u+n)),o*n)}return i.buffer}},{key:"_resolveTexture",value:function(e,r){return e.id=e.id||"texture-".concat(r),e.sampler="sampler"in e?this.getSampler(e.sampler):_,e.source=this.getImage(e.source),e}},{key:"_resolveSampler",value:function(e,r){for(var t in e.id=e.id||"sampler-".concat(r),e.parameters={},e){var n=this._enumSamplerParameter(t);void 0!==n&&(e.parameters[n]=e[t])}return e}},{key:"_enumSamplerParameter",value:function(e){return g[e]}},{key:"_resolveImage",value:function(e,r){e.id=e.id||"image-".concat(r),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));var t=this.images[r];return t&&(e.image=t),e}},{key:"_resolveBufferView",value:function(e,r){var t=e.buffer,n=c(c({id:"bufferView-".concat(r)},e),{},{buffer:this.buffers[t]}),a=this.buffers[t].arrayBuffer,i=this.buffers[t].byteOffset||0;return"byteOffset"in e&&(i+=e.byteOffset),n.data=new Uint8Array(a,i,e.byteLength),n}},{key:"_resolveCamera",value:function(e,r){return e.id=e.id||"camera-".concat(r),e.perspective,e.orthographic,e}}]),e}();return postProcessGltf}var parseGlb={},hasRequiredParseGlb,hasRequiredParseGltf;function requireParseGlb(){if(hasRequiredParseGlb)return parseGlb;hasRequiredParseGlb=1,Object.defineProperty(parseGlb,"__esModule",{value:!0}),parseGlb.default=function(r,d){var p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,h=new DataView(d),y=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(String.fromCharCode(e.getUint8(r+0))).concat(String.fromCharCode(e.getUint8(r+1))).concat(String.fromCharCode(e.getUint8(r+2))).concat(String.fromCharCode(e.getUint8(r+3)))}(h,p+0),v=h.getUint32(p+4,c),m=h.getUint32(p+8,c);switch(Object.assign(r,{header:{byteOffset:p,byteLength:m,hasBinChunk:!1},type:y,version:v,json:{},binChunks:[]}),p+=t,r.version){case 1:return function(r,a,i){(0,e.assert)(r.header.byteLength>t+n);var o=a.getUint32(i+0,c),u=a.getUint32(i+4,c);return i+=n,(0,e.assert)(u===s),l(r,a,i,o),i+=o,i+=f(r,a,i,r.header.byteLength),i}(r,h,p);case 2:return function(r,s,d,p){return(0,e.assert)(r.header.byteLength>t+n),function(r,t,s,d){for(;s+8<=r.header.byteLength;){var p=t.getUint32(s+0,c),h=t.getUint32(s+4,c);switch(s+=n,h){case a:l(r,t,s,p);break;case i:f(r,t,s,p);break;case o:d.strict||l(r,t,s,p);break;case u:d.strict||f(r,t,s,p)}s+=(0,e.padToNBytes)(p,4)}}(r,s,d,p),d+r.header.byteLength}(r,h,p,{});default:throw new Error("Invalid GLB version ".concat(r.version,". Only supports v1 and v2."))}},parseGlb.isGLB=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=new DataView(e),i=n.magic,o=void 0===i?r:i,u=a.getUint32(t,!1);return u===o||u===r};var e=requireEs5$b(),r=1735152710,t=12,n=8,a=1313821514,i=5130562,o=0,u=1,s=0,c=!0;function l(r,t,n,a){var i=new Uint8Array(t.buffer,n,a),o=new TextDecoder("utf8").decode(i);return r.json=JSON.parse(o),(0,e.padToNBytes)(a,4)}function f(r,t,n,a){return r.header.hasBinChunk=!0,r.binChunks.push({byteOffset:n,byteLength:a,arrayBuffer:t.buffer}),(0,e.padToNBytes)(a,4)}return parseGlb}function requireParseGltf(){if(hasRequiredParseGltf)return parseGltf;hasRequiredParseGltf=1;var e=interopRequireDefaultExports,r=require_typeof$3();Object.defineProperty(parseGltf,"__esModule",{value:!0}),parseGltf.isGLTF=function(e,r){return(0,p.isGLB)(e,0,r)},parseGltf.parseGLTF=function(e,r){return m.apply(this,arguments)};var t=e(requireRegenerator()),n=e(requireAsyncToGenerator()),a=requireEs5$7(),i=requireEs5$8(),o=requireEs5$b(),u=requireAssert$3(),s=requireResolveUrl(),c=requireGetTypedArray(),l=requireGltfExtensions(),f=requireNormalizeGltfV1(),d=requirePostProcessGltf(),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(requireParseGlb());function h(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(h=function(e){return e?t:r})(e)}function y(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return v(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return v(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}function v(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function m(){return m=(0,n.default)(t.default.mark((function e(r,n){var a,i,o,u,s,c,p,h,y,v=arguments;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=v.length>4?v[4]:void 0,b(r,n,v.length>2&&void 0!==v[2]?v[2]:0,s=v.length>3?v[3]:void 0),(0,f.normalizeGLTFV1)(r,{normalize:null==s||null===(a=s.gltf)||void 0===a?void 0:a.normalize}),(0,l.preprocessExtensions)(r,s,c),p=[],null==s||null===(i=s.gltf)||void 0===i||!i.loadBuffers||!r.json.buffers){e.next=10;break}return e.next=10,g(r,s,c);case 10:return null!=s&&null!==(o=s.gltf)&&void 0!==o&&o.loadImages&&(h=A(r,s,c),p.push(h)),y=(0,l.decodeExtensions)(r,s,c),p.push(y),e.next=15,Promise.all(p);case 15:return e.abrupt("return",null!=s&&null!==(u=s.gltf)&&void 0!==u&&u.postProcess?(0,d.postProcessGLTF)(r,s):r);case 16:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function b(e,r,t,n){(n.uri&&(e.baseUri=n.uri),r instanceof ArrayBuffer&&!(0,p.isGLB)(r,t,n))&&(r=(new TextDecoder).decode(r));if("string"==typeof r)e.json=(0,o.parseJSON)(r);else if(r instanceof ArrayBuffer){var a={};t=(0,p.default)(a,r,t,n.glb),(0,u.assert)("glTF"===a.type,"Invalid GLB magic string ".concat(a.type)),e._glb=a,e.json=a.json}else(0,u.assert)(!1,"GLTF: must be ArrayBuffer or string");var i=e.json.buffers||[];if(e.buffers=new Array(i.length).fill(null),e._glb&&e._glb.header.hasBinChunk){var s=e._glb.binChunks;e.buffers[0]={arrayBuffer:s[0].arrayBuffer,byteOffset:s[0].byteOffset,byteLength:s[0].byteLength}}var c=e.json.images||[];e.images=new Array(c.length).fill({})}function g(e,r,t){return _.apply(this,arguments)}function _(){return(_=(0,n.default)(t.default.mark((function e(r,n,a){var i,o,c,l,f,d,p,h,y,v,m;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r.json.buffers||[],o=0;case 2:if(!(o<i.length)){e.next=22;break}if(!(c=i[o]).uri){e.next=18;break}return h=a.fetch,(0,u.assert)(h),y=(0,s.resolveUrl)(c.uri,n),e.next=10,null==a||null===(l=a.fetch)||void 0===l?void 0:l.call(a,y);case 10:return v=e.sent,e.next=13,null===(f=v)||void 0===f||null===(d=(p=f).arrayBuffer)||void 0===d?void 0:d.call(p);case 13:m=e.sent,r.buffers[o]={arrayBuffer:m,byteOffset:0,byteLength:m.byteLength},delete c.uri,e.next=19;break;case 18:null===r.buffers[o]&&(r.buffers[o]={arrayBuffer:new ArrayBuffer(c.byteLength),byteOffset:0,byteLength:c.byteLength});case 19:++o,e.next=2;break;case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,r,t){return T.apply(this,arguments)}function T(){return(T=(0,n.default)(t.default.mark((function e(r,n,a){var i,o,u,s,c,l;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=O(r),o=r.json.images||[],u=[],s=y(i);try{for(s.s();!(c=s.n()).done;)l=c.value,u.push(R(r,o[l],l,n,a))}catch(e){s.e(e)}finally{s.f()}return e.next=7,Promise.all(u);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){var r,t=new Set,n=y(e.json.textures||[]);try{for(n.s();!(r=n.n()).done;){var a=r.value;void 0!==a.source&&t.add(a.source)}}catch(e){n.e(e)}finally{n.f()}return Array.from(t).sort()}function R(e,r,t,n,a){return E.apply(this,arguments)}function E(){return E=(0,n.default)(t.default.mark((function e(r,n,l,f,d){var p,h,y,v,m,b,g;return t.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=d.fetch,h=d.parse,!n.uri||n.hasOwnProperty("bufferView")){e.next=10;break}return v=(0,s.resolveUrl)(n.uri,f),e.next=5,p(v);case 5:return m=e.sent,e.next=8,m.arrayBuffer();case 8:y=e.sent,n.bufferView={data:y};case 10:return Number.isFinite(n.bufferView)&&(b=(0,c.getTypedArrayForBufferView)(r.json,r.buffers,n.bufferView),y=(0,o.sliceArrayBuffer)(b.buffer,b.byteOffset,b.byteLength)),(0,u.assert)(y,"glTF image has no data"),e.next=14,h(y,[i.ImageLoader,a.BasisLoader],{mimeType:n.mimeType,basis:f.basis||{format:(0,a.selectSupportedBasisFormat)()}},d);case 14:(g=e.sent)&&g[0]&&(g={compressed:!0,mipmaps:!1,width:g[0].width,height:g[0].height,data:g[0]}),r.images=r.images||[],r.images[l]=g;case 18:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}return parseGltf}var _interopRequireDefault$7=interopRequireDefaultExports;Object.defineProperty(gltfLoader,"__esModule",{value:!0}),gltfLoader.GLTFLoader=void 0,gltfLoader.parse=parse$2;var _regenerator$3=_interopRequireDefault$7(requireRegenerator()),_defineProperty2$2=_interopRequireDefault$7(requireDefineProperty$3()),_asyncToGenerator2$3=_interopRequireDefault$7(requireAsyncToGenerator()),_version$6=version$4,_parseGltf=requireParseGltf();function ownKeys$1(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread$1(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys$1(Object(t),!0).forEach((function(r){(0,_defineProperty2$2.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys$1(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var GLTFLoader={name:"glTF",id:"gltf",module:"gltf",version:_version$6.VERSION,extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:parse$2,options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function parse$2(e){return _parse$2.apply(this,arguments)}function _parse$2(){return _parse$2=(0,_asyncToGenerator2$3.default)(_regenerator$3.default.mark((function e(r){var t,n,a,i,o,u=arguments;return _regenerator$3.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>1&&void 0!==u[1]?u[1]:{},n=u.length>2?u[2]:void 0,(t=_objectSpread$1(_objectSpread$1({},GLTFLoader.options),t)).gltf=_objectSpread$1(_objectSpread$1({},GLTFLoader.options.gltf),t.gltf),a=t.byteOffset,i=void 0===a?0:a,o={},e.next=8,(0,_parseGltf.parseGLTF)(o,r,i,t,n);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)}))),_parse$2.apply(this,arguments)}gltfLoader.GLTFLoader=GLTFLoader;var gltfWriter={},encodeGltf={},encodeGlb={},hasRequiredEncodeGlb;function requireEncodeGlb(){if(hasRequiredEncodeGlb)return encodeGlb;hasRequiredEncodeGlb=1,Object.defineProperty(encodeGlb,"__esModule",{value:!0}),encodeGlb.default=function(i,o){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=i.magic,c=void 0===s?r:s,l=i.version,f=void 0===l?2:l,d=i.json,p=void 0===d?{}:d,h=i.binary,y=u;o&&(o.setUint32(u+0,c,a),o.setUint32(u+4,f,a),o.setUint32(u+8,0,a));var v=u+8,m=u+=12;o&&(o.setUint32(u+0,0,a),o.setUint32(u+4,t,a));u+=8;var b=JSON.stringify(p);if(u=(0,e.copyPaddedStringToDataView)(o,u,b,4),o){var g=u-m-8;o.setUint32(m+0,g,a)}if(h){var _=u;if(o&&(o.setUint32(u+0,0,a),o.setUint32(u+4,n,a)),u+=8,u=(0,e.copyPaddedArrayBufferToDataView)(o,u,h,4),o){var A=u-_-8;o.setUint32(_+0,A,a)}}if(o){var T=u-y;o.setUint32(v,T,a)}return u};var e=requireEs5$b(),r=1179937895,t=1313821514,n=5130562,a=!0;return encodeGlb}var _interopRequireDefault$6=interopRequireDefaultExports;Object.defineProperty(encodeGltf,"__esModule",{value:!0}),encodeGltf.encodeGLTFSync=encodeGLTFSync;var _encodeGlb$1=_interopRequireDefault$6(requireEncodeGlb());function encodeGLTFSync(e,r,t,n){return convertBuffersToBase64(e),(0,_encodeGlb$1.default)(e,r,t,n)}function convertBuffersToBase64(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).firstBuffer,t=void 0===r?0:r;if(e.buffers&&e.buffers.length>t)throw new Error("encodeGLTF: multiple buffers not yet implemented")}Object.defineProperty(gltfWriter,"__esModule",{value:!0}),gltfWriter._TypecheckGLBLoader=gltfWriter.GLTFWriter=void 0;var _version$5=version$4,_encodeGltf=encodeGltf,GLTFWriter={name:"glTF",id:"gltf",module:"gltf",version:_version$5.VERSION,extensions:["glb"],mimeTypes:["model/gltf-binary"],binary:!0,encodeSync:encodeSync$2,options:{gltf:{}}};function encodeSync$2(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.byteOffset,n=void 0===t?0:t,a=(0,_encodeGltf.encodeGLTFSync)(e,null,n,r),i=new ArrayBuffer(a),o=new DataView(i);return(0,_encodeGltf.encodeGLTFSync)(e,o,n,r),i}gltfWriter.GLTFWriter=GLTFWriter;var _TypecheckGLBLoader$2=GLTFWriter;gltfWriter._TypecheckGLBLoader=_TypecheckGLBLoader$2;var glbLoader={},_interopRequireDefault$5=interopRequireDefaultExports;Object.defineProperty(glbLoader,"__esModule",{value:!0}),glbLoader._TypecheckGLBLoader=glbLoader.GLBLoader=void 0;var _regenerator$2=_interopRequireDefault$5(requireRegenerator()),_asyncToGenerator2$2=_interopRequireDefault$5(requireAsyncToGenerator()),_version$4=version$4,_parseGlb=_interopRequireDefault$5(requireParseGlb()),GLBLoader={name:"GLB",id:"glb",module:"gltf",version:_version$4.VERSION,extensions:["glb"],mimeTypes:["model/gltf-binary"],binary:!0,parse:parse$1,parseSync:parseSync,options:{glb:{strict:!1}}};function parse$1(e,r){return _parse$1.apply(this,arguments)}function _parse$1(){return(_parse$1=(0,_asyncToGenerator2$2.default)(_regenerator$2.default.mark((function e(r,t){return _regenerator$2.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",parseSync(r,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function parseSync(e,r){var t=(r||{}).byteOffset,n=void 0===t?0:t,a={};return(0,_parseGlb.default)(a,e,n,null==r?void 0:r.glb),a}glbLoader.GLBLoader=GLBLoader;var _TypecheckGLBLoader$1=GLBLoader;glbLoader._TypecheckGLBLoader=_TypecheckGLBLoader$1;var glbWriter={},_interopRequireDefault$4=interopRequireDefaultExports;Object.defineProperty(glbWriter,"__esModule",{value:!0}),glbWriter._TypecheckGLBLoader=glbWriter.GLBWriter=void 0;var _version$3=version$4,_encodeGlb=_interopRequireDefault$4(requireEncodeGlb()),GLBWriter={name:"GLB",id:"glb",module:"gltf",version:_version$3.VERSION,extensions:["glb"],mimeTypes:["model/gltf-binary"],binary:!0,encodeSync:encodeSync$1,options:{glb:{}}};function encodeSync$1(e,r){var t=r.byteOffset,n=void 0===t?0:t,a=(0,_encodeGlb.default)(e,null,n,r),i=new ArrayBuffer(a),o=new DataView(i);return(0,_encodeGlb.default)(e,o,n,r),i}glbWriter.GLBWriter=GLBWriter;var _TypecheckGLBLoader=GLBWriter;glbWriter._TypecheckGLBLoader=_TypecheckGLBLoader,function(e){var r=interopRequireDefaultExports;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GLBLoader",{enumerable:!0,get:function(){return a.GLBLoader}}),Object.defineProperty(e,"GLBWriter",{enumerable:!0,get:function(){return i.GLBWriter}}),Object.defineProperty(e,"GLTFLoader",{enumerable:!0,get:function(){return t.GLTFLoader}}),Object.defineProperty(e,"GLTFScenegraph",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"GLTFWriter",{enumerable:!0,get:function(){return n.GLTFWriter}}),Object.defineProperty(e,"postProcessGLTF",{enumerable:!0,get:function(){return u.postProcessGLTF}});var t=gltfLoader,n=gltfWriter,a=glbLoader,i=glbWriter,o=r(requireGltfScenegraph()),u=requirePostProcessGltf()}(es5$a);var es5$4={},tiles3dLoader={},es5$3={},tileset3d={},es5$2={},interopRequireDefault$1={exports:{}},hasRequiredInteropRequireDefault$1;function requireInteropRequireDefault$1(){return hasRequiredInteropRequireDefault$1||(hasRequiredInteropRequireDefault$1=1,function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}(interopRequireDefault$1)),interopRequireDefault$1.exports}var ellipsoid={},_typeof$1={exports:{}},hasRequired_typeof$1;function require_typeof$1(){return hasRequired_typeof$1||(hasRequired_typeof$1=1,function(e){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(_typeof$1)),_typeof$1.exports}var slicedToArray={exports:{}},arrayWithHoles={exports:{}},hasRequiredArrayWithHoles;function requireArrayWithHoles(){return hasRequiredArrayWithHoles||(hasRequiredArrayWithHoles=1,function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports}(arrayWithHoles)),arrayWithHoles.exports}var iterableToArrayLimit={exports:{}},hasRequiredIterableToArrayLimit;function requireIterableToArrayLimit(){return hasRequiredIterableToArrayLimit||(hasRequiredIterableToArrayLimit=1,function(e){e.exports=function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,i,o,u=[],s=!0,c=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;s=!1}else for(;!(s=(n=i.call(t)).done)&&(u.push(n.value),u.length!==r);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw a}}return u}},e.exports.__esModule=!0,e.exports.default=e.exports}(iterableToArrayLimit)),iterableToArrayLimit.exports}var unsupportedIterableToArray$1={exports:{}},arrayLikeToArray$1={exports:{}},hasRequiredArrayLikeToArray$1,hasRequiredUnsupportedIterableToArray$1;function requireArrayLikeToArray$1(){return hasRequiredArrayLikeToArray$1||(hasRequiredArrayLikeToArray$1=1,function(e){e.exports=function(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n},e.exports.__esModule=!0,e.exports.default=e.exports}(arrayLikeToArray$1)),arrayLikeToArray$1.exports}function requireUnsupportedIterableToArray$1(){return hasRequiredUnsupportedIterableToArray$1||(hasRequiredUnsupportedIterableToArray$1=1,function(e){var r=requireArrayLikeToArray$1();e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}(unsupportedIterableToArray$1)),unsupportedIterableToArray$1.exports}var nonIterableRest={exports:{}},hasRequiredNonIterableRest,hasRequiredSlicedToArray;function requireNonIterableRest(){return hasRequiredNonIterableRest||(hasRequiredNonIterableRest=1,function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}(nonIterableRest)),nonIterableRest.exports}function requireSlicedToArray(){return hasRequiredSlicedToArray||(hasRequiredSlicedToArray=1,function(e){var r=requireArrayWithHoles(),t=requireIterableToArrayLimit(),n=requireUnsupportedIterableToArray$1(),a=requireNonIterableRest();e.exports=function(e,i){return r(e)||t(e,i)||n(e,i)||a()},e.exports.__esModule=!0,e.exports.default=e.exports}(slicedToArray)),slicedToArray.exports}var classCallCheck$1={exports:{}},hasRequiredClassCallCheck$1;function requireClassCallCheck$1(){return hasRequiredClassCallCheck$1||(hasRequiredClassCallCheck$1=1,function(e){e.exports=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}(classCallCheck$1)),classCallCheck$1.exports}var createClass$1={exports:{}},toPropertyKey$1={exports:{}},toPrimitive$1={exports:{}},hasRequiredToPrimitive$1,hasRequiredToPropertyKey$1,hasRequiredCreateClass$1;function requireToPrimitive$1(){return hasRequiredToPrimitive$1||(hasRequiredToPrimitive$1=1,function(e){var r=require_typeof$1().default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(toPrimitive$1)),toPrimitive$1.exports}function requireToPropertyKey$1(){return hasRequiredToPropertyKey$1||(hasRequiredToPropertyKey$1=1,function(e){var r=require_typeof$1().default,t=requireToPrimitive$1();e.exports=function(e){var n=t(e,"string");return"symbol"===r(n)?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}(toPropertyKey$1)),toPropertyKey$1.exports}function requireCreateClass$1(){return hasRequiredCreateClass$1||(hasRequiredCreateClass$1=1,function(e){var r=requireToPropertyKey$1();function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,r(a.key),a)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}(createClass$1)),createClass$1.exports}var defineProperty$1={exports:{}},hasRequiredDefineProperty$1;function requireDefineProperty$1(){return hasRequiredDefineProperty$1||(hasRequiredDefineProperty$1=1,function(e){var r=requireToPropertyKey$1();e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports}(defineProperty$1)),defineProperty$1.exports}var constants$4={},hasRequiredConstants$4;function requireConstants$4(){if(hasRequiredConstants$4)return constants$4;hasRequiredConstants$4=1,Object.defineProperty(constants$4,"__esModule",{value:!0}),constants$4.WGS84_CONSTANTS=constants$4.WGS84_RADIUS_Z=constants$4.WGS84_RADIUS_Y=constants$4.WGS84_RADIUS_X=void 0;var e=6378137;constants$4.WGS84_RADIUS_X=e;var r=6378137;constants$4.WGS84_RADIUS_Y=r;var t=6356752.314245179;constants$4.WGS84_RADIUS_Z=t;var n={radii:[e,r,t],radiiSquared:[40680631590769,40680631590769,40408299984661.445],oneOverRadii:[1/e,1/r,1/t],oneOverRadiiSquared:[1/40680631590769,1/40680631590769,1/40408299984661.445],maximumRadius:Math.max(e,r,t),centerToleranceSquared:.1};return constants$4.WGS84_CONSTANTS=n,constants$4}var typeUtils={},hasRequiredTypeUtils;function requireTypeUtils(){if(hasRequiredTypeUtils)return typeUtils;hasRequiredTypeUtils=1,Object.defineProperty(typeUtils,"__esModule",{value:!0}),typeUtils.fromCartographic=a,typeUtils.fromCartographicToRadians=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return a(r,n,e.config._cartographicRadians?t:e.toRadians)},typeUtils.fromCartographicToDegrees=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return a(r,n,e.config._cartographicRadians?e.toDegrees:t)},typeUtils.toCartographic=i,typeUtils.toCartographicFromRadians=function(r,n){return i(r,n,e.config._cartographicRadians?t:e.toDegrees)},typeUtils.toCartographicFromDegrees=function(r,n){return i(r,n,e.config._cartographicRadians?e.toRadians:t)},typeUtils.isWGS84=function(e){if(!e)return!1;n.from(e);var t=r.WGS84_CONSTANTS.oneOverRadiiSquared,a=r.WGS84_CONSTANTS.centerToleranceSquared,i=e[0]*e[0]*t[0],o=e[1]*e[1]*t[1],u=e[2]*e[2]*t[2];return Math.abs(i+o+u-1)<a};var e=requireEs5$4(),r=requireConstants$4();function t(e){return e}var n=new e.Vector3;function a(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;return"longitude"in e?(r[0]=n(e.longitude),r[1]=n(e.latitude),r[2]=e.height):"x"in e?(r[0]=n(e.x),r[1]=n(e.y),r[2]=e.z):(r[0]=n(e[0]),r[1]=n(e[1]),r[2]=e[2]),r}function i(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;return"longitude"in r?(r.longitude=n(e[0]),r.latitude=n(e[1]),r.height=e[2]):"x"in r?(r.x=n(e[0]),r.y=n(e[1]),r.z=e[2]):(r[0]=n(e[0]),r[1]=n(e[1]),r[2]=e[2]),r}return typeUtils}var scaleToGeodeticSurface={},hasRequiredScaleToGeodeticSurface;function requireScaleToGeodeticSurface(){if(hasRequiredScaleToGeodeticSurface)return scaleToGeodeticSurface;hasRequiredScaleToGeodeticSurface=1,Object.defineProperty(scaleToGeodeticSurface,"__esModule",{value:!0}),scaleToGeodeticSurface.default=function(a,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],u=i.oneOverRadii,s=i.oneOverRadiiSquared,c=i.centerToleranceSquared;r.from(a);var l=r.x,f=r.y,d=r.z,p=u.x,h=u.y,y=u.z,v=l*l*p*p,m=f*f*h*h,b=d*d*y*y,g=v+m+b,_=Math.sqrt(1/g);if(!Number.isFinite(_))return;var A=t;if(A.copy(a).scale(_),g<c)return A.to(o);var T=s.x,O=s.y,R=s.z,E=n;E.set(A.x*T*2,A.y*O*2,A.z*R*2);var S,q,C,B,x=(1-_)*r.len()/(.5*E.len()),P=0;do{var w=(S=1/(1+(x-=P)*T))*S,M=(q=1/(1+x*O))*q,I=(C=1/(1+x*R))*C;P=(B=v*w+m*M+b*I-1)/(-2*(v*(w*S)*T+m*(M*q)*O+b*(I*C)*R))}while(Math.abs(B)>e._MathUtils.EPSILON12);return r.scale([S,q,C]).to(o)};var e=requireEs5$4(),r=new e.Vector3,t=new e.Vector3,n=new e.Vector3;return scaleToGeodeticSurface}var ellipsoidTransform={},hasRequiredEllipsoidTransform,hasRequiredEllipsoid,hasRequiredEs5$3;function requireEllipsoidTransform(){if(hasRequiredEllipsoidTransform)return ellipsoidTransform;hasRequiredEllipsoidTransform=1,Object.defineProperty(ellipsoidTransform,"__esModule",{value:!0}),ellipsoidTransform.default=function(c,l,f,d,p,h){var y,v,m,b=n[l]&&n[l][f];(0,e.assert)(b&&(!d||d===b));var g=t.copy(p);if((0,e.equals)(g.x,0,r)&&(0,e.equals)(g.y,0,r)){var _=Math.sign(g.z);y=o.fromArray(a[l]),"east"!==l&&"west"!==l&&y.scale(_),v=u.fromArray(a[f]),"east"!==f&&"west"!==f&&v.scale(_),m=s.fromArray(a[d]),"east"!==d&&"west"!==d&&m.scale(_)}else{var A=i.up,T=i.east,O=i.north;T.set(-g.y,g.x,0).normalize(),c.geodeticSurfaceNormal(g,A),O.copy(A).cross(T);var R=i.down,E=i.west,S=i.south;R.copy(A).scale(-1),E.copy(T).scale(-1),S.copy(O).scale(-1),y=i[l],v=i[f],m=i[d]}return h[0]=y.x,h[1]=y.y,h[2]=y.z,h[3]=0,h[4]=v.x,h[5]=v.y,h[6]=v.z,h[7]=0,h[8]=m.x,h[9]=m.y,h[10]=m.z,h[11]=0,h[12]=g.x,h[13]=g.y,h[14]=g.z,h[15]=1,h};var e=requireEs5$4(),r=1e-14,t=new e.Vector3,n={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},a={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},i={east:new e.Vector3,north:new e.Vector3,up:new e.Vector3,west:new e.Vector3,south:new e.Vector3,down:new e.Vector3},o=new e.Vector3,u=new e.Vector3,s=new e.Vector3;return ellipsoidTransform}function requireEllipsoid(){if(hasRequiredEllipsoid)return ellipsoid;hasRequiredEllipsoid=1;var e=requireInteropRequireDefault$1(),r=require_typeof$1();Object.defineProperty(ellipsoid,"__esModule",{value:!0}),ellipsoid.default=void 0;var t=e(requireSlicedToArray()),n=e(requireClassCallCheck$1()),a=e(requireCreateClass$1()),i=e(requireDefineProperty$1()),o=requireEs5$4(),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(requireVec3()),s=requireConstants$4(),c=requireTypeUtils(),l=e(requireScaleToGeodeticSurface()),f=e(requireEllipsoidTransform());function d(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:r})(e)}var p=new o.Vector3,h=new o.Vector3,y=new o.Vector3,v=new o.Vector3,m=new o.Vector3,b=new o.Vector3,g=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,n.default)(this,e),(0,i.default)(this,"radii",void 0),(0,i.default)(this,"radiiSquared",void 0),(0,i.default)(this,"radiiToTheFourth",void 0),(0,i.default)(this,"oneOverRadii",void 0),(0,i.default)(this,"oneOverRadiiSquared",void 0),(0,i.default)(this,"minimumRadius",void 0),(0,i.default)(this,"maximumRadius",void 0),(0,i.default)(this,"centerToleranceSquared",o._MathUtils.EPSILON1),(0,i.default)(this,"squaredXOverSquaredZ",void 0),(0,o.assert)(r>=0),(0,o.assert)(t>=0),(0,o.assert)(a>=0),this.radii=new o.Vector3(r,t,a),this.radiiSquared=new o.Vector3(r*r,t*t,a*a),this.radiiToTheFourth=new o.Vector3(r*r*r*r,t*t*t*t,a*a*a*a),this.oneOverRadii=new o.Vector3(0===r?0:1/r,0===t?0:1/t,0===a?0:1/a),this.oneOverRadiiSquared=new o.Vector3(0===r?0:1/(r*r),0===t?0:1/(t*t),0===a?0:1/(a*a)),this.minimumRadius=Math.min(r,t,a),this.maximumRadius=Math.max(r,t,a),0!==this.radiiSquared.z&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}return(0,a.default)(e,[{key:"equals",value:function(e){return this===e||Boolean(e&&this.radii.equals(e.radii))}},{key:"toString",value:function(){return this.radii.toString()}},{key:"cartographicToCartesian",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=h,a=y,i=(0,t.default)(e,3)[2];this.geodeticSurfaceNormalCartographic(e,n),a.copy(this.radiiSquared).scale(n);var o=Math.sqrt(n.dot(a));return a.scale(1/o),n.scale(i),a.add(n),a.to(r)}},{key:"cartesianToCartographic",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];b.from(e);var t=this.scaleToGeodeticSurface(b,v);if(t){var n=this.geodeticSurfaceNormal(t,h),a=m;a.copy(b).subtract(t);var i=Math.atan2(n.y,n.x),o=Math.asin(n.z),s=Math.sign(u.dot(a,b))*u.length(a);return(0,c.toCartographicFromRadians)([i,o,s],r)}}},{key:"eastNorthUpToFixedFrame",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.Matrix4;return(0,f.default)(this,"east","north","up",e,r)}},{key:"localFrameToFixedFrame",value:function(e,r,t,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new o.Matrix4;return(0,f.default)(this,e,r,t,n,a)}},{key:"geocentricSurfaceNormal",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return p.from(e).normalize().to(r)}},{key:"geodeticSurfaceNormalCartographic",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],t=(0,c.fromCartographicToRadians)(e),n=t[0],a=t[1],i=Math.cos(a);return p.set(i*Math.cos(n),i*Math.sin(n),Math.sin(a)).normalize(),p.to(r)}},{key:"geodeticSurfaceNormal",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return p.from(e).scale(this.oneOverRadiiSquared).normalize().to(r)}},{key:"scaleToGeodeticSurface",value:function(e,r){return(0,l.default)(e,this,r)}},{key:"scaleToGeocentricSurface",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];v.from(e);var t=v.x,n=v.y,a=v.z,i=this.oneOverRadiiSquared,o=1/Math.sqrt(t*t*i.x+n*n*i.y+a*a*i.z);return v.multiplyScalar(o).to(r)}},{key:"transformPositionToScaledSpace",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return v.from(e).scale(this.oneOverRadii).to(r)}},{key:"transformPositionFromScaledSpace",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return v.from(e).scale(this.radii).to(r)}},{key:"getSurfaceNormalIntersectionWithZAxis",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0];(0,o.assert)((0,o.equals)(this.radii.x,this.radii.y,o._MathUtils.EPSILON15)),(0,o.assert)(this.radii.z>0),v.from(e);var n=v.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(n)>=this.radii.z-r))return v.set(0,0,n).to(t)}}]),e}();return ellipsoid.default=g,(0,i.default)(g,"WGS84",new g(s.WGS84_RADIUS_X,s.WGS84_RADIUS_Y,s.WGS84_RADIUS_Z)),ellipsoid}function requireEs5$3(){return hasRequiredEs5$3||(hasRequiredEs5$3=1,function(e){var r=requireInteropRequireDefault$1();Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Ellipsoid",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"isWGS84",{enumerable:!0,get:function(){return n.isWGS84}});var t=r(requireEllipsoid()),n=requireTypeUtils()}(es5$2)),es5$2}var tilesetCache={},doublyLinkedList={},doublyLinkedListNode={},hasRequiredDoublyLinkedListNode,hasRequiredDoublyLinkedList,hasRequiredTilesetCache;function requireDoublyLinkedListNode(){if(hasRequiredDoublyLinkedListNode)return doublyLinkedListNode;hasRequiredDoublyLinkedListNode=1;var e=interopRequireDefaultExports;Object.defineProperty(doublyLinkedListNode,"__esModule",{value:!0}),doublyLinkedListNode.DoublyLinkedListNode=void 0;var r=e(requireCreateClass$3()),t=e(requireClassCallCheck$3()),n=e(requireDefineProperty$3()),a=(0,r.default)((function e(r,a,i){(0,t.default)(this,e),(0,n.default)(this,"item",void 0),(0,n.default)(this,"previous",void 0),(0,n.default)(this,"next",void 0),this.item=r,this.previous=a,this.next=i}));return doublyLinkedListNode.DoublyLinkedListNode=a,doublyLinkedListNode}function requireDoublyLinkedList(){if(hasRequiredDoublyLinkedList)return doublyLinkedList;hasRequiredDoublyLinkedList=1;var e=interopRequireDefaultExports;Object.defineProperty(doublyLinkedList,"__esModule",{value:!0}),doublyLinkedList.DoublyLinkedList=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=e(requireDefineProperty$3()),a=requireDoublyLinkedListNode(),i=function(){function e(){(0,r.default)(this,e),(0,n.default)(this,"head",null),(0,n.default)(this,"tail",null),(0,n.default)(this,"_length",0)}return(0,t.default)(e,[{key:"length",get:function(){return this._length}},{key:"add",value:function(e){var r=new a.DoublyLinkedListNode(e,this.tail,null);return this.tail?(this.tail.next=r,this.tail=r):(this.head=r,this.tail=r),++this._length,r}},{key:"remove",value:function(e){e&&(e.previous&&e.next?(e.previous.next=e.next,e.next.previous=e.previous):e.previous?(e.previous.next=null,this.tail=e.previous):e.next?(e.next.previous=null,this.head=e.next):(this.head=null,this.tail=null),e.next=null,e.previous=null,--this._length)}},{key:"splice",value:function(e,r){e!==r&&(this.remove(r),this._insert(e,r))}},{key:"_insert",value:function(e,r){var t=e.next;e.next=r,this.tail===e?this.tail=r:t.previous=r,r.next=t,r.previous=e,++this._length}}]),e}();return doublyLinkedList.DoublyLinkedList=i,doublyLinkedList}function requireTilesetCache(){if(hasRequiredTilesetCache)return tilesetCache;hasRequiredTilesetCache=1;var e=interopRequireDefaultExports;Object.defineProperty(tilesetCache,"__esModule",{value:!0}),tilesetCache.TilesetCache=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=e(requireDefineProperty$3()),a=requireDoublyLinkedList();function i(e){return null!=e}var o=function(){function e(){(0,r.default)(this,e),(0,n.default)(this,"_list",void 0),(0,n.default)(this,"_sentinel",void 0),(0,n.default)(this,"_trimTiles",void 0),this._list=new a.DoublyLinkedList,this._sentinel=this._list.add("sentinel"),this._trimTiles=!1}return(0,t.default)(e,[{key:"reset",value:function(){this._list.splice(this._list.tail,this._sentinel)}},{key:"touch",value:function(e){var r=e._cacheNode;i(r)&&this._list.splice(this._sentinel,r)}},{key:"add",value:function(e,r,t){i(r._cacheNode)||(r._cacheNode=this._list.add(r),t&&t(e,r))}},{key:"unloadTile",value:function(e,r,t){var n=r._cacheNode;i(n)&&(this._list.remove(n),r._cacheNode=void 0,t&&t(e,r))}},{key:"unloadTiles",value:function(e,r){var t=this._trimTiles;this._trimTiles=!1;for(var n=this._list,a=1024*e.maximumMemoryUsage*1024,i=this._sentinel,o=n.head;o!==i&&(e.gpuMemoryUsageInBytes>a||t);){var u=o.item;o=o.next,this.unloadTile(e,u,r)}}},{key:"trim",value:function(){this._trimTiles=!0}}]),e}();return tilesetCache.TilesetCache=o,tilesetCache}var transformUtils={},hasRequiredTransformUtils;function requireTransformUtils(){if(hasRequiredTransformUtils)return transformUtils;hasRequiredTransformUtils=1,Object.defineProperty(transformUtils,"__esModule",{value:!0}),transformUtils.calculateTransformProps=function(n,a){(0,t.assert)(n),(0,t.assert)(a);var i=a.rtcCenter,o=a.gltfUpAxis,u=n.computedTransform,s=n.boundingVolume.center,c=new r.Matrix4(u);i&&c.translate(i);switch(o){case"Z":break;case"Y":var l=(new r.Matrix4).rotateX(Math.PI/2);c=c.multiplyRight(l);break;case"X":var f=(new r.Matrix4).rotateY(-Math.PI/2);c=c.multiplyRight(f)}a.isQuantized&&c.translate(a.quantizedVolumeOffset).scale(a.quantizedVolumeScale);var d=new r.Vector3(s);a.cartesianModelMatrix=c,a.cartesianOrigin=d;var p=e.Ellipsoid.WGS84.cartesianToCartographic(d,new r.Vector3),h=e.Ellipsoid.WGS84.eastNorthUpToFixedFrame(d).invert();a.cartographicModelMatrix=h.multiplyRight(c),a.cartographicOrigin=p,a.coordinateSystem||(a.modelMatrix=a.cartographicModelMatrix)};var e=requireEs5$3(),r=requireEs5$4(),t=requireEs5$b();return transformUtils}var frameState={},es5$1={},interopRequireDefault={exports:{}},hasRequiredInteropRequireDefault;function requireInteropRequireDefault(){return hasRequiredInteropRequireDefault||(hasRequiredInteropRequireDefault=1,function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}(interopRequireDefault)),interopRequireDefault.exports}var constants$3={},hasRequiredConstants$3;function requireConstants$3(){if(hasRequiredConstants$3)return constants$3;hasRequiredConstants$3=1,Object.defineProperty(constants$3,"__esModule",{value:!0}),constants$3.INTERSECTION=void 0;return constants$3.INTERSECTION={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},constants$3}var axisAlignedBoundingBox={},classCallCheck={exports:{}},hasRequiredClassCallCheck;function requireClassCallCheck(){return hasRequiredClassCallCheck||(hasRequiredClassCallCheck=1,function(e){e.exports=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}(classCallCheck)),classCallCheck.exports}var createClass={exports:{}},toPropertyKey={exports:{}},_typeof={exports:{}},hasRequired_typeof;function require_typeof(){return hasRequired_typeof||(hasRequired_typeof=1,function(e){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(_typeof)),_typeof.exports}var toPrimitive={exports:{}},hasRequiredToPrimitive,hasRequiredToPropertyKey,hasRequiredCreateClass;function requireToPrimitive(){return hasRequiredToPrimitive||(hasRequiredToPrimitive=1,function(e){var r=require_typeof().default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(toPrimitive)),toPrimitive.exports}function requireToPropertyKey(){return hasRequiredToPropertyKey||(hasRequiredToPropertyKey=1,function(e){var r=require_typeof().default,t=requireToPrimitive();e.exports=function(e){var n=t(e,"string");return"symbol"===r(n)?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}(toPropertyKey)),toPropertyKey.exports}function requireCreateClass(){return hasRequiredCreateClass||(hasRequiredCreateClass=1,function(e){var r=requireToPropertyKey();function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,r(a.key),a)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}(createClass)),createClass.exports}var defineProperty={exports:{}},hasRequiredDefineProperty,hasRequiredAxisAlignedBoundingBox;function requireDefineProperty(){return hasRequiredDefineProperty||(hasRequiredDefineProperty=1,function(e){var r=requireToPropertyKey();e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports}(defineProperty)),defineProperty.exports}function requireAxisAlignedBoundingBox(){if(hasRequiredAxisAlignedBoundingBox)return axisAlignedBoundingBox;hasRequiredAxisAlignedBoundingBox=1;var e=requireInteropRequireDefault();Object.defineProperty(axisAlignedBoundingBox,"__esModule",{value:!0}),axisAlignedBoundingBox.default=void 0;var r=e(requireClassCallCheck()),t=e(requireCreateClass()),n=e(requireDefineProperty()),a=requireEs5$4(),i=requireConstants$3(),o=new a.Vector3,u=new a.Vector3,s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],u=arguments.length>2?arguments[2]:void 0;(0,r.default)(this,e),(0,n.default)(this,"center",void 0),(0,n.default)(this,"halfDiagonal",void 0),(0,n.default)(this,"minimum",void 0),(0,n.default)(this,"maximum",void 0),u=u||o.copy(t).add(i).scale(.5),this.center=new a.Vector3(u),this.halfDiagonal=new a.Vector3(i).subtract(this.center),this.minimum=new a.Vector3(t),this.maximum=new a.Vector3(i)}return(0,t.default)(e,[{key:"clone",value:function(){return new e(this.minimum,this.maximum,this.center)}},{key:"equals",value:function(e){return this===e||Boolean(e)&&this.minimum.equals(e.minimum)&&this.maximum.equals(e.maximum)}},{key:"transform",value:function(e){return this.center.transformAsPoint(e),this.halfDiagonal.transform(e),this.minimum.transform(e),this.maximum.transform(e),this}},{key:"intersectPlane",value:function(e){var r=this.halfDiagonal,t=u.from(e.normal),n=r.x*Math.abs(t.x)+r.y*Math.abs(t.y)+r.z*Math.abs(t.z),a=this.center.dot(t)+e.distance;return a-n>0?i.INTERSECTION.INSIDE:a+n<0?i.INTERSECTION.OUTSIDE:i.INTERSECTION.INTERSECTING}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceSquaredTo(e))}},{key:"distanceSquaredTo",value:function(e){var r,t=o.from(e).subtract(this.center),n=this.halfDiagonal,a=0;return(r=Math.abs(t.x)-n.x)>0&&(a+=r*r),(r=Math.abs(t.y)-n.y)>0&&(a+=r*r),(r=Math.abs(t.z)-n.z)>0&&(a+=r*r),a}}]),e}();return axisAlignedBoundingBox.default=s,axisAlignedBoundingBox}var boundingSphere={},hasRequiredBoundingSphere;function requireBoundingSphere(){if(hasRequiredBoundingSphere)return boundingSphere;hasRequiredBoundingSphere=1;var e=requireInteropRequireDefault(),r=require_typeof();Object.defineProperty(boundingSphere,"__esModule",{value:!0}),boundingSphere.default=void 0;var t=e(requireClassCallCheck()),n=e(requireCreateClass()),a=e(requireDefineProperty()),i=requireEs5$4(),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(requireMat4()),u=requireConstants$3();function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}var c=new i.Vector3,l=new i.Vector3,f=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,t.default)(this,e),(0,a.default)(this,"center",void 0),(0,a.default)(this,"radius",void 0),this.radius=-0,this.center=new i.Vector3,this.fromCenterRadius(r,n)}return(0,n.default)(e,[{key:"fromCenterRadius",value:function(e,r){return this.center.from(e),this.radius=r,this}},{key:"fromCornerPoints",value:function(e,r){return r=c.from(r),this.center=(new i.Vector3).from(e).add(r).scale(.5),this.radius=this.center.distance(r),this}},{key:"equals",value:function(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.radius===e.radius}},{key:"clone",value:function(){return new e(this.center,this.radius)}},{key:"union",value:function(e){var r=this.center,t=this.radius,n=e.center,a=e.radius,i=c.copy(n).subtract(r),o=i.magnitude();if(t>=o+a)return this.clone();if(a>=o+t)return e.clone();var u=.5*(t+o+a);return l.copy(i).scale((-t+u)/o).add(r),this.center.copy(l),this.radius=u,this}},{key:"expand",value:function(e){var r=c.from(e).subtract(this.center).magnitude();return r>this.radius&&(this.radius=r),this}},{key:"transform",value:function(e){this.center.transform(e);var r=o.getScaling(c,e);return this.radius=Math.max(r[0],Math.max(r[1],r[2]))*this.radius,this}},{key:"distanceSquaredTo",value:function(e){var r=this.distanceTo(e);return r*r}},{key:"distanceTo",value:function(e){var r=c.from(e).subtract(this.center);return Math.max(0,r.len()-this.radius)}},{key:"intersectPlane",value:function(e){var r=this.center,t=this.radius,n=e.normal.dot(r)+e.distance;return n<-t?u.INTERSECTION.OUTSIDE:n<t?u.INTERSECTION.INTERSECTING:u.INTERSECTION.INSIDE}}]),e}();return boundingSphere.default=f,boundingSphere}var orientedBoundingBox={},toConsumableArray={exports:{}},arrayWithoutHoles={exports:{}},arrayLikeToArray={exports:{}},hasRequiredArrayLikeToArray,hasRequiredArrayWithoutHoles;function requireArrayLikeToArray(){return hasRequiredArrayLikeToArray||(hasRequiredArrayLikeToArray=1,function(e){e.exports=function(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n},e.exports.__esModule=!0,e.exports.default=e.exports}(arrayLikeToArray)),arrayLikeToArray.exports}function requireArrayWithoutHoles(){return hasRequiredArrayWithoutHoles||(hasRequiredArrayWithoutHoles=1,function(e){var r=requireArrayLikeToArray();e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(arrayWithoutHoles)),arrayWithoutHoles.exports}var iterableToArray={exports:{}},hasRequiredIterableToArray;function requireIterableToArray(){return hasRequiredIterableToArray||(hasRequiredIterableToArray=1,function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(iterableToArray)),iterableToArray.exports}var unsupportedIterableToArray={exports:{}},hasRequiredUnsupportedIterableToArray;function requireUnsupportedIterableToArray(){return hasRequiredUnsupportedIterableToArray||(hasRequiredUnsupportedIterableToArray=1,function(e){var r=requireArrayLikeToArray();e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}(unsupportedIterableToArray)),unsupportedIterableToArray.exports}var nonIterableSpread={exports:{}},hasRequiredNonIterableSpread,hasRequiredToConsumableArray,hasRequiredOrientedBoundingBox;function requireNonIterableSpread(){return hasRequiredNonIterableSpread||(hasRequiredNonIterableSpread=1,function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}(nonIterableSpread)),nonIterableSpread.exports}function requireToConsumableArray(){return hasRequiredToConsumableArray||(hasRequiredToConsumableArray=1,function(e){var r=requireArrayWithoutHoles(),t=requireIterableToArray(),n=requireUnsupportedIterableToArray(),a=requireNonIterableSpread();e.exports=function(e){return r(e)||t(e)||n(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports}(toConsumableArray)),toConsumableArray.exports}function requireOrientedBoundingBox(){if(hasRequiredOrientedBoundingBox)return orientedBoundingBox;hasRequiredOrientedBoundingBox=1;var e=requireInteropRequireDefault();Object.defineProperty(orientedBoundingBox,"__esModule",{value:!0}),orientedBoundingBox.default=void 0;var r=e(requireToConsumableArray()),t=e(requireClassCallCheck()),n=e(requireCreateClass()),a=e(requireDefineProperty()),i=requireEs5$4(),o=e(requireBoundingSphere()),u=requireConstants$3(),s=new i.Vector3,c=new i.Vector3,l=new i.Vector3,f=new i.Vector3,d=new i.Vector3,p=new i.Vector3,h=new i.Vector3,y=0,v=1,m=2,b=3,g=4,_=5,A=6,T=7,O=8,R=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0,0,0,0,0,0];(0,t.default)(this,e),(0,a.default)(this,"center",void 0),(0,a.default)(this,"halfAxes",void 0),this.center=(new i.Vector3).from(r),this.halfAxes=new i.Matrix3(n)}return(0,n.default)(e,[{key:"halfSize",get:function(){var e=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),t=this.halfAxes.getColumn(2);return[new i.Vector3(e).len(),new i.Vector3(r).len(),new i.Vector3(t).len()]}},{key:"quaternion",get:function(){var e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),a=new i.Vector3(e).normalize(),o=new i.Vector3(t).normalize(),u=new i.Vector3(n).normalize();return(new i.Quaternion).fromMatrix3(new i.Matrix3([].concat((0,r.default)(a),(0,r.default)(o),(0,r.default)(u))))}},{key:"fromCenterHalfSizeQuaternion",value:function(e,r,t){var n=new i.Quaternion(t),a=(new i.Matrix3).fromQuaternion(n);return a[0]=a[0]*r[0],a[1]=a[1]*r[0],a[2]=a[2]*r[0],a[3]=a[3]*r[1],a[4]=a[4]*r[1],a[5]=a[5]*r[1],a[6]=a[6]*r[2],a[7]=a[7]*r[2],a[8]=a[8]*r[2],this.center=(new i.Vector3).from(e),this.halfAxes=a,this}},{key:"clone",value:function(){return new e(this.center,this.halfAxes)}},{key:"equals",value:function(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}},{key:"getBoundingSphere",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.default,r=this.halfAxes,t=r.getColumn(0,l),n=r.getColumn(1,f),a=r.getColumn(2,d),i=s.copy(t).add(n).add(a);return e.center.copy(this.center),e.radius=i.magnitude(),e}},{key:"intersectPlane",value:function(e){var r=this.center,t=e.normal,n=this.halfAxes,a=t.x,i=t.y,o=t.z,s=Math.abs(a*n[y]+i*n[v]+o*n[m])+Math.abs(a*n[b]+i*n[g]+o*n[_])+Math.abs(a*n[A]+i*n[T]+o*n[O]),c=t.dot(r)+e.distance;return c<=-s?u.INTERSECTION.OUTSIDE:c>=s?u.INTERSECTION.INSIDE:u.INTERSECTION.INTERSECTING}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceSquaredTo(e))}},{key:"distanceSquaredTo",value:function(e){var r=c.from(e).subtract(this.center),t=this.halfAxes,n=t.getColumn(0,l),a=t.getColumn(1,f),i=t.getColumn(2,d),o=n.magnitude(),u=a.magnitude(),s=i.magnitude();n.normalize(),a.normalize(),i.normalize();var p,h=0;return(p=Math.abs(r.dot(n))-o)>0&&(h+=p*p),(p=Math.abs(r.dot(a))-u)>0&&(h+=p*p),(p=Math.abs(r.dot(i))-s)>0&&(h+=p*p),h}},{key:"computePlaneDistances",value:function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-0,-0],n=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,i=this.center,o=this.halfAxes,u=o.getColumn(0,l),s=o.getColumn(1,f),c=o.getColumn(2,d),y=p.copy(u).add(s).add(c).add(i),v=h.copy(y).subtract(e),m=r.dot(v);return n=Math.min(m,n),a=Math.max(m,a),y.copy(i).add(u).add(s).subtract(c),v.copy(y).subtract(e),m=r.dot(v),n=Math.min(m,n),a=Math.max(m,a),y.copy(i).add(u).subtract(s).add(c),v.copy(y).subtract(e),m=r.dot(v),n=Math.min(m,n),a=Math.max(m,a),y.copy(i).add(u).subtract(s).subtract(c),v.copy(y).subtract(e),m=r.dot(v),n=Math.min(m,n),a=Math.max(m,a),i.copy(y).subtract(u).add(s).add(c),v.copy(y).subtract(e),m=r.dot(v),n=Math.min(m,n),a=Math.max(m,a),i.copy(y).subtract(u).add(s).subtract(c),v.copy(y).subtract(e),m=r.dot(v),n=Math.min(m,n),a=Math.max(m,a),i.copy(y).subtract(u).subtract(s).add(c),v.copy(y).subtract(e),m=r.dot(v),n=Math.min(m,n),a=Math.max(m,a),i.copy(y).subtract(u).subtract(s).subtract(c),v.copy(y).subtract(e),m=r.dot(v),n=Math.min(m,n),a=Math.max(m,a),t[0]=n,t[1]=a,t}},{key:"transform",value:function(e){this.center.transformAsPoint(e);var t=this.halfAxes.getColumn(0,l);t.transformAsPoint(e);var n=this.halfAxes.getColumn(1,f);n.transformAsPoint(e);var a=this.halfAxes.getColumn(2,d);return a.transformAsPoint(e),this.halfAxes=new i.Matrix3([].concat((0,r.default)(t),(0,r.default)(n),(0,r.default)(a))),this}},{key:"getTransform",value:function(){throw new Error("not implemented")}}]),e}();return orientedBoundingBox.default=R,orientedBoundingBox}var cullingVolume={},plane={},hasRequiredPlane,hasRequiredCullingVolume;function requirePlane(){if(hasRequiredPlane)return plane;hasRequiredPlane=1;var e=requireInteropRequireDefault();Object.defineProperty(plane,"__esModule",{value:!0}),plane.default=void 0;var r=e(requireClassCallCheck()),t=e(requireCreateClass()),n=e(requireDefineProperty()),a=requireEs5$4(),i=new a.Vector3,o=new a.Vector3,u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,r.default)(this,e),(0,n.default)(this,"normal",void 0),(0,n.default)(this,"distance",void 0),this.normal=new a.Vector3,this.distance=-0,this.fromNormalDistance(t,i)}return(0,t.default)(e,[{key:"fromNormalDistance",value:function(e,r){return(0,a.assert)(Number.isFinite(r)),this.normal.from(e).normalize(),this.distance=r,this}},{key:"fromPointNormal",value:function(e,r){e=i.from(e),this.normal.from(r).normalize();var t=-this.normal.dot(e);return this.distance=t,this}},{key:"fromCoefficients",value:function(e,r,t,n){return this.normal.set(e,r,t),(0,a.assert)((0,a.equals)(this.normal.len(),1)),this.distance=n,this}},{key:"clone",value:function(){return new e(this.normal,this.distance)}},{key:"equals",value:function(e){return(0,a.equals)(this.distance,e.distance)&&(0,a.equals)(this.normal,e.normal)}},{key:"getPointDistance",value:function(e){return this.normal.dot(e)+this.distance}},{key:"transform",value:function(e){var r=o.copy(this.normal).transformAsVector(e).normalize(),t=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(t,r)}},{key:"projectPointOntoPlane",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];e=i.from(e);var t=this.getPointDistance(e),n=o.copy(this.normal).scale(t);return e.subtract(n).to(r)}}]),e}();return plane.default=u,plane}function requireCullingVolume(){if(hasRequiredCullingVolume)return cullingVolume;hasRequiredCullingVolume=1;var e=requireInteropRequireDefault();Object.defineProperty(cullingVolume,"__esModule",{value:!0}),cullingVolume.default=void 0;var r=e(requireClassCallCheck()),t=e(requireCreateClass()),n=e(requireDefineProperty()),a=requireEs5$4(),i=requireConstants$3(),o=e(requirePlane());function u(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return s(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return s(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}function s(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var c=[new a.Vector3([1,0,0]),new a.Vector3([0,1,0]),new a.Vector3([0,0,1])],l=new a.Vector3,f=new a.Vector3;new o.default(new a.Vector3(1,0,0),0);var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,r.default)(this,e),(0,n.default)(this,"planes",void 0),this.planes=t}return(0,t.default)(e,[{key:"fromBoundingSphere",value:function(e){this.planes.length=2*c.length;var r,t=e.center,n=e.radius,a=0,i=u(c);try{for(i.s();!(r=i.n()).done;){var s=r.value,d=this.planes[a],p=this.planes[a+1];d||(d=this.planes[a]=new o.default),p||(p=this.planes[a+1]=new o.default);var h=l.copy(s).scale(-n).add(t);s.dot(h);d.fromPointNormal(h,s);var y=l.copy(s).scale(n).add(t),v=f.copy(s).negate();v.dot(y);p.fromPointNormal(y,v),a+=2}}catch(e){i.e(e)}finally{i.f()}return this}},{key:"computeVisibility",value:function(e){var r,t=i.INTERSECTION.INSIDE,n=u(this.planes);try{for(n.s();!(r=n.n()).done;){var a=r.value;switch(e.intersectPlane(a)){case i.INTERSECTION.OUTSIDE:return i.INTERSECTION.OUTSIDE;case i.INTERSECTION.INTERSECTING:t=i.INTERSECTION.INTERSECTING}}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"computeVisibilityWithPlaneMask",value:function(r,t){if((0,a.assert)(Number.isFinite(t),"parentPlaneMask is required."),t===e.MASK_OUTSIDE||t===e.MASK_INSIDE)return t;for(var n=e.MASK_INSIDE,o=this.planes,u=0;u<this.planes.length;++u){var s=u<31?1<<u:0;if(!(u<31&&0==(t&s))){var c=o[u],l=r.intersectPlane(c);if(l===i.INTERSECTION.OUTSIDE)return e.MASK_OUTSIDE;l===i.INTERSECTION.INTERSECTING&&(n|=s)}}return n}}]),e}();return cullingVolume.default=d,(0,n.default)(d,"MASK_OUTSIDE",4294967295),(0,n.default)(d,"MASK_INSIDE",0),(0,n.default)(d,"MASK_INDETERMINATE",2147483647),cullingVolume}var perspectiveOffCenterFrustum={},hasRequiredPerspectiveOffCenterFrustum;function requirePerspectiveOffCenterFrustum(){if(hasRequiredPerspectiveOffCenterFrustum)return perspectiveOffCenterFrustum;hasRequiredPerspectiveOffCenterFrustum=1;var e=requireInteropRequireDefault();Object.defineProperty(perspectiveOffCenterFrustum,"__esModule",{value:!0}),perspectiveOffCenterFrustum.default=void 0;var r=e(requireClassCallCheck()),t=e(requireCreateClass()),n=e(requireDefineProperty()),a=requireEs5$4(),i=e(requireCullingVolume()),o=e(requirePlane()),u=new a.Vector3,s=new a.Vector3,c=new a.Vector3,l=new a.Vector3,f=new a.Vector3,d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,e),(0,n.default)(this,"left",void 0),(0,n.default)(this,"_left",void 0),(0,n.default)(this,"right",void 0),(0,n.default)(this,"_right",void 0),(0,n.default)(this,"top",void 0),(0,n.default)(this,"_top",void 0),(0,n.default)(this,"bottom",void 0),(0,n.default)(this,"_bottom",void 0),(0,n.default)(this,"near",void 0),(0,n.default)(this,"_near",void 0),(0,n.default)(this,"far",void 0),(0,n.default)(this,"_far",void 0),(0,n.default)(this,"_cullingVolume",new i.default([new o.default,new o.default,new o.default,new o.default,new o.default,new o.default])),(0,n.default)(this,"_perspectiveMatrix",new a.Matrix4),(0,n.default)(this,"_infinitePerspective",new a.Matrix4);var u=t.near,s=void 0===u?1:u,c=t.far,l=void 0===c?5e8:c;this.left=t.left,this._left=void 0,this.right=t.right,this._right=void 0,this.top=t.top,this._top=void 0,this.bottom=t.bottom,this._bottom=void 0,this.near=s,this._near=s,this.far=l,this._far=l}return(0,t.default)(e,[{key:"clone",value:function(){return new e({right:this.right,left:this.left,top:this.top,bottom:this.bottom,near:this.near,far:this.far})}},{key:"equals",value:function(r){return r&&r instanceof e&&this.right===r.right&&this.left===r.left&&this.top===r.top&&this.bottom===r.bottom&&this.near===r.near&&this.far===r.far}},{key:"projectionMatrix",get:function(){return this._update(),this._perspectiveMatrix}},{key:"infiniteProjectionMatrix",get:function(){return this._update(),this._infinitePerspective}},{key:"computeCullingVolume",value:function(e,r,t){(0,a.assert)(e,"position is required."),(0,a.assert)(r,"direction is required."),(0,a.assert)(t,"up is required.");var n=this._cullingVolume.planes;t=u.copy(t).normalize();var i=s.copy(r).cross(t).normalize(),o=c.copy(r).multiplyByScalar(this.near).add(e),d=l.copy(r).multiplyByScalar(this.far).add(e),p=f;return p.copy(i).multiplyByScalar(this.left).add(o).subtract(e).cross(t),n[0].fromPointNormal(e,p),p.copy(i).multiplyByScalar(this.right).add(o).subtract(e).cross(t).negate(),n[1].fromPointNormal(e,p),p.copy(t).multiplyByScalar(this.bottom).add(o).subtract(e).cross(i).negate(),n[2].fromPointNormal(e,p),p.copy(t).multiplyByScalar(this.top).add(o).subtract(e).cross(i),n[3].fromPointNormal(e,p),p=(new a.Vector3).copy(r),n[4].fromPointNormal(o,p),p.negate(),n[5].fromPointNormal(d,p),this._cullingVolume}},{key:"getPixelDimensions",value:function(e,r,t,n){this._update(),(0,a.assert)(Number.isFinite(e)&&Number.isFinite(r)),(0,a.assert)(e>0),(0,a.assert)(r>0),(0,a.assert)(t>0),(0,a.assert)(n);var i=1/this.near,o=this.top*i,u=2*t*o/r,s=2*t*(o=this.right*i)/e;return n.x=s,n.y=u,n}},{key:"_update",value:function(){(0,a.assert)(Number.isFinite(this.right)&&Number.isFinite(this.left)&&Number.isFinite(this.top)&&Number.isFinite(this.bottom)&&Number.isFinite(this.near)&&Number.isFinite(this.far));var e=this.top,r=this.bottom,t=this.right,n=this.left,i=this.near,o=this.far;e===this._top&&r===this._bottom&&n===this._left&&t===this._right&&i===this._near&&o===this._far||((0,a.assert)(this.near>0&&this.near<this.far,"near must be greater than zero and less than far."),this._left=n,this._right=t,this._top=e,this._bottom=r,this._near=i,this._far=o,this._perspectiveMatrix=(new a.Matrix4).frustum({left:n,right:t,bottom:r,top:e,near:i,far:o}),this._infinitePerspective=(new a.Matrix4).frustum({left:n,right:t,bottom:r,top:e,near:i,far:1/0}))}}]),e}();return perspectiveOffCenterFrustum.default=d,perspectiveOffCenterFrustum}var perspectiveFrustum={},hasRequiredPerspectiveFrustum;function requirePerspectiveFrustum(){if(hasRequiredPerspectiveFrustum)return perspectiveFrustum;hasRequiredPerspectiveFrustum=1;var e=requireInteropRequireDefault();Object.defineProperty(perspectiveFrustum,"__esModule",{value:!0}),perspectiveFrustum.default=void 0;var r=e(requireClassCallCheck()),t=e(requireCreateClass()),n=e(requireDefineProperty()),a=requireEs5$4(),i=e(requirePerspectiveOffCenterFrustum()),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,e),(0,n.default)(this,"_offCenterFrustum",new i.default),(0,n.default)(this,"fov",void 0),(0,n.default)(this,"_fov",void 0),(0,n.default)(this,"_fovy",void 0),(0,n.default)(this,"_sseDenominator",void 0),(0,n.default)(this,"aspectRatio",void 0),(0,n.default)(this,"_aspectRatio",void 0),(0,n.default)(this,"near",void 0),(0,n.default)(this,"_near",void 0),(0,n.default)(this,"far",void 0),(0,n.default)(this,"_far",void 0),(0,n.default)(this,"xOffset",void 0),(0,n.default)(this,"_xOffset",void 0),(0,n.default)(this,"yOffset",void 0),(0,n.default)(this,"_yOffset",void 0);var a=t.fov,o=t.aspectRatio,u=t.near,s=void 0===u?1:u,c=t.far,l=void 0===c?5e8:c,f=t.xOffset,d=void 0===f?0:f,p=t.yOffset,h=void 0===p?0:p;this.fov=a,this.aspectRatio=o,this.near=s,this.far=l,this.xOffset=d,this.yOffset=h}return(0,t.default)(e,[{key:"clone",value:function(){return new e({aspectRatio:this.aspectRatio,fov:this.fov,near:this.near,far:this.far})}},{key:"equals",value:function(r){return null!=r&&r instanceof e&&(this._update(),r._update(),this.fov===r.fov&&this.aspectRatio===r.aspectRatio&&this.near===r.near&&this.far===r.far&&this._offCenterFrustum.equals(r._offCenterFrustum))}},{key:"projectionMatrix",get:function(){return this._update(),this._offCenterFrustum.projectionMatrix}},{key:"infiniteProjectionMatrix",get:function(){return this._update(),this._offCenterFrustum.infiniteProjectionMatrix}},{key:"fovy",get:function(){return this._update(),this._fovy}},{key:"sseDenominator",get:function(){return this._update(),this._sseDenominator}},{key:"computeCullingVolume",value:function(e,r,t){return this._update(),this._offCenterFrustum.computeCullingVolume(e,r,t)}},{key:"getPixelDimensions",value:function(e,r,t,n){return this._update(),this._offCenterFrustum.getPixelDimensions(e,r,t,n||new a.Vector2)}},{key:"_update",value:function(){(0,a.assert)(Number.isFinite(this.fov)&&Number.isFinite(this.aspectRatio)&&Number.isFinite(this.near)&&Number.isFinite(this.far));var e=this._offCenterFrustum;this.fov===this._fov&&this.aspectRatio===this._aspectRatio&&this.near===this._near&&this.far===this._far&&this.xOffset===this._xOffset&&this.yOffset===this._yOffset||((0,a.assert)(this.fov>=0&&this.fov<Math.PI),(0,a.assert)(this.aspectRatio>0),(0,a.assert)(this.near>=0&&this.near<this.far),this._aspectRatio=this.aspectRatio,this._fov=this.fov,this._fovy=this.aspectRatio<=1?this.fov:2*Math.atan(Math.tan(.5*this.fov)/this.aspectRatio),this._near=this.near,this._far=this.far,this._sseDenominator=2*Math.tan(.5*this._fovy),this._xOffset=this.xOffset,this._yOffset=this.yOffset,e.top=this.near*Math.tan(.5*this._fovy),e.bottom=-e.top,e.right=this.aspectRatio*e.top,e.left=-e.right,e.near=this.near,e.far=this.far,e.right+=this.xOffset,e.left+=this.xOffset,e.top+=this.yOffset,e.bottom+=this.yOffset)}}]),e}();return perspectiveFrustum.default=o,perspectiveFrustum}var boundingSphereFromPoints={},hasRequiredBoundingSphereFromPoints;function requireBoundingSphereFromPoints(){if(hasRequiredBoundingSphereFromPoints)return boundingSphereFromPoints;hasRequiredBoundingSphereFromPoints=1;var e=requireInteropRequireDefault();Object.defineProperty(boundingSphereFromPoints,"__esModule",{value:!0}),boundingSphereFromPoints.default=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new t.default;if(!e||0===e.length)return r.fromCenterRadius([0,0,0],0);var a,m=f.copy(e[0]),b=i.copy(m),g=o.copy(m),_=u.copy(m),A=s.copy(m),T=c.copy(m),O=l.copy(m),R=n(e);try{for(R.s();!(a=R.n()).done;){var E=a.value;m.copy(E);var S=m.x,q=m.y,C=m.z;S<b.x&&b.copy(m),S>A.x&&A.copy(m),q<g.y&&g.copy(m),q>T.y&&T.copy(m),C<_.z&&_.copy(m),C>O.z&&O.copy(m)}}catch(e){R.e(e)}finally{R.f()}var B=d.copy(A).subtract(b).magnitudeSquared(),x=d.copy(T).subtract(g).magnitudeSquared(),P=d.copy(O).subtract(_).magnitudeSquared(),w=b,M=A,I=B;x>I&&(I=x,w=g,M=T);P>I&&(I=P,w=_,M=O);var k=p;k.x=.5*(w.x+M.x),k.y=.5*(w.y+M.y),k.z=.5*(w.z+M.z);var D=d.copy(M).subtract(k).magnitudeSquared(),L=Math.sqrt(D),G=h;G.x=b.x,G.y=g.y,G.z=_.z;var j=y;j.x=A.x,j.y=T.y,j.z=O.z;var $,N=v.copy(G).add(j).multiplyByScalar(.5),F=0,U=n(e);try{for(U.s();!($=U.n()).done;){var H=$.value;m.copy(H);var V=d.copy(m).subtract(N).magnitude();V>F&&(F=V);var W=d.copy(m).subtract(k).magnitudeSquared();if(W>D){var K=Math.sqrt(W);D=(L=.5*(L+K))*L;var J=K-L;k.x=(L*k.x+J*m.x)/K,k.y=(L*k.y+J*m.y)/K,k.z=(L*k.z+J*m.z)/K}}}catch(e){U.e(e)}finally{U.f()}L<F?(k.to(r.center),r.radius=L):(N.to(r.center),r.radius=F);return r};var r=requireEs5$4(),t=e(requireBoundingSphere());function n(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return a(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==t.return||t.return()}finally{if(s)throw o}}}}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var i=new r.Vector3,o=new r.Vector3,u=new r.Vector3,s=new r.Vector3,c=new r.Vector3,l=new r.Vector3,f=new r.Vector3,d=new r.Vector3,p=new r.Vector3,h=new r.Vector3,y=new r.Vector3,v=new r.Vector3;return boundingSphereFromPoints}var boundingBoxFromPoints={},computeEigenDecomposition={},hasRequiredComputeEigenDecomposition,hasRequiredBoundingBoxFromPoints,hasRequiredEs5$2,hasRequiredFrameState;function requireComputeEigenDecomposition(){if(hasRequiredComputeEigenDecomposition)return computeEigenDecomposition;hasRequiredComputeEigenDecomposition=1,Object.defineProperty(computeEigenDecomposition,"__esModule",{value:!0}),computeEigenDecomposition.default=function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=e._MathUtils.EPSILON20,l=0,f=0,d=t,p=n;d.identity(),p.copy(r);var h=u*function(e){for(var r=0,t=0;t<9;++t){var n=e[t];r+=n*n}return Math.sqrt(r)}(p);for(;f<10&&s(p)>h;)c(p,a),i.copy(a).transpose(),p.multiplyRight(a),p.multiplyLeft(i),d.multiplyRight(a),++l>2&&(++f,l=0);return o.unitary=d.toTarget(o.unitary),o.diagonal=p.toTarget(o.diagonal),o};var e=requireEs5$4(),r=new e.Matrix3,t=new e.Matrix3,n=new e.Matrix3,a=new e.Matrix3,i=new e.Matrix3;var o=[1,0,0],u=[2,2,1];function s(e){for(var t=0,n=0;n<3;++n){var a=e[r.getElementIndex(u[n],o[n])];t+=2*a*a}return Math.sqrt(t)}function c(t,n){for(var a=e._MathUtils.EPSILON15,i=0,s=1,c=0;c<3;++c){var l=Math.abs(t[r.getElementIndex(u[c],o[c])]);l>i&&(s=c,i=l)}var f=o[s],d=u[s],p=1,h=0;if(Math.abs(t[r.getElementIndex(d,f)])>a){var y,v=(t[r.getElementIndex(d,d)]-t[r.getElementIndex(f,f)])/2/t[r.getElementIndex(d,f)];h=(y=v<0?-1/(-v+Math.sqrt(1+v*v)):1/(v+Math.sqrt(1+v*v)))*(p=1/Math.sqrt(1+y*y))}return e.Matrix3.IDENTITY.to(n),n[r.getElementIndex(f,f)]=n[r.getElementIndex(d,d)]=p,n[r.getElementIndex(d,f)]=h,n[r.getElementIndex(f,d)]=-h,n}return computeEigenDecomposition}function requireBoundingBoxFromPoints(){if(hasRequiredBoundingBoxFromPoints)return boundingBoxFromPoints;hasRequiredBoundingBoxFromPoints=1;var e=requireInteropRequireDefault();Object.defineProperty(boundingBoxFromPoints,"__esModule",{value:!0}),boundingBoxFromPoints.makeOrientedBoundingBoxFromPoints=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new n.default;if(!e||0===e.length)return a.halfAxes=new r.Matrix3([0,0,0,0,0,0,0,0,0]),a.center=new r.Vector3,a;var o,h=e.length,y=new r.Vector3(0,0,0),v=i(e);try{for(v.s();!(o=v.n()).done;){var m=o.value;y.add(m)}}catch(e){v.e(e)}finally{v.f()}var b=1/h;y.multiplyByScalar(b);var g,_=0,A=0,T=0,O=0,R=0,E=0,S=i(e);try{for(S.s();!(g=S.n()).done;){var q=g.value,C=u.copy(q).subtract(y);_+=C.x*C.x,A+=C.x*C.y,T+=C.x*C.z,O+=C.y*C.y,R+=C.y*C.z,E+=C.z*C.z}}catch(e){S.e(e)}finally{S.f()}_*=b,A*=b,T*=b,O*=b,R*=b,E*=b;var B=d;B[0]=_,B[1]=A,B[2]=T,B[3]=A,B[4]=O,B[5]=R,B[6]=T,B[7]=R,B[8]=E;var x,P=(0,t.default)(B,p).unitary,w=a.halfAxes.copy(P),M=w.getColumn(0,c),I=w.getColumn(1,l),k=w.getColumn(2,f),D=-Number.MAX_VALUE,L=-Number.MAX_VALUE,G=-Number.MAX_VALUE,j=Number.MAX_VALUE,$=Number.MAX_VALUE,N=Number.MAX_VALUE,F=i(e);try{for(F.s();!(x=F.n()).done;){var U=x.value;u.copy(U),D=Math.max(u.dot(M),D),L=Math.max(u.dot(I),L),G=Math.max(u.dot(k),G),j=Math.min(u.dot(M),j),$=Math.min(u.dot(I),$),N=Math.min(u.dot(k),N)}}catch(e){F.e(e)}finally{F.f()}M=M.multiplyByScalar(.5*(j+D)),I=I.multiplyByScalar(.5*($+L)),k=k.multiplyByScalar(.5*(N+G)),a.center.copy(M).add(I).add(k);var H=s.set(D-j,L-$,G-N).multiplyByScalar(.5),V=new r.Matrix3([H[0],0,0,0,H[1],0,0,0,H[2]]);return a.halfAxes.multiplyRight(V),a},boundingBoxFromPoints.makeAxisAlignedBoundingBoxFromPoints=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.default;if(!e||0===e.length)return r.minimum.set(0,0,0),r.maximum.set(0,0,0),r.center.set(0,0,0),r.halfDiagonal.set(0,0,0),r;var t,n=e[0][0],o=e[0][1],u=e[0][2],s=e[0][0],c=e[0][1],l=e[0][2],f=i(e);try{for(f.s();!(t=f.n()).done;){var d=t.value,p=d[0],h=d[1],y=d[2];n=Math.min(p,n),s=Math.max(p,s),o=Math.min(h,o),c=Math.max(h,c),u=Math.min(y,u),l=Math.max(y,l)}}catch(e){f.e(e)}finally{f.f()}return r.minimum.set(n,o,u),r.maximum.set(s,c,l),r.center.copy(r.minimum).add(r.maximum).scale(.5),r.halfDiagonal.copy(r.maximum).subtract(r.center),r};var r=requireEs5$4(),t=e(requireComputeEigenDecomposition()),n=e(requireOrientedBoundingBox()),a=e(requireAxisAlignedBoundingBox());function i(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return o(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==t.return||t.return()}finally{if(s)throw i}}}}function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var u=new r.Vector3,s=new r.Vector3,c=new r.Vector3,l=new r.Vector3,f=new r.Vector3,d=new r.Matrix3,p={diagonal:new r.Matrix3,unitary:new r.Matrix3};return boundingBoxFromPoints}function requireEs5$2(){return hasRequiredEs5$2||(hasRequiredEs5$2=1,function(e){var r=requireInteropRequireDefault();Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"INTERSECTION",{enumerable:!0,get:function(){return t.INTERSECTION}}),Object.defineProperty(e,"AxisAlignedBoundingBox",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"BoundingSphere",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"OrientedBoundingBox",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"CullingVolume",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"Plane",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"_PerspectiveOffCenterFrustum",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"_PerspectiveFrustum",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"makeBoundingSphereFromPoints",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"makeAxisAlignedBoundingBoxFromPoints",{enumerable:!0,get:function(){return f.makeAxisAlignedBoundingBoxFromPoints}}),Object.defineProperty(e,"makeOrientedBoundingBoxFromPoints",{enumerable:!0,get:function(){return f.makeOrientedBoundingBoxFromPoints}}),Object.defineProperty(e,"computeEigenDecomposition",{enumerable:!0,get:function(){return d.default}});var t=requireConstants$3(),n=r(requireAxisAlignedBoundingBox()),a=r(requireBoundingSphere()),i=r(requireOrientedBoundingBox()),o=r(requireCullingVolume()),u=r(requirePlane()),s=r(requirePerspectiveOffCenterFrustum()),c=r(requirePerspectiveFrustum()),l=r(requireBoundingSphereFromPoints()),f=requireBoundingBoxFromPoints(),d=r(requireComputeEigenDecomposition())}(es5$1)),es5$1}function requireFrameState(){if(hasRequiredFrameState)return frameState;hasRequiredFrameState=1;var e=interopRequireDefaultExports;Object.defineProperty(frameState,"__esModule",{value:!0}),frameState.getFrameState=function(e,r){var n=e.cameraDirection,i=e.cameraUp,f=e.height,d=e.distanceScales.metersPerUnit,p=l(e,e.center),h=a.Ellipsoid.WGS84.eastNorthUpToFixedFrame(p),y=e.unprojectPosition(e.cameraPosition),v=a.Ellipsoid.WGS84.cartographicToCartesian(y,new t.Vector3),m=new t.Vector3(h.transformAsVector(new t.Vector3(n).scale(d))).normalize(),b=new t.Vector3(h.transformAsVector(new t.Vector3(i).scale(d))).normalize();!function(e){var r=e.getFrustumPlanes(),t=c(r.near,e.cameraPosition),n=l(e,t),a=l(e,e.cameraPosition,u),i=0;for(var f in s.planes[i++].fromPointNormal(n,o.copy(n).subtract(a)),r)if("near"!==f){var d=l(e,c(r[f],t,u),u);s.planes[i++].fromPointNormal(d,o.copy(n).subtract(d))}}(e);var g=e.constructor,_=e.longitude,A=e.latitude,T=e.width,O=e.bearing,R=e.zoom,E=new g({longitude:_,latitude:A,height:f,width:T,bearing:O,zoom:R,pitch:0});return{camera:{position:v,direction:m,up:b},viewport:e,topDownViewport:E,height:f,cullingVolume:s,frameNumber:r,sseDenominator:1.15}},frameState.limitSelectedTiles=function(e,t,n){if(0===n||e.length<=n)return[e,[]];var a,o=[],u=t.viewport,s=u.longitude,c=u.latitude,l=function(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==t.return||t.return()}finally{if(s)throw o}}}}(e.entries());try{for(l.s();!(a=l.n()).done;){var f=(0,r.default)(a.value,2),d=f[0],p=f[1],h=(0,r.default)(p.header.mbs,2),y=h[0],v=h[1],m=Math.abs(s-y),b=Math.abs(c-v),g=Math.sqrt(b*b+m*m);o.push([d,g])}}catch(e){l.e(e)}finally{l.f()}for(var _=o.sort((function(e,r){return e[1]-r[1]})),A=[],T=0;T<n;T++)A.push(e[_[T][0]]);for(var O=[],R=n;R<_.length;R++)O.push(e[_[R][0]]);return[A,O]};var r=e(requireSlicedToArray$2()),t=requireEs5$4(),n=requireEs5$2(),a=requireEs5$3();function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var o=new t.Vector3,u=new t.Vector3,s=new n.CullingVolume([new n.Plane,new n.Plane,new n.Plane,new n.Plane,new n.Plane,new n.Plane]);function c(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new t.Vector3,a=e.normal.dot(r);return n.copy(e.normal).scale(e.distance-a).add(r),n}function l(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new t.Vector3,i=e.unprojectPosition(r);return a.Ellipsoid.WGS84.cartographicToCartesian(i,n)}return frameState}var zoom={},hasRequiredZoom;function requireZoom(){if(hasRequiredZoom)return zoom;hasRequiredZoom=1;var e=interopRequireDefaultExports;Object.defineProperty(zoom,"__esModule",{value:!0}),zoom.getZoomFromBoundingVolume=function(e,r){if(e instanceof n.OrientedBoundingBox){var t=function(e){e.getColumn(0,s);var r=e.getColumn(1),t=e.getColumn(2);return s.add(r).add(t).len()}(e.halfAxes);return Math.log2(u/(t+r[2]))}if(e instanceof n.BoundingSphere){var a=e.radius;return Math.log2(u/(a+r[2]))}if(e.width&&e.height){var c=e.width,l=e.height;return(Math.log2(i/c)+Math.log2(o/l))/2}return 1},zoom.getZoomFromExtent=function(e,t,n){var a=(0,r.default)(e,4),i=a[0],o=a[1],u=a[2],s=a[3];return c({xmin:i,xmax:u,ymin:o,ymax:s,zmin:0,zmax:0},t,n)},zoom.getZoomFromFullExtent=c;var r=e(requireSlicedToArray$2()),t=requireEs5$4(),n=requireEs5$2(),a=requireEs5$3(),i=6378137,o=6378137,u=6356752.314245179,s=new t.Vector3;function c(e,r,n){var i=a.Ellipsoid.WGS84.cartographicToCartesian([e.xmax,e.ymax,e.zmax],new t.Vector3),o=Math.sqrt(Math.pow(i[0]-n[0],2)+Math.pow(i[1]-n[1],2)+Math.pow(i[2]-n[2],2));return Math.log2(u/(o+r[2]))}return zoom}var tile3d={},constants$2={},hasRequiredConstants$2;function requireConstants$2(){if(hasRequiredConstants$2)return constants$2;hasRequiredConstants$2=1,Object.defineProperty(constants$2,"__esModule",{value:!0}),constants$2.TILE_TYPE=constants$2.TILE_REFINEMENT=constants$2.TILE_CONTENT_STATE=constants$2.TILESET_TYPE=constants$2.TILE3D_OPTIMIZATION_HINT=constants$2.LOD_METRIC_TYPE=void 0;constants$2.TILE_CONTENT_STATE={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5};constants$2.TILE_REFINEMENT={ADD:1,REPLACE:2};constants$2.TILE_TYPE={EMPTY:"empty",SCENEGRAPH:"scenegraph",POINTCLOUD:"pointcloud",MESH:"mesh"};constants$2.TILESET_TYPE={I3S:"I3S",TILES3D:"TILES3D"};constants$2.LOD_METRIC_TYPE={GEOMETRIC_ERROR:"geometricError",MAX_SCREEN_THRESHOLD:"maxScreenThreshold"};return constants$2.TILE3D_OPTIMIZATION_HINT={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0},constants$2}var boundingVolume={},hasRequiredBoundingVolume;function requireBoundingVolume(){if(hasRequiredBoundingVolume)return boundingVolume;hasRequiredBoundingVolume=1;var e=interopRequireDefaultExports;Object.defineProperty(boundingVolume,"__esModule",{value:!0}),boundingVolume.createBoundingVolume=function(e,s,c){if((0,o.assert)(e,"3D Tile: boundingVolume must be defined"),e.box)return function(e,t,i){var o=new n.Vector3(e[0],e[1],e[2]);t.transform(o,o);var s=[];if(10===e.length){var c=e.slice(3,6),l=new n.Quaternion;l.fromArray(e,6);var f=new n.Vector3([1,0,0]),d=new n.Vector3([0,1,0]),p=new n.Vector3([0,0,1]);f.transformByQuaternion(l),f.scale(c[0]),d.transformByQuaternion(l),d.scale(c[1]),p.transformByQuaternion(l),p.scale(c[2]),s=[].concat((0,r.default)(f.toArray()),(0,r.default)(d.toArray()),(0,r.default)(p.toArray()))}else s=[].concat((0,r.default)(e.slice(3,6)),(0,r.default)(e.slice(6,9)),(0,r.default)(e.slice(9,12)));var h=t.transformAsVector(s.slice(0,3)),y=t.transformAsVector(s.slice(3,6)),v=t.transformAsVector(s.slice(6,9)),m=new n.Matrix3([h[0],h[1],h[2],y[0],y[1],y[2],v[0],v[1],v[2]]);if(u(i))return i.center=o,i.halfAxes=m,i;return new a.OrientedBoundingBox(o,m)}(e.box,s,c);if(e.region){var p=(0,t.default)(e.region,6),h=p[0],y=p[1],v=p[2],m=p[3],b=p[4],g=p[5],_=i.Ellipsoid.WGS84.cartographicToCartesian([(0,n.degrees)(h),(0,n.degrees)(m),b],l),A=i.Ellipsoid.WGS84.cartographicToCartesian([(0,n.degrees)(v),(0,n.degrees)(y),g],f),T=(new n.Vector3).addVectors(_,A).multiplyScalar(.5),O=(new n.Vector3).subVectors(_,A).len()/2;return d([T[0],T[1],T[2],O],new n.Matrix4)}if(e.sphere)return d(e.sphere,s,c);throw new Error("3D Tile: boundingVolume must contain a sphere, region, or box")},boundingVolume.getCartographicBounds=function(e,r){if(e.box)return function(e){for(var r=p(),t=e.halfAxes,a=new n.Vector3(t.getColumn(0)),i=new n.Vector3(t.getColumn(1)),o=new n.Vector3(t.getColumn(2)),u=0;u<2;u++){for(var c=0;c<2;c++){for(var l=0;l<2;l++)s.copy(e.center),s.add(a),s.add(i),s.add(o),h(r,s),o.negate();i.negate()}a.negate()}return r}(r);if(e.region){var a=(0,t.default)(e.region,6),o=a[0],u=a[1],l=a[2],f=a[3],d=a[4],y=a[5];return[[(0,n.degrees)(o),(0,n.degrees)(u),d],[(0,n.degrees)(l),(0,n.degrees)(f),y]]}if(e.sphere)return function(e){var r,t=p(),a=e,o=a.center,u=a.radius,l=i.Ellipsoid.WGS84.scaleToGeodeticSurface(o,s);r=l?i.Ellipsoid.WGS84.geodeticSurfaceNormal(l):new n.Vector3(0,0,1);var f=new n.Vector3(r[2],-r[1],0);f.len()>0?f.normalize():f=new n.Vector3(0,1,0);for(var d=f.clone().cross(r),y=0,v=[f,d,r];y<v.length;y++){var m=v[y];c.copy(m).scale(u);for(var b=0;b<2;b++)s.copy(o),s.add(c),h(t,s),c.negate()}return t}(r);throw new Error("Unkown boundingVolume type")};var r=e(requireToConsumableArray$1()),t=e(requireSlicedToArray$2()),n=requireEs5$4(),a=requireEs5$2(),i=requireEs5$3(),o=requireEs5$b();function u(e){return null!=e}var s=new n.Vector3,c=new n.Vector3,l=new n.Vector3,f=new n.Vector3;function d(e,r,t){var i=new n.Vector3(e[0],e[1],e[2]);r.transform(i,i);var o=r.getScale(c),s=Math.max(Math.max(o[0],o[1]),o[2]),l=e[3]*s;return u(t)?(t.center=i,t.radius=l,t):new a.BoundingSphere(i,l)}function p(){return[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]]}function h(e,r){i.Ellipsoid.WGS84.cartesianToCartographic(r,s),e[0][0]=Math.min(e[0][0],s[0]),e[0][1]=Math.min(e[0][1],s[1]),e[0][2]=Math.min(e[0][2],s[2]),e[1][0]=Math.max(e[1][0],s[0]),e[1][1]=Math.max(e[1][1],s[1]),e[1][2]=Math.max(e[1][2],s[2])}return boundingVolume}var tiles3dLod={},hasRequiredTiles3dLod;function requireTiles3dLod(){if(hasRequiredTiles3dLod)return tiles3dLod;hasRequiredTiles3dLod=1,Object.defineProperty(tiles3dLod,"__esModule",{value:!0}),tiles3dLod.calculateDynamicScreenSpaceError=function(u,s){var c,l,f,d,p,h=s.camera,y=s.mapProjection,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},m=v.dynamicScreenSpaceErrorHeightFalloff,b=void 0===m?.25:m,g=v.dynamicScreenSpaceErrorDensity,_=void 0===g?.00278:g,A=u.contentBoundingVolume;if(A instanceof TileBoundingRegion)c=Cartesian3.normalize(h.positionWC,r),l=h.directionWC,f=h.positionCartographic.height,d=A.minimumHeight,p=A.maximumHeight;else{var T=e.Matrix4.inverseTransformation(u.computedTransform,n),O=y.ellipsoid,R=A.boundingVolume,E=e.Matrix4.multiplyByPoint(T,R.center,a);if(Cartesian3.magnitude(E)>O.minimumRadius){var S=Cartographic.fromCartesian(E,O,t);c=Cartesian3.normalize(h.positionWC,r),l=h.directionWC,f=h.positionCartographic.height,d=0,p=2*S.height}else{var q=e.Matrix4.multiplyByPoint(T,h.positionWC,i);if(c=Cartesian3.UNIT_Z,l=e.Matrix4.multiplyByPointAsVector(T,h.directionWC,o),l=Cartesian3.normalize(l,l),f=q.z,A instanceof TileOrientedBoundingBox){var C=u._header.boundingVolume.box[11];d=E.z-C,p=E.z+C}else if(A instanceof TileBoundingSphere){var B=R.radius;d=E.z-B,p=E.z+B}}}var x=d+(p-d)*b,P=p,w=(0,e.clamp)((f-x)/(P-x),0,1),M=1-Math.abs(Cartesian3.dot(l,c));return _*(M*=1-w)},tiles3dLod.fog=u,tiles3dLod.getDynamicScreenSpaceError=s,tiles3dLod.getTiles3DScreenSpaceError=function(e,r,t){var n=e.tileset,a=e.parent&&e.parent.lodMetricValue||e.lodMetricValue,i=t?a:e.lodMetricValue;if(0===i)return 0;var o=Math.max(e._distanceToCamera,1e-7),u=r.height,c=r.sseDenominator,l=n.options.viewDistanceScale,f=i*u*(l||1)/(o*c);return f-=s(n,o)};var e=requireEs5$4(),r=new e.Vector3,t=new e.Vector3,n=new e.Matrix4,a=new e.Vector3,i=new e.Vector3,o=new e.Vector3;function u(e,r){var t=e*r;return 1-Math.exp(-t*t)}function s(e,r){if(e.dynamicScreenSpaceError&&e.dynamicScreenSpaceErrorComputedDensity){var t=e.dynamicScreenSpaceErrorComputedDensity,n=e.dynamicScreenSpaceErrorFactor;return u(r,t)*n}return 0}return tiles3dLod}var i3sLod={},hasRequiredI3sLod;function requireI3sLod(){if(hasRequiredI3sLod)return i3sLod;hasRequiredI3sLod=1;var e=interopRequireDefaultExports;Object.defineProperty(i3sLod,"__esModule",{value:!0}),i3sLod.getLodStatus=function(e,r){if(0===e.lodMetricValue||isNaN(e.lodMetricValue))return"DIG";var t=2*f(e,r);if(t<2)return"OUT";if(!e.header.children||t<=e.lodMetricValue)return"DRAW";if(e.header.children)return"DIG";return"OUT"},i3sLod.getProjectedRadius=f;var r=e(requireToConsumableArray$1()),t=requireEs5$4(),n=requireEs5$3(),a=new t.Vector3,i=new t.Vector3,o=new t.Vector3,u=new t.Vector3,s=new t.Vector3,c=new t.Matrix4,l=new t.Matrix4;function f(e,t){var f=t.topDownViewport,d=e.header.mbs[1],p=e.header.mbs[0],h=e.header.mbs[2],y=e.header.mbs[3],v=(0,r.default)(e.boundingVolume.center),m=f.unprojectPosition(f.cameraPosition);n.Ellipsoid.WGS84.cartographicToCartesian(m,a),i.copy(a).subtract(v).normalize(),n.Ellipsoid.WGS84.eastNorthUpToFixedFrame(v,c),l.copy(c).invert(),o.copy(a).transform(l);var b=Math.sqrt(o[0]*o[0]+o[1]*o[1]),g=b*b/o[2];u.copy([o[0],o[1],g]);var _=u.transform(c).subtract(v).normalize(),A=i.cross(_).normalize().scale(y).add(v),T=n.Ellipsoid.WGS84.cartesianToCartographic(A),O=f.project([p,d,h]),R=f.project(T);return s.copy(O).subtract(R).magnitude()}return i3sLod}var _3dTilesOptions={},hasRequired_3dTilesOptions;function require_3dTilesOptions(){if(hasRequired_3dTilesOptions)return _3dTilesOptions;return hasRequired_3dTilesOptions=1,Object.defineProperty(_3dTilesOptions,"__esModule",{value:!0}),_3dTilesOptions.get3dTilesOptions=function(e){return{assetGltfUpAxis:e.asset&&e.asset.gltfUpAxis||"Y"}},_3dTilesOptions}var tilesetTraverser={},managedArray={},hasRequiredManagedArray,hasRequiredTilesetTraverser,hasRequiredTile3d;function requireManagedArray(){if(hasRequiredManagedArray)return managedArray;hasRequiredManagedArray=1;var e=interopRequireDefaultExports;Object.defineProperty(managedArray,"__esModule",{value:!0}),managedArray.ManagedArray=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=e(requireDefineProperty$3()),a=requireEs5$b(),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(0,r.default)(this,e),(0,n.default)(this,"_map",new Map),(0,n.default)(this,"_array",void 0),(0,n.default)(this,"_length",void 0),this._array=new Array(t),this._length=t}return(0,t.default)(e,[{key:"length",get:function(){return this._length},set:function(e){this._length=e,e>this._array.length&&(this._array.length=e)}},{key:"values",get:function(){return this._array}},{key:"get",value:function(e){return(0,a.assert)(e<this._array.length),this._array[e]}},{key:"set",value:function(e,r){(0,a.assert)(e>=0),e>=this.length&&(this.length=e+1),this._map.has(this._array[e])&&this._map.delete(this._array[e]),this._array[e]=r,this._map.set(r,e)}},{key:"delete",value:function(e){var r=this._map.get(e);r>=0&&(this._array.splice(r,1),this._map.delete(e),this.length--)}},{key:"peek",value:function(){return this._array[this._length-1]}},{key:"push",value:function(e){if(!this._map.has(e)){var r=this.length++;this._array[r]=e,this._map.set(e,r)}}},{key:"pop",value:function(){var e=this._array[--this.length];return this._map.delete(e),e}},{key:"reserve",value:function(e){(0,a.assert)(e>=0),e>this._array.length&&(this._array.length=e)}},{key:"resize",value:function(e){(0,a.assert)(e>=0),this.length=e}},{key:"trim",value:function(e){null==e&&(e=this.length),this._array.length=e}},{key:"reset",value:function(){this._array=[],this._map=new Map,this._length=0}},{key:"find",value:function(e){return this._map.has(e)}}]),e}();return managedArray.ManagedArray=i,managedArray}function requireTilesetTraverser(){if(hasRequiredTilesetTraverser)return tilesetTraverser;hasRequiredTilesetTraverser=1;var e=interopRequireDefaultExports;Object.defineProperty(tilesetTraverser,"__esModule",{value:!0}),tilesetTraverser.TilesetTraverser=tilesetTraverser.DEFAULT_PROPS=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=e(requireDefineProperty$3()),a=requireManagedArray(),i=requireConstants$2();function o(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return u(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return u(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw i}}}}function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){(0,n.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var l={loadSiblings:!1,skipLevelOfDetail:!1,maximumScreenSpaceError:2,updateTransforms:!0,onTraversalEnd:function(){},viewportTraversersMap:{},basePath:""};tilesetTraverser.DEFAULT_PROPS=l;var f=function(){function e(t){(0,r.default)(this,e),(0,n.default)(this,"options",void 0),(0,n.default)(this,"root",void 0),(0,n.default)(this,"requestedTiles",void 0),(0,n.default)(this,"selectedTiles",void 0),(0,n.default)(this,"emptyTiles",void 0),(0,n.default)(this,"lastUpdate",(new Date).getTime()),(0,n.default)(this,"updateDebounceTime",1e3),(0,n.default)(this,"_traversalStack",void 0),(0,n.default)(this,"_emptyTraversalStack",void 0),(0,n.default)(this,"_frameNumber",void 0),this.options=c(c({},l),t),this._traversalStack=new a.ManagedArray,this._emptyTraversalStack=new a.ManagedArray,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}return(0,t.default)(e,[{key:"traversalFinished",value:function(e){return!0}},{key:"traverse",value:function(e,r,t){this.root=e,this.options=c(c({},this.options),t),this.reset(),this.updateTile(e,r),this._frameNumber=r.frameNumber,this.executeTraversal(e,r)}},{key:"reset",value:function(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()}},{key:"executeTraversal",value:function(e,r){var t=this._traversalStack;for(e._selectionDepth=1,t.push(e);t.length>0;){var n=t.pop(),a=!1;this.canTraverse(n,r)&&(this.updateChildTiles(n,r),a=this.updateAndPushChildren(n,r,t,n.hasRenderContent?n._selectionDepth+1:n._selectionDepth));var o=n.parent,u=Boolean(!o||o._shouldRefine),s=!a;n.hasRenderContent?n.refine===i.TILE_REFINEMENT.ADD?(this.loadTile(n,r),this.selectTile(n,r)):n.refine===i.TILE_REFINEMENT.REPLACE&&(this.loadTile(n,r),s&&this.selectTile(n,r)):(this.emptyTiles[n.id]=n,this.loadTile(n,r),s&&this.selectTile(n,r)),this.touchTile(n,r),n._shouldRefine=a&&u}var c=(new Date).getTime();(this.traversalFinished(r)||c-this.lastUpdate>this.updateDebounceTime)&&(this.lastUpdate=c,this.options.onTraversalEnd(r))}},{key:"updateChildTiles",value:function(e,r){var t,n=o(e.children);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.updateTile(a,r)}}catch(e){n.e(e)}finally{n.f()}return!0}},{key:"updateAndPushChildren",value:function(e,r,t,n){var a=this.options,u=a.loadSiblings,s=a.skipLevelOfDetail,c=e.children;c.sort(this.compareDistanceToCamera.bind(this));var l,f=e.refine===i.TILE_REFINEMENT.REPLACE&&e.hasRenderContent&&!s,d=!1,p=!0,h=o(c);try{for(h.s();!(l=h.n()).done;){var y=l.value;if(y._selectionDepth=n,y.isVisibleAndInRequestVolume?(t.find(y)&&t.delete(y),t.push(y),d=!0):(f||u)&&(this.loadTile(y,r),this.touchTile(y,r)),f){var v=void 0;if(v=!!y._inRequestVolume&&(y.hasRenderContent?y.contentAvailable:this.executeEmptyTraversal(y,r)),!(p=p&&v))return!1}}}catch(e){h.e(e)}finally{h.f()}return d||(p=!1),p}},{key:"updateTile",value:function(e,r){this.updateTileVisibility(e,r)}},{key:"selectTile",value:function(e,r){this.shouldSelectTile(e)&&(e._selectedFrame=r.frameNumber,this.selectedTiles[e.id]=e)}},{key:"loadTile",value:function(e,r){this.shouldLoadTile(e)&&(e._requestedFrame=r.frameNumber,e._priority=e._getPriority(),this.requestedTiles[e.id]=e)}},{key:"touchTile",value:function(e,r){e.tileset._cache.touch(e),e._touchedFrame=r.frameNumber}},{key:"canTraverse",value:function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!!e.hasChildren&&(e.hasTilesetContent?!e.contentExpired:!(!n&&!e.isVisibleAndInRequestVolume)&&this.shouldRefine(e,r,t))}},{key:"shouldLoadTile",value:function(e){return e.hasUnloadedContent||e.contentExpired}},{key:"shouldSelectTile",value:function(e){return e.contentAvailable&&!this.options.skipLevelOfDetail}},{key:"shouldRefine",value:function(e,r,t){var n=e._screenSpaceError;return t&&(n=e.getScreenSpaceError(r,!0)),n>this.options.maximumScreenSpaceError}},{key:"updateTileVisibility",value:function(e,r){var t=[];if(this.options.viewportTraversersMap)for(var n in this.options.viewportTraversersMap){this.options.viewportTraversersMap[n]===r.viewport.id&&t.push(n)}else t.push(r.viewport.id);e.updateVisibility(r,t)}},{key:"compareDistanceToCamera",value:function(e,r){return e._distanceToCamera-r._distanceToCamera}},{key:"anyChildrenVisible",value:function(e,r){var t,n=!1,a=o(e.children);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.updateVisibility(r),n=n||i.isVisibleAndInRequestVolume}}catch(e){a.e(e)}finally{a.f()}return n}},{key:"executeEmptyTraversal",value:function(e,r){var t=!0,n=this._emptyTraversalStack;for(n.push(e);n.length>0&&t;){var a=n.pop();if(this.updateTile(a,r),a.isVisibleAndInRequestVolume||this.loadTile(a,r),this.touchTile(a,r),!a.hasRenderContent&&this.canTraverse(a,r,!1,!0)){var i,u=o(a.children);try{for(u.s();!(i=u.n()).done;){var s=i.value;n.find(s)&&n.delete(s),n.push(s)}}catch(e){u.e(e)}finally{u.f()}}else a.contentAvailable||(t=!1)}return t}}]),e}();return tilesetTraverser.TilesetTraverser=f,tilesetTraverser}function requireTile3d(){if(hasRequiredTile3d)return tile3d;hasRequiredTile3d=1;var e=interopRequireDefaultExports;Object.defineProperty(tile3d,"__esModule",{value:!0}),tile3d.Tile3D=void 0;var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=e(requireClassCallCheck$3()),a=e(requireCreateClass$3()),i=e(requireDefineProperty$3()),o=requireEs5$4(),u=requireEs5$2(),s=es5$g,c=requireConstants$2(),l=requireBoundingVolume(),f=requireTiles3dLod(),d=requireI3sLod(),p=require_3dTilesOptions(),h=requireTilesetTraverser();function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach((function(r){(0,i.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var m=new o.Vector3;var b=function(){function e(r,t,a){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";(0,n.default)(this,e),(0,i.default)(this,"tileset",void 0),(0,i.default)(this,"header",void 0),(0,i.default)(this,"id",void 0),(0,i.default)(this,"url",void 0),(0,i.default)(this,"parent",void 0),(0,i.default)(this,"refine",void 0),(0,i.default)(this,"type",void 0),(0,i.default)(this,"contentUrl",void 0),(0,i.default)(this,"lodMetricType",void 0),(0,i.default)(this,"lodMetricValue",void 0),(0,i.default)(this,"boundingVolume",void 0),(0,i.default)(this,"content",void 0),(0,i.default)(this,"contentState",void 0),(0,i.default)(this,"gpuMemoryUsageInBytes",void 0),(0,i.default)(this,"children",void 0),(0,i.default)(this,"depth",void 0),(0,i.default)(this,"viewportIds",void 0),(0,i.default)(this,"transform",void 0),(0,i.default)(this,"extensions",void 0),(0,i.default)(this,"implicitTiling",void 0),(0,i.default)(this,"userData",void 0),(0,i.default)(this,"computedTransform",void 0),(0,i.default)(this,"hasEmptyContent",void 0),(0,i.default)(this,"hasTilesetContent",void 0),(0,i.default)(this,"traverser",void 0),(0,i.default)(this,"_cacheNode",void 0),(0,i.default)(this,"_frameNumber",void 0),(0,i.default)(this,"_lodJudge",void 0),(0,i.default)(this,"_expireDate",void 0),(0,i.default)(this,"_expiredContent",void 0),(0,i.default)(this,"_shouldRefine",void 0),(0,i.default)(this,"_boundingBox",void 0),(0,i.default)(this,"_distanceToCamera",void 0),(0,i.default)(this,"_centerZDepth",void 0),(0,i.default)(this,"_screenSpaceError",void 0),(0,i.default)(this,"_visibilityPlaneMask",void 0),(0,i.default)(this,"_visible",void 0),(0,i.default)(this,"_inRequestVolume",void 0),(0,i.default)(this,"_stackLength",void 0),(0,i.default)(this,"_selectionDepth",void 0),(0,i.default)(this,"_touchedFrame",void 0),(0,i.default)(this,"_visitedFrame",void 0),(0,i.default)(this,"_selectedFrame",void 0),(0,i.default)(this,"_requestedFrame",void 0),(0,i.default)(this,"_priority",void 0),(0,i.default)(this,"_contentBoundingVolume",void 0),(0,i.default)(this,"_viewerRequestVolume",void 0),(0,i.default)(this,"_initialTransform",void 0),this.header=t,this.tileset=r,this.id=u||t.id,this.url=t.url,this.parent=a,this.refine=this._getRefine(t.refine),this.type=t.type,this.contentUrl=t.contentUrl,this.lodMetricType="geometricError",this.lodMetricValue=0,this.boundingVolume=null,this.content=null,this.contentState=c.TILE_CONTENT_STATE.UNLOADED,this.gpuMemoryUsageInBytes=0,this.children=[],this.hasEmptyContent=!1,this.hasTilesetContent=!1,this.depth=0,this.viewportIds=[],this.userData={},this.extensions=null,this._priority=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._screenSpaceError=0,this._cacheNode=null,this._frameNumber=null,this._cacheNode=null,this.traverser=new h.TilesetTraverser({}),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._initialTransform=new o.Matrix4,this.transform=new o.Matrix4,this._initializeLodMetric(t),this._initializeTransforms(t),this._initializeBoundingVolumes(t),this._initializeContent(t),this._initializeRenderingState(t),this._lodJudge=null,this._expireDate=null,this._expiredContent=null,this.implicitTiling=null,Object.seal(this)}var y;return(0,a.default)(e,[{key:"destroy",value:function(){this.header=null}},{key:"isDestroyed",value:function(){return null===this.header}},{key:"selected",get:function(){return this._selectedFrame===this.tileset._frameNumber}},{key:"isVisible",get:function(){return this._visible}},{key:"isVisibleAndInRequestVolume",get:function(){return this._visible&&this._inRequestVolume}},{key:"hasRenderContent",get:function(){return!this.hasEmptyContent&&!this.hasTilesetContent}},{key:"hasChildren",get:function(){return this.children.length>0||this.header.children&&this.header.children.length>0}},{key:"contentReady",get:function(){return this.contentState===c.TILE_CONTENT_STATE.READY||this.hasEmptyContent}},{key:"contentAvailable",get:function(){return Boolean(this.contentReady&&this.hasRenderContent||this._expiredContent&&!this.contentFailed)}},{key:"hasUnloadedContent",get:function(){return this.hasRenderContent&&this.contentUnloaded}},{key:"contentUnloaded",get:function(){return this.contentState===c.TILE_CONTENT_STATE.UNLOADED}},{key:"contentExpired",get:function(){return this.contentState===c.TILE_CONTENT_STATE.EXPIRED}},{key:"contentFailed",get:function(){return this.contentState===c.TILE_CONTENT_STATE.FAILED}},{key:"distanceToCamera",get:function(){return this._distanceToCamera}},{key:"screenSpaceError",get:function(){return this._screenSpaceError}},{key:"boundingBox",get:function(){return this._boundingBox||(this._boundingBox=(0,l.getCartographicBounds)(this.header.boundingVolume,this.boundingVolume)),this._boundingBox}},{key:"getScreenSpaceError",value:function(e,r){switch(this.tileset.type){case c.TILESET_TYPE.I3S:return(0,d.getProjectedRadius)(this,e);case c.TILESET_TYPE.TILES3D:return(0,f.getTiles3DScreenSpaceError)(this,e,r);default:throw new Error("Unsupported tileset type")}}},{key:"unselect",value:function(){this._selectedFrame=0}},{key:"_getPriority",value:function(){var e=this.tileset._traverser,r=e.options.skipLevelOfDetail,t=this.refine===c.TILE_REFINEMENT.ADD||r;if(t&&!this.isVisible&&void 0!==this._visible)return-1;if(this.tileset._frameNumber-this._touchedFrame>=1)return-1;if(this.contentState===c.TILE_CONTENT_STATE.UNLOADED)return-1;var n=this.parent,a=n&&(!t||0===this._screenSpaceError||n.hasTilesetContent)?n._screenSpaceError:this._screenSpaceError,i=e.root?e.root._screenSpaceError:0;return Math.max(i-a,0)}},{key:"loadContent",value:(y=(0,t.default)(r.default.mark((function e(){var t,n,a,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasEmptyContent){e.next=2;break}return e.abrupt("return",!1);case 2:if(!this.content){e.next=4;break}return e.abrupt("return",!0);case 4:return this.contentExpired&&(this._expireDate=null),this.contentState=c.TILE_CONTENT_STATE.LOADING,e.next=9,this.tileset._requestScheduler.scheduleRequest(this.id,this._getPriority.bind(this));case 9:if(t=e.sent){e.next=13;break}return this.contentState=c.TILE_CONTENT_STATE.UNLOADED,e.abrupt("return",!1);case 13:return e.prev=13,n=this.tileset.getTileUrl(this.contentUrl),a=this.tileset.loader,o=v(v({},this.tileset.loadOptions),{},(0,i.default)({},a.id,v(v({},this.tileset.loadOptions[a.id]),{},{isTileset:"json"===this.type},this._getLoaderSpecificOptions(a.id)))),e.next=19,(0,s.load)(n,a,o);case 19:if(this.content=e.sent,!this.tileset.options.contentLoader){e.next=23;break}return e.next=23,this.tileset.options.contentLoader(this);case 23:return this._isTileset()&&this.tileset._initializeTileHeaders(this.content,this),this.contentState=c.TILE_CONTENT_STATE.READY,this._onContentLoaded(),e.abrupt("return",!0);case 29:throw e.prev=29,e.t0=e.catch(13),this.contentState=c.TILE_CONTENT_STATE.FAILED,e.t0;case 33:return e.prev=33,t.done(),e.finish(33);case 36:case"end":return e.stop()}}),e,this,[[13,29,33,36]])}))),function(){return y.apply(this,arguments)})},{key:"unloadContent",value:function(){return this.content&&this.content.destroy&&this.content.destroy(),this.content=null,this.header.content&&this.header.content.destroy&&this.header.content.destroy(),this.header.content=null,this.contentState=c.TILE_CONTENT_STATE.UNLOADED,!0}},{key:"updateVisibility",value:function(e,r){if(this._frameNumber!==e.frameNumber){var t=this.parent,n=t?t._visibilityPlaneMask:u.CullingVolume.MASK_INDETERMINATE;if(this.tileset._traverser.options.updateTransforms){var a=t?t.computedTransform:this.tileset.modelMatrix;this._updateTransform(a)}this._distanceToCamera=this.distanceToTile(e),this._screenSpaceError=this.getScreenSpaceError(e,!1),this._visibilityPlaneMask=this.visibility(e,n),this._visible=this._visibilityPlaneMask!==u.CullingVolume.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(e),this._frameNumber=e.frameNumber,this.viewportIds=r}}},{key:"visibility",value:function(e,r){var t=e.cullingVolume,n=this.boundingVolume;return t.computeVisibilityWithPlaneMask(n,r)}},{key:"contentVisibility",value:function(){return!0}},{key:"distanceToTile",value:function(e){var r=this.boundingVolume;return Math.sqrt(Math.max(r.distanceSquaredTo(e.camera.position),0))}},{key:"cameraSpaceZDepth",value:function(e){var r=e.camera,t=this.boundingVolume;return m.subVectors(t.center,r.position),r.direction.dot(m)}},{key:"insideViewerRequestVolume",value:function(e){var r=this._viewerRequestVolume;return!r||r.distanceSquaredTo(e.camera.position)<=0}},{key:"updateExpiration",value:function(){if(null!=this._expireDate&&this.contentReady&&!this.hasEmptyContent){var e=Date.now();Date.lessThan(this._expireDate,e)&&(this.contentState=c.TILE_CONTENT_STATE.EXPIRED,this._expiredContent=this.content)}}},{key:"extras",get:function(){return this.header.extras}},{key:"_initializeLodMetric",value:function(e){"lodMetricType"in e?this.lodMetricType=e.lodMetricType:(this.lodMetricType=this.parent&&this.parent.lodMetricType||this.tileset.lodMetricType,console.warn("3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType")),"lodMetricValue"in e?this.lodMetricValue=e.lodMetricValue:(this.lodMetricValue=this.parent&&this.parent.lodMetricValue||this.tileset.lodMetricValue,console.warn("3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue"))}},{key:"_initializeTransforms",value:function(e){this.transform=e.transform?new o.Matrix4(e.transform):new o.Matrix4;var r=this.parent,t=this.tileset,n=r&&r.computedTransform?r.computedTransform.clone():t.modelMatrix.clone();this.computedTransform=new o.Matrix4(n).multiplyRight(this.transform);var a=r&&r._initialTransform?r._initialTransform.clone():new o.Matrix4;this._initialTransform=new o.Matrix4(a).multiplyRight(this.transform)}},{key:"_initializeBoundingVolumes",value:function(e){this._contentBoundingVolume=null,this._viewerRequestVolume=null,this._updateBoundingVolume(e)}},{key:"_initializeContent",value:function(e){this.content={_tileset:this.tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=c.TILE_CONTENT_STATE.UNLOADED,this.hasTilesetContent=!1,e.contentUrl&&(this.content=null,this.hasEmptyContent=!1)}},{key:"_initializeRenderingState",value:function(e){this.depth=e.level||(this.parent?this.parent.depth+1:0),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=u.CullingVolume.MASK_INDETERMINATE,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._frameNumber=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._priority=0}},{key:"_getRefine",value:function(e){return e||this.parent&&this.parent.refine||c.TILE_REFINEMENT.REPLACE}},{key:"_isTileset",value:function(){return-1!==this.contentUrl.indexOf(".json")}},{key:"_onContentLoaded",value:function(){switch(this.content&&this.content.type){case"vctr":case"geom":this.tileset._traverser.disableSkipLevelOfDetail=!0}this._isTileset()&&(this.hasTilesetContent=!0)}},{key:"_updateBoundingVolume",value:function(e){this.boundingVolume=(0,l.createBoundingVolume)(e.boundingVolume,this.computedTransform,this.boundingVolume);var r=e.content;r&&(r.boundingVolume&&(this._contentBoundingVolume=(0,l.createBoundingVolume)(r.boundingVolume,this.computedTransform,this._contentBoundingVolume)),e.viewerRequestVolume&&(this._viewerRequestVolume=(0,l.createBoundingVolume)(e.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)))}},{key:"_updateTransform",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.Matrix4).clone().multiplyRight(this.transform);!e.equals(this.computedTransform)&&(this.computedTransform=e,this._updateBoundingVolume(this.header))}},{key:"_getLoaderSpecificOptions",value:function(e){return"i3s"===e?v(v({},this.tileset.options.i3s),{},{_tileOptions:{attributeUrls:this.header.attributeUrls,textureUrl:this.header.textureUrl,textureFormat:this.header.textureFormat,textureLoaderOptions:this.header.textureLoaderOptions,materialDefinition:this.header.materialDefinition,isDracoGeometry:this.header.isDracoGeometry,mbs:this.header.mbs},_tilesetOptions:{store:this.tileset.tileset.store,attributeStorageInfo:this.tileset.tileset.attributeStorageInfo,fields:this.tileset.tileset.fields},isTileHeader:!1}):(0,p.get3dTilesOptions)(this.tileset.tileset)}}]),e}();return tile3d.Tile3D=b,tile3d}var tileset3dTraverser={},get={exports:{}},superPropBase={exports:{}},hasRequiredSuperPropBase,hasRequiredGet,hasRequiredTileset3dTraverser;function requireSuperPropBase(){return hasRequiredSuperPropBase||(hasRequiredSuperPropBase=1,function(e){var r=requireGetPrototypeOf$1();e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports}(superPropBase)),superPropBase.exports}function requireGet(){return hasRequiredGet||(hasRequiredGet=1,function(e){var r=requireSuperPropBase();function t(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=t=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=t=function(e,t,n){var a=r(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},e.exports.__esModule=!0,e.exports.default=e.exports),t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(get)),get.exports}function requireTileset3dTraverser(){if(hasRequiredTileset3dTraverser)return tileset3dTraverser;hasRequiredTileset3dTraverser=1;var e=interopRequireDefaultExports;Object.defineProperty(tileset3dTraverser,"__esModule",{value:!0}),tileset3dTraverser.Tileset3DTraverser=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=e(requireGet()),a=e(requireInherits$1()),i=e(requirePossibleConstructorReturn$1()),o=e(requireGetPrototypeOf$1()),u=requireConstants$2();function s(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,o.default)(e);if(r){var a=(0,o.default)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,i.default)(this,t)}}var c=function(e){(0,a.default)(c,e);var i=s(c);function c(){return(0,r.default)(this,c),i.apply(this,arguments)}return(0,t.default)(c,[{key:"compareDistanceToCamera",value:function(e,r){return 0===r._distanceToCamera&&0===e._distanceToCamera?r._centerZDepth-e._centerZDepth:r._distanceToCamera-e._distanceToCamera}},{key:"updateTileVisibility",value:function(e,r){if((0,n.default)((0,o.default)(c.prototype),"updateTileVisibility",this).call(this,e,r),e.isVisibleAndInRequestVolume){var t=e.children.length>0;if(e.hasTilesetContent&&t){var a=e.children[0];return this.updateTileVisibility(a,r),void(e._visible=a._visible)}if(this.meetsScreenSpaceErrorEarly(e,r))e._visible=!1;else{var i=e.refine===u.TILE_REFINEMENT.REPLACE,s=e._optimChildrenWithinParent===u.TILE3D_OPTIMIZATION_HINT.USE_OPTIMIZATION;i&&s&&t&&!this.anyChildrenVisible(e,r)&&(e._visible=!1)}}}},{key:"meetsScreenSpaceErrorEarly",value:function(e,r){var t=e.parent;return!(!t||t.hasTilesetContent||t.refine!==u.TILE_REFINEMENT.ADD)&&!this.shouldRefine(e,r,!0)}}]),c}(requireTilesetTraverser().TilesetTraverser);return tileset3dTraverser.Tileset3DTraverser=c,tileset3dTraverser}var i3sTilesetTraverser={},i3sTileManager={},i3sPendingTilesRegister={},hasRequiredI3sPendingTilesRegister,hasRequiredI3sTileManager,hasRequiredI3sTilesetTraverser,hasRequiredTileset3d,hasRequiredEs5$1;function requireI3sPendingTilesRegister(){if(hasRequiredI3sPendingTilesRegister)return i3sPendingTilesRegister;hasRequiredI3sPendingTilesRegister=1;var e=interopRequireDefaultExports;Object.defineProperty(i3sPendingTilesRegister,"__esModule",{value:!0}),i3sPendingTilesRegister.I3SPendingTilesRegister=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=e(requireDefineProperty$3()),a=function(){function e(){(0,r.default)(this,e),(0,n.default)(this,"frameNumberMap",new Map)}return(0,t.default)(e,[{key:"register",value:function(e,r){var t=this.frameNumberMap.get(e)||new Map,n=t.get(r)||0;t.set(r,n+1),this.frameNumberMap.set(e,t)}},{key:"deregister",value:function(e,r){var t=this.frameNumberMap.get(e);if(t){var n=t.get(r)||1;t.set(r,n-1)}}},{key:"isZero",value:function(e,r){var t;return 0===((null===(t=this.frameNumberMap.get(e))||void 0===t?void 0:t.get(r))||0)}}]),e}();return i3sPendingTilesRegister.I3SPendingTilesRegister=a,i3sPendingTilesRegister}function requireI3sTileManager(){if(hasRequiredI3sTileManager)return i3sTileManager;hasRequiredI3sTileManager=1;var e=interopRequireDefaultExports;Object.defineProperty(i3sTileManager,"__esModule",{value:!0}),i3sTileManager.I3STileManager=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=e(requireDefineProperty$3()),a=requireI3sPendingTilesRegister(),i="REQUESTED",o="COMPLETED",u="ERROR",s=function(){function e(){(0,r.default)(this,e),(0,n.default)(this,"_statusMap",void 0),(0,n.default)(this,"pendingTilesRegister",new a.I3SPendingTilesRegister),this._statusMap={}}return(0,t.default)(e,[{key:"add",value:function(e,r,t,n){var a=this;if(!this._statusMap[r]){var s=n.frameNumber,c=n.viewport.id;this._statusMap[r]={request:e,callback:t,key:r,frameState:n,status:i},this.pendingTilesRegister.register(c,s),e().then((function(e){a._statusMap[r].status=o;var t=a._statusMap[r].frameState,i=t.frameNumber,u=t.viewport.id;a.pendingTilesRegister.deregister(u,i),a._statusMap[r].callback(e,n)})).catch((function(e){a._statusMap[r].status=u;var n=a._statusMap[r].frameState,i=n.frameNumber,o=n.viewport.id;a.pendingTilesRegister.deregister(o,i),t(e)}))}}},{key:"update",value:function(e,r){if(this._statusMap[e]){var t=this._statusMap[e].frameState,n=t.frameNumber,a=t.viewport.id;this.pendingTilesRegister.deregister(a,n);var i=r.frameNumber,o=r.viewport.id;this.pendingTilesRegister.register(o,i),this._statusMap[e].frameState=r}}},{key:"find",value:function(e){return this._statusMap[e]}},{key:"hasPendingTiles",value:function(e,r){return!this.pendingTilesRegister.isZero(e,r)}}]),e}();return i3sTileManager.I3STileManager=s,i3sTileManager}function requireI3sTilesetTraverser(){if(hasRequiredI3sTilesetTraverser)return i3sTilesetTraverser;hasRequiredI3sTilesetTraverser=1;var e=interopRequireDefaultExports;Object.defineProperty(i3sTilesetTraverser,"__esModule",{value:!0}),i3sTilesetTraverser.I3STilesetTraverser=void 0;var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=e(requireClassCallCheck$3()),a=e(requireCreateClass$3()),i=e(requireAssertThisInitialized$1()),o=e(requireInherits$1()),u=e(requirePossibleConstructorReturn$1()),s=e(requireGetPrototypeOf$1()),c=e(requireDefineProperty$3()),l=es5$g,f=requireTilesetTraverser(),d=requireI3sLod(),p=requireTile3d(),h=requireI3sTileManager();function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach((function(r){(0,c.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function m(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return b(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return b(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}function b(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function g(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,s.default)(e);if(r){var a=(0,s.default)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,u.default)(this,t)}}var _=function(e){(0,o.default)(f,e);var u,s=g(f);function f(e){var r;return(0,n.default)(this,f),r=s.call(this,e),(0,c.default)((0,i.default)(r),"_tileManager",void 0),r._tileManager=new h.I3STileManager,r}return(0,a.default)(f,[{key:"traversalFinished",value:function(e){return!this._tileManager.hasPendingTiles(e.viewport.id,this._frameNumber||0)}},{key:"shouldRefine",value:function(e,r){return e._lodJudge=(0,d.getLodStatus)(e,r),"DIG"===e._lodJudge}},{key:"updateChildTiles",value:function(e,r){var t,n=this,a=e.header.children||[],i=e.children,o=e.tileset,u=m(a);try{var s=function(){var a=t.value,u="".concat(a.id,"-").concat(r.viewport.id),s=i&&i.find((function(e){return e.id===u}));if(s)s&&n.updateTile(s,r);else{var c=function(){return n._loadTile(a.id,o)};n._tileManager.find(u)?n._tileManager.update(u,r):(o.tileset.nodePages&&(c=function(){return o.tileset.nodePagesTile.formTileFromNodePages(a.id)}),n._tileManager.add(c,u,(function(r){return n._onTileLoad(r,e,u)}),r))}};for(u.s();!(t=u.n()).done;)s()}catch(e){u.e(e)}finally{u.f()}return!1}},{key:"_loadTile",value:(u=(0,t.default)(r.default.mark((function e(t,n){var a,i,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.loader,i=n.getTileUrl("".concat(n.url,"/nodes/").concat(t)),o=v(v({},n.loadOptions),{},{i3s:v(v({},n.loadOptions.i3s),{},{isTileHeader:!0})}),e.next=5,(0,l.load)(i,a,o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),function(e,r){return u.apply(this,arguments)})},{key:"_onTileLoad",value:function(e,r,t){var n=new p.Tile3D(r.tileset,e,r,t);r.children.push(n);var a=this._tileManager.find(n.id).frameState;this.updateTile(n,a),this._frameNumber===a.frameNumber&&(this.traversalFinished(a)||(new Date).getTime()-this.lastUpdate>this.updateDebounceTime)&&this.executeTraversal(n,a)}}]),f}(f.TilesetTraverser);return i3sTilesetTraverser.I3STilesetTraverser=_,i3sTilesetTraverser}function requireTileset3d(){if(hasRequiredTileset3d)return tileset3d;hasRequiredTileset3d=1;var e=interopRequireDefaultExports;Object.defineProperty(tileset3d,"__esModule",{value:!0}),tileset3d.Tileset3D=void 0;var r=e(requireRegenerator()),t=e(requireSlicedToArray$2()),n=e(requireAsyncToGenerator()),a=e(requireClassCallCheck$3()),i=e(requireCreateClass$3()),o=e(requireDefineProperty$3()),u=requireEs5$4(),s=requireEs5$3(),c=requireEs5$c(),l=requireEs5$b(),f=requireTilesetCache(),d=requireTransformUtils(),p=requireFrameState(),h=requireZoom(),y=requireTile3d(),v=requireConstants$2(),m=requireTilesetTraverser(),b=requireTileset3dTraverser(),g=requireI3sTilesetTraverser();function _(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return A(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return A(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}function A(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function T(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?T(Object(t),!0).forEach((function(r){(0,o.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var R={description:"",ellipsoid:s.Ellipsoid.WGS84,modelMatrix:new u.Matrix4,throttleRequests:!0,maxRequests:64,maximumMemoryUsage:32,maximumTilesSelected:0,debounceTime:0,onTileLoad:function(){},onTileUnload:function(){},onTileError:function(){},onTraversalComplete:function(e){return e},contentLoader:void 0,viewDistanceScale:1,maximumScreenSpaceError:8,loadTiles:!0,updateTransforms:!0,viewportTraversersMap:null,loadOptions:{fetch:{}},attributions:[],basePath:"",i3s:{}},E="Tiles In Tileset(s)",S="Tiles In Memory",q="Tiles In View",C="Tiles To Render",B="Tiles Loaded",x="Tiles Loading",P="Tiles Unloaded",w="Failed Tile Loads",M="Points/Vertices",I="Tile Memory Use",k=function(){function e(r,t){(0,a.default)(this,e),(0,o.default)(this,"options",void 0),(0,o.default)(this,"loadOptions",void 0),(0,o.default)(this,"type",void 0),(0,o.default)(this,"tileset",void 0),(0,o.default)(this,"loader",void 0),(0,o.default)(this,"url",void 0),(0,o.default)(this,"basePath",void 0),(0,o.default)(this,"modelMatrix",void 0),(0,o.default)(this,"ellipsoid",void 0),(0,o.default)(this,"lodMetricType",void 0),(0,o.default)(this,"lodMetricValue",void 0),(0,o.default)(this,"refine",void 0),(0,o.default)(this,"root",void 0),(0,o.default)(this,"roots",void 0),(0,o.default)(this,"asset",void 0),(0,o.default)(this,"description",void 0),(0,o.default)(this,"properties",void 0),(0,o.default)(this,"extras",void 0),(0,o.default)(this,"attributions",void 0),(0,o.default)(this,"credits",void 0),(0,o.default)(this,"stats",void 0),(0,o.default)(this,"contentFormats",{draco:!1,meshopt:!1,dds:!1,ktx2:!1}),(0,o.default)(this,"traverseCounter",void 0),(0,o.default)(this,"geometricError",void 0),(0,o.default)(this,"selectedTiles",void 0),(0,o.default)(this,"updatePromise",null),(0,o.default)(this,"tilesetInitializationPromise",void 0),(0,o.default)(this,"cartographicCenter",void 0),(0,o.default)(this,"cartesianCenter",void 0),(0,o.default)(this,"zoom",void 0),(0,o.default)(this,"boundingVolume",void 0),(0,o.default)(this,"gpuMemoryUsageInBytes",void 0),(0,o.default)(this,"dynamicScreenSpaceErrorComputedDensity",void 0),(0,o.default)(this,"_traverser",void 0),(0,o.default)(this,"_cache",void 0),(0,o.default)(this,"_requestScheduler",void 0),(0,o.default)(this,"_frameNumber",void 0),(0,o.default)(this,"_queryParamsString",void 0),(0,o.default)(this,"_queryParams",void 0),(0,o.default)(this,"_extensionsUsed",void 0),(0,o.default)(this,"_tiles",void 0),(0,o.default)(this,"_pendingCount",void 0),(0,o.default)(this,"lastUpdatedVieports",void 0),(0,o.default)(this,"_requestedTiles",void 0),(0,o.default)(this,"_emptyTiles",void 0),(0,o.default)(this,"frameStateData",void 0),(0,o.default)(this,"maximumMemoryUsage",void 0),(0,l.assert)(r),this.options=O(O({},R),t),this.tileset=r,this.loader=r.loader,this.type=r.type,this.url=r.url,this.basePath=r.basePath||l.path.dirname(this.url),this.modelMatrix=this.options.modelMatrix,this.ellipsoid=this.options.ellipsoid,this.lodMetricType=r.lodMetricType,this.lodMetricValue=r.lodMetricValue,this.refine=r.root.refine,this.loadOptions=this.options.loadOptions||{},this.root=null,this.roots={},this.cartographicCenter=null,this.cartesianCenter=null,this.zoom=1,this.boundingVolume=null,this.traverseCounter=0,this.geometricError=0,this._traverser=this._initializeTraverser(),this._cache=new f.TilesetCache,this._requestScheduler=new l.RequestScheduler({throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests}),this._frameNumber=0,this._pendingCount=0,this._tiles={},this.selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this.frameStateData={},this.lastUpdatedVieports=null,this._queryParams={},this._queryParamsString="",this.maximumMemoryUsage=this.options.maximumMemoryUsage||32,this.gpuMemoryUsageInBytes=0,this.stats=new c.Stats({id:this.url}),this._initializeStats(),this._extensionsUsed=void 0,this.dynamicScreenSpaceErrorComputedDensity=0,this.extras=null,this.asset={},this.credits={},this.description=this.options.description||"",this.tilesetInitializationPromise=this._initializeTileSet(r)}var A,T,k;return(0,i.default)(e,[{key:"destroy",value:function(){this._destroy()}},{key:"isLoaded",value:function(){return 0===this._pendingCount&&0!==this._frameNumber&&0===this._requestedTiles.length}},{key:"tiles",get:function(){return Object.values(this._tiles)}},{key:"frameNumber",get:function(){return this._frameNumber}},{key:"queryParams",get:function(){return this._queryParamsString||(this._queryParamsString=function(e){for(var r=[],t=0,n=Object.keys(e);t<n.length;t++){var a=n[t];r.push("".concat(a,"=").concat(e[a]))}switch(r.length){case 0:return"";case 1:return"?".concat(r[0]);default:return"?".concat(r.join("&"))}}(this._queryParams)),this._queryParamsString}},{key:"setProps",value:function(e){this.options=O(O({},this.options),e)}},{key:"setOptions",value:function(e){this.options=O(O({},this.options),e)}},{key:"getTileUrl",value:function(e){return e.startsWith("data:")?e:"".concat(e).concat(this.queryParams)}},{key:"hasExtension",value:function(e){return Boolean(this._extensionsUsed&&this._extensionsUsed.indexOf(e)>-1)}},{key:"update",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.tilesetInitializationPromise.then((function(){!r&&e.lastUpdatedVieports?r=e.lastUpdatedVieports:e.lastUpdatedVieports=r,r&&e.doUpdate(r)}))}},{key:"selectTiles",value:(k=(0,n.default)(r.default.mark((function e(){var t,n=this,a=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:null,e.next=3,this.tilesetInitializationPromise;case 3:return t&&(this.lastUpdatedVieports=t),this.updatePromise||(this.updatePromise=new Promise((function(e){setTimeout((function(){n.lastUpdatedVieports&&n.doUpdate(n.lastUpdatedVieports),e(n._frameNumber),n.updatePromise=null}),n.options.debounceTime)}))),e.abrupt("return",this.updatePromise);case 6:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"doUpdate",value:function(e){if((!("loadTiles"in this.options)||this.options.loadTiles)&&!(this.traverseCounter>0)){var r=e instanceof Array?e:[e];this._cache.reset(),this._frameNumber++,this.traverseCounter=r.length;var t,n=[],a=_(r);try{for(a.s();!(t=a.n()).done;){var i=t.value.id;this._needTraverse(i)?n.push(i):this.traverseCounter--}}catch(e){a.e(e)}finally{a.f()}var o,u=_(r);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=s.id;if(this.roots[c]||(this.roots[c]=this._initializeTileHeaders(this.tileset,null)),n.includes(c)){var l=(0,p.getFrameState)(s,this._frameNumber);this._traverser.traverse(this.roots[c],l,this.options)}}}catch(e){u.e(e)}finally{u.f()}}}},{key:"_needTraverse",value:function(e){var r=e;return this.options.viewportTraversersMap&&(r=this.options.viewportTraversersMap[e]),r===e}},{key:"_onTraversalEnd",value:function(e){var r=e.viewport.id;this.frameStateData[r]||(this.frameStateData[r]={selectedTiles:[],_requestedTiles:[],_emptyTiles:[]});var n=this.frameStateData[r],a=Object.values(this._traverser.selectedTiles),i=(0,p.limitSelectedTiles)(a,e,this.options.maximumTilesSelected),o=(0,t.default)(i,2),u=o[0],s=o[1];n.selectedTiles=u;var c,l=_(s);try{for(l.s();!(c=l.n()).done;){c.value.unselect()}}catch(e){l.e(e)}finally{l.f()}n._requestedTiles=Object.values(this._traverser.requestedTiles),n._emptyTiles=Object.values(this._traverser.emptyTiles),this.traverseCounter--,this.traverseCounter>0||this._updateTiles()}},{key:"_updateTiles",value:function(){for(var e in this.selectedTiles=[],this._requestedTiles=[],this._emptyTiles=[],this.frameStateData){var r=this.frameStateData[e];this.selectedTiles=this.selectedTiles.concat(r.selectedTiles),this._requestedTiles=this._requestedTiles.concat(r._requestedTiles),this._emptyTiles=this._emptyTiles.concat(r._emptyTiles)}this.selectedTiles=this.options.onTraversalComplete(this.selectedTiles);var t,n=_(this.selectedTiles);try{for(n.s();!(t=n.n()).done;){var a=t.value;this._tiles[a.id]=a}}catch(e){n.e(e)}finally{n.f()}this._loadTiles(),this._unloadTiles(),this._updateStats()}},{key:"_tilesChanged",value:function(e,r){if(e.length!==r.length)return!0;var t=new Set(e.map((function(e){return e.id}))),n=new Set(r.map((function(e){return e.id}))),a=e.filter((function(e){return!n.has(e.id)})).length>0;return a=a||r.filter((function(e){return!t.has(e.id)})).length>0}},{key:"_loadTiles",value:function(){var e,r=_(this._requestedTiles);try{for(r.s();!(e=r.n()).done;){var t=e.value;t.contentUnloaded&&this._loadTile(t)}}catch(e){r.e(e)}finally{r.f()}}},{key:"_unloadTiles",value:function(){this._cache.unloadTiles(this,(function(e,r){return e._unloadTile(r)}))}},{key:"_updateStats",value:function(){var e,r=0,t=0,n=_(this.selectedTiles);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.contentAvailable&&a.content&&(r++,a.content.pointCount?t+=a.content.pointCount:t+=a.content.vertexCount)}}catch(e){n.e(e)}finally{n.f()}this.stats.get(q).count=this.selectedTiles.length,this.stats.get(C).count=r,this.stats.get(M).count=t}},{key:"_initializeTileSet",value:(T=(0,n.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.type!==v.TILESET_TYPE.I3S){e.next=5;break}return this.calculateViewPropsI3S(),e.next=4,t.root;case 4:t.root=e.sent;case 5:this.root=this._initializeTileHeaders(t,null),this.type===v.TILESET_TYPE.TILES3D&&(this._initializeTiles3DTileset(t),this.calculateViewPropsTiles3D()),this.type===v.TILESET_TYPE.I3S&&this._initializeI3STileset();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return T.apply(this,arguments)})},{key:"calculateViewPropsI3S",value:function(){var e,r=this.tileset.fullExtent;if(r){var n=r.xmin,a=r.xmax,i=r.ymin,o=r.ymax,c=r.zmin,l=r.zmax;return this.cartographicCenter=new u.Vector3(n+(a-n)/2,i+(o-i)/2,c+(l-c)/2),this.cartesianCenter=s.Ellipsoid.WGS84.cartographicToCartesian(this.cartographicCenter,new u.Vector3),void(this.zoom=(0,h.getZoomFromFullExtent)(r,this.cartographicCenter,this.cartesianCenter))}var f=null===(e=this.tileset.store)||void 0===e?void 0:e.extent;if(f){var d=(0,t.default)(f,4),p=d[0],y=d[1],v=d[2],m=d[3];return this.cartographicCenter=new u.Vector3(p+(v-p)/2,y+(m-y)/2,0),this.cartesianCenter=s.Ellipsoid.WGS84.cartographicToCartesian(this.cartographicCenter,new u.Vector3),void(this.zoom=(0,h.getZoomFromExtent)(f,this.cartographicCenter,this.cartesianCenter))}console.warn("Extent is not defined in the tileset header"),this.cartographicCenter=new u.Vector3,this.zoom=1}},{key:"calculateViewPropsTiles3D",value:function(){var e=this.root;(0,l.assert)(e);var r=e.boundingVolume.center;if(!r)return console.warn("center was not pre-calculated for the root tile"),this.cartographicCenter=new u.Vector3,void(this.zoom=1);0!==r[0]||0!==r[1]||0!==r[2]?this.cartographicCenter=s.Ellipsoid.WGS84.cartesianToCartographic(r,new u.Vector3):this.cartographicCenter=new u.Vector3(0,0,-s.Ellipsoid.WGS84.radii[0]),this.cartesianCenter=r,this.zoom=(0,h.getZoomFromBoundingVolume)(e.boundingVolume,this.cartographicCenter)}},{key:"_initializeStats",value:function(){this.stats.get(E),this.stats.get(x),this.stats.get(S),this.stats.get(q),this.stats.get(C),this.stats.get(B),this.stats.get(P),this.stats.get(w),this.stats.get(M),this.stats.get(I,"memory")}},{key:"_initializeTileHeaders",value:function(e,r){var t=new y.Tile3D(this,e.root,r);if(r&&(r.children.push(t),t.depth=r.depth+1),this.type===v.TILESET_TYPE.TILES3D){var n=[];for(n.push(t);n.length>0;){var a=n.pop();this.stats.get(E).incrementCount();var i,o=_(a.header.children||[]);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=new y.Tile3D(this,u,a);a.children.push(s),s.depth=a.depth+1,n.push(s)}}catch(e){o.e(e)}finally{o.f()}}}return t}},{key:"_initializeTraverser",value:function(){var e;switch(this.type){case v.TILESET_TYPE.TILES3D:e=b.Tileset3DTraverser;break;case v.TILESET_TYPE.I3S:e=g.I3STilesetTraverser;break;default:e=m.TilesetTraverser}return new e({basePath:this.basePath,onTraversalEnd:this._onTraversalEnd.bind(this)})}},{key:"_destroyTileHeaders",value:function(e){this._destroySubtree(e)}},{key:"_loadTile",value:(A=(0,n.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this._onStartTileLoading(),e.next=4,t.loadContent();case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this._onTileLoadError(t,e.t0);case 10:return e.prev=10,this._onEndTileLoading(),this._onTileLoad(t,n),e.finish(10);case 14:case"end":return e.stop()}}),e,this,[[0,7,10,14]])}))),function(e){return A.apply(this,arguments)})},{key:"_onTileLoadError",value:function(e,r){this.stats.get(w).incrementCount();var t=r.message||r.toString(),n=e.url;console.error("A 3D tile failed to load: ".concat(e.url," ").concat(t)),this.options.onTileError(e,t,n)}},{key:"_onTileLoad",value:function(e,r){if(r){if(this.type===v.TILESET_TYPE.I3S){var t,n,a=(null===(t=this.tileset)||void 0===t||null===(n=t.nodePagesTile)||void 0===n?void 0:n.nodesInNodePages)||0;this.stats.get(E).reset(),this.stats.get(E).addCount(a)}e&&e.content&&(0,d.calculateTransformProps)(e,e.content),this.updateContentTypes(e),this._addTileToCache(e),this.options.onTileLoad(e)}}},{key:"updateContentTypes",value:function(e){if(this.type===v.TILESET_TYPE.I3S)switch(e.header.isDracoGeometry&&(this.contentFormats.draco=!0),e.header.textureFormat){case"dds":this.contentFormats.dds=!0;break;case"ktx2":this.contentFormats.ktx2=!0}else if(this.type===v.TILESET_TYPE.TILES3D){var r,t=((null===(r=e.content)||void 0===r?void 0:r.gltf)||{}).extensionsRemoved,n=void 0===t?[]:t;n.includes("KHR_draco_mesh_compression")&&(this.contentFormats.draco=!0),n.includes("EXT_meshopt_compression")&&(this.contentFormats.meshopt=!0),n.includes("KHR_texture_basisu")&&(this.contentFormats.ktx2=!0)}}},{key:"_onStartTileLoading",value:function(){this._pendingCount++,this.stats.get(x).incrementCount()}},{key:"_onEndTileLoading",value:function(){this._pendingCount--,this.stats.get(x).decrementCount()}},{key:"_addTileToCache",value:function(e){this._cache.add(this,e,(function(r){return r._updateCacheStats(e)}))}},{key:"_updateCacheStats",value:function(e){this.stats.get(B).incrementCount(),this.stats.get(S).incrementCount(),this.gpuMemoryUsageInBytes+=e.content.byteLength||0,this.stats.get(I).count=this.gpuMemoryUsageInBytes}},{key:"_unloadTile",value:function(e){this.gpuMemoryUsageInBytes-=e.content&&e.content.byteLength||0,this.stats.get(S).decrementCount(),this.stats.get(P).incrementCount(),this.stats.get(I).count=this.gpuMemoryUsageInBytes,this.options.onTileUnload(e),e.unloadContent()}},{key:"_destroy",value:function(){var e=[];for(this.root&&e.push(this.root);e.length>0;){var r,t=e.pop(),n=_(t.children);try{for(n.s();!(r=n.n()).done;){var a=r.value;e.push(a)}}catch(e){n.e(e)}finally{n.f()}this._destroyTile(t)}this.root=null}},{key:"_destroySubtree",value:function(e){var r=e,t=[];for(t.push(r);t.length>0;){var n,a=_((e=t.pop()).children);try{for(a.s();!(n=a.n()).done;){var i=n.value;t.push(i)}}catch(e){a.e(e)}finally{a.f()}e!==r&&this._destroyTile(e)}r.children=[]}},{key:"_destroyTile",value:function(e){this._cache.unloadTile(this,e),this._unloadTile(e),e.destroy()}},{key:"_initializeTiles3DTileset",value:function(e){if(this.asset=e.asset,!this.asset)throw new Error("Tileset must have an asset property.");if("0.0"!==this.asset.version&&"1.0"!==this.asset.version)throw new Error("The tileset must be 3D Tiles version 0.0 or 1.0.");"tilesetVersion"in this.asset&&(this._queryParams.v=this.asset.tilesetVersion),this.credits={attributions:this.options.attributions||[]},this.description=this.options.description||"",this.properties=e.properties,this.geometricError=e.geometricError,this._extensionsUsed=e.extensionsUsed,this.extras=e.extras}},{key:"_initializeI3STileset",value:function(){this.loadOptions.i3s&&"token"in this.loadOptions.i3s&&(this._queryParams.token=this.loadOptions.i3s.token)}}]),e}();return tileset3d.Tileset3D=k,tileset3d}function requireEs5$1(){return hasRequiredEs5$1||(hasRequiredEs5$1=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"LOD_METRIC_TYPE",{enumerable:!0,get:function(){return c.LOD_METRIC_TYPE}}),Object.defineProperty(e,"TILESET_TYPE",{enumerable:!0,get:function(){return c.TILESET_TYPE}}),Object.defineProperty(e,"TILE_CONTENT_STATE",{enumerable:!0,get:function(){return c.TILE_CONTENT_STATE}}),Object.defineProperty(e,"TILE_REFINEMENT",{enumerable:!0,get:function(){return c.TILE_REFINEMENT}}),Object.defineProperty(e,"TILE_TYPE",{enumerable:!0,get:function(){return c.TILE_TYPE}}),Object.defineProperty(e,"Tile3D",{enumerable:!0,get:function(){return t.Tile3D}}),Object.defineProperty(e,"Tileset3D",{enumerable:!0,get:function(){return r.Tileset3D}}),Object.defineProperty(e,"TilesetCache",{enumerable:!0,get:function(){return a.TilesetCache}}),Object.defineProperty(e,"TilesetTraverser",{enumerable:!0,get:function(){return n.TilesetTraverser}}),Object.defineProperty(e,"calculateTransformProps",{enumerable:!0,get:function(){return o.calculateTransformProps}}),Object.defineProperty(e,"createBoundingVolume",{enumerable:!0,get:function(){return i.createBoundingVolume}}),Object.defineProperty(e,"getFrameState",{enumerable:!0,get:function(){return u.getFrameState}}),Object.defineProperty(e,"getLodStatus",{enumerable:!0,get:function(){return s.getLodStatus}});var r=requireTileset3d(),t=requireTile3d(),n=requireTilesetTraverser(),a=requireTilesetCache(),i=requireBoundingVolume(),o=requireTransformUtils(),u=requireFrameState(),s=requireI3sLod(),c=requireConstants$2()}(es5$3)),es5$3}var version={},hasRequiredVersion;function requireVersion(){if(hasRequiredVersion)return version;hasRequiredVersion=1,Object.defineProperty(version,"__esModule",{value:!0}),version.VERSION=void 0;return version.VERSION="3.3.3",version}var parse3dTile={},constants$1={},hasRequiredConstants$1;function requireConstants$1(){if(hasRequiredConstants$1)return constants$1;hasRequiredConstants$1=1,Object.defineProperty(constants$1,"__esModule",{value:!0}),constants$1.TILE3D_TYPES=constants$1.TILE3D_TYPE=constants$1.TILE3D_OPTIMIZATION_HINT=constants$1.MAGIC_ARRAY=void 0;var e={COMPOSITE:"cmpt",POINT_CLOUD:"pnts",BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",GEOMETRY:"geom",VECTOR:"vect",GLTF:"glTF"};constants$1.TILE3D_TYPE=e;var r=Object.keys(e);constants$1.TILE3D_TYPES=r;constants$1.MAGIC_ARRAY={BATCHED_MODEL:[98,51,100,109],INSTANCED_MODEL:[105,51,100,109],POINT_CLOUD:[112,110,116,115],COMPOSITE:[99,109,112,116]};return constants$1.TILE3D_OPTIMIZATION_HINT={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0},constants$1}var parseUtils={},hasRequiredParseUtils;function requireParseUtils(){if(hasRequiredParseUtils)return parseUtils;hasRequiredParseUtils=1,Object.defineProperty(parseUtils,"__esModule",{value:!0}),parseUtils.getMagicString=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=new DataView(e);return"".concat(String.fromCharCode(t.getUint8(r+0))).concat(String.fromCharCode(t.getUint8(r+1))).concat(String.fromCharCode(t.getUint8(r+2))).concat(String.fromCharCode(t.getUint8(r+3)))},parseUtils.getStringFromArrayBuffer=function(r,t,n){(0,e.assert)(r instanceof ArrayBuffer);var a=new TextDecoder("utf8"),i=new Uint8Array(r,t,n);return a.decode(i)},parseUtils.getStringFromTypedArray=function(r){return(0,e.assert)(ArrayBuffer.isView(r)),new TextDecoder("utf8").decode(r)};var e=requireEs5$b();return parseUtils}var parse3dTilePointCloud={},es5={},constants={},hasRequiredConstants;function requireConstants(){if(hasRequiredConstants)return constants;hasRequiredConstants=1;var e=interopRequireDefaultExports;Object.defineProperty(constants,"__esModule",{value:!0}),constants.GL_TYPE=constants.GL_PRIMITIVE_MODE=constants.GL_PRIMITIVE=constants.GL=void 0;var r=e(requireDefineProperty$3());function t(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function n(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?t(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))}))}return e}constants.GL_PRIMITIVE={POINTS:0,LINES:1,TRIANGLES:4};var a={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};constants.GL_PRIMITIVE_MODE=a;var i={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130};constants.GL_TYPE=i;var o=n(n({},a),i);return constants.GL=o,constants}var glType={},hasRequiredGlType;function requireGlType(){if(hasRequiredGlType)return glType;hasRequiredGlType=1;var e=interopRequireDefaultExports;Object.defineProperty(glType,"__esModule",{value:!0}),glType.default=void 0;var r,t=e(requireClassCallCheck$3()),n=e(requireCreateClass$3()),a=e(requireDefineProperty$3()),i=requireConstants(),o=(r={},(0,a.default)(r,i.GL_TYPE.DOUBLE,Float64Array),(0,a.default)(r,i.GL_TYPE.FLOAT,Float32Array),(0,a.default)(r,i.GL_TYPE.UNSIGNED_SHORT,Uint16Array),(0,a.default)(r,i.GL_TYPE.UNSIGNED_INT,Uint32Array),(0,a.default)(r,i.GL_TYPE.UNSIGNED_BYTE,Uint8Array),(0,a.default)(r,i.GL_TYPE.BYTE,Int8Array),(0,a.default)(r,i.GL_TYPE.SHORT,Int16Array),(0,a.default)(r,i.GL_TYPE.INT,Int32Array),r),u={DOUBLE:i.GL_TYPE.DOUBLE,FLOAT:i.GL_TYPE.FLOAT,UNSIGNED_SHORT:i.GL_TYPE.UNSIGNED_SHORT,UNSIGNED_INT:i.GL_TYPE.UNSIGNED_INT,UNSIGNED_BYTE:i.GL_TYPE.UNSIGNED_BYTE,BYTE:i.GL_TYPE.BYTE,SHORT:i.GL_TYPE.SHORT,INT:i.GL_TYPE.INT},s="Failed to convert GL type",c=function(){function e(){(0,t.default)(this,e)}return(0,n.default)(e,null,[{key:"fromTypedArray",value:function(e){for(var r in e=ArrayBuffer.isView(e)?e.constructor:e,o){if(o[r]===e)return r}throw new Error(s)}},{key:"fromName",value:function(e){var r=u[e];if(!r)throw new Error(s);return r}},{key:"getArrayType",value:function(e){switch(e){case i.GL_TYPE.UNSIGNED_SHORT_5_6_5:case i.GL_TYPE.UNSIGNED_SHORT_4_4_4_4:case i.GL_TYPE.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;default:var r=o[e];if(!r)throw new Error(s);return r}}},{key:"getByteSize",value:function(r){return e.getArrayType(r).BYTES_PER_ELEMENT}},{key:"validate",value:function(r){return Boolean(e.getArrayType(r))}},{key:"createTypedArray",value:function(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0;return void 0===a&&(a=(t.byteLength-n)/e.getByteSize(r)),new(e.getArrayType(r))(t,n,a)}}]),e}();return glType.default=c,glType}var isGeometry={},hasRequiredIsGeometry;function requireIsGeometry(){if(hasRequiredIsGeometry)return isGeometry;hasRequiredIsGeometry=1;var e=interopRequireDefaultExports;Object.defineProperty(isGeometry,"__esModule",{value:!0}),isGeometry.default=function(e){return e&&"object"===(0,r.default)(e)&&e.mode&&e.attributes&&"object"===(0,r.default)(e.attributes)};var r=e(require_typeof$3());return isGeometry}var attributeIterator={},hasRequiredAttributeIterator;function requireAttributeIterator(){if(hasRequiredAttributeIterator)return attributeIterator;hasRequiredAttributeIterator=1;var e=interopRequireDefaultExports;Object.defineProperty(attributeIterator,"__esModule",{value:!0}),attributeIterator.makeAttributeIterator=n;var r=e(requireRegenerator()),t=r.default.mark(n);function n(e,n){var a,i,o,u;return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=e.constructor,i=new a(n),o=0;case 3:if(!(o<e.length)){r.next=10;break}for(u=0;u<n;u++)i[u]=i[o+u];return r.next=7,i;case 7:o+=n,r.next=3;break;case 10:case"end":return r.stop()}}),t)}return attributeIterator}var primitiveIterator={},modes={},hasRequiredModes,hasRequiredPrimitiveIterator;function requireModes(){if(hasRequiredModes)return modes;hasRequiredModes=1,Object.defineProperty(modes,"__esModule",{value:!0}),modes.getPrimitiveModeExpandedLength=function(r,t){switch(r){case e.GL.POINTS:case e.GL.LINES:case e.GL.LINE_STRIP:return t;case e.GL.LINE_LOOP:return t+1;case e.GL.TRIANGLES:return t;case e.GL.TRIANGLE_STRIP:case e.GL.TRIANGLE_FAN:return 3*(t-2);default:throw new Error("Unknown length")}},modes.getPrimitiveModeType=function(r){switch(r){case e.GL.POINTS:return e.GL.POINTS;case e.GL.LINES:case e.GL.LINE_STRIP:case e.GL.LINE_LOOP:return e.GL.LINES;case e.GL.TRIANGLES:case e.GL.TRIANGLE_STRIP:case e.GL.TRIANGLE_FAN:return e.GL.TRIANGLES;default:throw new Error("Unknown primitive mode")}},modes.isPrimitiveModeExpandable=function(r){switch(r){case e.GL.LINE_STRIP:case e.GL.LINE_LOOP:case e.GL.TRIANGLE_STRIP:case e.GL.TRIANGLE_FAN:return!0;default:return!1}};var e=requireConstants();return modes}function requirePrimitiveIterator(){if(hasRequiredPrimitiveIterator)return primitiveIterator;hasRequiredPrimitiveIterator=1;var e=interopRequireDefaultExports;Object.defineProperty(primitiveIterator,"__esModule",{value:!0}),primitiveIterator.makePrimitiveIterator=o;var r=e(requireRegenerator()),t=requireConstants(),n=requireModes(),a=requireEs5$b(),i=r.default.mark(o);function o(e){var o,u,s,c,l,f,d=arguments;return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=d.length>1&&void 0!==d[1]?d[1]:{},u=d.length>2?d[2]:void 0,s=d.length>3&&void 0!==d[3]?d[3]:0,c=d.length>4?d[4]:void 0,e&&(e=e.values||e.value||e),void 0===c&&(c=e?e.length:s),l={attributes:o,type:(0,n.getPrimitiveModeType)(u),i1:0,i2:0,i3:0},f=s;case 8:if(!(f<c)){r.next=47;break}r.t0=u,r.next=r.t0===t.GL.POINTS?12:r.t0===t.GL.LINES?15:r.t0===t.GL.LINE_STRIP?19:r.t0===t.GL.LINE_LOOP?23:r.t0===t.GL.TRIANGLES?27:r.t0===t.GL.TRIANGLE_STRIP?32:r.t0===t.GL.TRIANGLE_FAN?36:41;break;case 12:return l.i1=f,f+=1,r.abrupt("break",42);case 15:return l.i1=f,l.i2=f+1,f+=2,r.abrupt("break",42);case 19:case 23:return l.i1=f,l.i2=f+1,f+=1,r.abrupt("break",42);case 27:return l.i1=f,l.i2=f+1,l.i3=f+2,f+=3,r.abrupt("break",42);case 32:return l.i1=f,l.i2=f+1,f+=1,r.abrupt("break",42);case 36:return l.i1=1,l.i2=f,l.i3=f+1,f+=1,r.abrupt("break",42);case 41:(0,a.assert)(!1);case 42:return e&&"i1"in l&&(l.i1=e[l.i1],l.i2=e[l.i2],l.i3=e[l.i3]),r.next=45,l;case 45:r.next=8;break;case 47:case"end":return r.stop()}}),i)}return primitiveIterator}var computeVertexNormals={},assert$1={},hasRequiredAssert;function requireAssert(){if(hasRequiredAssert)return assert$1;return hasRequiredAssert=1,Object.defineProperty(assert$1,"__esModule",{value:!0}),assert$1.assert=function(e,r){if(!e)throw new Error("math.gl assertion failed. ".concat(r))},assert$1}var getAttributeFromGeometry={},hasRequiredGetAttributeFromGeometry,hasRequiredComputeVertexNormals;function requireGetAttributeFromGeometry(){if(hasRequiredGetAttributeFromGeometry)return getAttributeFromGeometry;hasRequiredGetAttributeFromGeometry=1;var e=interopRequireDefaultExports;Object.defineProperty(getAttributeFromGeometry,"__esModule",{value:!0}),getAttributeFromGeometry.getPositions=function(e){if((0,r.default)(e)){var n=e.attributes,a=n.POSITION||n.positions;return(0,t.assert)(a),a}if(ArrayBuffer.isView(e))return{values:e,size:3};if(e)return(0,t.assert)(e.values),e;return(0,t.assert)(!1)};var r=e(requireIsGeometry()),t=requireAssert();return getAttributeFromGeometry}function requireComputeVertexNormals(){if(hasRequiredComputeVertexNormals)return computeVertexNormals;hasRequiredComputeVertexNormals=1,Object.defineProperty(computeVertexNormals,"__esModule",{value:!0}),computeVertexNormals.computeVertexNormals=function(u){(0,t.assert)((0,a.getPrimitiveModeType)(u.mode)===r.GL.TRIANGLES,"TRIANGLES required");var s,c=(0,i.getPositions)(u).values,l=new Float32Array(c.length),f=new e.Vector3,d=new e.Vector3,p=new e.Vector3,h=new e.Vector3,y=new e.Vector3,v=function(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return o(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==t.return||t.return()}finally{if(s)throw i}}}}((0,n.makePrimitiveIterator)(u));try{for(v.s();!(s=v.n()).done;){var m=s.value;f.fromArray(c,3*m.i1),d.fromArray(c,3*m.i2+3),p.fromArray(c,3*m.i3+6),h.subVectors(p,d),y.subVectors(f,d);var b=h.cross(y);b.normalize();var g=m.primitiveIndex;l[9*g+0]=b.x,l[9*g+1]=b.y,l[9*g+2]=b.z,l[9*g+3]=b.x,l[9*g+4]=b.y,l[9*g+5]=b.z,l[9*g+6]=b.x,l[9*g+7]=b.y,l[9*g+8]=b.z}}catch(e){v.e(e)}finally{v.f()}return l};var e=requireEs5$4(),r=requireConstants(),t=requireAssert(),n=requirePrimitiveIterator(),a=requireModes(),i=requireGetAttributeFromGeometry();function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}return computeVertexNormals}var rgb565={},hasRequiredRgb565;function requireRgb565(){if(hasRequiredRgb565)return rgb565;return hasRequiredRgb565=1,Object.defineProperty(rgb565,"__esModule",{value:!0}),rgb565.decodeRGB565=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],t=e>>11&31,n=e>>5&63,a=31&e;return r[0]=t<<3,r[1]=n<<2,r[2]=a<<3,r},rgb565.encodeRGB565=function(e){var r=Math.floor(e[0]/8)+4,t=Math.floor(e[1]/4)+2,n=Math.floor(e[2]/8)+4;return r+(t<<5)+(n<<11)},rgb565}var typedArrayUtils={},hasRequiredTypedArrayUtils;function requireTypedArrayUtils(){if(hasRequiredTypedArrayUtils)return typedArrayUtils;return hasRequiredTypedArrayUtils=1,Object.defineProperty(typedArrayUtils,"__esModule",{value:!0}),typedArrayUtils.concatTypedArrays=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,t=0;t<e.length;++t)r+=e[t].byteLength;for(var n=new Uint8Array(r),a=0,i=0;i<e.length;++i){var o=new Uint8Array(e[i].buffer);r=o.length;for(var u=0;u<r;++u)n[a++]=o[u]}return n},typedArrayUtils}var attributeCompression={},hasRequiredAttributeCompression,hasRequiredEs5;function requireAttributeCompression(){if(hasRequiredAttributeCompression)return attributeCompression;hasRequiredAttributeCompression=1,Object.defineProperty(attributeCompression,"__esModule",{value:!0}),attributeCompression.compressTextureCoordinates=function(e){var r=4095*e.x|0,t=4095*e.y|0;return 4096*r+t},attributeCompression.decompressTextureCoordinates=function(e,r){var t=e/4096,n=Math.floor(t);return r.x=n/4095,r.y=(e-4096*n)/4095,r},attributeCompression.octDecode=v,attributeCompression.octDecodeFloat=g,attributeCompression.octDecodeFromVector4=function(e,t){(0,r.assert)(e),(0,r.assert)(t);var a=e.x,i=e.y,o=e.z,u=e.w;if(a<0||a>255||i<0||i>255||o<0||o>255||u<0||u>255)throw new Error("x, y, z, and w must be unsigned normalized integers between 0 and 255");return y(a*n+i,o*n+u,65535,t)},attributeCompression.octDecodeInRange=y,attributeCompression.octEncode=h,attributeCompression.octEncodeFloat=b,attributeCompression.octEncodeInRange=p,attributeCompression.octEncodeToVector4=function(e,r){return p(e,65535,u),r.x=c(u.x*t),r.y=c(u.x),r.z=c(u.y*t),r.w=c(u.y),r},attributeCompression.octPack=function(e,t,n,a){(0,r.assert)(e),(0,r.assert)(t),(0,r.assert)(n),(0,r.assert)(a);var i=b(e),u=b(t),s=h(n,o);return a.x=65536*s.x+i,a.y=65536*s.y+u,a},attributeCompression.octPackFloat=m,attributeCompression.octUnpack=function(e,r,t,n){var a=e.x/65536,i=Math.floor(a),o=65536*(a-i);a=e.y/65536;var u=Math.floor(a),s=65536*(a-u);g(o,r),g(s,t),v(i,u,n)},attributeCompression.zigZagDeltaDecode=function(e,t,n){(0,r.assert)(e),(0,r.assert)(t),(0,r.assert)(e.length===t.length),n&&(0,r.assert)(e.length===n.length);function a(e){return e>>1^-(1&e)}for(var i=0,o=0,u=0,s=0;s<e.length;++s)i+=a(e[s]),o+=a(t[s]),e[s]=i,t[s]=o,n&&(u+=a(n[s]),n[s]=u)};var e=requireEs5$4(),r=requireAssert(),t=1/256,n=256,a=new e.Vector2,i=new e.Vector3,o=new e.Vector2,u=new e.Vector2,s=new Uint8Array(1);function c(e){return s[0]=e,s[0]}function l(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;return(0,e.clamp)(r,0,t)/t*2-1}function f(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;return Math.round((.5*(0,e.clamp)(r,-1,1)+.5)*t)}function d(e){return e<0?-1:1}function p(t,n,a){(0,r.assert)(t),(0,r.assert)(a);var o=i.from(t);if((0,r.assert)(Math.abs(o.magnitudeSquared()-1)<=e._MathUtils.EPSILON6),a.x=t.x/(Math.abs(t.x)+Math.abs(t.y)+Math.abs(t.z)),a.y=t.y/(Math.abs(t.x)+Math.abs(t.y)+Math.abs(t.z)),t.z<0){var u=a.x,s=a.y;a.x=(1-Math.abs(s))*d(u),a.y=(1-Math.abs(u))*d(s)}return a.x=f(a.x,n),a.y=f(a.y,n),a}function h(e,r){return p(e,255,r)}function y(e,t,n,a){if((0,r.assert)(a),e<0||e>n||t<0||t>n)throw new Error("x and y must be unsigned normalized integers between 0 and ".concat(n));if(a.x=l(e,n),a.y=l(t,n),a.z=1-(Math.abs(a.x)+Math.abs(a.y)),a.z<0){var i=a.x;a.x=(1-Math.abs(a.y))*d(i),a.y=(1-Math.abs(i))*d(a.y)}return a.normalize()}function v(e,r,t){return y(e,r,255,t)}function m(e){var r=a.from(e);return 256*r.x+r.y}function b(e){return h(e,o),m(o)}function g(e,t){(0,r.assert)(Number.isFinite(e));var n=e/256,a=Math.floor(n);return v(a,256*(n-a),t)}return attributeCompression}function requireEs5(){return hasRequiredEs5||(hasRequiredEs5=1,function(e){var r=interopRequireDefaultExports;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GL",{enumerable:!0,get:function(){return t.GL}}),Object.defineProperty(e,"GLType",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"GL_TYPE",{enumerable:!0,get:function(){return t.GL_TYPE}}),Object.defineProperty(e,"compressTextureCoordinates",{enumerable:!0,get:function(){return l.compressTextureCoordinates}}),Object.defineProperty(e,"computeVertexNormals",{enumerable:!0,get:function(){return u.computeVertexNormals}}),Object.defineProperty(e,"concatTypedArrays",{enumerable:!0,get:function(){return c.concatTypedArrays}}),Object.defineProperty(e,"decodeRGB565",{enumerable:!0,get:function(){return s.decodeRGB565}}),Object.defineProperty(e,"decompressTextureCoordinates",{enumerable:!0,get:function(){return l.decompressTextureCoordinates}}),Object.defineProperty(e,"encodeRGB565",{enumerable:!0,get:function(){return s.encodeRGB565}}),Object.defineProperty(e,"isGeometry",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"makeAttributeIterator",{enumerable:!0,get:function(){return i.makeAttributeIterator}}),Object.defineProperty(e,"makePrimitiveIterator",{enumerable:!0,get:function(){return o.makePrimitiveIterator}}),Object.defineProperty(e,"octDecode",{enumerable:!0,get:function(){return l.octDecode}}),Object.defineProperty(e,"octDecodeFloat",{enumerable:!0,get:function(){return l.octDecodeFloat}}),Object.defineProperty(e,"octDecodeFromVector4",{enumerable:!0,get:function(){return l.octDecodeFromVector4}}),Object.defineProperty(e,"octDecodeInRange",{enumerable:!0,get:function(){return l.octDecodeInRange}}),Object.defineProperty(e,"octEncode",{enumerable:!0,get:function(){return l.octEncode}}),Object.defineProperty(e,"octEncodeFloat",{enumerable:!0,get:function(){return l.octEncodeFloat}}),Object.defineProperty(e,"octEncodeInRange",{enumerable:!0,get:function(){return l.octEncodeInRange}}),Object.defineProperty(e,"octEncodeToVector4",{enumerable:!0,get:function(){return l.octEncodeToVector4}}),Object.defineProperty(e,"octPack",{enumerable:!0,get:function(){return l.octPack}}),Object.defineProperty(e,"octPackFloat",{enumerable:!0,get:function(){return l.octPackFloat}}),Object.defineProperty(e,"octUnpack",{enumerable:!0,get:function(){return l.octUnpack}}),Object.defineProperty(e,"zigZagDeltaDecode",{enumerable:!0,get:function(){return l.zigZagDeltaDecode}});var t=requireConstants(),n=r(requireGlType()),a=r(requireIsGeometry()),i=requireAttributeIterator(),o=requirePrimitiveIterator(),u=requireComputeVertexNormals(),s=requireRgb565(),c=requireTypedArrayUtils(),l=requireAttributeCompression()}(es5)),es5}var tile3dFeatureTable={},hasRequiredTile3dFeatureTable;function requireTile3dFeatureTable(){if(hasRequiredTile3dFeatureTable)return tile3dFeatureTable;hasRequiredTile3dFeatureTable=1;var e=interopRequireDefaultExports;Object.defineProperty(tile3dFeatureTable,"__esModule",{value:!0}),tile3dFeatureTable.default=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=e(requireDefineProperty$3()),a=requireEs5(),i=function(){function e(t,a){(0,r.default)(this,e),(0,n.default)(this,"json",void 0),(0,n.default)(this,"buffer",void 0),(0,n.default)(this,"featuresLength",0),(0,n.default)(this,"_cachedTypedArrays",{}),this.json=t,this.buffer=a}return(0,t.default)(e,[{key:"getExtension",value:function(e){return this.json.extensions&&this.json.extensions[e]}},{key:"hasProperty",value:function(e){return Boolean(this.json[e])}},{key:"getGlobalProperty",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.GL.UNSIGNED_INT,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.json[e];return n&&Number.isFinite(n.byteOffset)?this._getTypedArrayFromBinary(e,r,t,1,n.byteOffset):n}},{key:"getPropertyArray",value:function(e,r,t){var n=this.json[e];return n&&Number.isFinite(n.byteOffset)?("componentType"in n&&(r=a.GLType.fromName(n.componentType)),this._getTypedArrayFromBinary(e,r,t,this.featuresLength,n.byteOffset)):this._getTypedArrayFromArray(e,r,n)}},{key:"getProperty",value:function(e,r,t,n,a){var i=this.json[e];if(!i)return i;var o=this.getPropertyArray(e,r,t);if(1===t)return o[n];for(var u=0;u<t;++u)a[u]=o[t*n+u];return a}},{key:"_getTypedArrayFromBinary",value:function(e,r,t,n,i){var o=this._cachedTypedArrays,u=o[e];return u||(u=a.GLType.createTypedArray(r,this.buffer.buffer,this.buffer.byteOffset+i,n*t),o[e]=u),u}},{key:"_getTypedArrayFromArray",value:function(e,r,t){var n=this._cachedTypedArrays,i=n[e];return i||(i=a.GLType.createTypedArray(r,t),n[e]=i),i}}]),e}();return tile3dFeatureTable.default=i,tile3dFeatureTable}var tile3dBatchTable={},tile3dAccessorUtils={},hasRequiredTile3dAccessorUtils;function requireTile3dAccessorUtils(){if(hasRequiredTile3dAccessorUtils)return tile3dAccessorUtils;hasRequiredTile3dAccessorUtils=1,Object.defineProperty(tile3dAccessorUtils,"__esModule",{value:!0}),tile3dAccessorUtils.createTypedArrayFromAccessor=function(i,o,u,s){var c=i.componentType;(0,r.assert)(i.componentType);var l="string"==typeof c?e.GLType.fromName(c):c,f=t[i.type],d=n[i.type],p=a[i.type];u+=i.byteOffset;var h=e.GLType.createTypedArray(l,o,u,f*s);return{values:h,type:l,size:f,unpacker:d,packer:p}};var e=requireEs5(),r=requireEs5$b(),t={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},n={SCALAR:function(e,r){return e[r]},VEC2:function(e,r){return[e[2*r+0],e[2*r+1]]},VEC3:function(e,r){return[e[3*r+0],e[3*r+1],e[3*r+2]]},VEC4:function(e,r){return[e[4*r+0],e[4*r+1],e[4*r+2],e[4*r+3]]},MAT2:function(e,r){return[e[4*r+0],e[4*r+1],e[4*r+2],e[4*r+3]]},MAT3:function(e,r){return[e[9*r+0],e[9*r+1],e[9*r+2],e[9*r+3],e[9*r+4],e[9*r+5],e[9*r+6],e[9*r+7],e[9*r+8]]},MAT4:function(e,r){return[e[16*r+0],e[16*r+1],e[16*r+2],e[16*r+3],e[16*r+4],e[16*r+5],e[16*r+6],e[16*r+7],e[16*r+8],e[16*r+9],e[16*r+10],e[16*r+11],e[16*r+12],e[16*r+13],e[16*r+14],e[16*r+15]]}},a={SCALAR:function(e,r,t){r[t]=e},VEC2:function(e,r,t){r[2*t+0]=e[0],r[2*t+1]=e[1]},VEC3:function(e,r,t){r[3*t+0]=e[0],r[3*t+1]=e[1],r[3*t+2]=e[2]},VEC4:function(e,r,t){r[4*t+0]=e[0],r[4*t+1]=e[1],r[4*t+2]=e[2],r[4*t+3]=e[3]},MAT2:function(e,r,t){r[4*t+0]=e[0],r[4*t+1]=e[1],r[4*t+2]=e[2],r[4*t+3]=e[3]},MAT3:function(e,r,t){r[9*t+0]=e[0],r[9*t+1]=e[1],r[9*t+2]=e[2],r[9*t+3]=e[3],r[9*t+4]=e[4],r[9*t+5]=e[5],r[9*t+6]=e[6],r[9*t+7]=e[7],r[9*t+8]=e[8],r[9*t+9]=e[9]},MAT4:function(e,r,t){r[16*t+0]=e[0],r[16*t+1]=e[1],r[16*t+2]=e[2],r[16*t+3]=e[3],r[16*t+4]=e[4],r[16*t+5]=e[5],r[16*t+6]=e[6],r[16*t+7]=e[7],r[16*t+8]=e[8],r[16*t+9]=e[9],r[16*t+10]=e[10],r[16*t+11]=e[11],r[16*t+12]=e[12],r[16*t+13]=e[13],r[16*t+14]=e[14],r[16*t+15]=e[15]}};return tile3dAccessorUtils}var tile3dBatchTableHierarchy={},hasRequiredTile3dBatchTableHierarchy,hasRequiredTile3dBatchTable;function requireTile3dBatchTableHierarchy(){if(hasRequiredTile3dBatchTableHierarchy)return tile3dBatchTableHierarchy;hasRequiredTile3dBatchTableHierarchy=1,Object.defineProperty(tile3dBatchTableHierarchy,"__esModule",{value:!0}),tile3dBatchTableHierarchy.initializeHierarchy=function(t,n,a){if(!n)return null;var i=t.getExtension("3DTILES_batch_table_hierarchy"),o=n.HIERARCHY;o&&(console.warn("3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy."),n.extensions=n.extensions||{},n.extensions["3DTILES_batch_table_hierarchy"]=o,i=o);if(!i)return null;return function(t,n){var a,i,o,u=t.instancesLength,s=t.classes,c=t.classIds,l=t.parentCounts,f=t.parentIds,d=u;e(c.byteOffset)&&(c.componentType=defaultValue(c.componentType,GL.UNSIGNED_SHORT),c.type=AttributeType.SCALAR,c=getBinaryAccessor(c).createArrayBufferView(n.buffer,n.byteOffset+c.byteOffset,u));if(e(l))for(e(l.byteOffset)&&(l.componentType=defaultValue(l.componentType,GL.UNSIGNED_SHORT),l.type=AttributeType.SCALAR,l=getBinaryAccessor(l).createArrayBufferView(n.buffer,n.byteOffset+l.byteOffset,u)),o=new Uint16Array(u),d=0,a=0;a<u;++a)o[a]=d,d+=l[a];e(f)&&e(f.byteOffset)&&(f.componentType=defaultValue(f.componentType,GL.UNSIGNED_SHORT),f.type=AttributeType.SCALAR,f=getBinaryAccessor(f).createArrayBufferView(n.buffer,n.byteOffset+f.byteOffset,d));var p=s.length;for(a=0;a<p;++a){var h=s[a].length,y=s[a].instances,v=getBinaryProperties(h,y,n);s[a].instances=combine(v,y)}var m=new Array(p).fill(0),b=new Uint16Array(u);for(a=0;a<u;++a)i=c[a],b[a]=m[i],++m[i];var g={classes:s,classIds:c,classIndexes:b,parentCounts:l,parentIndexes:o,parentIds:f};return function(e){for(var t=e.classIds.length,n=0;n<t;++n)r(e,n,stack)}(g),g}(i,a)},tile3dBatchTableHierarchy.traverseHierarchy=function(r,t,n){if(!r)return;var a=r.parentCounts;if(r.parentIds)return n(r,t);if(a>0)return function(r,t,n){var a=r.classIds,i=r.parentCounts,o=r.parentIds,u=r.parentIndexes,s=a.length,c=scratchVisited;c.length=Math.max(c.length,s);var l=++marker,f=scratchStack;f.length=0,f.push(t);for(;f.length>0;)if(c[t=f.pop()]!==l){c[t]=l;var d=n(r,t);if(e(d))return d;for(var p=i[t],h=u[t],y=0;y<p;++y){var v=o[h+y];v!==t&&f.push(v)}}return null}(r,t,n);return function(r,t,n){var a=!0;for(;a;){var i=n(r,t);if(e(i))return i;var o=r.parentIds[t];a=o!==t,t=o}throw new Error("traverseHierarchySingleParent")}(r,t,n)};var e=function(e){return void 0!==e};function r(t,n,a){var i=t.parentCounts,o=t.parentIds,u=t.parentIndexes,s=t.classIds.length;if(e(o)){assert(n<s,"Parent index ".concat(n," exceeds the total number of instances: ").concat(s)),assert(-1===a.indexOf(n),"Circular dependency detected in the batch table hierarchy."),a.push(n);for(var c=e(i)?i[n]:1,l=e(i)?u[n]:n,f=0;f<c;++f){var d=o[l+f];d!==n&&r(t,d,a)}a.pop(n)}}return tile3dBatchTableHierarchy}function requireTile3dBatchTable(){if(hasRequiredTile3dBatchTable)return tile3dBatchTable;hasRequiredTile3dBatchTable=1;var e=interopRequireDefaultExports;Object.defineProperty(tile3dBatchTable,"__esModule",{value:!0}),tile3dBatchTable.default=void 0;var r=e(requireClassCallCheck$3()),t=e(requireCreateClass$3()),n=e(requireDefineProperty$3()),a=requireEs5$b(),i=requireTile3dAccessorUtils(),o=requireTile3dBatchTableHierarchy();function u(e){return null!=e}var s=function(e,r){return e},c={HIERARCHY:!0,extensions:!0,extras:!0},l=function(){function e(t,i,u){var s,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};for(var f in(0,r.default)(this,e),(0,n.default)(this,"json",void 0),(0,n.default)(this,"binary",void 0),(0,n.default)(this,"featureCount",void 0),(0,n.default)(this,"_extensions",void 0),(0,n.default)(this,"_properties",void 0),(0,n.default)(this,"_binaryProperties",void 0),(0,n.default)(this,"_hierarchy",void 0),(0,a.assert)(u>=0),this.json=t||{},this.binary=i,this.featureCount=u,this._extensions=(null===(s=this.json)||void 0===s?void 0:s.extensions)||{},this._properties={},this.json)c[f]||(this._properties[f]=this.json[f]);this._binaryProperties=this._initializeBinaryProperties(),l["3DTILES_batch_table_hierarchy"]&&(this._hierarchy=(0,o.initializeHierarchy)(this,this.json,this.binary))}return(0,t.default)(e,[{key:"getExtension",value:function(e){return this.json&&this.json.extensions&&this.json.extensions[e]}},{key:"memorySizeInBytes",value:function(){return 0}},{key:"isClass",value:function(e,r){return this._checkBatchId(e),(0,a.assert)("string"==typeof r,r),!!this._hierarchy&&u((0,o.traverseHierarchy)(this._hierarchy,e,(function(e,t){var n=e.classIds[t];return e.classes[n].name===r})))}},{key:"isExactClass",value:function(e,r){return(0,a.assert)("string"==typeof r,r),this.getExactClassName(e)===r}},{key:"getExactClassName",value:function(e){if(this._checkBatchId(e),this._hierarchy){var r=this._hierarchy.classIds[e];return this._hierarchy.classes[r].name}}},{key:"hasProperty",value:function(e,r){return this._checkBatchId(e),(0,a.assert)("string"==typeof r,r),u(this._properties[r])||this._hasPropertyInHierarchy(e,r)}},{key:"getPropertyNames",value:function(e,r){var t;this._checkBatchId(e),(r=u(r)?r:[]).length=0;var n=Object.keys(this._properties);return(t=r).push.apply(t,n),this._hierarchy&&this._getPropertyNamesInHierarchy(e,r),r}},{key:"getProperty",value:function(e,r){if(this._checkBatchId(e),(0,a.assert)("string"==typeof r,r),this._binaryProperties){var t=this._binaryProperties[r];if(u(t))return this._getBinaryProperty(t,e)}var n=this._properties[r];if(u(n))return s(n[e]);if(this._hierarchy){var i=this._getHierarchyProperty(e,r);if(u(i))return i}}},{key:"setProperty",value:function(e,r,t){var n=this.featureCount;if(this._checkBatchId(e),(0,a.assert)("string"==typeof r,r),this._binaryProperties){var i=this._binaryProperties[r];if(i)return void this._setBinaryProperty(i,e,t)}if(!this._hierarchy||!this._setHierarchyProperty(this,e,r,t)){var o=this._properties[r];u(o)||(this._properties[r]=new Array(n),o=this._properties[r]),o[e]=s(t)}}},{key:"_checkBatchId",value:function(e){if(!(e>=0&&e<this.featureCount))throw new Error("batchId not in range [0, featureCount - 1].")}},{key:"_getBinaryProperty",value:function(e,r){return e.unpack(e.typedArray,r)}},{key:"_setBinaryProperty",value:function(e,r,t){e.pack(t,e.typedArray,r)}},{key:"_initializeBinaryProperties",value:function(){var e=null;for(var r in this._properties){var t=this._properties[r],n=this._initializeBinaryProperty(r,t);n&&((e=e||{})[r]=n)}return e}},{key:"_initializeBinaryProperty",value:function(e,r){if("byteOffset"in r){var t=r;(0,a.assert)(this.binary,"Property ".concat(e," requires a batch table binary.")),(0,a.assert)(t.type,"Property ".concat(e," requires a type."));var n=(0,i.createTypedArrayFromAccessor)(t,this.binary.buffer,0|this.binary.byteOffset,this.featureCount);return{typedArray:n.values,componentCount:n.size,unpack:n.unpacker,pack:n.packer}}return null}},{key:"_hasPropertyInHierarchy",value:function(e,r){if(!this._hierarchy)return!1;var t=(0,o.traverseHierarchy)(this._hierarchy,e,(function(e,t){var n=e.classIds[t];return u(e.classes[n].instances[r])}));return u(t)}},{key:"_getPropertyNamesInHierarchy",value:function(e,r){(0,o.traverseHierarchy)(this._hierarchy,e,(function(e,t){var n=e.classIds[t],a=e.classes[n].instances;for(var i in a)a.hasOwnProperty(i)&&-1===r.indexOf(i)&&r.push(i)}))}},{key:"_getHierarchyProperty",value:function(e,r){var t=this;return(0,o.traverseHierarchy)(this._hierarchy,e,(function(e,n){var a=e.classIds[n],i=e.classes[a],o=e.classIndexes[n],c=i.instances[r];return u(c)?u(c.typedArray)?t._getBinaryProperty(c,o):s(c[o]):null}))}},{key:"_setHierarchyProperty",value:function(e,r,t,n){var i=this,c=(0,o.traverseHierarchy)(this._hierarchy,r,(function(e,o){var c=e.classIds[o],l=e.classes[c],f=e.classIndexes[o],d=l.instances[t];return!!u(d)&&((0,a.assert)(o===r,'Inherited property "'.concat(t,'" is read-only.')),u(d.typedArray)?i._setBinaryProperty(d,f,n):d[f]=s(n),!0)}));return u(c)}}]),e}();return tile3dBatchTable.default=l,tile3dBatchTable}var parse3dTileHeader$1={},hasRequiredParse3dTileHeader$1;function requireParse3dTileHeader$1(){if(hasRequiredParse3dTileHeader$1)return parse3dTileHeader$1;hasRequiredParse3dTileHeader$1=1,Object.defineProperty(parse3dTileHeader$1,"__esModule",{value:!0}),parse3dTileHeader$1.parse3DTileHeaderSync=function(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=new DataView(t);if(r.magic=a.getUint32(n,!0),n+=e,r.version=a.getUint32(n,!0),n+=e,r.byteLength=a.getUint32(n,!0),n+=e,1!==r.version)throw new Error("3D Tile Version ".concat(r.version," not supported"));return n};var e=4;return parse3dTileHeader$1}var parse3dTileTables={},hasRequiredParse3dTileTables;function requireParse3dTileTables(){if(hasRequiredParse3dTileTables)return parse3dTileTables;hasRequiredParse3dTileTables=1,Object.defineProperty(parse3dTileTables,"__esModule",{value:!0}),parse3dTileTables.parse3DTileTablesHeaderSync=function(e,n,a){var i,o=new DataView(n);e.header=e.header||{};var u=o.getUint32(a,!0);a+=r;var s=o.getUint32(a,!0);a+=r;var c=o.getUint32(a,!0);a+=r;var l=o.getUint32(a,!0);a+=r,c>=570425344?(a-=2*r,i=u,c=s,l=0,u=0,s=0,console.warn(t)):l>=570425344&&(a-=r,i=c,c=u,l=s,u=0,s=0,console.warn(t));return e.header.featureTableJsonByteLength=u,e.header.featureTableBinaryByteLength=s,e.header.batchTableJsonByteLength=c,e.header.batchTableBinaryByteLength=l,e.header.batchLength=i,a},parse3dTileTables.parse3DTileTablesSync=function(r,t,n,a){return n=function(r,t,n,a){var i=r.header,o=i.featureTableJsonByteLength,u=i.featureTableBinaryByteLength,s=i.batchLength;if(r.featureTableJson={BATCH_LENGTH:s||0},o>0){var c=(0,e.getStringFromArrayBuffer)(t,n,o);r.featureTableJson=JSON.parse(c)}return n+=o,r.featureTableBinary=new Uint8Array(t,n,u),n+=u}(r,t,n),n=function(r,t,n,a){var i=r.header,o=i.batchTableJsonByteLength,u=i.batchTableBinaryByteLength;if(o>0){var s=(0,e.getStringFromArrayBuffer)(t,n,o);r.batchTableJson=JSON.parse(s),n+=o,u>0&&(r.batchTableBinary=new Uint8Array(t,n,u),r.batchTableBinary=new Uint8Array(r.batchTableBinary),n+=u)}return n}(r,t,n)};var e=requireParseUtils(),r=4,t="b3dm tile in legacy format.";return parse3dTileTables}var normalize3dTileColors={},hasRequiredNormalize3dTileColors;function requireNormalize3dTileColors(){if(hasRequiredNormalize3dTileColors)return normalize3dTileColors;hasRequiredNormalize3dTileColors=1,Object.defineProperty(normalize3dTileColors,"__esModule",{value:!0}),normalize3dTileColors.normalize3DTileColorAttribute=function(r,t,n){if(!(t||r&&r.batchIds&&n))return null;var a=r.batchIds,i=r.isRGB565,o=r.pointCount;if(a&&n){for(var u=new Uint8ClampedArray(3*o),s=0;s<o;s++){var c=a[s],l=n.getProperty(c,"dimensions").map((function(e){return 255*e}));u[3*s]=l[0],u[3*s+1]=l[1],u[3*s+2]=l[2]}return{type:e.GL.UNSIGNED_BYTE,value:u,size:3,normalized:!0}}if(i){for(var f=new Uint8ClampedArray(3*o),d=0;d<o;d++){var p=(0,e.decodeRGB565)(t[d]);f[3*d]=p[0],f[3*d+1]=p[1],f[3*d+2]=p[2]}return{type:e.GL.UNSIGNED_BYTE,value:f,size:3,normalized:!0}}if(t&&t.length===3*o)return{type:e.GL.UNSIGNED_BYTE,value:t,size:3,normalized:!0};return{type:e.GL.UNSIGNED_BYTE,value:t,size:4,normalized:!0}};var e=requireEs5();return normalize3dTileColors}var normalize3dTileNormals={},hasRequiredNormalize3dTileNormals;function requireNormalize3dTileNormals(){if(hasRequiredNormalize3dTileNormals)return normalize3dTileNormals;hasRequiredNormalize3dTileNormals=1,Object.defineProperty(normalize3dTileNormals,"__esModule",{value:!0}),normalize3dTileNormals.normalize3DTileNormalAttribute=function(e,n){if(!n)return null;if(e.isOctEncoded16P){for(var a=new Float32Array(3*e.pointsLength),i=0;i<e.pointsLength;i++)(0,r.octDecode)(n[2*i],n[2*i+1],t),t.toArray(a,3*i);return{type:r.GL.FLOAT,size:2,value:a}}return{type:r.GL.FLOAT,size:2,value:n}};var e=requireEs5$4(),r=requireEs5(),t=new e.Vector3;return normalize3dTileNormals}var normalize3dTilePositions={},hasRequiredNormalize3dTilePositions,hasRequiredParse3dTilePointCloud;function requireNormalize3dTilePositions(){if(hasRequiredNormalize3dTilePositions)return normalize3dTilePositions;hasRequiredNormalize3dTilePositions=1,Object.defineProperty(normalize3dTilePositions,"__esModule",{value:!0}),normalize3dTilePositions.normalize3DTilePositionAttribute=function(t,n,a){if(!t.isQuantized)return n;if(a["3d-tiles"]&&a["3d-tiles"].decodeQuantizedPositions)return t.isQuantized=!1,function(r,t){for(var n=new e.Vector3,a=new Float32Array(3*r.pointCount),i=0;i<r.pointCount;i++)n.set(t[3*i],t[3*i+1],t[3*i+2]).scale(1/r.quantizedRange).multiply(r.quantizedVolumeScale).add(r.quantizedVolumeOffset).toArray(a,3*i);return a}(t,n);return{type:r.GL.UNSIGNED_SHORT,value:n,size:3,normalized:!0}};var e=requireEs5$4(),r=requireEs5();return normalize3dTilePositions}function requireParse3dTilePointCloud(){if(hasRequiredParse3dTilePointCloud)return parse3dTilePointCloud;hasRequiredParse3dTilePointCloud=1;var e=interopRequireDefaultExports;Object.defineProperty(parse3dTilePointCloud,"__esModule",{value:!0}),parse3dTilePointCloud.loadDraco=R,parse3dTilePointCloud.parsePointCloud3DTile=function(e,r,t,n,a){return v.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireDefineProperty$3()),n=e(requireAsyncToGenerator()),a=requireEs5$5(),i=requireEs5(),o=requireEs5$4(),u=e(requireTile3dFeatureTable()),s=e(requireTile3dBatchTable()),c=requireParse3dTileHeader$1(),l=requireParse3dTileTables(),f=requireNormalize3dTileColors(),d=requireNormalize3dTileNormals(),p=requireNormalize3dTilePositions();function h(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?h(Object(n),!0).forEach((function(r){(0,t.default)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function v(){return(v=(0,n.default)(r.default.mark((function e(t,n,a,i,o){var u,s,f;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,c.parse3DTileHeaderSync)(t,n,a),a=(0,l.parse3DTileTablesHeaderSync)(t,n,a),a=(0,l.parse3DTileTablesSync)(t,n,a,i),m(t),u=b(t),s=u.featureTable,f=u.batchTable,e.next=7,T(t,s,f,i,o);case 7:return g(t,s,i),_(t,s,f),A(t,s),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){e.attributes={positions:null,colors:null,normals:null,batchIds:null},e.isQuantized=!1,e.isTranslucent=!1,e.isRGB565=!1,e.isOctEncoded16P=!1}function b(e){var r=new u.default(e.featureTableJson,e.featureTableBinary),t=r.getGlobalProperty("POINTS_LENGTH");if(!Number.isFinite(t))throw new Error("POINTS_LENGTH must be defined");r.featuresLength=t,e.featuresLength=t,e.pointsLength=t,e.pointCount=t,e.rtcCenter=r.getGlobalProperty("RTC_CENTER",i.GL.FLOAT,3);var n=function(e,r){var t=null;if(!e.batchIds&&r.hasProperty("BATCH_ID")&&(e.batchIds=r.getPropertyArray("BATCH_ID",i.GL.UNSIGNED_SHORT,1),e.batchIds)){var n=r.getGlobalProperty("BATCH_LENGTH");if(!n)throw new Error("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");var a=e.batchTableJson,o=e.batchTableBinary;t=new s.default(a,o,n)}return t}(e,r);return{featureTable:r,batchTable:n}}function g(e,r,t){if(!e.attributes.positions)if(r.hasProperty("POSITION"))e.attributes.positions=r.getPropertyArray("POSITION",i.GL.FLOAT,3);else if(r.hasProperty("POSITION_QUANTIZED")){var n=r.getPropertyArray("POSITION_QUANTIZED",i.GL.UNSIGNED_SHORT,3);if(e.isQuantized=!0,e.quantizedRange=65535,e.quantizedVolumeScale=r.getGlobalProperty("QUANTIZED_VOLUME_SCALE",i.GL.FLOAT,3),!e.quantizedVolumeScale)throw new Error("QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");if(e.quantizedVolumeOffset=r.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",i.GL.FLOAT,3),!e.quantizedVolumeOffset)throw new Error("QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");e.attributes.positions=(0,p.normalize3DTilePositionAttribute)(e,n,t)}if(!e.attributes.positions)throw new Error("Either POSITION or POSITION_QUANTIZED must be defined.")}function _(e,r,t){if(!e.attributes.colors){var n=null;r.hasProperty("RGBA")?(n=r.getPropertyArray("RGBA",i.GL.UNSIGNED_BYTE,4),e.isTranslucent=!0):r.hasProperty("RGB")?n=r.getPropertyArray("RGB",i.GL.UNSIGNED_BYTE,3):r.hasProperty("RGB565")&&(n=r.getPropertyArray("RGB565",i.GL.UNSIGNED_SHORT,1),e.isRGB565=!0),e.attributes.colors=(0,f.normalize3DTileColorAttribute)(e,n,t)}r.hasProperty("CONSTANT_RGBA")&&(e.constantRGBA=r.getGlobalProperty("CONSTANT_RGBA",i.GL.UNSIGNED_BYTE,4))}function A(e,r){if(!e.attributes.normals){var t=null;r.hasProperty("NORMAL")?t=r.getPropertyArray("NORMAL",i.GL.FLOAT,3):r.hasProperty("NORMAL_OCT16P")&&(t=r.getPropertyArray("NORMAL_OCT16P",i.GL.UNSIGNED_BYTE,2),e.isOctEncoded16P=!0),e.attributes.normals=(0,d.normalize3DTileNormalAttribute)(e,t)}}function T(e,r,t,n,a){return O.apply(this,arguments)}function O(){return(O=(0,n.default)(r.default.mark((function e(t,n,a,i,o){var u,s,c,l,f,d,p,h;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((l=t.batchTableJson&&t.batchTableJson.extensions&&t.batchTableJson.extensions["3DTILES_draco_point_compression"])&&(c=l.properties),!(f=n.getExtension("3DTILES_draco_point_compression"))){e.next=15;break}if(s=f.properties,d=f.byteOffset,p=f.byteLength,s&&Number.isFinite(d)&&p){e.next=9;break}throw new Error("Draco properties, byteOffset, and byteLength must be defined");case 9:u=t.featureTableBinary.slice(d,d+p),t.hasPositions=Number.isFinite(s.POSITION),t.hasColors=Number.isFinite(s.RGB)||Number.isFinite(s.RGBA),t.hasNormals=Number.isFinite(s.NORMAL),t.hasBatchIds=Number.isFinite(s.BATCH_ID),t.isTranslucent=Number.isFinite(s.RGBA);case 15:if(u){e.next=17;break}return e.abrupt("return",!0);case 17:return h={buffer:u,properties:y(y({},s),c),featureTableProperties:s,batchTableProperties:c,dequantizeInShader:!1},e.next=20,R(t,h,i,o);case 20:return e.abrupt("return",e.sent);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,r,t,n){return E.apply(this,arguments)}function E(){return E=(0,n.default)(r.default.mark((function e(t,n,i,u){var s,c,l,d,p,h,v,m,b,g,_,A,T,O,R;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=u.parse,delete(c=y(y({},i),{},{draco:y(y({},i.draco),{},{extraAttributes:n.batchTableProperties||{}})}))["3d-tiles"],e.next=5,s(n.buffer,a.DracoLoader,c);case 5:if(l=e.sent,d=l.attributes.POSITION&&l.attributes.POSITION.value,p=l.attributes.COLOR_0&&l.attributes.COLOR_0.value,h=l.attributes.NORMAL&&l.attributes.NORMAL.value,v=l.attributes.BATCH_ID&&l.attributes.BATCH_ID.value,m=d&&l.attributes.POSITION.value.quantization,b=h&&l.attributes.NORMAL.value.quantization,m&&(g=l.POSITION.data.quantization,_=g.range,t.quantizedVolumeScale=new o.Vector3(_,_,_),t.quantizedVolumeOffset=new o.Vector3(g.minValues),t.quantizedRange=(1<<g.quantizationBits)-1,t.isQuantizedDraco=!0),b&&(t.octEncodedRange=(1<<l.NORMAL.data.quantization.quantizationBits)-1,t.isOctEncodedDraco=!0),A={},n.batchTableProperties)for(T=0,O=Object.keys(n.batchTableProperties);T<O.length;T++)R=O[T],l.attributes[R]&&l.attributes[R].value&&(A[R.toLowerCase()]=l.attributes[R].value);t.attributes=y({positions:d,colors:(0,f.normalize3DTileColorAttribute)(t,p,void 0),normals:h,batchIds:v},A);case 17:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}return parse3dTilePointCloud}var parse3dTileBatchedModel={},parse3dTileGltfView={},hasRequiredParse3dTileGltfView,hasRequiredParse3dTileBatchedModel;function requireParse3dTileGltfView(){if(hasRequiredParse3dTileGltfView)return parse3dTileGltfView;hasRequiredParse3dTileGltfView=1;var e=interopRequireDefaultExports;Object.defineProperty(parse3dTileGltfView,"__esModule",{value:!0}),parse3dTileGltfView.GLTF_FORMAT=void 0,parse3dTileGltfView.extractGLTF=function(e,r,t,n){return o.apply(this,arguments)},parse3dTileGltfView.parse3DTileGLTFViewSync=function(e,r,t,n){e.rotateYtoZ=!0;var i=e.byteOffset+e.byteLength-t;if(0===i)throw new Error("glTF byte length must be greater than 0.");e.gltfUpAxis=n["3d-tiles"]&&n["3d-tiles"].assetGltfUpAxis?n["3d-tiles"].assetGltfUpAxis:"Y",e.gltfArrayBuffer=(0,a.sliceArrayBuffer)(r,t,i),e.gltfByteOffset=0,e.gltfByteLength=i,t%4==0||console.warn("".concat(e.type,": embedded glb is not aligned to a 4-byte boundary."));return e.byteOffset+e.byteLength};var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=es5$a,a=requireEs5$b(),i={URI:0,EMBEDDED:1};function o(){return o=(0,t.default)(r.default.mark((function e(t,a,i,o){var s,c,l;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=i["3d-tiles"]||{},u(t,a),!s.loadGLTF){e.next=16;break}if(c=o.parse,l=o.fetch,!t.gltfUrl){e.next=9;break}return e.next=7,l(t.gltfUrl,i);case 7:t.gltfArrayBuffer=e.sent,t.gltfByteOffset=0;case 9:if(!t.gltfArrayBuffer){e.next=16;break}return e.next=12,c(t.gltfArrayBuffer,n.GLTFLoader,i,o);case 12:t.gltf=e.sent,delete t.gltfArrayBuffer,delete t.gltfByteOffset,delete t.gltfByteLength;case 16:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function u(e,r,t){switch(r){case i.URI:var n=new Uint8Array(e.gltfArrayBuffer,e.gltfByteOffset),a=(new TextDecoder).decode(n);e.gltfUrl=a.replace(/[\s\0]+$/,""),delete e.gltfArrayBuffer,delete e.gltfByteOffset,delete e.gltfByteLength;break;case i.EMBEDDED:break;default:throw new Error("b3dm: Illegal glTF format field")}}return parse3dTileGltfView.GLTF_FORMAT=i,parse3dTileGltfView}function requireParse3dTileBatchedModel(){if(hasRequiredParse3dTileBatchedModel)return parse3dTileBatchedModel;hasRequiredParse3dTileBatchedModel=1;var e=interopRequireDefaultExports;Object.defineProperty(parse3dTileBatchedModel,"__esModule",{value:!0}),parse3dTileBatchedModel.parseBatchedModel3DTile=function(e,r,t,n,a){return s.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=requireEs5(),a=e(requireTile3dFeatureTable()),i=requireParse3dTileHeader$1(),o=requireParse3dTileTables(),u=requireParse3dTileGltfView();function s(){return(s=(0,t.default)(r.default.mark((function e(t,n,a,i,o){var s,l;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c(t,n,a,i),e.next=3,(0,u.extractGLTF)(t,u.GLTF_FORMAT.EMBEDDED,i,o);case 3:return(l=null==t||null===(s=t.gltf)||void 0===s?void 0:s.extensions)&&l.CESIUM_RTC&&(t.rtcCenter=l.CESIUM_RTC.center),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e,r,t,s,c){t=(0,i.parse3DTileHeaderSync)(e,r,t),t=(0,o.parse3DTileTablesHeaderSync)(e,r,t),t=(0,o.parse3DTileTablesSync)(e,r,t,s),t=(0,u.parse3DTileGLTFViewSync)(e,r,t,s);var l=new a.default(e.featureTableJson,e.featureTableBinary);return e.rtcCenter=l.getGlobalProperty("RTC_CENTER",n.GL.FLOAT,3),t}return parse3dTileBatchedModel}var parse3dTileInstancedModel={},hasRequiredParse3dTileInstancedModel;function requireParse3dTileInstancedModel(){if(hasRequiredParse3dTileInstancedModel)return parse3dTileInstancedModel;hasRequiredParse3dTileInstancedModel=1;var e=interopRequireDefaultExports;Object.defineProperty(parse3dTileInstancedModel,"__esModule",{value:!0}),parse3dTileInstancedModel.parseInstancedModel3DTile=function(e,r,t,n,a){return f.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=requireEs5$4(),a=requireEs5$3(),i=requireEs5(),o=e(requireTile3dFeatureTable()),u=e(requireTile3dBatchTable()),s=requireParse3dTileHeader$1(),c=requireParse3dTileTables(),l=requireParse3dTileGltfView();function f(){return(f=(0,t.default)(r.default.mark((function e(t,n,a,i,o){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d(t,n,a,i),e.next=3,(0,l.extractGLTF)(t,t.gltfFormat,i,o);case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e,r,t,f,d){if(t=(0,s.parse3DTileHeaderSync)(e,r,t),1!==e.version)throw new Error("Instanced 3D Model version ".concat(e.version," is not supported"));t=(0,c.parse3DTileTablesHeaderSync)(e,r,t);var p=new DataView(r);if(e.gltfFormat=p.getUint32(t,!0),t+=4,t=(0,c.parse3DTileTablesSync)(e,r,t,f),t=(0,l.parse3DTileGLTFViewSync)(e,r,t,f),0===e.featureTableJsonByteLength)throw new Error("i3dm parser: featureTableJsonByteLength is zero.");var h=new o.default(e.featureTableJson,e.featureTableBinary),y=h.getGlobalProperty("INSTANCES_LENGTH");if(h.featuresLength=y,!Number.isFinite(y))throw new Error("i3dm parser: INSTANCES_LENGTH must be defined");e.eastNorthUp=h.getGlobalProperty("EAST_NORTH_UP"),e.rtcCenter=h.getGlobalProperty("RTC_CENTER",i.GL.FLOAT,3);new u.default(e.batchTableJson,e.batchTableBinary,y);return function(e,r,t,o){for(var u=[new Array(o),e._batchTable][0],s=new n.Vector3,c=new n.Vector3,l=new n.Vector3,f=new n.Vector3,d=new n.Matrix3,p=new n.Quaternion,h=new n.Vector3,y={},v=new n.Matrix4,m=[],b=[],g=new n.Vector3,_=new n.Vector3,A=0;A<o;A++){var T=void 0;if(r.hasProperty("POSITION"))T=r.getProperty("POSITION",i.GL.FLOAT,3,A,s);else if(r.hasProperty("POSITION_QUANTIZED")){T=r.getProperty("POSITION_QUANTIZED",i.GL.UNSIGNED_SHORT,3,A,s);var O=r.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",i.GL.FLOAT,3,g);if(!O)throw new Error("i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");var R=r.getGlobalProperty("QUANTIZED_VOLUME_SCALE",i.GL.FLOAT,3,_);if(!R)throw new Error("i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");for(var E=65535,S=0;S<3;S++)T[S]=T[S]/E*R[S]+O[S]}if(!T)throw new Error("i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.");s.copy(T),y.translation=s,e.normalUp=r.getProperty("NORMAL_UP",i.GL.FLOAT,3,A,m),e.normalRight=r.getProperty("NORMAL_RIGHT",i.GL.FLOAT,3,A,b);var q=!1;if(e.normalUp){if(!e.normalRight)throw new Error("i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.");e.hasCustomOrientation=!0}else{if(e.octNormalUp=r.getProperty("NORMAL_UP_OCT32P",i.GL.UNSIGNED_SHORT,2,m),e.octNormalRight=r.getProperty("NORMAL_RIGHT_OCT32P",i.GL.UNSIGNED_SHORT,2,b),e.octNormalUp){if(!e.octNormalRight)throw new Error("i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P");throw new Error("i3dm: oct-encoded orientation not implemented")}e.eastNorthUp?(a.Ellipsoid.WGS84.eastNorthUpToFixedFrame(s,v),v.getRotationMatrix3(d)):d.identity()}q&&(f.copy(c).cross(l).normalize(),d.setColumn(0,c),d.setColumn(1,l),d.setColumn(2,f)),p.fromMatrix3(d),y.rotation=p,h.set(1,1,1);var C=r.getProperty("SCALE",i.GL.FLOAT,1,A);Number.isFinite(C)&&h.multiplyByScalar(C);var B=r.getProperty("SCALE_NON_UNIFORM",i.GL.FLOAT,3,A,m);B&&h.scale(B),y.scale=h;var x=r.getProperty("BATCH_ID",i.GL.UNSIGNED_SHORT,1,A);void 0===x&&(x=A);var P=(new n.Matrix4).fromQuaternion(y.rotation);v.identity(),v.translate(y.translation),v.multiplyRight(P),v.scale(y.scale);var w=v.clone();u[A]={modelMatrix:w,batchId:x}}e.instances=u}(e,h,0,y),t}return parse3dTileInstancedModel}var parse3dTileComposite={},hasRequiredParse3dTileComposite;function requireParse3dTileComposite(){if(hasRequiredParse3dTileComposite)return parse3dTileComposite;hasRequiredParse3dTileComposite=1;var e=interopRequireDefaultExports;Object.defineProperty(parse3dTileComposite,"__esModule",{value:!0}),parse3dTileComposite.parseComposite3DTile=function(e,r,t,n,i,o){return a.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=requireParse3dTileHeader$1();function a(){return(a=(0,t.default)(r.default.mark((function e(t,a,i,o,u,s){var c,l;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=(0,n.parse3DTileHeaderSync)(t,a,i),c=new DataView(a),t.tilesLength=c.getUint32(i,!0),i+=4,t.tiles=[];case 5:if(!(t.tiles.length<t.tilesLength&&t.byteLength-i>12)){e.next=13;break}return l={},t.tiles.push(l),e.next=10,s(a,i,o,u,l);case 10:i=e.sent,e.next=5;break;case 13:return e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return parse3dTileComposite}var parse3dTileGltf={},hasRequiredParse3dTileGltf,hasRequiredParse3dTile;function requireParse3dTileGltf(){if(hasRequiredParse3dTileGltf)return parse3dTileGltf;hasRequiredParse3dTileGltf=1;var e=interopRequireDefaultExports;Object.defineProperty(parse3dTileGltf,"__esModule",{value:!0}),parse3dTileGltf.parseGltf3DTile=function(e,r,t,n){return a.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=es5$a;function a(){return a=(0,t.default)(r.default.mark((function e(t,a,i,o){var u;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.rotateYtoZ=!0,t.gltfUpAxis=i["3d-tiles"]&&i["3d-tiles"].assetGltfUpAxis?i["3d-tiles"].assetGltfUpAxis:"Y",u=o.parse,e.next=5,u(a,n.GLTFLoader,i,o);case 5:t.gltf=e.sent;case 6:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}return parse3dTileGltf}function requireParse3dTile(){if(hasRequiredParse3dTile)return parse3dTile;hasRequiredParse3dTile=1;var e=interopRequireDefaultExports;Object.defineProperty(parse3dTile,"__esModule",{value:!0}),parse3dTile.parse3DTile=l;var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=requireConstants$1(),a=requireParseUtils(),i=requireParse3dTilePointCloud(),o=requireParse3dTileBatchedModel(),u=requireParse3dTileInstancedModel(),s=requireParse3dTileComposite(),c=requireParse3dTileGltf();function l(e){return f.apply(this,arguments)}function f(){return f=(0,t.default)(r.default.mark((function e(t){var f,d,p,h,y=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f=y.length>1&&void 0!==y[1]?y[1]:0,d=y.length>2?y[2]:void 0,p=y.length>3?y[3]:void 0,(h=y.length>4&&void 0!==y[4]?y[4]:{}).byteOffset=f,h.type=(0,a.getMagicString)(t,f),e.t0=h.type,e.next=e.t0===n.TILE3D_TYPE.COMPOSITE?9:e.t0===n.TILE3D_TYPE.BATCHED_3D_MODEL?12:e.t0===n.TILE3D_TYPE.GLTF?15:e.t0===n.TILE3D_TYPE.INSTANCED_3D_MODEL?18:e.t0===n.TILE3D_TYPE.POINT_CLOUD?21:24;break;case 9:return e.next=11,(0,s.parseComposite3DTile)(h,t,f,d,p,l);case 11:case 14:case 17:case 20:case 23:return e.abrupt("return",e.sent);case 12:return e.next=14,(0,o.parseBatchedModel3DTile)(h,t,f,d,p);case 15:return e.next=17,(0,c.parseGltf3DTile)(h,t,d,p);case 18:return e.next=20,(0,u.parseInstancedModel3DTile)(h,t,f,d,p);case 21:return e.next=23,(0,i.parsePointCloud3DTile)(h,t,f,d,p);case 24:throw new Error("3DTileLoader: unknown type ".concat(h.type));case 25:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}return parse3dTile}var parse3dTileHeader={},tile3dSubtreeLoader={},parse3dTileSubtree={},hasRequiredParse3dTileSubtree;function requireParse3dTileSubtree(){if(hasRequiredParse3dTileSubtree)return parse3dTileSubtree;hasRequiredParse3dTileSubtree=1;var e=interopRequireDefaultExports;Object.defineProperty(parse3dTileSubtree,"__esModule",{value:!0}),parse3dTileSubtree.default=function(e,r,t){return i.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=1952609651,a=1;function i(){return(i=(0,t.default)(r.default.mark((function e(t,i,o){var s,l,f,d,p,h,y;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(new Uint32Array(t.slice(0,4))[0]===n){e.next=3;break}throw new Error("Wrong subtree file magic number");case 3:if(new Uint32Array(t.slice(4,8))[0]===a){e.next=6;break}throw new Error("Wrong subtree file verson, must be 1");case 6:if(s=c(t.slice(8,16)),l=new Uint8Array(t,24,s),f=new TextDecoder("utf8"),d=f.decode(l),p=JSON.parse(d),h=c(t.slice(16,24)),y=new ArrayBuffer(0),h&&(y=t.slice(24+s)),!("bufferView"in p.tileAvailability)){e.next=18;break}return e.next=17,u(p,"tileAvailability",y,o);case 17:p.tileAvailability.explicitBitstream=e.sent;case 18:if(!("bufferView"in p.contentAvailability)){e.next=22;break}return e.next=21,u(p,"contentAvailability",y,o);case 21:p.contentAvailability.explicitBitstream=e.sent;case 22:if(!("bufferView"in p.childSubtreeAvailability)){e.next=26;break}return e.next=25,u(p,"childSubtreeAvailability",y,o);case 25:p.childSubtreeAvailability.explicitBitstream=e.sent;case 26:return e.abrupt("return",p);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e,r){if(r.startsWith("http")){var t=new URL(e,r);return decodeURI(t.toString())}var n="http://".concat(r),a=new URL(e,n);return"/".concat(a.host).concat(a.pathname)}function u(e,r,t,n){return s.apply(this,arguments)}function s(){return(s=(0,t.default)(r.default.mark((function e(t,n,a,i){var u,s,c,l,f,d;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=t[n].bufferView,s=t.bufferViews[u],c=t.buffers[s.buffer],null!=i&&i.url&&i.fetch){e.next=5;break}throw new Error("Url is not provided");case 5:if(i.fetch){e.next=7;break}throw new Error("fetch is not provided");case 7:if(!c.uri){e.next=16;break}return l=o(c.uri,null==i?void 0:i.url),e.next=11,i.fetch(l);case 11:return f=e.sent,e.next=14,f.arrayBuffer();case 14:return d=e.sent,e.abrupt("return",new Uint8Array(d,s.byteOffset,s.byteLength));case 16:return e.abrupt("return",new Uint8Array(a,s.byteOffset,s.byteLength));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){var r=new DataView(e),t=r.getUint32(0,!0),n=r.getUint32(4,!0);return t+Math.pow(2,32)*n}return parse3dTileSubtree}var _interopRequireDefault$3=interopRequireDefaultExports;Object.defineProperty(tile3dSubtreeLoader,"__esModule",{value:!0}),tile3dSubtreeLoader.Tile3DSubtreeLoader=void 0;var _parse3dTileSubtree=_interopRequireDefault$3(requireParse3dTileSubtree()),_version$2=requireVersion(),Tile3DSubtreeLoader={id:"3d-tiles-subtree",name:"3D Tiles Subtree",module:"3d-tiles",version:_version$2.VERSION,extensions:["subtree"],mimeTypes:["application/octet-stream"],tests:["subtree"],parse:_parse3dTileSubtree.default,options:{}};tile3dSubtreeLoader.Tile3DSubtreeLoader=Tile3DSubtreeLoader;var parse3dImplicitTiles={},hasRequiredParse3dImplicitTiles,hasRequiredParse3dTileHeader;function requireParse3dImplicitTiles(){if(hasRequiredParse3dImplicitTiles)return parse3dImplicitTiles;hasRequiredParse3dImplicitTiles=1;var e=interopRequireDefaultExports;Object.defineProperty(parse3dImplicitTiles,"__esModule",{value:!0}),parse3dImplicitTiles.parseImplicitTiles=u,parse3dImplicitTiles.replaceContentUrlTemplate=d;var r=e(requireRegenerator()),t=e(requireSlicedToArray$2()),n=e(requireAsyncToGenerator()),a=tile3dSubtreeLoader,i=es5$g,o={QUADTREE:4,OCTREE:8};function u(e){return s.apply(this,arguments)}function s(){return(s=(0,n.default)(r.default.mark((function e(t){var n,s,p,h,y,v,m,b,g,_,A,T,O,R,E,S,q,C,B,x,P,w,M,I,k,D,L,G,j,$,N,F,U,H,V,W,K,J,X,z;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.options,s=t.parentData,p=void 0===s?{mortonIndex:0,x:0,y:0,z:0}:s,h=t.childIndex,y=void 0===h?0:h,v=t.globalData,m=void 0===v?{level:0,mortonIndex:0,x:0,y:0,z:0}:v,b=t.subtree,g=t.level,_=void 0===g?0:g,A=n.subdivisionScheme,T=n.subtreeLevels,O=n.maximumLevel,R=n.contentUrlTemplate,E=n.subtreesUriTemplate,S=n.basePath,q={children:[],lodMetricValue:0,contentUrl:""},C=o[A],B=1&y,x=y>>1&1,P=y>>2&1,w=(Math.pow(C,_)-1)/(C-1),M=f(p.mortonIndex,y),I=w+M,k=f(p.x,B),D=f(p.y,x),L=f(p.z,P),G=!1,_+1>T&&(G=c(b.childSubtreeAvailability,M)),j=f(m.x,k),$=f(m.y,D),N=f(m.z,L),F=_+m.level,!G){e.next=38;break}return U="".concat(S,"/").concat(E),H=d(U,F,j,$,N),e.next=25,(0,i.load)(H,a.Tile3DSubtreeLoader);case 25:V=e.sent,b=V,m.mortonIndex=M,m.x=k,m.y=D,m.z=L,m.level=_,M=0,I=0,k=0,D=0,L=0,_=0;case 38:if(c(b.tileAvailability,I)&&!(_>O)){e.next=41;break}return e.abrupt("return",q);case 41:c(b.contentAvailability,I)&&(q.contentUrl=d(R,F,j,$,N)),W=_+1,K={mortonIndex:M,x:k,y:D,z:L},J=0;case 46:if(!(J<C)){e.next=54;break}return e.next=49,u({subtree:b,options:n,parentData:K,childIndex:J,level:W,globalData:m});case 49:((X=e.sent).contentUrl||X.children.length)&&(z=l(X,F+1,{childTileX:k,childTileY:D,childTileZ:L},n),q.children.push(z));case 51:J++,e.next=46;break;case 54:return e.abrupt("return",q);case 55:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e,r){return"constant"in e?Boolean(e.constant):!!e.explicitBitstream&&(t=r,n=e.explicitBitstream,a=Math.floor(t/8),i=t%8,1==(n[a]>>i&1));var t,n,a,i}function l(e,r,n,a){var i=a.basePath,o=a.refine,u=a.getRefine,s=a.lodMetricType,c=a.getTileType,l=a.rootLodMetricValue,f=a.rootBoundingVolume,d=e.contentUrl&&e.contentUrl.replace("".concat(i,"/"),""),p=l/Math.pow(2,r),h=function(e,r,n){if(r.region){var a=n.childTileX,i=n.childTileY,o=n.childTileZ,u=(0,t.default)(r.region,6),s=u[0],c=u[1],l=u[2],f=u[3],d=u[4],p=u[5],h=Math.pow(2,e),y=(l-s)/h,v=(f-c)/h,m=(p-d)/h;return{region:[s+y*a,c+v*i,s+y*(a+1),c+v*(i+1),d+m*o,d+m*(o+1)]}}return console.warn("Unsupported bounding volume type: ",r),null}(r,f,n);return{children:e.children,contentUrl:e.contentUrl,content:{uri:d},id:e.contentUrl,refine:u(o),type:c(e),lodMetricType:s,lodMetricValue:p,geometricError:p,transform:e.transform,boundingVolume:h}}function f(e,r){return parseInt(e.toString(2)+r.toString(2),2)}function d(e,r,t,n,a){var i=function(e){var r={};for(var t in e)r["{".concat(t,"}")]=e[t];return r}({level:r,x:t,y:n,z:a});return e.replace(/{level}|{x}|{y}|{z}/gi,(function(e){return i[e]}))}return parse3dImplicitTiles}function requireParse3dTileHeader(){if(hasRequiredParse3dTileHeader)return parse3dTileHeader;hasRequiredParse3dTileHeader=1;var e=interopRequireDefaultExports;Object.defineProperty(parse3dTileHeader,"__esModule",{value:!0}),parse3dTileHeader.normalizeImplicitTileData=v,parse3dTileHeader.normalizeImplicitTileHeaders=h,parse3dTileHeader.normalizeTileData=d,parse3dTileHeader.normalizeTileHeaders=function(e,r){return p.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireAsyncToGenerator()),n=tile3dSubtreeLoader,a=es5$g,i=requireEs5$1(),o=requireParse3dImplicitTiles();function u(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return s(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return s(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}function s(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function c(e){if(!e.contentUrl)return i.TILE_TYPE.EMPTY;var r=e.contentUrl.split(".").pop();switch(r){case"pnts":return i.TILE_TYPE.POINTCLOUD;case"i3dm":case"b3dm":case"glb":case"gltf":return i.TILE_TYPE.SCENEGRAPH;default:return r}}function l(e){switch(e){case"REPLACE":case"replace":return i.TILE_REFINEMENT.REPLACE;case"ADD":case"add":return i.TILE_REFINEMENT.ADD;default:return e}}function f(e,r){if(/^[a-z][0-9a-z+.-]*:/i.test(r)){var t=new URL(e,"".concat(r,"/"));return decodeURI(t.toString())}return e.startsWith("/")?e:"".concat(r,"/").concat(e)}function d(e,r){if(!e)return null;if(e.content){var t=e.content.uri||e.content.url;e.contentUrl=f(t,r.basePath)}return e.id=e.contentUrl,e.lodMetricType=i.LOD_METRIC_TYPE.GEOMETRIC_ERROR,e.lodMetricValue=e.geometricError,e.transformMatrix=e.transform,e.type=c(e),e.refine=l(e.refine),e}function p(){return(p=(0,t.default)(r.default.mark((function e(t,n){var a,i,o,s,c,l,f,p,y,v;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.basePath,!(o=b(null==t?void 0:t.root))||!t.root){e.next=8;break}return e.next=5,h(t.root,t,o,n);case 5:i=e.sent,e.next=9;break;case 8:i=d(t.root,t);case 9:(s=[]).push(i);case 11:if(!(s.length>0)){e.next=40;break}c=s.pop()||{},l=c.children||[],f=u(l),e.prev=15,f.s();case 17:if((p=f.n()).done){e.next=30;break}if(y=p.value,!(v=b(y))){e.next=26;break}return e.next=23,h(y,t,v,n);case 23:y=e.sent,e.next=27;break;case 26:d(y,{basePath:a});case 27:s.push(y);case 28:e.next=17;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(15),f.e(e.t0);case 35:return e.prev=35,f.f(),e.finish(35);case 38:e.next=11;break;case 40:return e.abrupt("return",i);case 41:case"end":return e.stop()}}),e,null,[[15,32,35,38]])})))).apply(this,arguments)}function h(e,r,t,n){return y.apply(this,arguments)}function y(){return(y=(0,t.default)(r.default.mark((function e(t,u,s,d){var p,h,y,m,b,g,_,A,T,O,R,E,S,q;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=u.basePath,y=s.subdivisionScheme,m=s.maximumLevel,b=s.subtreeLevels,g=s.subtrees.uri,_=(0,o.replaceContentUrlTemplate)(g,0,0,0,0),A=f(_,h),e.next=6,(0,a.load)(A,n.Tile3DSubtreeLoader,d);case 6:return T=e.sent,O=f(t.content.uri,h),R=null==u||null===(p=u.root)||void 0===p?void 0:p.refine,E=t.geometricError,S=t.boundingVolume,q={contentUrlTemplate:O,subtreesUriTemplate:g,subdivisionScheme:y,subtreeLevels:b,maximumLevel:m,refine:R,basePath:h,lodMetricType:i.LOD_METRIC_TYPE.GEOMETRIC_ERROR,rootLodMetricValue:E,rootBoundingVolume:S,getTileType:c,getRefine:l},e.next=14,v(t,T,q);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,r,t){return m.apply(this,arguments)}function m(){return(m=(0,t.default)(r.default.mark((function e(t,n,a){var u,s,f;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return t.lodMetricType=i.LOD_METRIC_TYPE.GEOMETRIC_ERROR,t.lodMetricValue=t.geometricError,t.transformMatrix=t.transform,e.next=7,(0,o.parseImplicitTiles)({subtree:n,options:a});case 7:return u=e.sent,s=u.children,(f=u.contentUrl)&&(t.contentUrl=f,t.content={uri:f.replace("".concat(a.basePath,"/"),"")}),t.refine=l(t.refine),t.type=c(t),t.children=s,t.id=t.contentUrl,e.abrupt("return",t);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){var r;return(null==e||null===(r=e.extensions)||void 0===r?void 0:r["3DTILES_implicit_tiling"])||(null==e?void 0:e.implicitTiling)}return parse3dTileHeader}var _interopRequireDefault$2=interopRequireDefaultExports;Object.defineProperty(tiles3dLoader,"__esModule",{value:!0}),tiles3dLoader.Tiles3DLoader=void 0;var _regenerator$1=_interopRequireDefault$2(requireRegenerator()),_asyncToGenerator2$1=_interopRequireDefault$2(requireAsyncToGenerator()),_loaderUtils=requireEs5$b(),_tiles=requireEs5$1(),_version$1=requireVersion(),_parse3dTile=requireParse3dTile(),_parse3dTileHeader=requireParse3dTileHeader(),Tiles3DLoader={id:"3d-tiles",name:"3D Tiles",module:"3d-tiles",version:_version$1.VERSION,extensions:["cmpt","pnts","b3dm","i3dm"],mimeTypes:["application/octet-stream"],tests:["cmpt","pnts","b3dm","i3dm"],parse:parse,options:{"3d-tiles":{loadGLTF:!0,decodeQuantizedPositions:!1,isTileset:"auto",assetGltfUpAxis:null}}};function getBaseUri(e){return _loaderUtils.path.dirname(e.url)}function parseTile(e,r,t){return _parseTile.apply(this,arguments)}function _parseTile(){return(_parseTile=(0,_asyncToGenerator2$1.default)(_regenerator$1.default.mark((function e(r,t,n){var a;return _regenerator$1.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={content:{featureIds:null}},0,e.next=4,(0,_parse3dTile.parse3DTile)(r,0,t,n,a.content);case 4:return e.abrupt("return",a.content);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function parseTileset(e,r,t){return _parseTileset.apply(this,arguments)}function _parseTileset(){return(_parseTileset=(0,_asyncToGenerator2$1.default)(_regenerator$1.default.mark((function e(r,t,n){var a,i;return _regenerator$1.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=JSON.parse((new TextDecoder).decode(r))).loader=t.loader||Tiles3DLoader,i.url=n.url,i.basePath=getBaseUri(i),e.next=6,(0,_parse3dTileHeader.normalizeTileHeaders)(i,t);case 6:return i.root=e.sent,i.type=_tiles.TILESET_TYPE.TILES3D,i.lodMetricType=_tiles.LOD_METRIC_TYPE.GEOMETRIC_ERROR,i.lodMetricValue=(null===(a=i.root)||void 0===a?void 0:a.lodMetricValue)||0,e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function parse(e,r,t){return _parse.apply(this,arguments)}function _parse(){return _parse=(0,_asyncToGenerator2$1.default)(_regenerator$1.default.mark((function e(r,t,n){var a;return _regenerator$1.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t["3d-tiles"]||{},!("auto"===a.isTileset?n.url&&-1!==n.url.indexOf(".json"):a.isTileset)){e.next=8;break}return e.next=5,parseTileset(r,t,n);case 5:r=e.sent,e.next=11;break;case 8:return e.next=10,parseTile(r,t,n);case 10:r=e.sent;case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)}))),_parse.apply(this,arguments)}tiles3dLoader.Tiles3DLoader=Tiles3DLoader;var cesiumIonLoader={},ion={},hasRequiredIon;function requireIon(){if(hasRequiredIon)return ion;hasRequiredIon=1;var e=interopRequireDefaultExports;Object.defineProperty(ion,"__esModule",{value:!0}),ion.getIonAssetMetadata=h,ion.getIonAssets=d,ion.getIonTilesetMetadata=function(e,r){return f.apply(this,arguments)};var r=e(requireRegenerator()),t=e(requireDefineProperty$3()),n=e(requireAsyncToGenerator()),a=es5$g,i=requireEs5$b();function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?o(Object(n),!0).forEach((function(r){(0,t.default)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function s(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return c(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return c(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}function c(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var l="https://api.cesium.com/v1/assets";function f(){return f=(0,n.default)(r.default.mark((function e(t,n){var a,o,u,c,l,f,p;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=6;break}return e.next=3,d(t);case 3:a=e.sent,o=s(a.items);try{for(o.s();!(u=o.n()).done;)"3DTILES"===(c=u.value).type&&(n=c.id)}catch(e){o.e(e)}finally{o.f()}case 6:return e.next=8,h(t,n);case 8:return l=e.sent,f=l.type,p=l.url,(0,i.assert)("3DTILES"===f&&p),l.headers={Authorization:"Bearer ".concat(l.accessToken)},e.abrupt("return",l);case 13:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function d(e){return p.apply(this,arguments)}function p(){return(p=(0,n.default)(r.default.mark((function e(t){var n,o,u;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.assert)(t),n=l,o={Authorization:"Bearer ".concat(t)},e.next=5,(0,a.fetchFile)(n,{fetch:{headers:o}});case 5:if((u=e.sent).ok){e.next=8;break}throw new Error(u.statusText);case 8:return e.next=10,u.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,r){return y.apply(this,arguments)}function y(){return(y=(0,n.default)(r.default.mark((function e(t,n){var o,s,c,f,d;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.assert)(t,n),o={Authorization:"Bearer ".concat(t)},s="".concat(l,"/").concat(n),e.next=5,(0,a.fetchFile)("".concat(s),{fetch:{headers:o}});case 5:if((c=e.sent).ok){e.next=8;break}throw new Error(c.statusText);case 8:return e.next=10,c.json();case 10:return f=e.sent,e.next=13,(0,a.fetchFile)("".concat(s,"/endpoint"),{fetch:{headers:o}});case 13:if((c=e.sent).ok){e.next=16;break}throw new Error(c.statusText);case 16:return e.next=18,c.json();case 18:return d=e.sent,f=u(u({},f),d),e.abrupt("return",f);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return ion}var _interopRequireDefault$1=interopRequireDefaultExports;Object.defineProperty(cesiumIonLoader,"__esModule",{value:!0}),cesiumIonLoader.CesiumIonLoader=void 0;var _regenerator=_interopRequireDefault$1(requireRegenerator()),_defineProperty2$1=_interopRequireDefault$1(requireDefineProperty$3()),_asyncToGenerator2=_interopRequireDefault$1(requireAsyncToGenerator()),_tiles3dLoader=tiles3dLoader,_ion=requireIon();function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,_defineProperty2$1.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function preload(e){return _preload.apply(this,arguments)}function _preload(){return _preload=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function e(r){var t,n,a,i,o=arguments;return _regenerator.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(t=o.length>1&&void 0!==o[1]?o[1]:{})["cesium-ion"]||{},n=t.accessToken,a=t.assetId,Number.isFinite(a)||(i=r.match(/\/([0-9]+)\/tileset.json/),a=i&&i[1]),e.abrupt("return",(0,_ion.getIonTilesetMetadata)(n,a));case 6:case"end":return e.stop()}}),e)}))),_preload.apply(this,arguments)}var CesiumIonLoader=_objectSpread(_objectSpread({},_tiles3dLoader.Tiles3DLoader),{},{id:"cesium-ion",name:"Cesium Ion",preload:preload,parse:function(){var e=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function e(r,t,n){return _regenerator.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=_objectSpread({},t))["3d-tiles"]=t["cesium-ion"],t.loader=CesiumIonLoader,e.abrupt("return",_tiles3dLoader.Tiles3DLoader.parse(r,t,n));case 4:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),options:{"cesium-ion":_objectSpread(_objectSpread({},_tiles3dLoader.Tiles3DLoader.options["3d-tiles"]),{},{accessToken:null})}});cesiumIonLoader.CesiumIonLoader=CesiumIonLoader;var tile3dWriter={},encode3dTile={},encode3dTileComposite={},encode3dTileHeader={},hasRequiredEncode3dTileHeader,hasRequiredEncode3dTileComposite;function requireEncode3dTileHeader(){if(hasRequiredEncode3dTileHeader)return encode3dTileHeader;hasRequiredEncode3dTileHeader=1,Object.defineProperty(encode3dTileHeader,"__esModule",{value:!0}),encode3dTileHeader.encode3DTileByteLength=function(e,r,t){if(!e)return;e.setUint32(r+8,t,!0)},encode3dTileHeader.encode3DTileHeader=function(r,t,n){if(!t)return n+12;var a=r.magic,i=r.version,o=void 0===i?1:i,u=r.byteLength,s=void 0===u?12:u;return(0,e.assert)(Array.isArray(a)&&Number.isFinite(o)&&Number.isFinite(s)),t.setUint8(n+0,a[0]),t.setUint8(n+1,a[1]),t.setUint8(n+2,a[2]),t.setUint8(n+3,a[3]),t.setUint32(n+4,o,!0),t.setUint32(n+8,s,!0),n+=12};var e=requireEs5$b();return encode3dTileHeader}function requireEncode3dTileComposite(){if(hasRequiredEncode3dTileComposite)return encode3dTileComposite;hasRequiredEncode3dTileComposite=1;var e=interopRequireDefaultExports;Object.defineProperty(encode3dTileComposite,"__esModule",{value:!0}),encode3dTileComposite.encodeComposite3DTile=function(e,i,o,u,s){e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}({magic:t.MAGIC_ARRAY.COMPOSITE,tiles:[]},e);var c=o;o+=(0,n.encode3DTileHeader)(e,i,o),i&&i.setUint32(o,e.tiles.length,!0);o+=4;for(var l=0;l<e.tiles.length;++l)o+=s(e.tiles[l],i,o,u);return(0,n.encode3DTileByteLength)(i,c,o-c),o};var r=e(requireDefineProperty$3()),t=requireConstants$1(),n=requireEncode3dTileHeader();function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}return encode3dTileComposite}var encode3dTileBatchedModel={},hasRequiredEncode3dTileBatchedModel;function requireEncode3dTileBatchedModel(){if(hasRequiredEncode3dTileBatchedModel)return encode3dTileBatchedModel;hasRequiredEncode3dTileBatchedModel=1;var e=interopRequireDefaultExports;Object.defineProperty(encode3dTileBatchedModel,"__esModule",{value:!0}),encode3dTileBatchedModel.encodeBatchedModel3DTile=function(e,o,u,s){var c=e,l=c.featuresLength,f=void 0===l?0:l,d=c.batchTable,p={BATCH_LENGTH:f},h=JSON.stringify(p),y=d?JSON.stringify(d):"",v=(0,t.padToNBytes)(h.length,8),m=y?(0,t.padToNBytes)(y.length,8):0;e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}({magic:n.MAGIC_ARRAY.BATCHED_MODEL},e);var b=u;u=(0,a.encode3DTileHeader)(e,o,u),o&&(o.setUint32(12,v,!0),o.setUint32(16,0,!0),o.setUint32(20,m,!0),o.setUint32(24,0,!0));u+=16,u=(0,t.copyPaddedStringToDataView)(o,u,h,8),d&&(u=(0,t.copyPaddedStringToDataView)(o,u,y,8));var g=e.gltfEncoded;g&&(u=(0,t.copyBinaryToDataView)(o,u,g,g.byteLength));return(0,a.encode3DTileByteLength)(o,b,u-b),u};var r=e(requireDefineProperty$3()),t=requireEs5$b(),n=requireConstants$1(),a=requireEncode3dTileHeader();function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}return encode3dTileBatchedModel}var encode3dTileInstancedModel={},hasRequiredEncode3dTileInstancedModel;function requireEncode3dTileInstancedModel(){if(hasRequiredEncode3dTileInstancedModel)return encode3dTileInstancedModel;hasRequiredEncode3dTileInstancedModel=1;var e=interopRequireDefaultExports;Object.defineProperty(encode3dTileInstancedModel,"__esModule",{value:!0}),encode3dTileInstancedModel.encodeInstancedModel3DTile=function(e,o,u,s){var c=e,l=c.featuresLength,f=void 0===l?1:l,d=c.gltfFormat,p=void 0===d?1:d,h=c.gltfUri,y=void 0===h?"":h,v=y.length,m={INSTANCES_LENGTH:f,POSITION:new Array(3*f).fill(0)},b=JSON.stringify(m),g=b.length;e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}({magic:n.MAGIC_ARRAY.INSTANCED_MODEL},e);var _=u;u=(0,a.encode3DTileHeader)(e,o,0),o&&(o.setUint32(12,g,!0),o.setUint32(16,0,!0),o.setUint32(20,0,!0),o.setUint32(24,0,!0),o.setUint32(28,p,!0));return u+=20,u+=(0,t.copyStringToDataView)(o,u,b,g),u+=(0,t.copyStringToDataView)(o,u,y,v),(0,a.encode3DTileByteLength)(o,_,u-_),u};var r=e(requireDefineProperty$3()),t=requireEs5$b(),n=requireConstants$1(),a=requireEncode3dTileHeader();function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}return encode3dTileInstancedModel}var encode3dTilePointCloud={},hasRequiredEncode3dTilePointCloud,hasRequiredEncode3dTile;function requireEncode3dTilePointCloud(){if(hasRequiredEncode3dTilePointCloud)return encode3dTilePointCloud;hasRequiredEncode3dTilePointCloud=1;var e=interopRequireDefaultExports;Object.defineProperty(encode3dTilePointCloud,"__esModule",{value:!0}),encode3dTilePointCloud.encodePointCloud3DTile=function(e,u,s,c){var l=e.featureTableJson,f=void 0===l?o:l,d=JSON.stringify(f);d=(0,a.padStringToByteAlignment)(d,4);var p=e.featureTableJsonByteLength,h=void 0===p?d.length:p,y=new ArrayBuffer(12),v=y.byteLength;e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}({magic:t.MAGIC_ARRAY.POINT_CLOUD},e);var m=s;s+=(0,n.encode3DTileHeader)(e,u,0),u&&(u.setUint32(s+0,h,!0),u.setUint32(s+4,v,!0),u.setUint32(s+8,0,!0),u.setUint32(s+12,0,!0));return s+=16,s+=(0,a.copyStringToDataView)(u,s,d,h),s+=(0,a.copyBinaryToDataView)(u,s,y,v),(0,n.encode3DTileByteLength)(u,m,s-m),s};var r=e(requireDefineProperty$3()),t=requireConstants$1(),n=requireEncode3dTileHeader(),a=requireEs5$b();function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var o={POINTS_LENGTH:1,POSITIONS:{byteOffset:0}};return encode3dTilePointCloud}function requireEncode3dTile(){if(hasRequiredEncode3dTile)return encode3dTile;hasRequiredEncode3dTile=1,Object.defineProperty(encode3dTile,"__esModule",{value:!0}),encode3dTile.default=function(e,r){var t=o(e,null,0,r),n=new ArrayBuffer(t),a=new DataView(n);return o(e,a,0,r),n};var e=requireConstants$1(),r=requireEs5$b(),t=requireEncode3dTileComposite(),n=requireEncode3dTileBatchedModel(),a=requireEncode3dTileInstancedModel(),i=requireEncode3dTilePointCloud();function o(u,s,c,l){switch((0,r.assert)("string"==typeof u.type),u.type){case e.TILE3D_TYPE.COMPOSITE:return(0,t.encodeComposite3DTile)(u,s,c,l,o);case e.TILE3D_TYPE.POINT_CLOUD:return(0,i.encodePointCloud3DTile)(u,s,c,l);case e.TILE3D_TYPE.BATCHED_3D_MODEL:return(0,n.encodeBatchedModel3DTile)(u,s,c,l);case e.TILE3D_TYPE.INSTANCED_3D_MODEL:return(0,a.encodeInstancedModel3DTile)(u,s,c,l);default:throw new Error("3D Tiles: unknown tile type")}}return encode3dTile}var _interopRequireDefault=interopRequireDefaultExports;Object.defineProperty(tile3dWriter,"__esModule",{value:!0}),tile3dWriter.Tile3DWriter=void 0;var _defineProperty2=_interopRequireDefault(requireDefineProperty$3()),_version=requireVersion(),_encode3dTile=_interopRequireDefault(requireEncode3dTile()),Tile3DWriter={name:"3D Tile",id:"3d-tiles",module:"3d-tiles",version:_version.VERSION,extensions:["cmpt","pnts","b3dm","i3dm"],mimeTypes:["application/octet-stream"],encodeSync:encodeSync,binary:!0,options:(0,_defineProperty2.default)({},"3d-tiles",{})};function encodeSync(e,r){return(0,_encode3dTile.default)(e,r)}return tile3dWriter.Tile3DWriter=Tile3DWriter,function(e){var r=interopRequireDefaultExports;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"CesiumIonLoader",{enumerable:!0,get:function(){return n.CesiumIonLoader}}),Object.defineProperty(e,"TILE3D_TYPE",{enumerable:!0,get:function(){return s.TILE3D_TYPE}}),Object.defineProperty(e,"Tile3DBatchTable",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"Tile3DFeatureTable",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"Tile3DSubtreeLoader",{enumerable:!0,get:function(){return a.Tile3DSubtreeLoader}}),Object.defineProperty(e,"Tile3DWriter",{enumerable:!0,get:function(){return i.Tile3DWriter}}),Object.defineProperty(e,"Tiles3DLoader",{enumerable:!0,get:function(){return t.Tiles3DLoader}}),Object.defineProperty(e,"_getIonTilesetMetadata",{enumerable:!0,get:function(){return c.getIonTilesetMetadata}});var t=tiles3dLoader,n=cesiumIonLoader,a=tile3dSubtreeLoader,i=tile3dWriter,o=r(requireTile3dFeatureTable()),u=r(requireTile3dBatchTable()),s=requireConstants$1(),c=requireIon()}(es5$4),exports.GLTFLoader=es5$a.GLTFLoader,exports.Tiles3DLoader=es5$4.Tiles3DLoader,exports.load=es5$g.load,exports.parse=es5$g.parse,exports}({});
